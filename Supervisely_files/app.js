(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{0:function(e,t,r){r("8ee33573383b5fef396e"),e.exports=r("4a8b63e925f44201b374")},"007e2f901f143b0063bb":function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"c",function(){return a}),r.d(t,"a",function(){return s});var n,o=r("d11cd0540728c616a05b");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={ADMIN:"admin",USER:"user",DEVELOPER:"developer",MANAGER:"manager",ANNOTATOR:"annotator",VIEWER:"viewer"},a={ANNOTATION:"annotation",DOCKER_REGISTRIES:"dockerRegistries",USER_CREDS:"userCreds"},s=_defineProperty({},a.ANNOTATION,{hotkeys:{toggleFiguresVisibility:[["ctrl","h"]],toggleSelectedFigureVisibility:[["alt","h"]],removeCurrentObject:[["shift","delete"],["shift","d"]],confirmImage:[["ctrl","b"]],previousImage:[["arrowleft"],["arrowup"]],nextImage:[["arrowright"],["arrowdown"]],complete:[["space"]],undo:[["ctrl","z"]],redo:[["ctrl","shift","z"],["ctrl","y"]],tools:(n={moveScene:[["1"]],select:[["2"]],moveFigures:[["3"]],tagFigures:[["4"]]},_defineProperty(n,o.a.POINT,[["5"]]),_defineProperty(n,o.a.RECTANGLE,[["6"]]),_defineProperty(n,o.a.POLYLINE,[["7"]]),_defineProperty(n,o.a.POLYGON,[["8"]]),_defineProperty(n,o.a.BITMAP,[["9"]]),_defineProperty(n,o.a.SMART,[["0"]]),_defineProperty(n,o.a.GRAPH,[["-"]]),n)}})},"008b7e12a467795fc40c":function(e,t,r){"use strict";var n=r("690accb83097d4891a2b");r.n(n).a},"0095170bff5ecd813418":function(e,t,r){"use strict";var n=r("6e4195d952ff52196ac2");r.n(n).a},"0137df683cb4c701ae49":function(e,t,r){"use strict";r.d(t,"a",function(){return u}),r("47e89aed260415009385"),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("364b250cfb7cb23af2d1"),r("aa7b434460007d4b1170"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("4e997ff4fa36eb673213");var n=r("c90887849e6e38ab5d76"),o=r("9e0829ebb5f4d9754370"),i=r("fa4339c8926dcb397641");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a,s={applicableType:n.default.string().valid(Object.values(o.TAG_APPLICABLE_TYPES)).description("Determines for which entities this tag will be available. Images, Objects or both").optional().default(),classes:i.idsSchema.optional().default([]).description('Classes IDs for which this tag will be available. Only for "applicableType" = "objectsOnly"').unique()},c=n.default.alternatives().try(function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(a=Object.values(o.PROJECT_TAGS_VALUE_TYPE).map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({type:n.default.string().valid(e).required(),options:n.default.object().default({})},s,{values:e===o.PROJECT_TAGS_VALUE_TYPE.ONE_OF_STRING?n.default.array().items([n.default.string().trim().min(1),n.default.number().raw()]).min(1).required().unique().error(function(e){var t=e,r=new Map;e.forEach(function(e){r.set(e.type,e)});var n="";if(r.has("array.min")&&(n+="At least one value required"),r.has("array.includes")&&(n+="".concat(n?". ":"","Values must be a string")),r.has("array.unique")){var o=r.get("array.unique");n+="".concat(n?". ":"",'Value "').concat(o.context.value,'" already exist')}return n&&(t=new Error(n)),t}):n.default.array().default([]).strip()})}))||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),u={title:i.titleSchema.required().description("Tag title"),color:i.colorHexSchema.required().description("Tag color"),hotkey:n.default.string().trim().uppercase().allow("").length(1).description("Tag hotkey"),settings:c.optional().default({type:o.PROJECT_TAGS_VALUE_TYPE.NONE}).description("Tag value settings")};n.default.object().keys(u)},"015c0de8729d1accb6db":function(e,t){},"01d16a391b82cbd5b98a":function(e,t,r){"use strict";(function(e,n){r.d(t,"g",function(){return a}),r.d(t,"i",function(){return s}),r.d(t,"k",function(){return c}),r.d(t,"j",function(){return u}),r.d(t,"h",function(){return l}),r.d(t,"d",function(){return assignProperties}),r.d(t,"f",function(){return getSortedIndexesToRemove}),r.d(t,"b",function(){return assignDefaults}),r.d(t,"n",function(){return proxyEvents}),r.d(t,"c",function(){return assignKeysAsProp}),r.d(t,"l",function(){return mapBy}),r.d(t,"e",function(){return generateRandomHexColor}),r.d(t,"m",function(){return prepareHotkeysToValidation}),r("d366eac6ddb92c017a0d"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("4ee649c87692c7abb6dd"),r("06e9118d715347cc6fbf"),r("479a0a878a03aab9f1fd"),r("51375b56c22999064d80"),r("2810e53ad7174f3c046d"),r("afab45c263329fc2e21e"),r("aa7b434460007d4b1170"),r("a61732f157539e8a726f"),r("47e89aed260415009385"),r("2c8bc077db23e6b802e1"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df"),r("87997867a0dfb75f73e8"),r("0ed696ba8380d46a2924"),r("d67962f1d0253308d14a"),r("8a790e943c743416bf90"),r("3472e16a03943e6faffa");var o=r("6d8089820eedc734c4ea"),i=r("8d2f5ae083198d11b26d");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,"a",function(){return i.a}),r("36f0cad020f416714cbb"),r("de82b172f89d0f35218f"),r("12303d01cb2347d65acd");var a=!1,s=!0,c=!1,u=e.env.STAGING,l=(e.env.COMMUNITY,"");function noop(){}function assignProperties(e){for(var t=[],r=[],n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return o.forEach(function(e){var n=_typeof(e);if("string"===n)t.push(e);else{if("object"!==n)throw new TypeError("Expected string, object or array, got ".concat(n));Array.isArray(e)?e.forEach(function(e){var o=_typeof(e);if("string"===o)t.push(e);else{if("object"!==o||Array.isArray(e))throw new TypeError("Expected string or object, got ".concat(n));r.push(e)}}):r.push(e)}}),t.length?(r.forEach(function(r){return t.forEach(function(t){t in r&&(e[t]=r[t])})}),e):Object.assign.apply(Object,[e].concat(r))}function getSortedIndexesToRemove(e,t){var r=new Set,n=new Set;if(e.forEach(function(e){"number"==typeof e?r.add(e):n.add(e)}),n.size)for(var o=0,i=t.length;o<i;++o){var a=t[o];if(n.has(a)&&(n.delete(a),r.add(o),!n.size))break}return function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(r).sort(function(e,t){return t-e})}function assignDefaults(e,t){return Object.keys(t).forEach(function(r){r in e||(e[r]=t[r])}),e}function proxyEvents(e,t,r){Object.keys(r).forEach(function(n){return function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;t.on(r,function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.emit.apply(e,[n].concat(r))})}(e,t,n,r[n])})}function assignKeysAsProp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:noop;Object.keys(e).forEach(function(n){var o=e[n];o[t]=n;for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];r.apply(void 0,[o,n,e].concat(a))})}function mapBy(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.identity;return"function"==typeof t?e.reduce(function(e,n,o){for(var i=arguments.length,a=new Array(i>3?i-3:0),s=3;s<i;s++)a[s-3]=arguments[s];var c=t.apply(void 0,[n,o,e].concat(a));return e.set(c,r.apply(void 0,[n,c,o,e].concat(a))),e},new Map):e.reduce(function(e,n,o){for(var i=arguments.length,a=new Array(i>3?i-3:0),s=3;s<i;s++)a[s-3]=arguments[s];return e.set(n[t],r.apply(void 0,[n,t,o,e].concat(a))),e},new Map)}function generateRandomHexColor(){return function(e,t,r){var n,o,i;if(e/=360,r/=100,0==(t/=100))n=o=i=r;else{var a=function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e},s=r<.5?r*(1+t):r+t-r*t,c=2*r-s;n=a(c,s,e+1/3),o=a(c,s,e),i=a(c,s,e-1/3)}var u=function(e){var t=Math.round(255*e).toString(16);return 1===t.length?"0".concat(t):t};return"".concat(u(n)).concat(u(o)).concat(u(i))}(Object(o.random)(0,360),Object(o.random)(40,100),Object(o.random)(30,70))}var p=[{title:"decrease bitmap brush size",hotkey:["["]},{title:"increase bitmap brush size",hotkey:["]"]},{title:"decrease points size",hotkey:["alt","-"]},{title:"increase points size",hotkey:["alt","+"]},{title:"increase/decrease points size",hotkey:["alt","mouse wheel"]},{title:"decrease objects opacity",hotkey:["shift","-"]},{title:"increase objects opacity",hotkey:["shift","+"]},{title:"increase/decrease objects opacity",hotkey:["shift","mouse wheel"]},{title:"randomize objects' colors",hotkey:["shift","h"]},{title:"clone objects from previous image",hotkey:["alt","j"]},{title:"deselect current object, cancel tool action",hotkey:["esc"]},{title:"alternative tool action",hotkey:["shift","Left Mouse Button"]},{title:"delete hovered point from current object",hotkey:["delete"]}];function prepareHotkeysToValidation(e){var t=e.user,r=void 0===t?[]:t,n=e.classes,i=void 0===n?[]:n,a=e.tags,s=void 0===a?[]:a,c=function prepareUserHotkeysToValidation(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=[];return Object.keys(e).forEach(function(n){var i=e[n],a="";t&&(a="".concat(t," ")),a+=Object(o.snakeCase)(n).split("_").join(" "),Array.isArray(i)?i.forEach(function(e){if(e.length){var t=1===e.length?e[0].toUpperCase():e.map(function(e){return e.toUpperCase()});r.push({title:a,hotkey:t})}}):r=r.concat(prepareUserHotkeysToValidation(i,n))}),r}(r);return i.filter(function(e){return e.hotkey}).map(function(e){return{title:'"'.concat(e.title,'" class'),hotkey:e.hotkey.toUpperCase()}}).concat(s.filter(function(e){return e.hotkey}).map(function(e){return{title:'"'.concat(e.title,'" tag'),hotkey:e.hotkey.toUpperCase()}})).concat(c).concat(p.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},e,{hotkey:e.hotkey.map(function(e){return e.toUpperCase()})})}))}}).call(this,r("6c0cbd92685546599563"),r("ec247fcea0c84d047768").Buffer)},"02048b6ae053096e738e":function(e,t,r){},"04a946c215dd24e90818":function(e,t,r){var n={"./af":"9798a3eff34d7e0315e2","./af.js":"9798a3eff34d7e0315e2","./ar":"1f875dbb26589a6ea3b6","./ar-dz":"225ca03b92dd049cca49","./ar-dz.js":"225ca03b92dd049cca49","./ar-kw":"20f1c24f673f724d5c44","./ar-kw.js":"20f1c24f673f724d5c44","./ar-ly":"6330f9b0d719170920e7","./ar-ly.js":"6330f9b0d719170920e7","./ar-ma":"afa3ee359cdafdefcec0","./ar-ma.js":"afa3ee359cdafdefcec0","./ar-sa":"7eba0a62ace26e18a95f","./ar-sa.js":"7eba0a62ace26e18a95f","./ar-tn":"f3aa8d627cca4d0995ba","./ar-tn.js":"f3aa8d627cca4d0995ba","./ar.js":"1f875dbb26589a6ea3b6","./az":"7d7b1a2018608b358797","./az.js":"7d7b1a2018608b358797","./be":"c49a67dfb6c6efb4b1b8","./be.js":"c49a67dfb6c6efb4b1b8","./bg":"e0fdf54a607aa7dbd6cd","./bg.js":"e0fdf54a607aa7dbd6cd","./bm":"d06356195ee125c23f18","./bm.js":"d06356195ee125c23f18","./bn":"895d809a4ffaf323555e","./bn.js":"895d809a4ffaf323555e","./bo":"4387374fa5af35439c70","./bo.js":"4387374fa5af35439c70","./br":"a505cf0d549fbad818c4","./br.js":"a505cf0d549fbad818c4","./bs":"3d2872b6b5fa72814054","./bs.js":"3d2872b6b5fa72814054","./ca":"ab86fe11b0a7e1f18afb","./ca.js":"ab86fe11b0a7e1f18afb","./cs":"724fe1567f9758ce8dd1","./cs.js":"724fe1567f9758ce8dd1","./cv":"b3fbffba7b5a74193685","./cv.js":"b3fbffba7b5a74193685","./cy":"ac7f76acb0b2b2dc6dad","./cy.js":"ac7f76acb0b2b2dc6dad","./da":"6909cf0f1a1cbcd8652a","./da.js":"6909cf0f1a1cbcd8652a","./de":"0a6a7c17f41a8540a68f","./de-at":"90f8784a309595c4d3b8","./de-at.js":"90f8784a309595c4d3b8","./de-ch":"cba2f5b871fe793e6785","./de-ch.js":"cba2f5b871fe793e6785","./de.js":"0a6a7c17f41a8540a68f","./dv":"c655ce58425728dbaf39","./dv.js":"c655ce58425728dbaf39","./el":"1b5b3d05d1097986d62f","./el.js":"1b5b3d05d1097986d62f","./en-au":"76d4f5fa022638dfe8d7","./en-au.js":"76d4f5fa022638dfe8d7","./en-ca":"c40ea1b325d55c6dead5","./en-ca.js":"c40ea1b325d55c6dead5","./en-gb":"0f7e632381e5e0e2032c","./en-gb.js":"0f7e632381e5e0e2032c","./en-ie":"bf4bc429611f5d0c8e35","./en-ie.js":"bf4bc429611f5d0c8e35","./en-nz":"1a9662dafbcd72d29e2b","./en-nz.js":"1a9662dafbcd72d29e2b","./eo":"eda75cc21ae7cbbd9933","./eo.js":"eda75cc21ae7cbbd9933","./es":"4ff33f9b4eab45ecb651","./es-do":"b0abe75f864056afb26d","./es-do.js":"b0abe75f864056afb26d","./es-us":"24b28eb9e551a06ec897","./es-us.js":"24b28eb9e551a06ec897","./es.js":"4ff33f9b4eab45ecb651","./et":"aa420b136f9e5ded86d8","./et.js":"aa420b136f9e5ded86d8","./eu":"7fc1206e37294bc860c5","./eu.js":"7fc1206e37294bc860c5","./fa":"ee76a205d0dc9208263e","./fa.js":"ee76a205d0dc9208263e","./fi":"82fe1c53a2de9e4bdd51","./fi.js":"82fe1c53a2de9e4bdd51","./fo":"3553af49353b4ef63860","./fo.js":"3553af49353b4ef63860","./fr":"a222aa16d845f9d78ca1","./fr-ca":"80cfe99c79e402608f10","./fr-ca.js":"80cfe99c79e402608f10","./fr-ch":"e5b32017f0a7a0c68cc5","./fr-ch.js":"e5b32017f0a7a0c68cc5","./fr.js":"a222aa16d845f9d78ca1","./fy":"9117d154ccead99e53c2","./fy.js":"9117d154ccead99e53c2","./gd":"db6e2302067d91eccbf9","./gd.js":"db6e2302067d91eccbf9","./gl":"912463fc9bd87af029ce","./gl.js":"912463fc9bd87af029ce","./gom-latn":"988b458e3b431d92a78d","./gom-latn.js":"988b458e3b431d92a78d","./gu":"6de157a3206c771cdc70","./gu.js":"6de157a3206c771cdc70","./he":"4bf62e2ed402eb89450f","./he.js":"4bf62e2ed402eb89450f","./hi":"0ab0aaaa1d0f968ebba1","./hi.js":"0ab0aaaa1d0f968ebba1","./hr":"20279369703d64edf006","./hr.js":"20279369703d64edf006","./hu":"3830b4ca5ed4ce42699c","./hu.js":"3830b4ca5ed4ce42699c","./hy-am":"0d5266aeaf8f046ab926","./hy-am.js":"0d5266aeaf8f046ab926","./id":"63a5bc0991f88dd6d786","./id.js":"63a5bc0991f88dd6d786","./is":"0da3330513f28c305cbb","./is.js":"0da3330513f28c305cbb","./it":"4359a20965b8c64b09c8","./it.js":"4359a20965b8c64b09c8","./ja":"67c0fe632f0b4ed10982","./ja.js":"67c0fe632f0b4ed10982","./jv":"7551dfc76b545ed135f0","./jv.js":"7551dfc76b545ed135f0","./ka":"f0550a094a136a89e465","./ka.js":"f0550a094a136a89e465","./kk":"08c0880841b312bd7150","./kk.js":"08c0880841b312bd7150","./km":"ab8688a9eed58bb3766f","./km.js":"ab8688a9eed58bb3766f","./kn":"c8c35f9d5ad858fc266e","./kn.js":"c8c35f9d5ad858fc266e","./ko":"24c8cac80d2e0f989496","./ko.js":"24c8cac80d2e0f989496","./ky":"30c2cc6a7a3aafe57c2b","./ky.js":"30c2cc6a7a3aafe57c2b","./lb":"4099e0b6fece4a935c60","./lb.js":"4099e0b6fece4a935c60","./lo":"7515712f3402a5739db0","./lo.js":"7515712f3402a5739db0","./lt":"6359f5d29e2c9b30448c","./lt.js":"6359f5d29e2c9b30448c","./lv":"5c5604bfa8417bac0103","./lv.js":"5c5604bfa8417bac0103","./me":"cb6934ad0df6fa02d686","./me.js":"cb6934ad0df6fa02d686","./mi":"bf817bab55bdbdcdf7af","./mi.js":"bf817bab55bdbdcdf7af","./mk":"e941aa6c1471941caf19","./mk.js":"e941aa6c1471941caf19","./ml":"b6ad821b2495cd6739a4","./ml.js":"b6ad821b2495cd6739a4","./mr":"158697becba2d8afd11c","./mr.js":"158697becba2d8afd11c","./ms":"1c83c02bd7cee35412ce","./ms-my":"253032929dce75efc30c","./ms-my.js":"253032929dce75efc30c","./ms.js":"1c83c02bd7cee35412ce","./my":"84e7247385e0c4b06849","./my.js":"84e7247385e0c4b06849","./nb":"730c3ac0b03439a675d8","./nb.js":"730c3ac0b03439a675d8","./ne":"158f4eb2436d165ddc9b","./ne.js":"158f4eb2436d165ddc9b","./nl":"245d7527de64897c1816","./nl-be":"9680fac58b6425253aae","./nl-be.js":"9680fac58b6425253aae","./nl.js":"245d7527de64897c1816","./nn":"9eddd0c91cefa64b79a1","./nn.js":"9eddd0c91cefa64b79a1","./pa-in":"257ab7e99b57bf4cb2b6","./pa-in.js":"257ab7e99b57bf4cb2b6","./pl":"f23b5b1f8c7b0704c2f4","./pl.js":"f23b5b1f8c7b0704c2f4","./pt":"57941bebb962cd6e9f64","./pt-br":"88260358239d206ccbed","./pt-br.js":"88260358239d206ccbed","./pt.js":"57941bebb962cd6e9f64","./ro":"9306d8489305087559ee","./ro.js":"9306d8489305087559ee","./ru":"8424e9e4b546338bd163","./ru.js":"8424e9e4b546338bd163","./sd":"6b9347b2d72fc4ad8b0a","./sd.js":"6b9347b2d72fc4ad8b0a","./se":"09edf17ac739a0d0e398","./se.js":"09edf17ac739a0d0e398","./si":"728b174e594b26c7e98f","./si.js":"728b174e594b26c7e98f","./sk":"648bedacb2e3d716835d","./sk.js":"648bedacb2e3d716835d","./sl":"4707cdff9b9eedb863d8","./sl.js":"4707cdff9b9eedb863d8","./sq":"c022ec5658ce1d1d5147","./sq.js":"c022ec5658ce1d1d5147","./sr":"1d429aa75a4453884272","./sr-cyrl":"147e4e92f13ce4685127","./sr-cyrl.js":"147e4e92f13ce4685127","./sr.js":"1d429aa75a4453884272","./ss":"5b41fb1eec25b121d656","./ss.js":"5b41fb1eec25b121d656","./sv":"fbd3ca5270d9c25146db","./sv.js":"fbd3ca5270d9c25146db","./sw":"2ff1774411574aa813a2","./sw.js":"2ff1774411574aa813a2","./ta":"7ad00d59b4bfe3807ea0","./ta.js":"7ad00d59b4bfe3807ea0","./te":"7f3619f2181e54be46b5","./te.js":"7f3619f2181e54be46b5","./tet":"14b46d99be5ded8aec0a","./tet.js":"14b46d99be5ded8aec0a","./th":"8c148794ea12a4a39ca4","./th.js":"8c148794ea12a4a39ca4","./tl-ph":"7203675c0d97ae0fd112","./tl-ph.js":"7203675c0d97ae0fd112","./tlh":"c98f4e46a0583c5ce1bf","./tlh.js":"c98f4e46a0583c5ce1bf","./tr":"4050fd47d535d01102c9","./tr.js":"4050fd47d535d01102c9","./tzl":"fbed7ec400c62215cc29","./tzl.js":"fbed7ec400c62215cc29","./tzm":"2fa095745d57a5fdff74","./tzm-latn":"beb6d01d6f854200ffd0","./tzm-latn.js":"beb6d01d6f854200ffd0","./tzm.js":"2fa095745d57a5fdff74","./uk":"d0b5ff898c25ede8d3c6","./uk.js":"d0b5ff898c25ede8d3c6","./ur":"847b16ca162c3c84d2df","./ur.js":"847b16ca162c3c84d2df","./uz":"9c584f51af83f1dfc3e9","./uz-latn":"d5970e3bd3d10f10c8a9","./uz-latn.js":"d5970e3bd3d10f10c8a9","./uz.js":"9c584f51af83f1dfc3e9","./vi":"42521c1efb442bc69ee6","./vi.js":"42521c1efb442bc69ee6","./x-pseudo":"6cd3c6f413efe94270e8","./x-pseudo.js":"6cd3c6f413efe94270e8","./yo":"ac9f5c55444e9fe0c019","./yo.js":"ac9f5c55444e9fe0c019","./zh-cn":"6d4634b1857b16ba1d8f","./zh-cn.js":"6d4634b1857b16ba1d8f","./zh-hk":"08e3fa497ed3a004b695","./zh-hk.js":"08e3fa497ed3a004b695","./zh-tw":"2a1ea7f0144e3cdd3491","./zh-tw.js":"2a1ea7f0144e3cdd3491"};function webpackContext(e){var t=webpackContextResolve(e);return r(t)}function webpackContextResolve(e){var t=n[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}webpackContext.keys=function(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id="04a946c215dd24e90818"},"053efad46671ae5a4ea1":function(e,t,r){"use strict";var n=r("7d87a61856980ad34a1a");r.n(n).a},"05a20e14c5319c4451a2":function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("b42383ffd481a2f01f84");var n=r("9e0829ebb5f4d9754370"),o=r("7ee98bac1562359c81b0"),i=r("52cf01d8f4c3baca94b3");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){function GraphDrawer(){var e,t,r,n,o,i;!function(e,t){if(!(e instanceof GraphDrawer))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return this,t=!(r=(e=_getPrototypeOf(GraphDrawer)).call.apply(e,[this].concat(s)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(this):r,i=[],(o="_edges")in(n=_assertThisInitialized(t))?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,t}var t,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(GraphDrawer,o.a),t=GraphDrawer,a=[{key:"_getArea",value:function(e){for(var t=0,r=1,n=e.length;r<n;++r){var o=e[r-1],a=e[r];t+=Object(i.d)(a.left-o.left,a.top-o.top)}return t}},{key:"isValid",value:function(e){return e.points.length>=2}},{key:"type",get:function(){return n.SHAPE_TYPES.GRAPH}}],(r=[{key:"isPointWithin",value:function(e){return Object(i.e)(e,this.points,this.rect)}},{key:"getClosestPoint",value:function(e){return Object(i.a)(this.points,e)}},{key:"edges",get:function(){return this._edges},set:function(e){this._edges=e}}])&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),GraphDrawer}()},"05ba3a883f5efe53edb3":function(e,t,r){},"0675c68eec4c2a021f8f":function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n=r("c90887849e6e38ab5d76"),o={angle:n.default.number().greater(-360).less(360)},i=(n.default.object().keys(o),{tagId:r("fa4339c8926dcb397641").idSchema.required(),value:n.default.string().allow(null).default(null)}),a=(n.default.object().keys(i),n.default.string().allow(""),r("47e89aed260415009385"),r("4e997ff4fa36eb673213"),r("be237aa6f43b4adba994")),s=r("9e0829ebb5f4d9754370");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c,u=n.default.object().keys({id:a.g,positive:n.default.boolean()}),l=[n.default.only(null).strip(),a.g],p={projectId:l,datasetId:l,jobId:l,name:n.default.string().allow(""),orderBy:n.default.string(),objectsCount:n.default.string(),objectsCountFrom:n.default.number().integer(),objectsCountTo:n.default.number().integer(),classes:n.default.array().items(u).unique("id"),imageTags:n.default.array().items(u.keys({id:[a.g,n.default.string().trim().valid(Object.values(s.IMAGE_TAGS_SPECIAL))]})).unique("id"),figureTags:n.default.array().items(u.keys({id:[a.g,n.default.string().trim().valid(Object.values(s.FIGURE_TAGS_SPECIAL))]})).unique("id")},f=(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}}({},a.j,{filter:n.default.object().keys(p)}),r("1b726e7ce4061546ecfc"));function ClickerImagesPaginationSchema_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ClickerImagesPaginationSchema_defineProperty(e,t,r[t])})}return e}function ClickerImagesPaginationSchema_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=n.default.alternatives().try(n.default.only(null).strip(),a.g),_=n.default.alternatives().try(n.default.string().trim().allow(null).min(1),n.default.number().raw()),y=n.default.boolean().required(),g={from:n.default.date(),to:n.default.date()},h={from:n.default.number().precision(8).min(0),to:n.default.number().precision(8).min(0)},b={},v=(ClickerImagesPaginationSchema_defineProperty(c={},f.a.IMAGES_FILENAME,ClickerImagesPaginationSchema_objectSpread({},h,{value:_})),ClickerImagesPaginationSchema_defineProperty(c,f.a.IMAGES_CREATED,g),ClickerImagesPaginationSchema_defineProperty(c,f.a.IMAGES_SIZE,h),ClickerImagesPaginationSchema_defineProperty(c,f.a.IMAGES_TAG,{include:y,tagId:a.g.allow(null),value:n.default.alternatives().try(n.default.array().items(_).min(1),_,n.default.object(h).or("from","to")).allow(null)}),ClickerImagesPaginationSchema_defineProperty(c,f.a.OBJECTS_CLASS,ClickerImagesPaginationSchema_objectSpread({},h,{classId:a.g.allow(null)})),ClickerImagesPaginationSchema_defineProperty(c,f.a.OBJECTS_TAG,ClickerImagesPaginationSchema_objectSpread({},h,{include:y,tagId:a.g.allow(null),value:n.default.alternatives().try(n.default.array().items(_).min(1),_,n.default.object(h).or("from","to")).allow(null)})),ClickerImagesPaginationSchema_defineProperty(c,f.a.OBJECTS_ANNOTATOR,ClickerImagesPaginationSchema_objectSpread({},h,{userId:a.g})),c),m=[];Object.values(f.a).forEach(function(e){var t={type:n.default.string().valid(e).required()},r=v[e];r&&(r.isJoi||(r=n.default.object(r)),r=r.required(),t.data=r),m.push(t),b[e]=n.default.object(t)});var O=n.default.alternatives().try(m);ClickerImagesPaginationSchema_objectSpread({},a.j,{filter:{projectId:d,datasetId:d,jobId:d,orderBy:n.default.string(),filters:n.default.array().items(O)}})},"0677f9d8ed1c7e386df0":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARwAAADUCAMAAAB55my/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTNERERCMkFDNkY1MTFFN0JFOUNCQkFEOTk5NUQ0MEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTNERERCMkJDNkY1MTFFN0JFOUNCQkFEOTk5NUQ0MEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEMjQyQzJGRkM2RjQxMUU3QkU5Q0JCQUQ5OTk1RDQwQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEMjQyQzMwMEM2RjQxMUU3QkU5Q0JCQUQ5OTk1RDQwQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt4m4JoAAAMAUExURUiOzfr9/5WVlZGy3E4uPYyqzMDAwOTk5KamprLU7ExMTJ7O/LGxsaqqqlGT2x8tXMvLyx1Gh0BWamJiYr29vVVVVTo6OpPJ+dDQ0ERERPj4+Nra2hcXF7m5ucjT3/X5/rS0tNDp/kphdOjo6PHx8a6/vMHN2iwsLK3W/63K2ZuQZo6OjllZWa2treXy/sjk/G1tbX5+fsLh/J+fn5CBYHZ2dvD4/h8qiu7u7qrA22iz+NfX15q533C3+IjD+PT09KKiom619+Hh4fLy8vP5/pCQkHl5ecTExN/f34aGhrLP26jW/5nM+s3Nzezs7Iyx2CIiIntWOzqF2XRhO+Tl6Xy9+bnc+15KPICAgNns/e73/uDg4JjR/3Fxcerq6hpivMzW4USu/9zc3Ofr8X92ZYPA+CZBRtTU1MjIyJSrzOjo7OHw/ouLi9zu/vf7/ufn54SgxNTq/R09pWpqal1dXbXZ/KzV++Lj5/3+//n6+/H09+3v8+Xq74rM//f4+un0/SCg//Dx9bLW/9Hb5v7+/v39/QAAAPv7+/f39/r6+u7v8+FMax8uPr/L2e/w9Orr7+vs8N/g5Ofo6+Pk6F6v9/7///z8/JzN+hxLr+Dm7LLW+bLS2VNpgtFXfNTs/8bHzH/H/3e794yIw8fHx99Nbpubm/7+/6TR+w0NDfb29r3e+6d1pyWi/666rbVrmS4uPtPc5uzt8ZbK+puPdK3K44u++bLS339xTWO7/5Gx05/G86TL+d3k6qPW/21BPHZOOyh8zp7T/3O59/z9/7LU39jY2O7x9dfr/R1MnGgtPTlwrp7R/0tWT/v8/Y2PgI7G+Vaa55nJ+eru8oiEgYVyOT2DwaCZgLO8q9DZ4+Dv/q/W++/y9rLR5eLp75a54Ji03aChh6nL+bLQ9rLH06nT/bLKxfHz9fj5+5KUjhtfqL/f+zpnrjh9uxxTr4SBdO3w9Ont8mSg52qg1IK57WWa55G55pq+86HQ+qPR/4Oj2pqyzD5hfD9wrrfa+1ar9v///0A/+z4AAAnUSURBVHja7NwLXFPXHQdwwEoQcDKBlEcyQai4gQoyEAFFkQpMsWytqLTYSdfhOqoirXNWaxaSE9BL13USt250CoLMtral3buP1a7tXs5t3aPdq1vXvbfu/ezM7f+ce29y86L4IdUk/P6fj95z7z2fhHzzP/9zTj6fJEZGBI0YEAAHOMABDnCAAxzgAAcBnCng5B7bdp8FYQmEcwwsQXE+b7EcuCcWgyrQsDpm2XYPXALj5FossAmGc8xyACrBcLYhcYLj3GdBLQ6KY7EABTjAAQ5wgAMc4AAHOMABDnDeGBzrBQZwgAMc4EwF57lXP+mJ+X8Fjj6ekPTxLuDo45W58+fP/ya5vErHuf8Ajl/N+cpl0scWRmHNeWb/2anjvINw1onWS79YaF0+85+8+cj7Zs74kmby0v9mXvXFCMNxPt/fv+DHU8b5hJY5dz8hxXxLknavs856jyhC/08Sl38rTt78mUjCOfvufooFz4QO551CYfc6yiUlll1HVz+nnszZaI0wG9L5c0hxvn7Vv6zfk6Tffcf61k2S9GWr9edk9HeRS8seixQbh2pDOreFEOdNdPzVA0oRokq97MlZX5PmHLAqCbQxQmw++JZ+dyz4bshwdj9Gxx9IUqW48zANpSu09c8PJenbkWdDOn8JFc6feONtVF/m8nhAklbfT0NNnBhJKSJsfuNlQ3FDiHBE42HdqlnguJfQkWBzu69Nf//+0OL87cUZM2Z84WfV1S8Tzver+cmL1dVJETemAubOlHBoWK0Wd5bv+u/C+7Wa85NduyIB5/kANv0Lbg8ZDnlcz4+zHpfmXPfZy8Rqx2p9uySdiQCcQInT378vZDh3Py5Jf/yP9ZGrxTqHUL46bp31Cl8dRsKwuuHjfrF/39T3VhxHNK6gaUp6L18hP0nDaZN6Ekkr5JDtymngXK9kztVqw/rLTWJ2+sM3+Im60YqsvVWocALG8pm6XTlt0SNuV/5G4uDDLuAABzjAuag40zOAAxzgAAc4wAEOcIADHOAABzjAubg4+Or0BDj40v0EOPi5hglw8EMfE+DgJ2ImwsGPC02Eg5+lmug3u/CDZhPhIIIPKxtCiRjITBrHc8OOsMcEsIFKIByNxul0ICj8cJyqTB+iL8bbhidNX1+WEr3TPWJ8bfr2PfpgD0KEF46d0ubXoAmAw0uxw5H1aM9Pz2Jt7LtCFomT1ftgD2zcOAZd1NY2tPf0ACUwzrXt2cDR4XxIizsO3XbnTXddA5zAOA8RzgeAEwDnjkOHHvrwTdcABzgXjnMn4XwEOMFw7voocIADHOAABzjAAQ5wgAMc4AAHOMABDnCAAxzgAAcowAEOcIADHOAAJ3SxfVVWdOAY4ooSE8uGQ/oXppoqIgWnqKg++M04xlgm/Uuc3MtpSM6fRK/iyMFhLCHovVLGZvfJckcmMzom89wJbHja4BjYWJNo9BlZ8mSeezbLmDY4hSxObaWwIrvsqO2TM8z1Ts4Wb07TRlBevNmczRtbNxSyRXkbFFddB3e3tFo9jqPDbK5fo97dqj0IRc2w2ZzhCHMch9G0U/t7Tc0OuYrFpTNmypfXFDMeOfzOmrWinZgn95pEq4Dw9B2UyFK6Fde4ceKbxZVVurvGBn6ySrRN8eGN01uQaNfatQZZzqa/uSytntBYZkoV1SMaanYqR/E7U9JZc6+cMtzGGuubZK8OSthS6dUa4gtYulPFqWesMPta6mOm25uZKc1AD8JvpLGxhIYq0soIa5yK5nS7/jxbeSU0hZXYxVBr/rS8nSXyAWC7haXQIVl5RfoOSpiZkedMlpFXbI5jy2RpYs3DEp30LjRXKIJ0rVt5jFLWeClxipSgbFYafjN6FUv0wUm18SFWYFKqSRmB5BhT1FKc4v7fq4O6tFHzoIl1Kji9qW1OJTvpDahRU7TDxHGUipRfcOWlxGE+4ZdA2X44I6qRnX+5jfJkWAfpwfHv0FugLgU2xHV4z1a2VHoOmgwLtcosr2Xphks/W71u5hiY77CKU0eXFoViDZ0o2nocrw5afvhM5Y60blHB+Z0mXquTFZOKArpWmm2Tw70gB8ExbV4roo08O2liWdvZ2e2Fo+8QBKeBJqv05zo7m0V2VpQa+VpcTOZZybfw2Sot3HHcBbU3MdXhwRnx9KlnJlFXGrxwRiZkVgtyoxhcxdrQraHZaqxWnfifLlOLf/guAotZmnuE0aSi4rSzYpuuS4aaVR4crw7ezPnJDQpOO9UlcaWb4+Qr/Rv5qqdG2bLnKNU/fHHqmVFNnUbuouLYjSqIM5/PLdrEFC9wmnw7KFGi5kGKNltVqYvvdr4USFYXRBl0sYGVKYnE345wxqGFh7IdT2CmrW4cei2mKp77baydXnUJvcEO2r3HiX5pvh20yUxc2VnA2TiOgZl4gWko4Au/JtbMl+KONrZIzm9m25V1cnF4Z46YOQpzRqh21nsKsmyjglCSc6WJlTnpjWaZnZ182hkRqTYWV1jj1UGNEcYaVzUysbITKxnepVNUXipA3XSSTE/TXMOzj6UuSqAZsCPcP8/JKhXTbVmeUlc0xhyxL0rgb20V/7jHNPtp8UbbShgbq/DuoIbYSpnE8CnhODzZiMFQwhFsi8TTbBZpuj1TzPBVEfAxqbMiL683QE7lG7R9c4W6EVd213n5fh20bbm+H68qeXk1ugfUPU2+1x18wI4P2IEDHOAABzgI4AAHOMABDnCAAxzgAAc4wAEOcC4KzqfUAA4yBzjAAQ5wgAMc4ExrHBdCDeAABzjAAQ5wgAMc4AAHOMC5+DhLDy7WxXHg6GOxfkM7kAQcfdy4nuLy2IHz4/yIYeUfR+oGjqLmvC7OyZddJ3O7buUptbSr69QRtcOPcrtyx6c7zpEdo7wILXa5cgd4EYpdz6+O14mK9Ox0xymnqnxz10lXFwmdWhIrj650uTY+JccuOUVoW6Y5Tp0cu5KPrtGBU3So3CHfzCe01hV0skQePTfdcX7Pjy/wkUVxqxy74vK9A+NqVi2Z5jgCgoyWuo5TnNsbe6ZFnreCt11bgHNUwfGsC1s8i8SDwBE488qVaF3ZIg+0Ku266MucodODJ04Mnh66EJx5A57a26LWnyhcBA4NHlZjcOhCMqfFffO8PK8yOnHuPayLeyeL48qlIiwuHD3iWv0UVWcex9dHF46XTXAdP5yVe7W1TXklzVJi0XNjnXw+mnCGDvtEkJFFNSbJu0FT1N4XtuyQedJU0rK5dcvBAbn8TDThDPriDAbBaXVvH0bVjy32lIu91R5x9dlRfvL+ymgaVn6JEzR1AsW5pJP/dp8krd+zMboK8ml/nNOuqI9J4gz64wwCR40T/jgngAMcDKvA8ZoAAwDCGQcxIGKdvQAAAABJRU5ErkJggg=="},"06d82cacb0ed7b3f5223":function(e,t,r){"use strict";var n=r("d6b3440922d88bee60b1");r.n(n).a},"06e00455d3fe271af7e3":function(e,t,r){"use strict";var n=r("7620223c78e78a4ba49d");r.n(n).a},"072b73ca9d1323289a9c":function(e,t,r){"use strict";var n=r("0ae35a7ea01b7844612e");r.n(n).a},"08743261e7b813d5426a":function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n=r("c90887849e6e38ab5d76"),o=r("fa4339c8926dcb397641"),i={title:o.titleSchema.max(64).required(),description:o.descriptionSchema.allow("")},a=(n.default.object().keys(i),{showDisabled:n.default.boolean().default(!0),simple:n.default.boolean()});n.default.object().keys(a)},"09461657d5abd9aa9de1":function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r.d(t,"c",function(){return p}),r.d(t,"d",function(){return f}),r.d(t,"e",function(){return uploadProjectImage}),r.d(t,"b",function(){return getTeamMembers}),r("5a8f02b640959023d3da"),r("47e89aed260415009385"),r("8a50176570bf0fca6631"),r("e22e606178dee4da7044"),r("144e366c8b9457689b18");var n=r("985a6ac0d62c56a3580e"),o=r.n(n),i=(r("afab45c263329fc2e21e"),r("0ed696ba8380d46a2924"),r("214eccfc06814c553a3c")),a=r.n(i),s=r("263858adef6cd2fa73b9"),c=r.n(s),u=r("54b089b6f5db3df8074d");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=a.a.create({baseURL:"/api/"}),p=a.a.create({baseURL:"/api/projects/"}),f=a.a.create();function uploadProjectImage(e){return l.post("/uploadProjectImage",e).then(function(e){return e.data})}function getTeamMembers(e){return l.get("/groups/".concat(e,"/members")).then(function(e){return e.data})}[l,p,f].forEach(function(e){e.interceptors.request.use(function(e){return e.headers=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({"x-request-uid":c()()},e.headers),e}),e.interceptors.response.use(function(e){return e},function(e){if(a.a.isCancel(e))return Promise.reject(e);var t=e.response,r=t.data,n=r.error,i=r.details,s=t.status,c=null==i?void 0:i.data;if(null==c?void 0:c.ignore)return Promise.reject(e);if(400===s&&n)o.a.error(n);else if(401===s){var l=new URL(window.location.href);l.searchParams.append("clicker_source",window.location.href),window.location.href="/".concat(l.search)}else 403===s?o.a.error("You don't have permissions for this action. Please, contact administrator."):o.a.error("An error occured. Please try again.");return u.a.error(e),Promise.reject(e)})})},"094ff0a978f84b534362":function(e,t,r){"use strict";var n=r("c14cdada4671e9a2d9ae");r.n(n).a},"0ae35a7ea01b7844612e":function(e,t,r){},"0afdb593322eb2c0f057":function(e,t,r){},"0c465624b3d6a13f1810":function(e,t){},"0c8c5350e036679f6f96":function(e,t,r){},"0cb34c2e8ece14c05a19":function(e,t){},"0cc69c6b9acc50d9c924":function(e,t,r){},"0e4281620283677fb789":function(e,t,r){"use strict";var n=r("473978a80f8ce64663cb");r.n(n).a},"0f53f229a5261a62b6f9":function(e,t,r){},"10056bba30cd518ff6cb":function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o});var n={UNTAGGED:"untagged"},o={ALL:"all",IMAGES_ONLY:"imagesOnly",OBJECTS_ONLY:"objectsOnly"}},"11d6ccaff6c0078a0677":function(e,t,r){},"11e8651377d3e2bef90a":function(e,t,r){},"12303d01cb2347d65acd":function(e,t,r){"use strict";function IgnoreError_typeof(e){return(IgnoreError_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IgnoreError_wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(IgnoreError_wrapNativeSuper=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return function(e,t,r){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&IgnoreError_setPrototypeOf(o,r.prototype),o}).apply(null,arguments)}(e,arguments,IgnoreError_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),IgnoreError_setPrototypeOf(Wrapper,e)})(e)}function IgnoreError_setPrototypeOf(e,t){return(IgnoreError_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function IgnoreError_getPrototypeOf(e){return(IgnoreError_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("47e89aed260415009385"),r("22ee624462a7244acc0e"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("aa7b434460007d4b1170"),r("ecbd7af7d78f58b964e0"),r("d67962f1d0253308d14a"),r("b42383ffd481a2f01f84"),r("14471fdfe1a633789f19"),r("0ed696ba8380d46a2924"),r("87997867a0dfb75f73e8");var n=function(e){function IgnoreError(){return function(e,t){if(!(e instanceof IgnoreError))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==IgnoreError_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,IgnoreError_getPrototypeOf(IgnoreError).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IgnoreError_setPrototypeOf(e,t)}(IgnoreError,IgnoreError_wrapNativeSuper(Error)),IgnoreError}();r.d(t,"a",function(){return n})},"12d1eb41fd9914bc409b":function(e,t,r){},"12d29480d5510b1eaf64":function(e,t,r){"use strict";(function(e){r("4e997ff4fa36eb673213"),r("5a8f02b640959023d3da"),r("47e89aed260415009385"),r("0ed696ba8380d46a2924");var t=r("c90887849e6e38ab5d76"),n=r("9e0829ebb5f4d9754370"),o=r("c6a85a9dd00d4a1c8d45");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={STORAGE_ENDPOINT:t.default.string().trim(),STORAGE_PORT:t.default.number().positive().optional(),STORAGE_ACCESS_KEY:t.default.string().trim().optional(),STORAGE_SECRET_KEY:t.default.string().trim().optional()};e.env.STORAGE_PROVIDER&&(e.env.STORAGE_PROVIDER===n.STORAGE_PROVIDERS.FS?Object.keys(i).forEach(function(e){"STORAGE_ENDPOINT"!==e&&delete i[e]}):e.env.STORAGE_PROVIDER===n.STORAGE_PROVIDERS.GOOGLE?i.STORAGE_CREDENTIALS_PATH=t.default.string().trim():e.env.STORAGE_PROVIDER===n.STORAGE_PROVIDERS.MINIO?(i.STORAGE_REGION=t.default.string().trim().default("us-east-1").optional(),i.STORAGE_IAM_ROLE=t.default.string().trim().optional().allow("")):e.env.STORAGE_PROVIDER===n.STORAGE_PROVIDERS.HTTP?(i.STORAGE_NODES=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},o.a,{schema:t.default.string().trim().default(e.env.STORAGE_ENDPOINT||"http-storage").optional()}),delete i.STORAGE_ENDPOINT,delete i.STORAGE_PORT):Object.keys(i).forEach(function(e){i[e]=i[e].required()})),i.STORAGE_PROVIDER=t.default.string().trim().lowercase().valid(Object.values(n.STORAGE_PROVIDERS))}).call(this,r("6c0cbd92685546599563"))},"1381cb84b38be44210e5":function(e,t,r){},"144a4c52161809512414":function(e,t){},"14f7411f8a980aee5243":function(e,t,r){"use strict";var n=r("198b8bb7f5a9ae6bda63");r.n(n).a},"15733e295fc211e6c486":function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("0ed696ba8380d46a2924"),r("b42383ffd481a2f01f84"),r("4ee649c87692c7abb6dd"),r("a86c41d10c7ccf1c6873");var n=r("9e0829ebb5f4d9754370"),o=r("7ee98bac1562359c81b0"),i=r("52cf01d8f4c3baca94b3");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){function RectangleFigure(){return function(e,t){if(!(e instanceof RectangleFigure))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,_getPrototypeOf(RectangleFigure).apply(this,arguments))}var t,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(RectangleFigure,o.a),t=RectangleFigure,a=[{key:"_getArea",value:function(e){if(2!==e.length)return 0;var t=_slicedToArray(e,2),r=t[0],n=t[1],o=(r.left-n.left)*(r.top-n.top);return Number.isNaN(o)?0:Math.abs(o)}},{key:"isValid",value:function(e){return 2===e.points.length}},{key:"type",get:function(){return n.SHAPE_TYPES.RECTANGLE}},{key:"maxPoints",get:function(){return 2}}],(r=[{key:"makeRectFromTwoPoints",value:function(){var e=_slicedToArray(this.points,2),t=e[0],r=e[1];return{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top),width:Math.abs(r.left-t.left),height:Math.abs(r.top-t.top)}}},{key:"makePolygonFromTwoPoints",value:function(){if(2!==this.points.length)return[];var e=this.makeRectFromTwoPoints();return[{left:e.left,top:e.top},{left:e.left+e.width,top:e.top},{left:e.left+e.width,top:e.top+e.height},{left:e.left,top:e.top+e.height}]}},{key:"isPointWithin",value:function(e){return Object(i.e)(e,this.makePolygonFromTwoPoints(),this.rect)}},{key:"getClosestPoint",value:function(e){var t={left:e.left,top:e.top,depth:0|e.depth};return e.left<this.rect.left&&(t.left=this.rect.left),e.top<this.rect.top&&(t.top=this.rect.top),e.left>this.rect.right&&(t.left=this.rect.right),e.top>this.rect.bottom&&(t.top=this.rect.bottom),{position:t}}}])&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),RectangleFigure}()},"1611e76106df37ddfe1b":function(e,t,r){"use strict";r("a70790f4aa1651a8466c")},"18a9e9122326ddcb1c59":function(e,t,r){"use strict";r.d(t,"a",function(){return HotkeySchemaModifier}),r("47e89aed260415009385"),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("406d0451405e28c4822f"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df");var n=r("c90887849e6e38ab5d76");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={title:n.default.string(),hotkey:n.default.alternatives([n.default.string().trim().required(),n.default.array().items(n.default.string().min(1)).min(1)]).required()},i=n.default.extend(function(e){return{base:e.string(),name:"string",language:{hotkey:"Hotkey already assigned to {{title}}"},rules:[{name:"hotkey",params:{hotkeys:e.array().items(e.object(o))},validate:function(e,t,r,n){var o=new Set([t]);Array.isArray(t)&&(o=new Set(function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t)));var i=e.hotkeys.find(function(e){var r=e.hotkey,n=!1;if("string"==typeof r)1===o.size&&(n=o.has(r));else if(Array.isArray(r)&&r.length===o.size){var i=0;r.forEach(function(e){o.has(e)&&(i+=1)}),n=i===t.length}return n});return i?(n.language.key="",this.createError("string.hotkey",{v:t,title:i.title},r,n)):t}}]}});function HotkeySchemaModifier(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},e,{hotkey:t&&t.length?i.string().trim().uppercase().allow("").length(1).hotkey(t):e.hotkey});return r?n.default.object().keys(o):o}},"1943f9d98b3c617e722b":function(e,t,r){"use strict";var n=r("2528892eee8b301c5c88");r.n(n).a},"198b8bb7f5a9ae6bda63":function(e,t,r){},"1b63068e7e41bed54c71":function(e,t,r){"use strict";r("c90887849e6e38ab5d76").default.string().trim().length(128)},"1b726e7ce4061546ecfc":function(e,t,r){"use strict";(function(e){function generateBucketName(t){return"".concat(e.env.BUCKETS_PREFIX,"-").concat(t)}r.d(t,"f",function(){return n}),r.d(t,"g",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"e",function(){return c}),r.d(t,"b",function(){return u}),r.d(t,"a",function(){return l}),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("47e89aed260415009385");var n={FS:"fs",GOOGLE:"google",MINIO:"minio",HTTP:"http"},o=(generateBucketName("public"),generateBucketName("private"),{IMAGES:"images",FIGURES:"figures"}),i={10:"fatal",20:"error",30:"warn",40:"info",50:"debug",60:"trace"},a=Object.keys(i).reduce(function(e,t){return e[i[t]]=parseInt(t,10),e},{}),s={};Object.keys(i).forEach(function(e){e>40||(s[e]=i[e])});var c={CONSECUTIVE:"consecutive",CLOSESTSEGMENT:"closestSegment",POINTSERASER:"pointsEraser",POINTSORDER:"pointsOrder"},u={BOOLEAN:"boolean",NUMBER:"number",STRING:"string",SELECT:"select",COLOR_PICKER:"color-picker",STRINGS_ARRAY:"strings_array"},l={IMAGES_FILENAME:"images_filename",IMAGES_TAG:"images_tag",IMAGES_SIZE:"images_size",IMAGES_CREATED:"images_created",OBJECTS_CLASS:"objects_class",OBJECTS_TAG:"objects_tag",OBJECTS_ANNOTATOR:"objects_annotator"}}).call(this,r("6c0cbd92685546599563"))},"1b7cae621277a789c0a1":function(e,t,r){},"1c84413533b434a33065":function(e,t){},"1c8643645cb66c24ccf0":function(e,t){},"1cfab3396007e2203c1b":function(e,t,r){"use strict";var n=r("bd2555d9b4311aab9971"),o=r.n(n);t.a=new o.a},"1d38117166ab109cd06a":function(e,t){},"1d426532832d51251b63":function(e,t,r){"use strict";var n=r("80ad12c6506a59195955");r.n(n).a},"1db5c9d2326bee5830da":function(e,t,r){"use strict";r("47e89aed260415009385"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("4e997ff4fa36eb673213");var n=r("c90887849e6e38ab5d76"),o=r("9e0829ebb5f4d9754370"),i=r("fa4339c8926dcb397641");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=Object.values(o.SHARE_LINK_TYPES).reduce(function(e,t){return e["".concat(t,"Id")]=i.idSchema,e},{}),s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({message:i.descriptionSchema.allow(""),oneTime:n.default.boolean().default(!0)},a);n.default.object().keys(s).xor(Object.keys(a))},"1e480175afd0d00fa810":function(e,t,r){},"1e6ec309998ca7845b54":function(e,t,r){"use strict";r("0ed696ba8380d46a2924");var n=r("c90887849e6e38ab5d76"),o=n.default.string().min(3).regex(/^[a-z]+[a-z0-9_\-]+$/i).max(30),i=n.default.string().min(5).regex(/^[a-z0-9_\-!@#$%^&*\/]+$/i).max(32).error(function(e){return e.forEach(function(e){"string.regex.base"===e.type&&(e.message="Input contains invalid symbols")}),e}),a=n.default.string().max(128),s=n.default.string().max(64).email({minDomainAtoms:2}).lowercase(),c=(r("5a8f02b640959023d3da"),{token:n.default.string().max(64).required()}),u=(n.default.object().keys(c),{oldPassword:i.allow(""),newPassword:i.required()}),l=(n.default.object().keys(u),r("47e89aed260415009385"),r("fa4339c8926dcb397641")),p={name:a.allow("").description("User name"),email:s.allow("",null).description("User password")};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n.default.object().keys(p);var f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({login:o.required().description("User login"),password:i.required().description("User password"),roleId:l.idSchema.description("Role ID"),isRestricted:l.booleanSchema.optional().default(!1)},p),d=(n.default.object().keys(f),{login:o.required().description("User login"),isRestricted:l.booleanSchema.optional().default(!1)});function UpdateUserByRootSchema_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n.default.object().keys(d);var _=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){UpdateUserByRootSchema_defineProperty(e,t,r[t])})}return e}({},f,{password:i.optional().empty("").description("User password")}),y=(n.default.object().keys(_),{login:[o.required(),s.required()],password:i.required(),supposedTeamId:l.idSchema.optional().allow(null)}),g=(n.default.alternatives().try([y,{token:n.default.string().min(1).required()},{thirdPartyToken:l.tokenSchema.required()}]),{token:n.default.string().max(64).required(),password:i.required()}),h=(n.default.object().keys(g),{email:n.default.string().email().required()}),b=(n.default.object().keys(h),{login:o.required(),password:i.required(),name:a.required(),email:s.required()}),v=(n.default.object().keys(b),{fieldName:n.default.string().required(),value:n.default.string().required()}),m=(n.default.object().keys(v),{login:n.default.alternatives([o,s]).required().description("User login"),roleId:l.idSchema.required().allow(null).description("Role ID")}),O=(n.default.object().keys(m),{registry:n.default.string().trim().uri({allowRelative:!0}).required(),login:n.default.string().trim().required(),password:n.default.string().trim().required()}),P=(n.default.object().keys(O),r("4e997ff4fa36eb673213"),r("9e0829ebb5f4d9754370")),T={type:n.default.string().trim().valid(Object.values(P.USER_SETTINGS))};n.default.object().keys(T)},"1f24b1c1631adced2f18":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={UNTAGGED_ALL:"untagged_all",UNTAGGED_SOME:"untagged_some"}},"2132b7a92754e3fc960f":function(e,t,r){"use strict";r("364b250cfb7cb23af2d1"),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("47e89aed260415009385");var n,o=r("989a42060903e47c0cff");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i,a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},(i=o.a,function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(i)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).reduce(function(e,t){return e[t]="customDockerImage",e},{}),(_defineProperty(n={},o.d.TRAIN,"trainImage"),_defineProperty(n,o.d.INFERENCE,"inferenceImage"),_defineProperty(n,o.d.DEPLOY_MODEL,"deployImage"),_defineProperty(n,o.d.SMART_TOOL,"deploySmartImage"),n)),s=Object.keys(a).reduce(function(e,t){return e[a[t]]=t,e},{});s.customDockerImage=o.d.CUSTOM,Object.keys(s)},"21c9b9dc8d994c745f44":function(e,t){},"231e23fa2725f4477d94":function(e,t,r){"use strict";var n=r("8333cfdeddda72a96411");r.n(n).a},"233c415059770589bea9":function(e,t,r){},"23ffeadd01de75e61cb9":function(e,t){},"251bedfa0d6cdf7bd49b":function(e,t,r){"use strict";var n=r("76e0800e24aff8698c6e");r.n(n).a},"2528892eee8b301c5c88":function(e,t,r){},"2552c24b020126fc6ce1":function(e,t){},"26015173042bd44a5ea1":function(e,t){},"27fbc10111cb6c1a7a45":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="32" height="32" viewBox="0 0 24 24" fill=""><path d="M17,12C17,14.42 15.28,16.44 13,16.9V21H11V16.9C8.72,16.44 7,14.42 7,12C7,9.58 8.72,7.56 11,7.1V3H13V7.1C15.28,7.56 17,9.58 17,12M12,9C10.34,9 9,10.34 9,12C9,13.66 10.34,15 12,15C13.66,15 15,13.66 15,12C15,10.34 13.66,9 12,9Z"/></svg>'},"281e5a6f947ddedfad19":function(e,t,r){"use strict";var n=r("0c8c5350e036679f6f96");r.n(n).a},"292306329c1511c97755":function(e,t){e.exports='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="icon" height="512" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M384 128v256h31.146667l-168.106667 298.666667H85.333333v256h256v-85.333334h341.333334v85.333334h256v-256h-161.706667l-168.106667-298.666667H640V128m-170.666667 85.333333h85.333334v85.333334h-85.333334m42.666667 87.04l170.666667 303.36V768H341.333333v-78.933333M170.666667 768h85.333333v85.333333H170.666667m597.333333-85.333333h85.333333v85.333333h-85.333333" fill="" /></svg>'},"29936396def38d5defbc":function(e,t,r){},"2a3e9a88fbe17ba15b38":function(e,t,r){},"2b8dedd30f7336ab507b":function(e,t,r){"use strict";var n=r("233c415059770589bea9");r.n(n).a},"2d07655de945d5332ec5":function(e,t,r){"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(){function Hoverable(){!function(e,t){if(!(e instanceof Hoverable))throw new TypeError("Cannot call a class as a function")}(this),_defineProperty(this,"_over",!1),_defineProperty(this,"_down",!1)}var e,t;return e=Hoverable,(t=[{key:"onPointerDown",value:function(){this._down=!0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["pointer:down"].concat(t))}},{key:"onPointerUp",value:function(){this._down=!1;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["pointer:up"].concat(t))}},{key:"onPointerUpOutside",value:function(){this._down=!1,this._over=!1;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["pointer:upoutside"].concat(t))}},{key:"onPointerOver",value:function(){this._over=!0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["pointer:over"].concat(t))}},{key:"onPointerOut",value:function(){this._down||(this._over=!1);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["pointer:out"].concat(t))}},{key:"onPointerMove",value:function(){if(this._over){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["pointer:move"].concat(t))}}}])&&_defineProperties(e.prototype,t),Hoverable}();r.d(t,"a",function(){return n})},"2e899ef6b64c1edfb532":function(e,t){},"2ecd84c8cd25e23da709":function(e,t){},"2ede16ab321e15df16b0":function(e,t,r){},"2f100b1204e1f84b8378":function(e,t){},"33477f9082208f755173":function(e){e.exports={ru:{joi:{key:"Поле ",any:{unknown:"не разрешено",invalid:"содержит неверное значение",empty:"не должно быть пустым",required:"обязательно",allowOnly:"должно быть одним из {{valids}}"},string:{min:"должно быть не короче {{limit}} символов",max:"должно быть не длиннее {{limit}} символов",alphanum:"должно состоять из латинских символов и цифр",email:"должно быть e-mail"}}},en:{key:"Input "}}},"33f5d04d64e8d312e0e8":function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("b42383ffd481a2f01f84");var n=r("bd2555d9b4311aab9971"),o=r("5f9e65e24255a01903f6"),i=r("01d16a391b82cbd5b98a"),a=r("2d07655de945d5332ec5");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function updatePoint(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this[e];if(n!==t){var o={left:this.left,top:this.top,depth:this.depth},i={left:this.left,top:this.top,depth:this.depth};i[e]=t,r&&(this.emit("before:change:coords:".concat(e),t,this[e]),this.emit("before:change:coords",i,o)),this["_".concat(e)]=t,r&&(this.emit("changed:coords:".concat(e),this[e],n),this.emit("changed:coords",i,o))}}var s=function(e){function Point(){var e,t,r;!function(e,t){if(!(e instanceof Point))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=_getPrototypeOf(Point)).call.apply(e,[this].concat(o)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(this):r,_defineProperty(_assertThisInitialized(t),"_left",0),_defineProperty(_assertThisInitialized(t),"_top",0),_defineProperty(_assertThisInitialized(t),"_depth",0),_defineProperty(_assertThisInitialized(t),"_visible",!0),_defineProperty(_assertThisInitialized(t),"_locked",!1),_defineProperty(_assertThisInitialized(t),"_dragging",!1),_defineProperty(_assertThisInitialized(t),"_selected",!1),_defineProperty(_assertThisInitialized(t),"_label",""),_defineProperty(_assertThisInitialized(t),"_opacity",1),_defineProperty(_assertThisInitialized(t),"sendEvents",!0),t}var t,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Point,n.EventEmitter),t=Point,o=[{key:"_updateFields",get:function(){return["id","left","top","depth","visible","locked","selected","label"]}}],(r=[{key:"init",value:function(e){e.figure&&(this.figure=e.figure),this.update(e)}},{key:"update",value:function(e){Object(i.d)(this,e,this.constructor._updateFields)}},{key:"clone",value:function(){var e=new this.constructor;return e.copied=!0,e.init(this),e}},{key:"_destroy",value:function(){}},{key:"destroy",value:function(){this._destroy(),this.emit("destroy"),this.removeAllListeners()}},{key:"left",get:function(){return this._left},set:function(e){updatePoint.call(this,"left",e,this.sendEvents)}},{key:"top",get:function(){return this._top},set:function(e){updatePoint.call(this,"top",e,this.sendEvents)}},{key:"depth",get:function(){return this._depth},set:function(e){updatePoint.call(this,"depth",e,this.sendEvents)}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=e}},{key:"locked",get:function(){return this._locked},set:function(e){this._locked=e}},{key:"dragging",get:function(){return this._dragging},set:function(e){this._dragging=e}},{key:"selected",get:function(){return this._selected},set:function(e){this.selected!==e&&(this._selected=e,this.emit("changed:selected",this.selected))}},{key:"label",get:function(){return this._label},set:function(e){this._label=e}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e}}])&&_defineProperties(t.prototype,r),o&&_defineProperties(t,o),Point}();Object(o.a)(s,[{type:a.a}])},"3687b1c204f6dd94bbc0":function(e,t,r){"use strict";var n=r("54c637703ddc3535d3d1");r.n(n).a},"36f0cad020f416714cbb":function(e,t,r){"use strict";r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("2810e53ad7174f3c046d"),r("afab45c263329fc2e21e")},"382a502bfd47b88098a3":function(e,t){},"38b22dc8e34e22abadab":function(e,t,r){},"3930ca7df3335090f2ee":function(e,t,r){},"3a4039aaa40cb7a7a7ef":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={MODEL:"model",NODE:"node",PROJECT:"project",PLUGIN:"plugin",WORKSPACE:"workspace",NOTEBOOK:"notebook"}},"3b0cdb29684a8d367787":function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"showNotification",function(){return showNotification}),r.d(n,"showDialog",function(){return showDialog}),r.d(n,"stopRecording",function(){return stopRecording}),r.d(n,"startRecording",function(){return startRecording}),r.d(n,"addRecordingChanges",function(){return addRecordingChanges}),r.d(n,"setJobStarted",function(){return setJobStarted}),r.d(n,"updateJobDuration",function(){return actions_updateJobDuration}),r.d(n,"setJob",function(){return setJob}),r.d(n,"toggleJobInfo",function(){return toggleJobInfo});var o={};r.r(o),r.d(o,"setUser",function(){return setUser}),r.d(o,"setAcl",function(){return setAcl});var i={};r.r(i),r.d(i,"saveLocalSettings",function(){return saveLocalSettings}),r.d(i,"saveSettings",function(){return saveSettings}),r.d(i,"loadSettings",function(){return loadSettings}),r.d(i,"setLastImage",function(){return setLastImage}),r.d(i,"setLastTool",function(){return setLastTool}),r.d(i,"setHotkeys",function(){return setHotkeys}),r.d(i,"setTheme",function(){return setTheme}),r.d(i,"switchTheme",function(){return switchTheme}),r.d(i,"updateSmartToolRestrictions",function(){return updateSmartToolRestrictions}),r.d(i,"setSmartModel",function(){return setSmartModel}),r.d(i,"openSidebarPanel",function(){return openSidebarPanel}),r.d(i,"toggleSidebarPanel",function(){return toggleSidebarPanel});var a={};r.r(a),r.d(a,"getDataset",function(){return actions_getDataset}),r.d(a,"updateDefaultSettings",function(){return actions_updateDefaultSettings});var s={};r.r(s),r.d(s,"getImage",function(){return actions_getImage}),r.d(s,"setTotalFiltered",function(){return setTotalFiltered}),r.d(s,"setPage",function(){return setPage}),r.d(s,"setFilter",function(){return setFilter}),r.d(s,"setFilters",function(){return setFilters}),r.d(s,"setImage",function(){return setImage}),r.d(s,"rotateImage",function(){return actions_rotateImage}),r.d(s,"getImages",function(){return actions_getImages}),r.d(s,"nextImage",function(){return nextImage}),r.d(s,"prevImage",function(){return prevImage}),r.d(s,"cloneFiguresFromPrevImage",function(){return cloneFiguresFromPrevImage}),r.d(s,"removeImages",function(){return actions_removeImages}),r.d(s,"removeImage",function(){return actions_removeImage}),r.d(s,"addTag",function(){return actions_addTag}),r.d(s,"updateTag",function(){return actions_updateTag}),r.d(s,"removeTag",function(){return actions_removeTag}),r.d(s,"removeTagFromAll",function(){return removeTagFromAll}),r.d(s,"updateDescription",function(){return actions_updateDescription}),r.d(s,"updateImageStats",function(){return updateImageStats}),r.d(s,"setImageStatus",function(){return actions_setImageStatus}),r.d(s,"initImages",function(){return initImages});var c={};r.r(c),r.d(c,"setClass",function(){return setClass}),r.d(c,"toggleClass",function(){return toggleClass}),r.d(c,"updateClasses",function(){return updateClasses}),r.d(c,"createClass",function(){return actions_createClass});var u={};r.r(u),r.d(u,"applyToolVisuals",function(){return applyToolVisuals}),r.d(u,"setToolOption",function(){return setToolOption}),r.d(u,"setCurrentToolOption",function(){return setCurrentToolOption}),r.d(u,"setToolOptionReady",function(){return setToolOptionReady}),r.d(u,"setToolReady",function(){return setToolReady}),r.d(u,"updateToolState",function(){return updateToolState}),r.d(u,"updateTool",function(){return updateTool}),r.d(u,"resetToolState",function(){return resetToolState}),r.d(u,"resetToolsStates",function(){return resetToolsStates}),r.d(u,"setDefaultToolClass",function(){return setDefaultToolClass}),r.d(u,"setTool",function(){return setTool}),r.d(u,"setNewMode",function(){return setNewMode}),r.d(u,"setCurrentToolOptionReady",function(){return setCurrentToolOptionReady}),r.d(u,"setCurrentToolReady",function(){return setCurrentToolReady});var l={};r.r(l),r.d(l,"getTags",function(){return actions_getTags}),r.d(l,"createTag",function(){return actions_createTag}),r.d(l,"updateTag",function(){return tags_actions_updateTag}),r.d(l,"deleteTag",function(){return actions_deleteTag}),r.d(l,"selectTag",function(){return selectTag}),r.d(l,"highlightTagPanel",function(){return highlightTagPanel}),r.d(l,"updateDashedTags",function(){return updateDashedTags});var p={};r.r(p),r.d(p,"setCanvas",function(){return setCanvas});var f={};r.r(f),r.d(f,"getLicense",function(){return actions_getLicense}),r("afab45c263329fc2e21e");var d=r("57b485d6257d13d8a174"),_=r.n(d),y=r("999c55cff43a633f7a5f"),g=r("54b089b6f5db3df8074d"),h=(r("2810e53ad7174f3c046d"),r("47e89aed260415009385"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df"),"SET_RECORDING"),b="SET_TIMER",v="SET_JOB_STARTED",m="UPDATE_JOB_DURATION_REQUEST",O="SET_JOB",P="TOGGLE_JOB_INFO",T=r("09461657d5abd9aa9de1");function updateJobDuration(e,t){return T.a.put("/jobs/".concat(e,"/duration"),{duration:t})}var S=r("f9e71c3bf7e07577fce6");function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=new Set([S.c.addPoints,S.c.removePoints,S.c.movePoints,S.c.updateBitmap]);function setRecording(e,t){(0,e.commit)(h,t)}function showNotification(){}function showDialog(){}function stopRecording(e,t){var r=t.figureId,n=e.state,o=e.dispatch,i=e.commit;if(n.recording.startedAt&&n.recording.hasChanges){n.timerId&&(clearTimeout(n.timerId),i(b,null));var a=Math.round((Date.now()-n.recording.startedAt.getTime())/1e3);a&&o("dataset/figures/addDurationToFigure",{figureId:r,amount:a},{root:!0}),setRecording(e,{startedAt:null,hasChanges:!1})}}function setTimer(e){var t=e.state,r=e.commit;t.timerId&&clearTimeout(t.timerId);var n=setTimeout(function(){stopRecording(e,{figureId:t.recording.figureId})},3e4);r(b,n)}function startRecording(e,t){e.state.recording.startedAt||(setRecording(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({startedAt:new Date},t)),setTimer(e))}function addRecordingChanges(e,t){var r=e.state;r.recording.startedAt?(setTimer(e),setRecording(e,{hasChanges:!0})):j.has(t.action)&&startRecording(e,{figureId:r.recording.figureId,hasChanges:!0})}function setJobStarted(e,t){(0,e.commit)(v,t)}function actions_updateJobDuration(e,t){return function(){var e;return e=regeneratorRuntime.mark(function _callee(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.state,(n=e.commit)(m,!0),a.prev=2,o=new Date,i=Math.round((o-r.jobDuration.startedAt)/1e3),a.next=7,updateJobDuration(t,i);case 7:n(v,o);case 8:return a.prev=8,n(m,!0),a.finish(8);case 11:case"end":return a.stop()}},_callee,null,[[2,,8,11]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}.apply(this,arguments)}.apply(this,arguments)}function setJob(e,t){(0,e.commit)(O,t)}function toggleJobInfo(e){(0,e.commit)(P)}var w,I=r("41b11af1442716978a08");function mutations_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E,C={namespaced:!0,state:{recording:{startedAt:null,hasChanges:!1,figureId:null},timerId:null,jobDuration:{startedAt:null,loading:!1},job:null,showJobInfo:!1},getters:{},actions:n,mutations:(mutations_defineProperty(w={},h,function(e,t){Object(I.i)(_.a.set,e.recording,t)}),mutations_defineProperty(w,b,function(e,t){e.timerId=t}),mutations_defineProperty(w,v,function(e,t){e.jobDuration.startedAt=t}),mutations_defineProperty(w,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.jobDuration.loading=t}),mutations_defineProperty(w,O,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.job=t}),mutations_defineProperty(w,P,function(e){e.showJobInfo=!e.showJobInfo}),w)},k=r("bbcecb41cd25b76a45ee"),A=r.n(k),F=r("b21f11a2ab1d53075e92"),x="SET_USER",R="SET_ACL",L="SET_ROLES";function actions_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function actions_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){actions_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){actions_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function setUser(e){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t=e.commit,r=F.a.getToken(),n={isGuest:!0,login:"Guest"},r&&(n=A()(F.a.getToken()),g.a.updateContext({userId:n.id})),t(x,n);case 5:case"end":return o.stop()}},_callee)})).apply(this,arguments)}.apply(this,arguments)}function setAcl(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.commit,n=t.teamId,o=t.workspaceId,a.next=4,T.a.get("/account/acl").then(function(e){return e.data});case 4:i=a.sent,r(R,i.acl),r(L,i.roles),g.a.updateContext({teamId:n,workspaceId:o}),Object.defineProperties(_.a.prototype,{$team:{get:function(){return n}},$workspace:{get:function(){return o}},$roles:{get:function(){return i.roles}},$user:{get:function(){return{acl:i.acl}}}});case 9:case"end":return a.stop()}},_callee2)})).apply(this,arguments)}.apply(this,arguments)}function user_mutations_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("87997867a0dfb75f73e8");var D={namespaced:!0,state:{name:"",acl:{},roles:{}},actions:o,mutations:(user_mutations_defineProperty(E={},x,function(e,t){Object.assign(e,t)}),user_mutations_defineProperty(E,R,function(e,t){Object.assign(e.acl,t)}),user_mutations_defineProperty(E,L,function(e,t){Object.assign(e.roles,t)}),E),getters:{}},G=(r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("92a1c426d3e09d462222"),r("132a80cfdf396f588204"),r("eb07177a17d22f84b632")),B=r.n(G),M=r("6d8089820eedc734c4ea"),z=r("9e0829ebb5f4d9754370"),N=r("a633a5ade98d3c5686c8");function api_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function getSmartAnnotationRestrictions(){return function(){var e;return e=regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={count:0,max:0},t.prev=1,t.next=4,T.a.get("/annotation/tools/smartAnnotationRestrictions").then(function(e){return e.data});case 4:e=t.sent,t.next=11;break;case 7:if(t.prev=7,t.t0=t.catch(1),501===t.t0.response.status){t.next=11;break}throw t.t0;case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}},_callee,null,[[1,7]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){api_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){api_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}.apply(this,arguments)}.apply(this,arguments)}var U="LOAD_SETTINGS",H="SET_LAST_IMAGE",V="SET_LAST_TOOL",Y="SET_THEME",J="UPDATE_SMART_TOOL_RESTRICTIONS",W="SET_HOTKEYS",q="SET_FIGURES_SMART_MODEL",Z="SET_SIDEBAR_ACTIVE_PANELS";function actions_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){actions_defineProperty(e,t,r[t])})}return e}function actions_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function settings_actions_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function settings_actions_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){settings_actions_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){settings_actions_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}var $="settings";function saveLocalSettings(e){var t=e.state;B.a.set($,t)}function saveSettings(e){return function(){return settings_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,n,o,i,a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.rootState,r=e.state,saveLocalSettings(e),n=t.user,o=n.acl,i=n.roles,a=actions_objectSpread({value:z.ACL_ACTIONS.FIGURES.UPDATE},Object(M.pick)(t.dataset,["workspaceId","projectId","datasetId"]),{teamId:t.dataset.groupId}),!Object(N.a)(o,i,a)){s.next=7;break}return s.next=7,c=t.user.id,u=r,T.a.put("/users/".concat(c,"/settings"),u,{params:{type:z.USER_SETTINGS.ANNOTATION}}).then(function(e){return e.data});case 7:case"end":return s.stop()}var c,u},_callee)})).apply(this,arguments)}.apply(this,arguments)}function loadSettings(e){return function(){return settings_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,r,n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=e.rootState,n=B.a.get($),o={},!(null===(t=r.user)||void 0===t?void 0:t.id)){i.next=9;break}return i.next=6,a=r.user.id,T.a.get("/users/".concat(a,"/settings"),{params:{type:z.USER_SETTINGS.ANNOTATION}}).then(function(e){return e.data});case 6:o=i.sent,i.next=10;break;case 9:o=Object(M.cloneDeep)(z.USER_DEFAULT_SETTINGS[z.USER_SETTINGS.ANNOTATION]);case 10:e.commit(U,actions_objectSpread({},n,o)),n||saveLocalSettings(e);case 12:case"end":return i.stop()}var a},_callee2)})).apply(this,arguments)}.apply(this,arguments)}function setLastImage(e,t){return e.commit(H,t),saveSettings(e)}function setLastTool(e,t){return e.commit(V,t),saveSettings(e)}function setHotkeys(e,t){return e.commit(W,t),saveSettings(e)}function setTheme(e,t){return e.commit(Y,t),saveSettings(e)}function switchTheme(e){return setTheme(e,"light"===e.state.theme?"dark":"light")}var Q,K={setTool:!1};function updateSmartToolRestrictions(e,t){return function(){return settings_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e,t){var r,n,o,i,a,s,c,u,l,p;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=e.state,n=e.commit,o=e.dispatch,i=e.rootState,a=e.getters,s=null==t?K:Object.assign({},K,t),f.next=4,getSmartAnnotationRestrictions();case 4:c=f.sent,n(J,c),a.isSmartToolAvailable||(null==r.smartToolUpdateTimer&&(u=new Date,l=u.getTime(),u.setHours(24,0,0,0),p=setTimeout(updateSmartToolRestrictions,u.getTime()-l,e,{setTool:!1}),n(U,{smartToolUpdateTimer:p})),s.setTool&&o("tools/setTool",{toolId:i.tools.all.bitmap.id},{root:!0}));case 7:case"end":return f.stop()}},_callee3)})).apply(this,arguments)}.apply(this,arguments)}function setSmartModel(e,t){(0,e.commit)(q,t)}function openSidebarPanel(e,t){var r=e.state,n=e.commit;r.sidebarActivePanels.includes(t)||(n(Z,[].concat(_toConsumableArray(r.sidebarActivePanels),[t])),saveSettings(e))}function toggleSidebarPanel(e,t){var r=e.state,n=e.commit,o=[];if(r.sidebarActivePanels.includes(t)){if(!(r.sidebarActivePanels.length>1))return;o=r.sidebarActivePanels.filter(function(e){return e!==t})}else o=[].concat(_toConsumableArray(r.sidebarActivePanels),[t]);n(Z,o),saveSettings(e)}function settings_mutations_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X=(settings_mutations_defineProperty(Q={},U,function(e,t){Object.assign(e,t)}),settings_mutations_defineProperty(Q,H,function(e,t){e.lastImageId=t}),settings_mutations_defineProperty(Q,V,function(e,t){e.lastToolId=t}),settings_mutations_defineProperty(Q,Y,function(e,t){e.theme=t}),settings_mutations_defineProperty(Q,J,function(e,t){e.smartToolRestrictions=t}),settings_mutations_defineProperty(Q,W,function(e,t){e.hotkeys=t}),settings_mutations_defineProperty(Q,q,function(e,t){e.selectedModel=t}),settings_mutations_defineProperty(Q,Z,function(e,t){e.sidebarActivePanels=t}),Q),ee=r("f0fc4174c28bc05a69fc"),te={namespaced:!0,state:{sidebarActivePanels:[ee.a.IMAGES,ee.a.FIGURES],alerts:{removeObject:!0},autoCenter:!0,autoScale:!0,theme:"light",lastImageId:null,zoomMultiplier:1.1,smartToolRestrictions:{count:0,max:null},hotkeys:[],smartToolUpdateTimer:null,selectedModel:null},actions:i,mutations:X,getters:{isSmartToolAvailable:function(e){return null===e.smartToolRestrictions.max||e.smartToolRestrictions.count<e.smartToolRestrictions.max},currentModel:function(e){return e.selectedModel?{id:e.selectedModel}:null},userHotkeys:function(e){return e.hotkeys}}},re=r("6414a7795e0b98993b58");function normalizeData(e,t){var r=Object(re.normalize)(e,t);return r.result=Object(M.omit)(r.result,Object.keys(t.schema)),r}function processStrategy(e){return e.createdAt&&(e.createdAt=new Date(e.createdAt)),e.updatedAt&&(e.updatedAt=new Date(e.updatedAt)),e}function dataset_api_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function dataset_api_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){dataset_api_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){dataset_api_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}var ne=new re.schema.Entity("classes",void 0,{processStrategy}),oe=new re.schema.Object({classes:[ne]});function getDataset(e){return function(){return dataset_api_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.c.get("/datasets/".concat(e));case 2:return t=n.sent,r=t.data,n.abrupt("return",normalizeData(r,oe));case 5:case"end":return n.stop()}},_callee)})).apply(this,arguments)}.apply(this,arguments)}function updateDefaultSettings(){return function(){return dataset_api_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:{},r.abrupt("return",T.c.post("/settings",e).then(function(e){return e.data}));case 2:case"end":return r.stop()}},_callee2)})).apply(this,arguments)}.apply(this,arguments)}var ie,ae="GET_DATASET_REQUEST",se="GET_DATASET_SUCCESS",ce="GET_DATASET_FAILURE";function dataset_actions_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){dataset_actions_defineProperty(e,t,r[t])})}return e}function dataset_actions_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dataset_actions_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function dataset_actions_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){dataset_actions_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){dataset_actions_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function actions_getDataset(e,t){return function(){return dataset_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r,n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=e.commit,n=e.dispatch,r(ae),i.prev=2,i.next=5,getDataset(t);case 5:return o=i.sent,g.a.updateContext({projectId:o.result.projectId,datasetId:o.result.id}),r(se,o.result),n("classes/updateClasses",{datasetId:t,data:o.entities.classes||{}}),i.next=11,Promise.all([n("settings/updateSmartToolRestrictions",null,{root:!0}),n("tags/getTags",null,{root:!0})]);case 11:i.next=16;break;case 13:i.prev=13,i.t0=i.catch(2),r(ce,i.t0);case 16:case"end":return i.stop()}},_callee,null,[[2,13]])})).apply(this,arguments)}.apply(this,arguments)}function actions_updateDefaultSettings(e,t){return function(){return dataset_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var r,n,o,i,a,s,c;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(r=e.commit,n=e.rootState,o={},i=n.user,a=i.acl,s=i.roles,c=dataset_actions_objectSpread({value:z.ACL_ACTIONS.FIGURES.UPDATE},Object(M.pick)(n.dataset,["workspaceId","projectId","datasetId"]),{teamId:n.dataset.groupId}),!Object(N.a)(a,s,c)){u.next=10;break}return u.next=7,updateDefaultSettings({settings:t});case 7:o=u.sent,u.next=11;break;case 10:o=Object(z.mergeProjectSettings)(t);case 11:r(se,{settings:o});case 12:case"end":return u.stop()}},_callee2)})).apply(this,arguments)}.apply(this,arguments)}function dataset_mutations_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ue=(dataset_mutations_defineProperty(ie={},ae,function(e){e.loading=!0}),dataset_mutations_defineProperty(ie,se,function(e,t){Object.assign(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){dataset_mutations_defineProperty(e,t,r[t])})}return e}({},t,{settings:Object(z.mergeProjectSettings)(t.settings)})),e.loading=!1}),dataset_mutations_defineProperty(ie,ce,function(e,t){e.loading=!1,g.a.error(t)}),ie),le=(r("aa7b434460007d4b1170"),r("01d16a391b82cbd5b98a")),pe={projectHotkeys:function(e,t,r,n){return Object(le.m)({user:n["settings/userHotkeys"],classes:n["dataset/classes/orderedClasses"],imagesTags:n["tags/orderedTags"],figuresTags:n["tags/orderedTags"]})},projectHotkeysMap:function(e,t){var r=new Map;return t.projectHotkeys.forEach(function(e){var t=e.title,n=e.hotkey,o=n;Array.isArray(n)&&(o=n.join("_")),r.set(o,{title:t,hotkey:n})}),r}};function getters_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){getters_defineProperty(e,t,r[t])})}return e}function getters_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function getImageWithInfo(e,t){var r=t.state,n=t.rootState;if(!e)return null;var o=r.all[e];return o?getters_objectSpread({},o,{tags:o.tags.map(function(e){return getters_objectSpread({},n.tags.all[e.id],e)})}):null}r("4e997ff4fa36eb673213");var fe={list:function(e){var t=z.IMAGES_SORT_OPTIONS[e.filter.orderBy];return Object(M.orderBy)(Object.values(e.all),[t.column],[t.direction]).map(function(e){return e.id})},isFirstImage:function(e,t){return 1===e.page&&0===t.list.indexOf(e.selected)},currentImage:function(e,t,r){return getImageWithInfo(e.selected,{state:e,rootState:r})},orderedImages:function(e,t,r){return t.list.map(function(t){return getImageWithInfo(t,{state:e,rootState:r})})},imagesById:function(e,t){return Object(M.keyBy)(t.orderedImages,"id")},isImageEmpty:function(e,t,r,n){return!n["dataset/figures/orderedFigures"].length},total:function(e,t,r){return r.dataset.stats?parseInt(r.dataset.stats.imagesCount,10):0}},de=r("1cfab3396007e2203c1b");function api_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){api_defineProperty(e,t,r[t])})}return e}function api_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function images_api_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function images_api_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){images_api_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){images_api_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}var _e=new re.schema.Entity("images",void 0,{processStrategy}),ye=new re.schema.Object({images:[_e]});function getImages(e,t){return function(){return images_api_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r,n,o,i,a,s=arguments;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:1,n=s.length>3&&void 0!==s[3]?s[3]:100,o=s.length>4&&void 0!==s[4]?s[4]:{},c.next=5,T.c.get("/datasets/".concat(e,"/images"),{params:api_objectSpread({page:r,limit:n,filter:t},o)});case 5:return i=c.sent,a=i.data,c.abrupt("return",normalizeData(a,ye));case 8:case"end":return c.stop()}},_callee)})).apply(this,arguments)}.apply(this,arguments)}function rotateImage(e,t,r){return function(){return images_api_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t,r){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",T.c.put("/datasets/".concat(e,"/images/").concat(t,"/rotate"),{angle:r}));case 1:case"end":return n.stop()}},_callee2)})).apply(this,arguments)}.apply(this,arguments)}function addTag(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return T.c.post("/datasets/".concat(e,"/images/").concat(t,"/tags"),{tagId:r,value:n}).then(function(e){return de.a.emit("clicker-notification","image tags updated"),e.data}).catch(function(e){throw de.a.emit("clicker-error",e),e})}function updateTag(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return T.c.post("/datasets/".concat(e,"/images/").concat(t,"/tags/").concat(r),{value:n}).then(function(e){return de.a.emit("clicker-notification","image tag updated"),e.data}).catch(function(e){throw de.a.emit("clicker-error",e),e})}function removeTag(e,t,r){return T.c.delete("/datasets/".concat(e,"/images/").concat(t,"/tags/").concat(r)).then(function(e){return de.a.emit("clicker-notification","image tags updated"),e.data}).catch(function(e){throw de.a.emit("clicker-error",e),e})}function removeImage(e,t){return T.c.delete("/datasets/".concat(e,"/images/").concat(t))}function removeImages(e,t){return Object(T.c)({url:"/datasets/".concat(e,"/images"),method:"DELETE",data:t,headers:{"Content-Type":"application/json;charset=utf-8"}})}function setImageStatus(e,t,r){return T.c.post("/datasets/".concat(e,"/images/").concat(t,"/reviewStatus"),{status:r})}var ge="UPDATE_IMAGES",he="GET_IMAGE_REQUEST",be="GET_IMAGE_SUCCESS",ve="GET_IMAGE_FAILURE",me="SET_IMAGE",Oe="REMOVE_IMAGES",Pe="ROTATE_IMAGE",Te="ADD_TAG",Se="UPDATE_TAG",je="REMOVE_TAG",we="UPDATE_DESCRIPTION",Ie="SET_PAGE",Ee="SET_FILTER",Ce="SET_FILTERS",ke="GET_IMAGES_REQUEST",Ae="GET_IMAGES_SUCCESS",Fe="GET_IMAGES_FAILURE",xe="SET_TOTAL_FILTERED",Re="UPDATE_IMAGE_STATS",Le=(r("a61732f157539e8a726f"),r("4ee649c87692c7abb6dd"),r("a86c41d10c7ccf1c6873"),r("4dfea3e874b872b0bb2a")),De=r.n(Le);function castToInt(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2?arguments[2]:void 0,r=parseInt(e,10);return Number.isNaN(r)?null:Number.isNaN(t)||r!==t?r:null}function castToString(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2?arguments[2]:void 0;return e&&"string"==typeof e?t&&e===t?"":e:""}function castToArray(e){return e?Array.isArray(e)?e.length?e:null:[e]:null}function castToObject(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prop";try{return"prop"===t?JSON.parse(e):JSON.stringify(e)}catch(e){}return null}var Ge,Be=[{query:"page",prop:"page",cast:castToInt},{query:"imgId",prop:"imageId",cast:castToInt,omitToQuery:!0},{query:"name",prop:"filter.name",cast:castToString},{query:"orderBy",prop:"filter.orderBy",cast:castToString,default:"title"},{query:"objCnt",prop:"filter.objectsCount",cast:castToString,default:"any"},{query:"objCntFrom",prop:"filter.objectsCountFrom",cast:castToInt,default:0},{query:"objCntTo",prop:"filter.objectsCountTo",cast:castToInt,default:999},{query:"classes",prop:"filter.classes",cast:castToArray,castSubItems:castToObject},{query:"imageTags",prop:"filter.imageTags",cast:castToArray,castSubItems:castToObject},{query:"figureTags",prop:"filter.figureTags",cast:castToArray,castSubItems:castToObject}];function castQueryAndProps(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"query",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"prop",n={};return Be.forEach(function(o){if("query"!==r||!o.omitToQuery){var i=Object(M.get)(e,o[t]),a=o.cast(i,r,o.default);if(Array.isArray(a)&&o.castSubItems){var s=[];a.forEach(function(e){var t=o.castSubItems(e,r,null);t&&s.push(t)}),a=s.length?s:null}if(a||0===a){var c=o[r].split("."),u=c[0];c.length>1&&!n[u]&&(n[u]={}),Object(M.set)(n,o[r],a)}}}),n}function setPropsToQuery(e){var t=window.location,r=t.protocol,n=t.host,o=t.pathname,i=t.hash,a=castQueryAndProps(e,"prop","query"),s="".concat(r,"//").concat(n).concat(o,"?").concat(De.a.stringify(a)).concat(i);window.history.pushState({path:s},"",s)}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function images_actions_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){images_actions_defineProperty(e,t,r[t])})}return e}function images_actions_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function images_actions_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function images_actions_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){images_actions_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){images_actions_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function getFigures(e,t){return e("dataset/figures/getFigures",t,{root:!0})}function actions_getImage(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r,n,o,i,a,s;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=e.commit,n=e.dispatch,o=e.state,r(he),t){c.next=4;break}return c.abrupt("return");case 4:return c.prev=4,i=o.all[t],c.next=8,Object(I.h)(i.previewUrl||i.url);case 8:if(a=c.sent,o.selected===t){c.next=11;break}return c.abrupt("return");case 11:s={},i.previewUrl?(s.previewSource=a,Object(I.h)(i.url).then(function(e){r(Re,{imageId:t,props:{source:e}})}).catch(function(e){g.a.error(e)})):(s.source=a,s.area=a.width*a.height,s.meta={width:a.width,height:a.height}),n("dataset/figures/setLoading",!0,{root:!0}),n("settings/setLastImage",t,{root:!0}),getFigures(n,t).then(function(){return n("dataset/figures/resetHistory",null,{root:!0})}),n("tools/resetToolsStates",null,{root:!0}),r(be,{imageId:t,data:s}),c.next=23;break;case 20:c.prev=20,c.t0=c.catch(4),r(ve,c.t0);case 23:case"end":return c.stop()}},_callee,null,[[4,20]])})).apply(this,arguments)}.apply(this,arguments)}function setTotalFiltered(e,t){(0,e.commit)(xe,t)}function setPage(e,t){var r=e.commit;r(me,null),r(Ie,t)}function setFilter(e,t){(0,e.commit)(Ee,t)}function setFilters(e,t){(0,e.commit)(Ce,t)}function setImage(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var r,n,o,i,a,s,c,u,l;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(r=t.imageId,n=e.state,o=e.commit,i=e.dispatch,a=e.rootState,s=e.rootGetters,n.selected!==r){p.next=4;break}return p.abrupt("return");case 4:if(!s["dataset/figures/hasFiguresBeingCreated"]){p.next=7;break}return i("app/showNotification","Some objects are still being created. Please, wait",{root:!0}),p.abrupt("return");case 7:if(a.tools.selected){p.next=14;break}return c=a.tools.default,a.settings.lastToolId&&(u=a.tools.all[a.settings.lastToolId])&&!s["tools/isToolDisabled"](u.id)&&s["dataset/classes/toolClasses"](u.id).length&&(c=u.id),p.next=12,i("tools/setTool",{toolId:c},{root:!0});case 12:p.next=20;break;case 14:if(!(l=s["dataset/figures/currentFigure"])||l.classId){p.next=18;break}return p.next=18,i("dataset/figures/setSelectedFigure",null,{root:!0});case 18:return p.next=20,i("tools/setDefaultToolClass",null,{root:!0});case 20:if(i("tags/selectTag",{tag:null,options:{changeTool:!1}},{root:!0}),i("dataset/figures/setSelectedFigure",null,{root:!0}),i("dataset/figures/setHoveredFigure",null,{root:!0}),o(me,r),r){p.next=27;break}return p.abrupt("return");case 27:return o(he),p.next=30,actions_getImage(e,r);case 30:case"end":return p.stop()}},_callee2)})).apply(this,arguments)}.apply(this,arguments)}function actions_rotateImage(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.imageId,n=t.angle,o=e.commit,i=e.state,o(Pe,{imageId:r}),a.next=5,rotateImage(i.all[r].datasetId,r,n);case 5:return a.abrupt("return",setImage(e,{imageId:r}));case 6:case"end":return a.stop()}},_callee3)})).apply(this,arguments)}.apply(this,arguments)}function actions_getImages(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e,t){var r,n,o,i,a,s,c,u,l,p,f,d;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return r=e.commit,n=e.state,o=e.getters,i=e.rootState,a=t.datasetId,s=t.imageId,c=t.firstAsCurrent,u=void 0===c||c,l=t.updateUrl,p=void 0===l||l,r(ke),_.prev=3,_.next=6,getImages(a,n.filter,n.page,n.perPage,{filters:n.filters});case 6:return f=_.sent,r(ge,f.entities.images||{}),_.next=10,setTotalFiltered(e,f.result.totalFiltered);case 10:if(p&&setPropsToQuery(n),null!=n.selected||!o.list.length){_.next=16;break}return d=null,d=n.all[s]?s:n.all[i.settings.lastImageId]?i.settings.lastImageId:o.list[u?0:o.list.length-1],_.next=16,setImage(e,{imageId:d});case 16:r(Ae),_.next=22;break;case 19:_.prev=19,_.t0=_.catch(3),r(Fe,_.t0);case 22:case"end":return _.stop()}},_callee4,null,[[3,19]])})).apply(this,arguments)}.apply(this,arguments)}function nextImage(e){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee5(e){var t,r,n,o,i,a,s;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.state,r=e.getters,n=e.rootState,r.list.length&&null!=t.selected){c.next=3;break}return c.abrupt("return");case 3:if(o=r.list.indexOf(t.selected),!(r.list.length>o+1)){c.next=10;break}return o=r.list[o+1],c.next=8,setImage(e,{imageId:o});case 8:c.next=25;break;case 10:if(1!==t.page||t.totalFiltered!==r.list.length){c.next=18;break}return i=_slicedToArray(r.list,1),o=i[0],c.next=15,setImage(e,{imageId:o});case 15:de.a.emit("scroll-images-dir-changed",1),c.next=25;break;case 18:return a=t.totalFiltered>t.page*t.perPage?t.page+1:1,s={datasetId:n.dataset.id},c.next=22,setPage(e,a);case 22:return c.next=24,actions_getImages(e,s);case 24:1===a&&de.a.emit("scroll-images-dir-changed",1);case 25:case"end":return c.stop()}},_callee5)})).apply(this,arguments)}.apply(this,arguments)}function prevImage(e){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee6(e){var t,r,n,o,i,a,s;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.state,r=e.getters,n=e.rootState,r.list.length&&null!=t.selected){c.next=3;break}return c.abrupt("return");case 3:if(!((o=r.list.indexOf(t.selected))>=1)){c.next=10;break}return o=r.list[o-1],c.next=8,setImage(e,{imageId:o});case 8:c.next=25;break;case 10:if(1!==t.page||t.totalFiltered!==r.list.length){c.next=17;break}return o=r.list[r.list.length-1],c.next=14,setImage(e,{imageId:o});case 14:de.a.emit("scroll-images-dir-changed",-1),c.next=25;break;case 17:return i=Math.ceil(t.totalFiltered/t.perPage),a=t.page-1>=1?t.page-1:i,s={datasetId:n.dataset.id,firstAsCurrent:!1},c.next=22,setPage(e,a);case 22:return c.next=24,actions_getImages(e,s);case 24:a===i&&de.a.emit("scroll-images-dir-changed",-1);case 25:case"end":return c.stop()}},_callee6)})).apply(this,arguments)}.apply(this,arguments)}function cloneFiguresFromPrevImage(e){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee7(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.state,r=e.dispatch,t.selected){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,r("dataset/figures/setLoading",!0,{root:!0}),n.next=7,o=t.all[t.selected].datasetId,i=t.selected,a=t.page,s=t.perPage,c=t.filter,T.c.post("/datasets/".concat(o,"/images/").concat(i,"/figures/clone"),{page:a,limit:s,filter:c}).then(function(e){return e.data});case 7:getFigures(r,t.selected).then(function(){return r("dataset/figures/resetHistory",null,{root:!0})}),r("tools/resetToolsStates",null,{root:!0}),n.next=14;break;case 11:throw n.prev=11,n.t0=n.catch(3),n.t0;case 14:case"end":return n.stop()}var o,i,a,s,c},_callee7,null,[[3,11]])})).apply(this,arguments)}.apply(this,arguments)}function actions_removeImages(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee8(e,t){var r,n,o,i,a,s,c,u,l;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(r=t.datasetId,n=t.imagesIds,o=e.commit,i=e.getters,a=e.state,s=new Set(n),c=i.list.indexOf(a.selected),u=null,s.has(a.selected)){for(l=c-1;l>=0;--l)s.has(i.list[l])?null!=u&&(u-=1):null==u&&(u=l);null==u&&(u=0)}if(o(Oe,n),!(n.length>1)){p.next=12;break}return p.next=10,removeImages(r,n);case 10:p.next=14;break;case 12:return p.next=14,removeImage(r,n[0]);case 14:if(null!=u){p.next=16;break}return p.abrupt("return");case 16:return p.next=18,setImage(e,{imageId:i.list[u]});case 18:case"end":return p.stop()}},_callee8)})).apply(this,arguments)}.apply(this,arguments)}function actions_removeImage(e,t){return actions_removeImages(e,{datasetId:e.state.all[t].datasetId,imagesIds:[t]})}function actions_addTag(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee9(e,t){var r,n,o,i,a,s;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=e.commit,n=e.state,o=t.imageId,i=t.tagId,a=t.value,c.next=4,addTag(n.all[o].datasetId,o,i,a);case 4:s=c.sent,a=s.value,r(Te,{imageId:o,tagId:i,value:a});case 7:case"end":return c.stop()}},_callee9)})).apply(this,arguments)}.apply(this,arguments)}function actions_updateTag(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee10(e,t){var r,n,o,i,a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=e.commit,n=e.state,o=t.imageId,i=t.tagId,a=t.value,s.next=4,updateTag(n.all[o].datasetId,o,i,a);case 4:r(Se,{imageId:o,tagId:i,value:a});case 5:case"end":return s.stop()}},_callee10)})).apply(this,arguments)}.apply(this,arguments)}function actions_removeTag(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee11(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.commit,n=e.state,o=t.imageId,i=t.tagId,a.next=4,removeTag(n.all[o].datasetId,o,i);case 4:r(je,t);case 5:case"end":return a.stop()}},_callee11)})).apply(this,arguments)}.apply(this,arguments)}function removeTagFromAll(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee12(e,t){var r,n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:r=e.commit,n=e.getters,o=t.tagId,n.orderedImages.forEach(function(e){e.tags.forEach(function(t){t.id===o&&r(je,{imageId:e.id,tagId:o})})});case 4:case"end":return i.stop()}},_callee12)})).apply(this,arguments)}.apply(this,arguments)}function actions_updateDescription(e,t){var r=e.commit,n=e.state,o=t.imageId,i=t.description;return r(we,t),function(e,t,r){return T.c.request({url:"/datasets/".concat(e,"/images/").concat(t,"/description"),method:"put",data:{description:r}}).then(function(e){return de.a.emit("clicker-notification","image description updated"),e.data}).catch(function(e){throw de.a.emit("clicker-error",e),e})}(n.all[o].datasetId,o,i)}function updateImageStats(e,t){var r=e.commit,n=e.rootGetters,o=t.imageId,i=t.updateImage,a=void 0===i||i,s=t.updateFigures,c=void 0!==s&&s,u=t.payload,l={imageId:o,props:images_actions_objectSpread({},void 0===u?{}:u)};if(a&&(l.props.updatedAt=new Date),c){var p=n["dataset/figures/orderedFigures"].filter(function(e){return null!=e.classId});l.props.objectsCount=p.length}r(Re,l)}function actions_setImageStatus(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee13(e,t){var r,n,o,i,a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=t.imageId,n=t.status,o=e.commit,i=e.state,a=i.all[r],s.next=5,setImageStatus(a.datasetId,r,n);case 5:o(Re,{imageId:r,props:{reviewStatus:n}});case 6:case"end":return s.stop()}},_callee13)})).apply(this,arguments)}.apply(this,arguments)}function initImages(e,t){return function(){return images_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee14(e,t){var r,n,o,i,a,s,c,u,l;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return r=t.datasetId,n=t.query,o=e.commit,i=e.state,a=castQueryAndProps(n,"query","prop"),s=a.page,c=a.imageId,u=a.filter,s&&o(Ie,s),u&&(l=Object.assign(i.filter,u),o(Ee,l)),p.next=8,actions_getImages(e,{datasetId:r,imageId:c,updateUrl:!1});case 8:case"end":return p.stop()}},_callee14)})).apply(this,arguments)}.apply(this,arguments)}function images_mutations_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mutations_updateUrl(e,t){return"".concat(e,"?").concat(t.createdAt.getTime())}r("406d0451405e28c4822f"),r("a3649be5e6a962a5926d");var Me,ze=(images_mutations_defineProperty(Ge={},ge,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.values(t).forEach(function(e){Object(I.i)(_.a.set,e,{area:parseInt(e.area,10),url:mutations_updateUrl(e.pathOriginal,e),previewUrl:e.pathOriginal.startsWith("/remote")?null:mutations_updateUrl("/previews/x0.15,jpeg,q20".concat(e.pathOriginal),e),source:null})}),e.all=t}),images_mutations_defineProperty(Ge,he,function(e){e.loading=!0}),images_mutations_defineProperty(Ge,be,function(e,t){var r=t.imageId,n=t.data;e.loading=!1,Object(I.i)(_.a.set,e.all[r],n)}),images_mutations_defineProperty(Ge,ve,function(e,t){e.loading=!1,g.a.error(t)}),images_mutations_defineProperty(Ge,ke,function(e){e.listLoading=!0}),images_mutations_defineProperty(Ge,Ae,function(e){e.listLoading=!1}),images_mutations_defineProperty(Ge,Fe,function(e,t){e.listLoading=!1,g.a.error(t)}),images_mutations_defineProperty(Ge,me,function(e,t){e.selected=t}),images_mutations_defineProperty(Ge,Te,function(e,t){var r=t.imageId,n=t.tagId,o=t.value,i=e.all[r];i.tags.push({id:n,value:o}),i.updatedAt=new Date}),images_mutations_defineProperty(Ge,Se,function(e,t){var r=t.imageId,n=t.tagId,o=t.value,i=e.all[r];i.tags.find(function(e){return e.id===n}).value=o,i.updatedAt=new Date}),images_mutations_defineProperty(Ge,je,function(e,t){var r=t.imageId,n=t.tagId,o=e.all[r];_.a.set(o,"tags",o.tags.filter(function(e){return e.id!==n})),o.updatedAt=new Date}),images_mutations_defineProperty(Ge,we,function(e,t){var r=t.imageId,n=t.description,o=e.all[r];o.description=n,o.updatedAt=new Date}),images_mutations_defineProperty(Ge,Oe,function(e,t){t.forEach(function(t){return _.a.delete(e.all,t)})}),images_mutations_defineProperty(Ge,Pe,function(e){e.loading=!0}),images_mutations_defineProperty(Ge,Ie,function(e,t){e.page=t}),images_mutations_defineProperty(Ge,Ee,function(e,t){e.filter=t}),images_mutations_defineProperty(Ge,Ce,function(e,t){e.filters=t}),images_mutations_defineProperty(Ge,xe,function(e,t){e.totalFiltered=t}),images_mutations_defineProperty(Ge,"SET_TAGS",function(e,t){var r;(r=e.tags).push.apply(r,function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t))}),images_mutations_defineProperty(Ge,Re,function(e,t){var r=t.imageId,n=t.props;Object(I.i)(_.a.set,e.all[r],n)}),Ge),Ne={namespaced:!0,state:{listLoading:!1,loading:!1,all:Object.create(null),selected:null,totalFiltered:null,page:1,perPage:50,filters:[],filter:{name:"",orderBy:"title",objectsCount:"any",objectsCountFrom:0,objectsCountTo:999,classes:[],imageTags:[],figureTags:[]}},getters:fe,actions:s,mutations:ze},Ue={list:function(e){return Object(M.orderBy)(Object.values(e.all),["priority","title"]).map(function(e){return e.id})},currentClass:function(e){return e.all[e.selected]},orderedClasses:function(e,t){return t.list.map(function(t){return e.all[t]})},toolClasses:function(e,t,r,n){return function(o){var i=r.tools.all[o];if(!i||!i.shapes)return[];var a=n["dataset/figures/currentFigure"],s=t.orderedClasses;return a&&null!=a.classId&&n["tools/isEditMode"]&&(s=s.filter(function(t){return t.shape===e.all[a.classId].shape})),s.filter(function(e){return i.shapes.includes(e.shape)})}}},He="UPDATE_CLASSES",Ve="SET_CLASS",Ye="CREATE_CLASS";function createClass(e,t){return T.a.post("/projects/".concat(e,"/classes"),t).then(function(e){return e.data})}function classes_actions_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){classes_actions_defineProperty(e,t,r[t])})}return e}function classes_actions_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function classes_actions_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function setClass(e,t){var r=e.commit,n=e.dispatch,o=e.rootGetters;if(null==t){var i=o["dataset/figures/currentFigure"];i&&n("dataset/figures/hideFigurePoints",{figureId:i.id},{root:!0})}r(Ve,t)}function toggleClass(e){var t=e.state,r=e.rootGetters["dataset/figures/currentFigure"];return setClass(e,null==t.selected&&r?r.classId:null)}function updateClasses(e,t){var r=t.data,n=e.commit,o=e.state,i=e.getters;n(He,r),null==o.selected&&i.list.length&&setClass(e,i.list[0])}function actions_createClass(e,t){return function(){var e;return e=regeneratorRuntime.mark(function _callee(e,t){var r,n,o,i,a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=e.commit,n=e.rootState,o=n.dataset.projectId,s.next=4,createClass(o,t);case 4:i=s.sent,a=i.id,r(Ye,classes_actions_objectSpread({id:a},t)),setClass(e,a);case 8:case"end":return s.stop()}},_callee)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){classes_actions_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){classes_actions_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}.apply(this,arguments)}.apply(this,arguments)}function classes_mutations_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Je=(classes_mutations_defineProperty(Me={},He,function(e,t){e.all=t}),classes_mutations_defineProperty(Me,Ve,function(e,t){e.selected=t}),classes_mutations_defineProperty(Me,Ye,function(e,t){_.a.set(e.all,t.id,t)}),Me),We={namespaced:!0,state:{cached:!1,loading:!1,id:null,title:"",projectId:null,projectTitle:"",settings:{},stats:null,groupId:null,workspaceId:null},actions:a,mutations:ue,getters:pe,modules:{images:Ne,classes:{namespaced:!0,state:{loading:!1,all:Object.create(null),selected:null},getters:Ue,actions:c,mutations:Je},figures:r("b9eb131367e97ba69b9f").b}},qe=(r("1f114f89726caab4cfd9"),1);function tools_getters_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ze,$e={list:function(e){return Object.values(e.all).map(function(e){return e.id})},currentTool:function(e){return e.all[e.selected]},orderedTools:function(e,t){return t.list.map(function(t){return e.all[t]})},orderedToolsMapByShape:function(e,t){return t.orderedTools.reduce(function(e,t){return t.shapes&&t.shapes.length&&t.shapes.forEach(function(r){var n=e.get(r);n?n.push(t.id):e.set(r,[t.id])}),e},new Map)},defaultToolByShape:function(e){var t;return tools_getters_defineProperty(t={},z.SHAPE_TYPES.POINT,e.all.point.id),tools_getters_defineProperty(t,z.SHAPE_TYPES.LINE,e.all.polyline.id),tools_getters_defineProperty(t,z.SHAPE_TYPES.RECTANGLE,e.all.rectangle.id),tools_getters_defineProperty(t,z.SHAPE_TYPES.POLYGON,e.all.polygon.id),tools_getters_defineProperty(t,z.SHAPE_TYPES.BITMAP,e.all.bitmap.id),tools_getters_defineProperty(t,z.SHAPE_TYPES.GRAPH,e.all.graph.id),t},isCreateTool:function(e){return function(t){return(e.all[t].flags&qe)===qe}},isEditTool:function(e){return function(t){return 2==(2&e.all[t].flags)}},isToolAlwaysReady:function(e){return function(t){return 3==(3&e.all[t].flags)}},isToolDisabled:function(e,t,r,n){return function(o){var i,a=!1;switch(o){case e.all.select.id:case e.all.moveFigures.id:a=n["dataset/images/isImageEmpty"];break;case e.all.smart.id:a=!n["settings/isSmartToolAvailable"];break;default:a=!1}return!a&&t.isCreateTool(o)&&r.app.job&&(a=!(null===(i=n["dataset/classes/toolClasses"](o))||void 0===i?void 0:i.length)),a}},createTools:function(e,t){return t.orderedTools.filter(function(e){var t=e.flags,r=void 0===t?null:t;return null!==r&&(r&qe)===qe})},createToolsSet:function(e,t){return new Set(t.createTools.map(function(e){return e.id}))},editTools:function(e,t){return t.orderedTools.filter(function(e){var t=e.flags,r=void 0===t?null:t;return null!==r&&2==(2&r)})},editToolsSet:function(e,t){return new Set(t.editTools.map(function(e){return e.id}))},isCreateMode:function(e,t,r,n){var o=t.currentTool;if(!o||!o.shapes)return!1;var i=n["dataset/figures/currentFigure"],a=n["dataset/classes/currentClass"];return!(!a&&(!i||null==i.classId)||a&&i||a&&!o.shapes.includes(a.shape))&&t.createToolsSet.has(o.id)},isEditMode:function(e,t,r,n){var o=t.currentTool;return!!o&&!!n["dataset/figures/currentFigure"]&&t.editToolsSet.has(o.id)},selectionCutClasses:function(e,t,r,n){return n["dataset/classes/orderedClasses"].filter(function(e){return e.shape===z.SHAPE_TYPES.BITMAP})},selectionCutFigures:function(e,t,r,n){var o=n["dataset/figures/currentFigure"];if(!o)return[];var i=r.dataset.classes.all;return n["dataset/figures/orderedFiguresWithoutHoles"].filter(function(e){return e.visible&&e.id!==o.id&&i[e.classId].shape===z.SHAPE_TYPES.BITMAP})}},Qe="SET_TOOL",Ke="UPDATE_TOOL",Xe="UPDATE_TOOL_OPTION",et="UPDATE_TOOL_STATE";function tools_actions_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tools_actions_defineProperty(e,t,r[t])})}return e}function tools_actions_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function applyToolVisuals(e){var t=e.dispatch,r=e.state,n=e.getters,o=e.rootGetters;if(r.selected)if(r.selected===r.all.moveScene.id)o["dataset/figures/currentFigure"]&&t("dataset/figures/setSelectedFigure",null,{root:!0}),t("dataset/figures/hideFiguresPoints",o["dataset/figures/orderedFigures"],{root:!0});else if(n.isCreateMode)t("dataset/figures/hideFiguresPoints",o["dataset/figures/orderedFigures"],{root:!0});else if(n.isEditMode){var i=o["dataset/figures/currentFigure"];if(i&&(t("dataset/figures/hideFiguresPoints",o["dataset/figures/orderedFigures"],{root:!0}),i.visible)){var a=!0;"showPoints"in n.currentTool.state&&!n.currentTool.state.showPoints&&(a=!1),a&&t("dataset/figures/showFigurePoints",{figureId:i.id},{root:!0})}}}function setToolOption(e,t){var r=e.commit,n=t.toolId,o=t.optionId;r(Ke,{toolId:n,value:{option:o}})}function setCurrentToolOption(e,t){return setToolOption(e,{toolId:e.state.selected,optionId:t})}function setToolOptionReady(e,t){var r=e.commit,n=t.toolId,o=t.value;r(Xe,{toolId:n,value:{ready:o}})}function setToolReady(e,t){var r=t.toolId,n=t.value,o=e.commit,i=e.state.all[r];i.ready!==n&&(o(Ke,{toolId:r,value:{ready:n}}),n&&i.defaultOption&&setToolOption(e,{toolId:r,optionId:i.defaultOption}))}function updateToolState(e,t){var r=t.toolId,n=t.value,o=e.commit,i=e.dispatch,a=e.rootState,s=e.rootGetters;o(et,{toolId:r,value:n}),applyToolVisuals(e);var c=a.dataset.figures.selected;i("tags/selectTag",{tag:s["dataset/figures/canHaveTags"](c)?{id:null,figureId:c,isPlus:!0}:null,options:{changeTool:!1}},{root:!0})}function updateTool(e,t){var r=t.toolId,n=t.value;(0,e.commit)(Ke,{toolId:r,value:n}),applyToolVisuals(e)}function resetToolState(e,t){var r=e.state,n=e.getters,o=r.all[t];o.state.drawTool&&(o.state.drawTool.enabled=!1);var i=Object(M.cloneDeep)(tools_actions_objectSpread({},o.defaultState,Object(M.pick)(o.state,["brushSize","showPoints","eraseUnderlyingPixels"])));setToolOption(e,{toolId:t,optionId:null}),setToolReady(e,{toolId:t,value:!1}),n.isToolAlwaysReady(t)&&setToolReady(e,{toolId:t,value:!0}),updateToolState(e,{toolId:t,value:i})}function resetToolsStates(e){var t=e.state;Object.values(t.all).forEach(function(t){return resetToolState(e,t.id)})}function setDefaultToolClass(e){var t=e.getters,r=e.dispatch,n=e.rootGetters,o=n["dataset/classes/toolClasses"](t.currentTool.id);if(o.length&&(t.isCreateTool(t.currentTool.id)||t.isEditTool(t.currentTool.id))){var i=n["dataset/classes/currentClass"];if(!i||!o.find(function(e){return e.id===i.id})){var a=n["dataset/figures/currentFigure"];r("dataset/classes/setClass",a?a.classId:o[0].id,{root:!0})}}}function setTool(e,t){var r=e.commit,n=e.state,o=e.getters,i=e.dispatch,a=e.rootState,s=e.rootGetters,c=t.toolId,u=t.options,l=void 0===u?{}:u,p=a.user,f=p.acl,d=p.roles,_=tools_actions_objectSpread({value:z.ACL_ACTIONS.FIGURES.UPDATE},Object(M.pick)(a.dataset,["workspaceId","projectId","datasetId"]),{teamId:a.dataset.groupId});if(Object(N.a)(f,d,_)||(c=n.all.moveScene.id),c&&i("settings/setLastTool",c,{root:!0}),(null==l?void 0:l.preserveTag)||i("tags/selectTag",{tag:null},{root:!0}),n.selected===c)return applyToolVisuals(e),void(n.all.tagFigures.id!==c||(null==l?void 0:l.preserveTag)||i("tags/selectTag",{tag:null},{root:!0}));if(s["dataset/figures/hasFiguresBeingCreated"])i("app/showNotification","Some objects are still being created. Please, wait",{root:!0});else{if(o.isEditMode){var y=s["dataset/figures/currentFigure"],g=null!=y.classId?a.dataset.classes.all[y.classId].shape:z.SHAPE_TYPES.POLYGON,h=n.all[c];h&&h.shapes&&h.shapes.includes(g)||i("dataset/figures/setSelectedFigure",null,{root:!0})}o.currentTool&&(setToolOption(e,{toolId:o.currentTool.id,optionId:null}),setToolReady(e,{toolId:o.currentTool.id,value:!1})),r(Qe,c),o.currentTool&&(o.isToolAlwaysReady(o.currentTool.id)&&setToolReady(e,{toolId:o.currentTool.id,value:!0}),setDefaultToolClass(e)),applyToolVisuals(e)}}function setNewMode(e){var t=e.getters,r=e.dispatch,n=e.rootGetters,o=t.currentTool;if(o){var i=n["dataset/figures/currentFigure"];i&&(r("dataset/figures/setSelectedFigure",null==i.classId?i.instanceId:null,{root:!0}),applyToolVisuals(e),resetToolState(e,o.id),r("dataset/classes/setClass",i.classId,{root:!0}))}}function setCurrentToolOptionReady(e,t){return setToolOption(e,{toolId:e.state.selected,value:t})}function setCurrentToolReady(e,t){return setToolReady(e,{toolId:e.state.selected,value:t})}function tools_mutations_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tt,rt,nt=(tools_mutations_defineProperty(Ze={},Qe,function(e,t){e.selected=t}),tools_mutations_defineProperty(Ze,Ke,function(e,t){var r=t.toolId,n=t.value;Object(I.i)(_.a.set,e.all[r],n)}),tools_mutations_defineProperty(Ze,Xe,function(e,t){var r=t.toolId,n=t.value;Object(I.i)(_.a.set,e.all[r].option,n)}),tools_mutations_defineProperty(Ze,et,function(e,t){var r=t.toolId,n=t.value;Object(I.i)(_.a.set,e.all[r].state,n)}),Ze);function tools_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ot={all:(rt={moveScene:{title:"Move scene"},moveFigures:{title:"Move figures"},select:{title:"Select figure"},tagFigures:{title:"Tag figures"}},tools_defineProperty(rt,z.FIGURES_TOOLS.POLYGON,{title:"Polygon",flags:3|qe,shapes:[z.SHAPE_TYPES.POLYGON],defaultOption:z.POLYGON_TOOL_OPTIONS.CONSECUTIVE,options:(tt={},tools_defineProperty(tt,z.POLYGON_TOOL_OPTIONS.CONSECUTIVE,{}),tools_defineProperty(tt,z.POLYGON_TOOL_OPTIONS.CLOSESTSEGMENT,{}),tools_defineProperty(tt,z.POLYGON_TOOL_OPTIONS.POINTSERASER,{}),tools_defineProperty(tt,z.POLYGON_TOOL_OPTIONS.POINTSORDER,{}),tt)}),tools_defineProperty(rt,z.FIGURES_TOOLS.GRAPH,{title:"Graph",flags:2|qe,defaultOption:"pointsMove",options:{pointsMove:{},pointsErase:{}},shapes:[z.SHAPE_TYPES.GRAPH]}),tools_defineProperty(rt,z.FIGURES_TOOLS.BITMAP,{title:"Bitmap",flags:3|qe,shapes:[z.SHAPE_TYPES.BITMAP],state:{brushSize:5,eraseUnderlyingPixels:!1,accepted:null},defaultOption:"brushCreate",options:{brushCreate:{},brushEraser:{},bucketFill:{},fill:{},crop:{},cut:{flags:2|qe,shapes:[z.SHAPE_TYPES.BITMAP]}}}),tools_defineProperty(rt,z.FIGURES_TOOLS.RECTANGLE,{title:"Rectangle",flags:3|qe,shapes:[z.SHAPE_TYPES.RECTANGLE]}),tools_defineProperty(rt,z.FIGURES_TOOLS.POLYLINE,{title:"Polyline",flags:3|qe,shapes:[z.SHAPE_TYPES.LINE],defaultOption:"consecutive",options:{consecutive:{},closestSegment:{},pointsEraser:{}}}),tools_defineProperty(rt,z.FIGURES_TOOLS.POINT,{title:"Point",flags:3|qe,shapes:[z.SHAPE_TYPES.POINT]}),tools_defineProperty(rt,z.FIGURES_TOOLS.SMART,{title:"Smart",flags:2|qe,shapes:[z.SHAPE_TYPES.BITMAP],state:{brushSize:5},defaultOption:"pointPositive",options:{brushPositive:{},brushNegative:{},brushEraser:{},pointPositive:{},pointNegative:{},pointsEraser:{}}}),rt),selected:null,default:null};Object(le.c)(ot.all,"id",function(e){e.ready=!1,e.state=e.state||{},e.shapes&&e.shapes.some(function(e){return[z.SHAPE_TYPES.LINE,z.SHAPE_TYPES.POLYGON,z.SHAPE_TYPES.RECTANGLE].includes(e)})&&(e.state.showPoints=!0),e.defaultState=Object(M.cloneDeep)(e.state),e.options&&(e.option||(e.option=null),Object(le.c)(e.options,"id",function(e){e.ready=!1}))}),ot.default=ot.all.moveScene.id;var it={namespaced:!0,state:ot,getters:$e,actions:u,mutations:nt};function tags_getters_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tags_getters_defineProperty(e,t,r[t])})}return e}function tags_getters_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var at,st={tagsList:function(e){return Object(M.orderBy)(Object.values(e.all),["title"]).map(function(e){return e.id})},orderedTags:function(e,t){return t.tagsList.map(function(t){return e.all[t]})},generalTags:function(e,t){return t.orderedTags.filter(function(e){return!e.settings.applicableType||e.settings.applicableType===z.TAG_APPLICABLE_TYPES.ALL})},imagesTags:function(e,t){return t.generalTags.concat(t.orderedTags.filter(function(e){return e.settings.applicableType===z.TAG_APPLICABLE_TYPES.IMAGES_ONLY}))},figuresTags:function(e,t){return t.generalTags.concat(t.orderedTags.filter(function(e){return e.settings.applicableType===z.TAG_APPLICABLE_TYPES.OBJECTS_ONLY}))},tagsWithHotkeys:function(e,t){return t.orderedTags.filter(function(e){return e.hotkey})},tagsHotkeys:function(e,t){return Object(M.keyBy)(t.tagsWithHotkeys,"hotkey")},selectedTagFigure:function(e,t,r){var n;if(!(null===(n=e.selected)||void 0===n?void 0:n.figureId))return null;var o=r.dataset.figures.all[e.selected.figureId];return o?tags_getters_objectSpread({},o,{tags:o.tags.map(function(e){return tags_getters_objectSpread({},r.tags.all[e.id],e)})}):null}},ct="UPDATE_TAGS",ut="CREATE_TAG_REQUEST",lt="CREATE_TAG_SUCCESS",pt="CREATE_TAG_FAILURE",ft="UPDATE_TAG",dt="DELETE_TAG",_t="SELECT_TAG",yt="HIGHLIGHT_TAG_PANEL";function createTag(e,t){return T.a.post("/projects/".concat(e,"/tags"),t).then(function(e){return e.data})}function api_updateTag(e,t,r){return T.a.post("/projects/".concat(e,"/tags/").concat(t),r).then(function(e){return e.data})}function deleteTag(e,t,r){return T.a.delete("/projects/".concat(e,"/tags/").concat(t),{params:{type:r}}).then(function(e){return e.data})}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function tags_actions_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tags_actions_defineProperty(e,t,r[t])})}return e}function tags_actions_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function actions_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function tags_actions_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function tags_actions_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){tags_actions_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){tags_actions_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function actions_getTags(e){return function(){return tags_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.commit,r=e.rootState,i.next=3,a=r.dataset.projectId,T.a.get("/projects/".concat(a,"/tags")).then(function(e){return e.data});case 3:n=i.sent,o=new Set(actions_toConsumableArray(r.dataset.settings.objectTagsDashedBorders)),t(ct,{tags:n.map(function(e){return tags_actions_objectSpread({},e,{dashed:o.has(e.title)})})});case 6:case"end":return i.stop()}var a},_callee)})).apply(this,arguments)}.apply(this,arguments)}function actions_createTag(e,t){return function(){return tags_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.commit,n=e.rootState,r(ut),a.prev=2,o=n.dataset.projectId,a.next=6,createTag(o,t);case 6:return i=a.sent,r(lt),a.next=10,actions_getTags(e);case 10:return a.abrupt("return",i);case 13:throw a.prev=13,a.t0=a.catch(2),r(pt,a.t0),a.t0;case 17:case"end":return a.stop()}},_callee2,null,[[2,13]])})).apply(this,arguments)}.apply(this,arguments)}function tags_actions_updateTag(e,t){return function(){return tags_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e,t){var r,n,o,i,a,s,c,u,l,p;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=e.commit,n=e.dispatch,o=e.rootState,i=o.dataset,a=i.projectId,s=i.id,c=o.dataset.images.selected,u=t.type,l=t.forceSave,p=_objectWithoutProperties(t,["type","forceSave"]),f.next=6,api_updateTag(a,t.id,t);case 6:if(r(ft,{tagId:p.id,data:p}),l){f.next=9;break}return f.abrupt("return");case 9:if(u!==z.TAG_TYPES.IMAGES){f.next=16;break}return f.next=12,n("dataset/images/setImage",{imageId:null},{root:!0});case 12:return f.next=14,n("dataset/images/getImages",{datasetId:s,imageId:c,updateUrl:!1},{root:!0});case 14:f.next=18;break;case 16:return f.next=18,n("dataset/figures/getFigures",c,{root:!0});case 18:case"end":return f.stop()}},_callee3)})).apply(this,arguments)}.apply(this,arguments)}function actions_deleteTag(e,t){return function(){return tags_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.commit,n=e.dispatch,o=e.rootState,i=o.dataset.projectId,a.next=4,deleteTag(i,t.tagId,t.type);case 4:t.type===z.TAG_TYPES.IMAGES?n("dataset/images/removeTagFromAll",{tagId:t.tagId},{root:!0}):n("dataset/figures/removeTagFromAll",{tagId:t.tagId},{root:!0}),r(dt,t);case 6:case"end":return a.stop()}},_callee4)})).apply(this,arguments)}.apply(this,arguments)}function selectTag(e,t){return function(){return tags_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee5(e,t){var r,n,o,i,a,s,c,u;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=e.commit,n=e.dispatch,o=e.rootState,i=t.tag,a=t.options,s=(void 0===a?{}:a).changeTool,c=void 0===s||s,r(_t,i),i&&c&&(u={toolId:o.tools.all.tagFigures.id,options:{preserveTag:!0}},n("tools/setTool",u,{root:!0}));case 5:case"end":return l.stop()}},_callee5)})).apply(this,arguments)}.apply(this,arguments)}function highlightTagPanel(e,t){return function(){return tags_actions_asyncToGenerator(regeneratorRuntime.mark(function _callee6(e,t){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(0,e.commit)(yt,tags_actions_objectSpread({},t,{timestamp:Date.now()}));case 2:case"end":return r.stop()}},_callee6)})).apply(this,arguments)}.apply(this,arguments)}function updateDashedTags(e,t){var r=e.getters,n=new Set(actions_toConsumableArray(t));r.orderedTags.forEach(function(e){var t=n.has(e.title);t&&!e.dashed?e.dashed=!0:!t&&e.dashed&&(e.dashed=!1)})}function tags_mutations_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gt=(tags_mutations_defineProperty(at={},ct,function(e,t){var r=t.tags;e.all=Object(M.keyBy)(r,"id")}),tags_mutations_defineProperty(at,ft,function(e,t){var r=t.tagId,n=t.data;Object(I.i)(_.a.set,e.all[r],n)}),tags_mutations_defineProperty(at,dt,function(e,t){var r=t.tagId;_.a.delete(e.all,r)}),tags_mutations_defineProperty(at,ut,function(e){e.loading=!0}),tags_mutations_defineProperty(at,lt,function(e){e.loading=!1}),tags_mutations_defineProperty(at,pt,function(e,t){e.loading=!1,g.a.error(t)}),tags_mutations_defineProperty(at,_t,function(e,t){e.selected=t}),tags_mutations_defineProperty(at,yt,function(e,t){e.highlighted=t}),at),ht={namespaced:!0,state:{loading:!1,all:Object.create(null),selected:null,highlighted:null},getters:st,actions:l,mutations:gt},bt="SET_CANVAS";function setCanvas(e,t){(0,e.commit)(bt,t)}var vt,mt,Ot,Pt={namespaced:!0,state:{canvas:null},actions:p,mutations:(Ot=function(e,t){e.canvas=t},(mt=bt)in(vt={})?Object.defineProperty(vt,mt,{value:Ot,enumerable:!0,configurable:!0,writable:!0}):vt[mt]=Ot,vt),getters:{}},Tt="SET_LICENSE";function license_actions_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function actions_getLicense(e){return function(){var e;return e=regeneratorRuntime.mark(function _callee(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.commit,n.next=3,T.a.get("/license").then(function(e){return e.data});case 3:r=n.sent,g.a.updateTags({company:r.title}),t(Tt,r);case 6:case"end":return n.stop()}},_callee)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){license_actions_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){license_actions_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}.apply(this,arguments)}.apply(this,arguments)}var St={namespaced:!0,state:{title:""},actions:f,mutations:function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},Tt,function(e,t){Object.assign(e,t)}),getters:{}};_.a.use(y.a);var jt,wt=new y.a.Store({modules:{app:C,user:D,settings:te,dataset:We,tools:it,tags:ht,scene:Pt,license:St}});jt=wt.dispatch,wt.handler={},wt.dispatch=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=jt.apply(wt,[e].concat(r)),i=wt.handler[e]||{},a=i.onFailure||wt.handler.onFailure,s=i.onSuccess||wt.handler.onSuccess;return o.then(function(t){return Promise.resolve(s?s.apply(void 0,[t,e].concat(r)):t)}).catch(function(t){return Promise.resolve(a?a.apply(void 0,[t,e].concat(r)):Promise.reject(t))}),o},wt.handler.onFailure=function(e,t,r){g.a.error(e,{action:t,params:r})},t.default=wt},"3d4013cb89bb50c024c0":function(e,t){},"3dfc22d11ebc32def4d9":function(e,t,r){},"3e184cdc0af6f0ad3e63":function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("47e89aed260415009385"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e");var n=r("f6f559428d7ae5cba635");function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=Object(n.a)(function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_shouldDraw";return"function"===_typeof(r.value)?_objectSpread({},r,{value:function(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];(e=r.value).call.apply(e,[this].concat(o)),this[n]=!0}}):r.set?_objectSpread({},r,{set:function(e){r.set.call(this,e),this[n]=!0}}):r});r.d(t,"a",function(){return o})},"3efd9477073b176f8641":function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n=r("c90887849e6e38ab5d76"),o={login:n.default.string().trim().allow(""),page:n.default.number().positive(),pageSize:n.default.number().positive(),sort:n.default.string().trim(),order:n.default.string().trim().valid(["asc","desc"])};n.default.object().keys(o)},"3fae4fbe6eab0047c868":function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("0ed696ba8380d46a2924"),r("b42383ffd481a2f01f84");var n=r("9e0829ebb5f4d9754370"),o=r("7ee98bac1562359c81b0");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function PointFigure(){return function(e,t){if(!(e instanceof PointFigure))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,_getPrototypeOf(PointFigure).apply(this,arguments))}var t,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PointFigure,o.a),t=PointFigure,i=[{key:"_getArea",value:function(e){return e.length}},{key:"isValid",value:function(e){return 1===e.points.length}},{key:"type",get:function(){return n.SHAPE_TYPES.POINT}},{key:"maxPoints",get:function(){return 1}}],(r=[{key:"isPointWithin",value:function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(this.points,1)[0];return e.left===t.left&&e.top===t.top}},{key:"getClosestPoint",value:function(){return this.points[0]}}])&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),PointFigure}()},"407da70d07943b917669":function(e,t,r){},"41b11af1442716978a08":function(e,t,r){"use strict";r.d(t,"d",function(){return getChanges}),r.d(t,"f",function(){return getObjChanges}),r.d(t,"i",function(){return reactify}),r.d(t,"h",function(){return loadImageAsCanvas}),r.d(t,"j",function(){return saveBlob}),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("92a1c426d3e09d462222"),r("132a80cfdf396f588204"),r("2810e53ad7174f3c046d"),r("afab45c263329fc2e21e"),r("87997867a0dfb75f73e8"),r("47e89aed260415009385"),r("e4048f669033667d4d6a"),r("766552cace39611f2850"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df");var n=r("510c97a2832dee6670a2"),o=r("725e816b46da86ed4ba1");function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function runComparator(e,t,r){if(!e)return t===r;if("string"===_typeof(e))return t[e]===r[e];for(var n=arguments.length,o=new Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];return e.apply(void 0,[t,r].concat(o))}function getChanges(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=[],a=[],s=[],c=[],u=new Set,l=o?new WeakMap:null;return e.forEach(function(e,o){var c=t.findIndex(function(t,n){for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return runComparator.apply(void 0,[r,e,t,n].concat(i))});-1!==c?(runComparator(n,e,t[c],c,t)?(a.push(e),u.add(c)):s.push(e),l&&l.set(e,{before:c,after:o})):i.push(e)}),t.forEach(function(t,n){-1!==e.findIndex(function(e,n){for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return runComparator.apply(void 0,[r,t,e,n].concat(i))})||u.has(n)||(c.push(t),l&&l.set(t,{before:n,after:-1}))}),{added:i,changed:a,unchanged:s,removed:c,indexMap:l,isChanged:(i.length||a.length||c.length)>0}}function getObjChanges(e){for(var t=Object.keys(e),r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.reduce(function(r,n){return t.forEach(function(t){if(t in n){var o=n[t];e[t]!==o&&(r[t]=o)}}),r},{})}function reactify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=Object.assign({setter:null,include:new Set,exclude:new Set},"function"==typeof e?{setter:e}:e);if("function"!=typeof r.setter)throw new TypeError("setter has to be a function!");r.include&&(r.include=new Set(r.include)),r.exclude&&(r.exclude=new Set(r.exclude));for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];o.forEach(function(e){return Object.keys(e).forEach(function(n){r.include.size&&!r.include.has(n)||r.exclude.has(n)||r.setter(t,n,e[n])})})}function loadImage(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(r,n){var o=e;t&&!o.includes("?")&&(o+="?".concat((new Date).getTime()));var i=new Image;i.crossOrigin="anonymous",i.onload=function(){return i.onerror=null,i.onload=null,URL.revokeObjectURL(o),r(i)},i.onerror=function(e){i.onload=null,i.onerror=null,URL.revokeObjectURL(o);var t=new Error("Couldn't load the image");return t.event=e,n(t)},i.src=o})}function loadImageAsCanvas(e){return function(){return function(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}(regeneratorRuntime.mark(function _callee3(e){var t,r,o,i,a,s,c,u,l,p,f=arguments;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t=f.length>1&&void 0!==f[1]?f[1]:{},r=t.force,o=t.exifOrientation,d.next=4,loadImage(e,r);case 4:return i=d.sent,(a=document.createElement("canvas")).width=i.width,a.height=i.height,s=0,c=0,null!=o&&(u=Object(n.a)(a,o))&&(l=u.sourceX,s=void 0===l?0:l,p=u.sourceY,c=void 0===p?0:p),a.getContext("2d").drawImage(i,s,c),d.abrupt("return",a);case 14:case"end":return d.stop()}},_callee3)})).apply(this,arguments)}.apply(this,arguments)}function saveBlob(e,t){var r=window.URL.createObjectURL(e),n=document.createElement("a");n.style="display: none",n.href=r,n.download=t,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n)}r.d(t,"a",function(){return o.a}),r.d(t,"b",function(){return o.b}),r.d(t,"c",function(){return o.c}),r.d(t,"e",function(){return o.d}),r.d(t,"g",function(){return o.e})},"4248c8be0acb128176c6":function(e,t,r){"use strict";var n=r("e85b5d25c75e9e24cbe5");r.n(n).a},"42e474200ac14c22cf73":function(e,t,r){},"43f03bbf7c8e2a7f6ddf":function(e,t){},"4407354fa371dea5370e":function(e,t,r){"use strict";var n=r("11e8651377d3e2bef90a");r.n(n).a},"4441bda630e3fa4f2e06":function(e,t,r){"use strict";var n=r("38b22dc8e34e22abadab");r.n(n).a},"4609f68f0b70edf06536":function(e,t){},"468684a604d48426a9b7":function(e,t,r){"use strict";var n=r("11d6ccaff6c0078a0677");r.n(n).a},"473978a80f8ce64663cb":function(e,t,r){},"4a8b63e925f44201b374":function(e,t,r){"use strict";r.r(t),r("afab45c263329fc2e21e"),r("2810e53ad7174f3c046d"),r("56d77e238a908801bf0f"),window.sourceMapSupport.install();var n,o=r("8cdb38b7b2d673f491ab"),i=r.n(o),a=r("214eccfc06814c553a3c"),s=r.n(a);function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}window.Promise=i.a,t.default=(n=regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.get("/api/clicker").then(function(e){return e.data});case 3:window.config=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),window.location.href="/503";case 9:r("b39c9bc5fb6c910e052a");case 10:case"end":return e.stop()}},_callee,null,[[0,6]])}),function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function _next(e){asyncGeneratorStep(i,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,r,o,_next,_throw,"throw",e)}_next(void 0)})})()},"4b6b8f6f6f4cfe8a8e42":function(e,t,r){},"4d48788afc3b8f12d72f":function(e,t,r){"use strict";var n=r("0afdb593322eb2c0f057");r.n(n).a},"4ea367e5137f9cc516c1":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="32" height="32" viewBox="0 0 24 24" fill=""><path d="M16,2V8H17.08L14.95,13H14.26L12,9.97V5H6V11H6.91L4.88,16H2V22H8V16H7.04L9.07,11H10.27L12,13.32V19H18V13H17.12L19.25,8H22V2M18,4H20V6H18M8,7H10V9H8M14,15H16V17H14M4,18H6V20H4"/></svg>'},"4ed4f586f2caef2fd7a7":function(e,t,r){},"4edf36051f647444455a":function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r("364b250cfb7cb23af2d1"),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("b42383ffd481a2f01f84"),r("4ee649c87692c7abb6dd"),r("0ed696ba8380d46a2924");var n=r("bd2555d9b4311aab9971"),o=r("01d16a391b82cbd5b98a");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toArray(e){return function(e){if(Array.isArray(e))return e}(e)||_iterableToArray(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||_iterableToArray(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function roundRect(e){e.left=Math.round(e.left),e.top=Math.round(e.top),e.right=Math.round(e.right),e.bottom=Math.round(e.bottom)}var i=function(e){function Rect(){var e,t,r;!function(e,t){if(!(e instanceof Rect))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=_getPrototypeOf(Rect)).call.apply(e,[this].concat(o)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(this):r,_defineProperty(_assertThisInitialized(t),"_left",0),_defineProperty(_assertThisInitialized(t),"_top",0),_defineProperty(_assertThisInitialized(t),"_right",0),_defineProperty(_assertThisInitialized(t),"_bottom",0),_defineProperty(_assertThisInitialized(t),"_width",0),_defineProperty(_assertThisInitialized(t),"_height",0),_defineProperty(_assertThisInitialized(t),"_pixelLeft",0),_defineProperty(_assertThisInitialized(t),"_pixelTop",0),_defineProperty(_assertThisInitialized(t),"_pixelRight",0),_defineProperty(_assertThisInitialized(t),"_pixelBottom",0),_defineProperty(_assertThisInitialized(t),"_pixelWidth",0),_defineProperty(_assertThisInitialized(t),"_pixelHeight",0),_defineProperty(_assertThisInitialized(t),"_color",""),_defineProperty(_assertThisInitialized(t),"_border",3),_defineProperty(_assertThisInitialized(t),"_visible",!1),t}var t,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Rect,n.EventEmitter),t=Rect,i=[{key:"diffRect",value:function(e){var t=_toArray(e),r=t[0],n=t.slice(1),o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={left:r.left,top:r.top,right:r.right,bottom:r.bottom};o&&roundRect(i);var a={left:0,top:0,right:0,bottom:0,width:i.right-i.left,height:i.bottom-i.top};return n.forEach(function(e){if(i.left>e.left){var t=o?Math.round(e.left):e.left;a.left=i.left-t}if(i.top>e.top){var r=o?Math.round(e.top):e.top;a.top=i.top-r}if(e.right>i.right){var n=o?Math.round(e.right):e.right;a.right=e.right-n}if(e.bottom>i.bottom){var s=o?Math.round(e.bottom):e.bottom;a.bottom=e.bottom-s}}),a.width+=a.left+a.right,a.height+=a.top+a.bottom,a}},{key:"relativeRects",value:function(e){var t=_toArray(e),r=t[0],n=t.slice(1),o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={left:r.left,top:r.top,right:r.right,bottom:r.bottom,width:0,height:0},a={left:r.left,top:r.top,right:r.right,bottom:r.bottom},s=[];return n.forEach(function(e){e.left<i.left&&(i.left=e.left),e.top<i.top&&(i.top=e.top),e.right>i.right&&(i.right=e.right),e.bottom>i.bottom&&(i.bottom=e.bottom)}),o&&(roundRect(a),roundRect(i)),i.width=i.right-i.left,i.height=i.bottom-i.top,a.left-=i.left,a.top-=i.top,a.right-=i.left,a.bottom-=i.top,n.forEach(function(e){var t={left:e.left,top:e.top,right:e.right,bottom:e.bottom};o&&roundRect(t),s.push({left:t.left-i.left,top:t.top-i.top,right:t.right-i.left,bottom:t.bottom-i.top})}),{origin:a,layout:i,rects:s}}},{key:"getDimensions",value:function(e){var t={left:0,top:0,right:0,bottom:0,width:0,height:0};return e.length&&(t.left=Number.MAX_VALUE,t.top=Number.MAX_VALUE),e.forEach(function(e){e.left<t.left&&(t.left=e.left),e.left>t.right&&(t.right=e.left),e.top<t.top&&(t.top=e.top),e.top>t.bottom&&(t.bottom=e.top)}),t.width=Math.abs(t.right-t.left),t.height=Math.abs(t.bottom-t.top),t}},{key:"_updateFields",get:function(){return["color","border","visible"]}}],(r=[{key:"init",value:function(e){this.update(e)}},{key:"update",value:function(e){Object(o.d)(this,e,this.constructor._updateFields),e.points&&this.updateDimensions(e.points)}},{key:"_draw",value:function(){}},{key:"draw",value:function(){this._draw()}},{key:"updateDimensions",value:function(e){var t=0,r=0,n=0,o=0;if(Array.isArray(e)){var i=this.constructor.getDimensions(e);t=i.left,n=i.top,r=i.right,o=i.bottom}else t=e.left,r=e.right,n=e.top,o=e.bottom;this.left=t,this.right=r,this.top=n,this.bottom=o,this.draw()}},{key:"diffRect",value:function(e,t){return this.constructor.diffRect([this].concat(_toConsumableArray(e)),t)}},{key:"relativeRects",value:function(e,t){return this.constructor.relativeRects([this].concat(_toConsumableArray(e)),t)}},{key:"updateWidth",value:function(){this._width=Math.abs(this.right-this.left),this._pixelWidth=Math.abs(this.pixelRight-this.pixelLeft)}},{key:"updateHeight",value:function(){this._height=Math.abs(this.bottom-this.top),this._pixelHeight=Math.abs(this.pixelBottom-this.pixelTop)}},{key:"clone",value:function(){var e=new this.constructor;return e.copied=!0,e.init(this),e}},{key:"_destroy",value:function(){}},{key:"destroy",value:function(){return this._destroy(),this.emit("destroy"),this.removeAllListeners(),null}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"pixelWidth",get:function(){return this._pixelWidth}},{key:"pixelHeight",get:function(){return this._pixelHeight}},{key:"pixelLeft",get:function(){return this._pixelLeft}},{key:"left",get:function(){return this._left},set:function(e){this._left=e,this._pixelLeft=Math.round(e),this.updateWidth()}},{key:"pixelTop",get:function(){return this._pixelTop}},{key:"top",get:function(){return this._top},set:function(e){this._top=e,this._pixelTop=Math.round(e),this.updateHeight()}},{key:"pixelRight",get:function(){return this._pixelRight}},{key:"right",get:function(){return this._right},set:function(e){this._right=e,this._pixelRight=Math.round(e),this.updateWidth()}},{key:"pixelBottom",get:function(){return this._pixelBottom}},{key:"bottom",get:function(){return this._bottom},set:function(e){this._bottom=e,this._pixelBottom=Math.round(e),this.updateHeight()}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.draw()}},{key:"border",get:function(){return this._border},set:function(e){this._border=e,this.draw()}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=e}}])&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Rect}()},"4edfad59cbb38a1c94a9":function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n=r("c90887849e6e38ab5d76"),o=r("fa4339c8926dcb397641");n.default.object().keys({taskId:o.idSchema,modelId:o.idSchema,projectId:o.idSchema,workspaceId:o.idSchema}).xor("taskId","modelId","projectId","workspaceId").required()},"4f5240ab2841b269e5a3":function(e,t){},"4f78958f3a5e414669f8":function(e,t,r){"use strict";var n=r("c5f782e74c9a8e9671da");r.n(n).a},"503c1434b44b1a06d784":function(e,t){},"50632b5842f0e33f1900":function(e,t){},"510c97a2832dee6670a2":function(e,t,r){"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function isRowBlank(e,t,r){for(var n=0;n<t;++n)if(0!==e[r*t*4+4*n+3])return!1;return!0}function isColumnBlank(e,t,r,n,o){for(var i=n;i<o;++i)if(0!==e[i*t*4+4*r+3])return!1;return!0}function createEmptyCanvas(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=document.createElement("canvas");return r.width=e,r.height=t,r.getContext("2d").clearRect(0,0,r.width,r.height),r}function getRectFromCanvas(e,t){var r=e.getContext("2d").getImageData(t.left,t.top,t.width,t.height),n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n.getContext("2d").putImageData(r,0,0),n}function trimCanvas(e){var t=e;t.getContext("2d")||(t=function(e){var t=e.getContext("webgl"),r=new Uint8Array(t.drawingBufferWidth*t.drawingBufferHeight*4);t.readPixels(0,0,t.drawingBufferWidth,t.drawingBufferHeight,t.RGBA,t.UNSIGNED_BYTE,r);var n=new ImageData(new Uint8ClampedArray(r),t.drawingBufferWidth,t.drawingBufferHeight),o=document.createElement("canvas");o.width=t.drawingBufferWidth,o.height=t.drawingBufferHeight,o.getContext("2d").putImageData(n,0,0);var i=document.createElement("canvas"),a=i.getContext("2d");return i.width=o.width,i.height=o.height,a.scale(1,-1),a.drawImage(o,0,-o.height),i}(t));var r=function(e,t,r){for(var n={left:0,top:0,right:t,bottom:r};n.top<n.bottom&&isRowBlank(e,t,n.top);)n.top+=1;for(;n.bottom-1>n.top&&isRowBlank(e,t,n.bottom-1);)n.bottom-=1;for(;n.left<n.right&&isColumnBlank(e,t,n.left,n.top,n.bottom);)n.left+=1;for(;n.right-1>n.left&&isColumnBlank(e,t,n.right-1,n.top,n.bottom);)n.right-=1;return n}(t.getContext("2d").getImageData(0,0,t.width,t.height).data,t.width,t.height),n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},r,{width:r.right-r.left,height:r.bottom-r.top});return n.width&&n.height?{data:getRectFromCanvas(t,n),rect:r}:{data:t,rect:{left:0,top:0,right:0,bottom:0}}}function copyCanvas(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.createElement("canvas");if(e===t)return t;var r=e.getContext("2d"),n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),t.width=e.width,t.height=e.height;var o=r.getImageData(0,0,e.width,e.height);return n.putImageData(o,0,0),t}function findLeftTopOpaquePixel(e,t,r){for(var n=0;n<r;++n)for(var o=0;o<t;++o)if(255===e[4*(o+n*t)+3])return{left:o,top:n};return null}r.d(t,"c",function(){return createEmptyCanvas}),r.d(t,"f",function(){return getRectFromCanvas}),r.d(t,"g",function(){return trimCanvas}),r.d(t,"b",function(){return copyCanvas}),r.d(t,"d",function(){return findLeftTopOpaquePixel}),r.d(t,"a",function(){return applyEXIFOrientation}),r.d(t,"e",function(){return getGPUInfo}),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("47e89aed260415009385"),r("e09bfe890c59f88974d9"),r("cf36b7aa73b1e4f25952");var n={2:function(e,t){var r=t.width;e.translate(r,0),e.scale(-1,1)},3:function(e,t){var r=t.width,n=t.height;e.translate(r,n),e.rotate(Math.PI)},4:function(e,t){var r=t.height;e.translate(0,r),e.scale(1,-1)},5:function(e){e.rotate(.5*Math.PI),e.scale(1,-1)},6:function(e,t){var r=t.width,n=t.height;return e.rotate(.5*Math.PI),e.translate(0,-n),{sourceY:n-r}},7:function(e,t){var r=t.width,n=t.height;return e.rotate(.5*Math.PI),e.translate(r,-n),e.scale(-1,1),{sourceX:r-n,sourceY:n-r}},8:function(e,t){var r=t.width,n=t.height;return e.rotate(-.5*Math.PI),e.translate(-r,0),{sourceX:r-n}}};function applyEXIFOrientation(e,t){var r=n[t];if(!r)return null;if(t>4){var o=e.width;e.width=e.height,e.height=o}return r(e.getContext("2d"),e)}var o=null;function getGPUInfo(){if(o)return o;var e=document.createElement("canvas"),t={failIfMajorPerformanceCaveat:!0},r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r)return o={HW:!1};var n=r.getExtension("WEBGL_debug_renderer_info");return o={HW:!0,debugInfo:n,vendor:r.getParameter(n.UNMASKED_VENDOR_WEBGL),renderer:r.getParameter(n.UNMASKED_RENDERER_WEBGL),maxDimension:r.getParameter(r.MAX_TEXTURE_SIZE)}}},"514c53a7f7ee5bb3f19c":function(e,t){},"527f617bc7a5e4c500cc":function(e,t,r){"use strict";var n=r("d6df805bab4a7b8e1c6d");r.n(n).a},"52cf01d8f4c3baca94b3":function(e,t,r){"use strict";function normalizeNumber(e){return 0|e}function normalizePoint(e){return{left:normalizeNumber(e.left),top:normalizeNumber(e.top),depth:normalizeNumber(e.depth)}}function getVectorLength(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=normalizeNumber(e),o=normalizeNumber(t),i=normalizeNumber(r);return Math.sqrt(n*n+o*o+i*i)}function isPointWithinArea(e,t,r){if(!t||!t.length)return!1;if(function(e){return e&&e.left!==e.top&&e.left!==e.right&&e.left!==e.bottom&&e.top!==e.right&&e.top!==e.bottom&&e.right!==e.bottom}(r)&&(e.left<r.left||e.left>r.right||e.top<r.top||e.top>r.bottom))return!1;for(var n=!1,o=0,i=t.length;o<i;++o){var a=(o+1)%t.length,s=t[o],c=t[a];c.top>e.top!=s.top>e.top&&e.left<(s.left-c.left)*(e.top-c.top)/(s.top-c.top)+c.left&&(n=!n)}return n}function isPointWithinCircle(e,t,r){return getVectorLength(t.left-e.left,t.top-e.top)<=r}function getRedundantPoints(e){if(!e||e.length<3)return[];for(var t=[],r=2,n=e.length;r<n;++r){var o=r-1,i=normalizePoint(e[r-2]),a=normalizePoint(e[o]),s=normalizePoint(e[r]),c={left:a.left-i.left,top:a.top-i.top,depth:a.depth-i.depth},u={left:s.left-a.left,top:s.top-a.top,depth:s.depth-a.depth},l={left:c.top*u.depth-c.depth*u.top,top:c.depth*u.left-c.left*u.depth,depth:c.left*u.top-c.top*u.left},p=getVectorLength(l.left,l.top,l.depth),f=c.left*u.left+c.top*u.top+c.depth*u.depth;Math.abs(p)<=1e-5&&f>0&&t.push(a)}return t}function getIntersectionBetweenPointAndSegment(e,t,r){var n=normalizePoint(e),o=normalizePoint(t),i=normalizePoint(r),a=normalizeNumber(i.left-o.left),s=normalizeNumber(i.top-o.top),c=normalizeNumber(i.depth-o.depth),u=a*a+s*s+c*c;if(u){var l=((n.left-o.left)*a+(n.top-o.top)*s+(n.depth-o.depth)*c)/u;return l=Math.max(0,Math.min(1,l)),{left:o.left+l*a,top:o.top+l*s,depth:o.depth+l*c}}return{left:i.left,top:i.top,depth:i.depth}}function getClosestPoint(e,t){for(var r=Number.MAX_VALUE,n=null,o=-1,i=0,a=e.length;i<a;++i){var s=(i+1)%e.length,c=getIntersectionBetweenPointAndSegment(t,normalizePoint(e[i]),normalizePoint(e[s])),u=getVectorLength(c.left-t.left,c.top-t.top,c.depth-t.depth);u<r&&(n=c,r=u,o=i)}return-1!==o&&(o+=1),{position:n,distance:r,index:o}}function getRectWithRectIntersection(e,t){var r=Math.max(e.left,t.left),n=Math.max(e.top,t.top),o=Math.min(e.right,t.right),i=Math.min(e.bottom,t.bottom);return o<r||i<n?null:{left:r,top:n,right:o,bottom:i}}r("4ee649c87692c7abb6dd"),r.d(t,"d",function(){return getVectorLength}),r.d(t,"e",function(){return isPointWithinArea}),r.d(t,"f",function(){return isPointWithinCircle}),r.d(t,"c",function(){return getRedundantPoints}),r.d(t,"a",function(){return getClosestPoint}),r.d(t,"b",function(){return getRectWithRectIntersection})},"5354c482095f5ead6005":function(e,t,r){"use strict";r.d(t,"b",function(){return c}),r.d(t,"a",function(){return u}),r("92a1c426d3e09d462222"),r("132a80cfdf396f588204"),r("47e89aed260415009385"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df");var n,o,i=r("6d8089820eedc734c4ea"),a=r("007e2f901f143b0063bb"),s=r("01d16a391b82cbd5b98a");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={DEFAULT:"DEFAULT",GENERAL:"GENERAL",PROJECTS:"PROJECTS",DATASETS:"DATASETS",CLASSES:"CLASSES",PROJECTS_TAGS:"PROJECTS_TAGS",IMAGES:"IMAGES",FIGURES:"FIGURES",NODES:"NODES",MEMBERS:"MEMBERS",TEAMS:"TEAMS",WORKSPACES:"WORKSPACES",JOBS:"JOBS",TASKS:"TASKS",PLUGINS:"PLUGINS",PYTHON_NOTEBOOKS:"PYTHON_NOTEBOOKS"},u=(_defineProperty(n={},c.DEFAULT,"default"),_defineProperty(n,c.GENERAL,{NN:"nn",DTL:"dtl",NODES:"nodes",IMPORT:"import"}),_defineProperty(n,c.PROJECTS,{LIST:"projects.list",VIEW:"projects.view",CREATE:"projects.create",UPDATE:"projects.update",REMOVE:"projects.remove",REMOVE_ALL:"projects.removeAll"}),_defineProperty(n,c.TEAMS,{CREATE:"teams.create",UPDATE:"teams.update",REMOVE:"teams.remove",REMOVE_ALL:"teams.removeAll"}),_defineProperty(n,c.WORKSPACES,{LIST:"workspaces.list",VIEW:"workspaces.view",CREATE:"workspaces.create",UPDATE:"workspaces.update",REMOVE:"workspaces.remove",REMOVE_ALL:"workspaces.removeAll"}),_defineProperty(n,c.MEMBERS,{LIST:"members.list",VIEW:"members.view",CREATE:"members.create",UPDATE:"members.update",REMOVE:"members.remove",REMOVE_ALL:"members.removeAll"}),_defineProperty(n,c.PLUGINS,{LIST:"plugins.list",VIEW:"plugins.view",CREATE:"plugins.create",UPDATE:"plugins.update",REMOVE:"plugins.remove",REMOVE_ALL:"plugins.removeAll"}),_defineProperty(n,c.DATASETS,{LIST:"datasets.list",VIEW:"datasets.view",CREATE:"datasets.create",UPDATE:"datasets.update",REMOVE:"datasets.remove"}),_defineProperty(n,c.CLASSES,{LIST:"classes.list",VIEW:"classes.view",CREATE:"classes.create",UPDATE:"classes.update",REMOVE:"classes.remove"}),_defineProperty(n,c.PROJECTS_TAGS,{LIST:"projects_tags.list",VIEW:"projects_tags.view",CREATE:"projects_tags.create",UPDATE:"projects_tags.update",REMOVE:"projects_tags.remove"}),_defineProperty(n,c.IMAGES,{LIST:"images.list",VIEW:"images.view",CREATE:"images.create",UPDATE:"images.update",REMOVE:"images.remove"}),_defineProperty(n,c.FIGURES,{LIST:"figures.list",VIEW:"figures.view",CREATE:"figures.create",UPDATE:"figures.update",REMOVE:"figures.remove",REMOVE_ALL:"figures.removeAll"}),_defineProperty(n,c.NODES,{LIST:"nodes.list",VIEW:"nodes.view",CREATE:"nodes.create",UPDATE:"nodes.update",REMOVE:"nodes.remove"}),_defineProperty(n,c.JOBS,{LIST:"jobs.list",VIEW:"jobs.view",CREATE:"jobs.create",UPDATE:"jobs.update",REMOVE:"jobs.remove"}),_defineProperty(n,c.TASKS,{LIST:"tasks.list"}),_defineProperty(n,c.PYTHON_NOTEBOOKS,{LIST:"python_notebooks.list"}),n),l={},p=new Set;Object(i.each)(u,function(e,t){"string"!=typeof e?Object(i.each)(e,function(e){if(s.g&&p.has(e))throw new Error('Duplicate path "'.concat(e,'" in ACL_ACTIONS'));p.add(e),l[e]=t}):l[e]=t});var f=Object.keys(Object(i.omit)(l,"default")).map(function(e){return{action:e}}),d=f.filter(function(e){return e.action===u.FIGURES.REMOVE_ALL||!e.action.includes("removeAll")&&![u.MEMBERS.UPDATE,u.MEMBERS.CREATE,u.MEMBERS.REMOVE_ALL].includes(e.action)}),_=[{action:u.PROJECTS.VIEW},{action:u.DATASETS.LIST},{action:u.DATASETS.VIEW},{action:u.CLASSES.LIST},{action:u.CLASSES.VIEW},{action:u.PROJECTS_TAGS.LIST},{action:u.PROJECTS_TAGS.VIEW},{action:u.IMAGES.LIST},{action:u.IMAGES.VIEW},{action:u.IMAGES.UPDATE},{action:u.FIGURES.LIST},{action:u.FIGURES.VIEW},{action:u.NODES.LIST},{action:u.NODES.VIEW},{action:u.WORKSPACES.VIEW},{action:u.JOBS.LIST},{action:u.JOBS.VIEW},{action:u.JOBS.UPDATE},{action:u.FIGURES.CREATE},{action:u.FIGURES.UPDATE},{action:u.FIGURES.REMOVE}],y=[{action:u.WORKSPACES.LIST},{action:u.WORKSPACES.VIEW},{action:u.PROJECTS.LIST},{action:u.PROJECTS.VIEW},{action:u.DATASETS.LIST},{action:u.DATASETS.VIEW},{action:u.CLASSES.LIST},{action:u.CLASSES.VIEW},{action:u.PROJECTS_TAGS.LIST},{action:u.PROJECTS_TAGS.VIEW},{action:u.IMAGES.LIST},{action:u.IMAGES.VIEW},{action:u.FIGURES.LIST},{action:u.FIGURES.VIEW}],g=[].concat(y,[{action:u.PROJECTS.UPDATE},{action:u.DATASETS.UPDATE},{action:u.CLASSES.UPDATE},{action:u.PROJECTS_TAGS.CREATE},{action:u.PROJECTS_TAGS.UPDATE},{action:u.IMAGES.UPDATE},{action:u.FIGURES.UPDATE},{action:u.NODES.UPDATE},{action:u.TEAMS.UPDATE},{action:u.WORKSPACES.UPDATE},{action:u.JOBS.LIST},{action:u.JOBS.VIEW},{action:u.JOBS.CREATE},{action:u.JOBS.UPDATE},{action:u.MEMBERS.LIST}]);_defineProperty(o={},a.b.ADMIN,f),_defineProperty(o,a.b.DEVELOPER,d),_defineProperty(o,a.b.MANAGER,g),_defineProperty(o,a.b.ANNOTATOR,_),_defineProperty(o,a.b.VIEWER,y)},"53566519489ea25c5a81":function(e,t,r){"use strict";var n=r("700b238641f19ad1bebd");r.n(n).a},"549241adf29c25df0be9":function(e,t,r){"use strict";var n=r("c3e265be9b2349523308");r.n(n).a},"54b089b6f5db3df8074d":function(e,t,r){"use strict";r("afab45c263329fc2e21e"),r("2810e53ad7174f3c046d"),r("47e89aed260415009385"),r("87997867a0dfb75f73e8"),r("a61732f157539e8a726f"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df");var n=r("57b485d6257d13d8a174"),o=r.n(n),i=r("214eccfc06814c553a3c"),a=r.n(i),s=r("6d8089820eedc734c4ea"),c=r("9e0829ebb5f4d9754370"),u=r("01d16a391b82cbd5b98a");function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=new Set(["password"]);function _sendLogs(e){var t={};return e.requestUid&&(t["x-request-uid"]=e.requestUid),a.a.post("/api/client-logs",e,t).then(function(e){return e.data})}function processError(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},a=(null===(t=e.response)||void 0===t?void 0:null===(r=t.config)||void 0===r?void 0:null===(n=r.headers)||void 0===n?void 0:n["x-request-uid"])||null;if(e.response){var c=e.response,u=c.data,p=c.status;i.response={},u&&(i.response.data=e.response.data),p&&(i.response.status=p)}if(e.config){var f=e.config,d=f.url,_=f.data,y=f.method;i.request={},d&&(i.request.url=d),y&&(i.request.method=y),_&&(i.request.payload=function(e){var t=_;if(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){return}return l.forEach(function(e){Object(s.hasIn)(t,e)&&Object(s.unset)(t,e)}),t}}())}return{requestUid:a,error:{message:e.message,stack:e.stack?e.stack.split("\n"):[]},info:_objectSpread({},o,i)}}function mergeTags(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},e,t)}function formatLog(e){var t=e.context,r=e.log,n=e.instanceTags,o=_objectSpread({},Object(s.omit)(r,["info"]),t,mergeTags(n,r.info.tags)),i=Object(s.omit)(r.info,["tags","request","response"]);Object.keys(i).length&&(o.info=i);var a=r.info,c=a.request,u=a.response;return c&&(o.request=c),u&&(o.response=u),o}var p={retryTimeout:5e3},f=function(){function Logger(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof Logger))throw new TypeError("Cannot call a class as a function")}(this),_defineProperty(this,"opts",{}),_defineProperty(this,"instanceTags",{}),_defineProperty(this,"logsList",[]),_defineProperty(this,"retryTimerId",null),_defineProperty(this,"context",{userId:null,teamId:null,workspaceId:null}),this.instanceTags=_objectSpread({},e),this.opts=Object.assign({},p,t),this.initHandlers()}var e,t;return e=Logger,(t=[{key:"initHandlers",value:function(){var e=this;window.onerror=function(t,r,n,o,i){e.error(i,{url:r})},window.addEventListener("unhandledrejection",function(t){var r,n=t.reason||(null===(r=t.detail)||void 0===r?void 0:r.reason);n&&e.error(n,{},{shouldThrow:!1})}),o.a.config.errorHandler=function(t,r){var n,o="",i=null===(n=r.$vnode)||void 0===n?void 0:n.tag;i&&(o=i.split("-").slice(-1)[0]),e.error(t,{component:o})}}},{key:"updateTags",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.instanceTags=mergeTags(this.instanceTags,e)}},{key:"updateContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?Object.assign(this.context,e):this.context={userId:null,teamId:null,workspaceId:null}}},{key:"info",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=r.length>1&&void 0!==r[1]?r[1]:{},!this.isActive){n.next=4;break}return n.next=4,this.sendLogs({log:e,level:c.LOG_LEVELS[c.LOG_LEVEL_NAMES.info],data:t});case 4:u.g&&console.info(e);case 5:case"end":return n.stop()}},_callee,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"error",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,r,n,o,i=arguments;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=i.length>1&&void 0!==i[1]?i[1]:{},r=i.length>2&&void 0!==i[2]?i[2]:{},n=r.shouldThrow,o=void 0===n||n,!this.isActive){a.next=5;break}return a.next=5,this.sendLogs(_objectSpread({},processError(e,t),{level:c.LOG_LEVELS[c.LOG_LEVEL_NAMES.error]}));case 5:u.g&&o&&console.error(e);case 6:case"end":return a.stop()}},_callee2,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fatal",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,r,n,o,i=arguments;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=i.length>1&&void 0!==i[1]?i[1]:{},r=i.length>2&&void 0!==i[2]?i[2]:{},n=r.shouldThrow,o=void 0===n||n,!this.isActive){a.next=5;break}return a.next=5,this.sendLogs(_objectSpread({},processError(e,t),{level:c.LOG_LEVELS[c.LOG_LEVEL_NAMES.fatal]}));case 5:u.g&&o&&console.error(e);case 6:case"end":return a.stop()}},_callee3,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"sendLogs",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=formatLog({context:this.context,log:e,instanceTags:this.instanceTags}),r.prev=1,r.next=4,_sendLogs([t]);case 4:r.next=10;break;case 6:r.prev=6,r.t0=r.catch(1),this.logsList.push(t),this.startRetry();case 10:case"end":return r.stop()}},_callee4,this,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()},{key:"startRetry",value:function(){this.retryTimerId||(this.retryTimerId=setTimeout(this.retryRequest.bind(this),this.opts.retryTimeout||1e4))}},{key:"retryRequest",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_sendLogs(this.logsList);case 3:this.logsList=[],this.retryTimerId=null,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),this.retryTimerId=null,this.startRetry();case 11:case"end":return e.stop()}},_callee5,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"isActive",get:function(){return!u.g}}])&&_defineProperties(e.prototype,t),Logger}();t.a=new f({service:"clicker"})},"54c637703ddc3535d3d1":function(e,t,r){},"55bdc61fd6ef5ed25ebf":function(e,t,r){},"56c5b36968b64be34912":function(e,t,r){"use strict";var n=r("fd6bb56d74106af7d8bb");r.n(n).a},"581c25cdc09920fd8289":function(e,t,r){},"59548a76725c1a44390b":function(e,t,r){},"595dd40ad0fad65eb3ea":function(e,t,r){"use strict";var n=r("e6c023817b8f0da37fdf");r.n(n).a},"5977892647431f47236d":function(e,t,r){"use strict";r("47e89aed260415009385"),r("4e997ff4fa36eb673213"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n,o=r("c90887849e6e38ab5d76"),i=r("9e0829ebb5f4d9754370"),a=r("fa4339c8926dcb397641");function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s,c={description:a.descriptionSchema.allow("")},u=_objectSpread({id:a.idSchema.allow(null),title:a.basenameSchema.required()},c),l=_objectSpread({id:a.idSchema.required(),title:a.basenameSchema.allow("",null)},c),p=[o.default.object().keys(u).required(),o.default.object().keys(l).required()],f={project:(n=o.default.alternatives()).try.apply(n,p).required(),files:o.default.array().items(o.default.object().keys({hash:o.default.string(),fileId:o.default.string(),path:o.default.string().required()}).xor("hash","fileId")).required(),pluginVersionId:a.idSchema.required(),onConflict:o.default.string().valid(Object.values(i.IMPORT_CONFLICT_ACTION)).required(),options:o.default.object().allow(null),nodeId:a.idSchema.required()},d=(o.default.object().keys(f),{id:a.idSchema.required(),title:a.titleSchema.required(),datasetsIds:o.default.array().items(a.idSchema)}),_=(o.default.object().keys(d),{title:o.default.string().required().trim().max(64),description:o.default.string().trim().max(255).allow(""),color:o.default.string().trim().max(8),priority:o.default.number(),shape:o.default.string().trim().valid(Object.values(i.SHAPE_TYPES))}),y=(o.default.object().keys(_),{title:a.titleSchema.required(),datasets:o.default.array().items(o.default.object().keys({title:a.titleSchema.required()})).allow([],null)}),g=(o.default.array().items(y).allow([]),{pluginVersionId:a.idSchema.required().description("Plugin version ID"),nodeId:a.idSchema.allow(null).description("Agent ID. If `null` will run on any available agent")}),h={config:o.default.array().required().description("DTL config. For more details visit https://docs.supervise.ly/export/"),description:a.descriptionSchema.default("").description("Task description"),advanced:o.default.object().keys(g).required()},b=(o.default.object().keys(h),o.default.string().valid(Object.keys(i.LOG_LEVEL_NAMES))),v={lines:o.default.number().integer().default(function(e){return void 0===e.lines||e.lines>500?500:1},"Forces value to be between (1 and 500)").empty([o.default.number().less(1),o.default.number().greater(500)]),term:o.default.string().max(128).trim().truncate(),level:b,levels:o.default.array().items(b).min(1)},m=(o.default.object().keys(v).without("level",["levels"]),{title:o.default.string().required(),size:o.default.number().positive().required()}),O=(o.default.object().keys(m),{groupId:a.idSchema.required(),workspaceId:a.idSchema.required(),project:o.default.object().keys(u).required(),srcProjectId:a.idSchema.required(),datasetsIds:o.default.array().items(a.idSchema).min(1),sharedLinkToken:o.default.string().optional(),isPublic:a.booleanSchema.optional().default(!1)}),P=(o.default.object().keys(O),a.hashesBase64Schema.min(1).required(),{title:a.titleSchema.required(),nodeId:a.idSchema.required(),config:o.default.object().optional().default({})}),T={project:a.idSchema.required(),dataset:a.idSchema.required().allow(null)},S={modelId:a.idSchema.required(),source:o.default.object().required().keys(T),settings:o.default.object().required().keys(P)},j=(o.default.object().keys(S),{title:a.titleSchema.required(),nodeId:a.idSchema.required().allow(null),config:o.default.object().optional().default({})}),w={project:a.idSchema.required(),dataset:a.idSchema.required().allow(null)},I={architectureId:a.idSchema.required(),modelId:a.idSchema.allow(null).default(null),source:o.default.object().required().keys(w),settings:o.default.object().required().keys(j)},E=(o.default.object().keys(I),{hideArchived:o.default.boolean(),singleTaskId:a.idSchema,allWorkspaces:o.default.boolean().default(!1)});o.default.object().keys(E),r("364b250cfb7cb23af2d1"),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e");var C,k={nodeId:a.idSchema.required(),preset:a.idSchema.required(),project:(s=o.default.alternatives()).try.apply(s,(C=p,function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(C)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(C)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}())).required()},A=(o.default.object().keys(k),[i.TASK_TYPES.CUSTOM,i.TASK_TYPES.TRAIN,i.TASK_TYPES.INFERENCE,i.TASK_TYPES.DEPLOY_MODEL,i.TASK_TYPES.SMART_TOOL,i.TASK_TYPES.PIPELINE]),F={title:a.titleSchema.required().allow("").description("Name for output project or model"),nodeId:a.idSchema.allow(null).description("Agent ID. If `null` will run on any available agent"),config:o.default.object().optional().default({}),pluginVersionId:o.default.number().integer().required().allow(null),taskType:o.default.valid(A).required(),projects:a.idsSchema.optional().min(1),models:a.idsSchema.optional(),description:a.descriptionSchema.default("").description("Task description")},x=(o.default.object().keys(F),{description:a.descriptionSchema.allow("")}),R=(o.default.object().keys(x),{nodeId:a.idSchema.allow(null).description("Agent ID. If `null` will run on any available agent"),modelId:a.idSchema.required().description("Model ID"),pluginVersionId:a.idSchema.required(),restartPolicy:o.default.string().valid(Object.values(i.TASK_RESTART_POLICIES)).optional().default(i.TASK_RESTART_POLICIES.NEVER),description:a.descriptionSchema.default("").description("Task description"),settings:o.default.object().default({})}),L=(o.default.object(R),{pluginVersionId:a.idSchema.description("Plugin version ID").allow(null),nodeId:a.idSchema.allow(null).description("Agent ID. If `null` will run on any available agent"),projectsIds:a.idsSchema}),D={values:o.default.object().optional().default({}).description("Config fields values"),id:a.idSchema.required()},G={script:o.default.string().trim().description("Python script"),description:a.descriptionSchema.default("").description("Task description"),advanced:o.default.object().keys(L).required(),config:o.default.object(D)};o.default.object().keys(G).xor("script","config")},"59d21970c039a81816d0":function(e,t){e.exports='<?xml version="1.0" encoding="iso-8859-1"?>\n\x3c!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512.001 512.001;" xml:space="preserve">\n<g>\n\t<g>\n\t\t<path d="M429.742,319.31L82.49,0l-0.231,471.744l105.375-100.826l61.89,141.083l96.559-42.358l-61.89-141.083L429.742,319.31z\n\t\t\t M306.563,454.222l-41.62,18.259l-67.066-152.879l-85.589,81.894l0.164-333.193l245.264,225.529l-118.219,7.512L306.563,454.222z"\n\t\t\t/>\n\t</g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</svg>\n'},"59f1b6605b24f530994c":function(e,t){},"5a29062da289a39f1395":function(e,t,r){},"5bdbd452e205621159ed":function(e,t,r){"use strict";var n=r("2ede16ab321e15df16b0");r.n(n).a},"5d1a9382f9802de0586b":function(e,t){},"5d206ac9bb6c63e667bb":function(e,t){},"5e6bc464288d52b4d3d9":function(e,t,r){},"5e712c972df2f6d27537":function(e,t,r){"use strict";var n=r("1381cb84b38be44210e5");r.n(n).a},"5e80b149eefce35e2c5a":function(e,t){},"5f023772cd21df1264dc":function(e,t,r){},"5f60e446fe6f0a2bb415":function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("47e89aed260415009385");var n=r("f6f559428d7ae5cba635");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=Object(n.a)(function(e,t,r){return r.set?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},r,{set:function(e){this[t]!==e&&r.set.call(this,e)}}):r}),i=(r("14471fdfe1a633789f19"),r("2810e53ad7174f3c046d"),r("afab45c263329fc2e21e"),r("87997867a0dfb75f73e8"),r("ea75b25e307e7507ff49")),a=r.n(i),s=r("6d8089820eedc734c4ea");function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function rejectError(e,t,r){return e||r.mainError()}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(e){var t=e;if(null==t)t=!0;else{if("function"==typeof e)return e;t=!!e}return function(){return t}}(t.retry),n=t.rejectError||rejectError;function newFn(){for(var o=this,i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];var l=a.a.operation(Object(s.omit)(t,["retry"]));return Object.assign(new Promise(function(t,i){l.attempt(function(){var a=function(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}(regeneratorRuntime.mark(function _callee(a){var s,u;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,Promise.resolve(e.call.apply(e,[o].concat(c)));case 3:s=p.sent,t(s),p.next=23;break;case 7:return p.prev=7,p.t0=p.catch(0),u=!0,p.prev=10,p.next=13,Promise.resolve(r(p.t0,a,l));case 13:u=p.sent,p.next=20;break;case 16:return p.prev=16,p.t1=p.catch(10),i(p.t1),p.abrupt("return");case 20:if(!u||!l.retry(p.t0)){p.next=22;break}return p.abrupt("return");case 22:i(n(p.t0,a,l));case 23:case"end":return p.stop()}},_callee,null,[[0,7],[10,16]])}));return function(e){return a.apply(this,arguments)}}())}),{operation:l})}return Object.defineProperty(newFn,"name",{value:e.name}),newFn};function Retryable_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object(n.a)(function(e,t,r){if("function"!=typeof r.value)return r;for(var n=arguments.length,o=new Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];var a=c.apply(void 0,[r.value].concat(o));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Retryable_defineProperty(e,t,r[t])})}return e}({},r,{value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a.call.apply(a,[this].concat(t))}})}),r.d(t,"a",function(){return o})},"5f9e65e24255a01903f6":function(e,t,r){"use strict";r.d(t,"a",function(){return applyMixins}),r("406d0451405e28c4822f"),r("92a1c426d3e09d462222"),r("0ed696ba8380d46a2924");var n=["name","length","prototype"];function copyProp(e,t,r){return Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}function applyMixins(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.type).filter(function(e){return!(n.includes(e)||t.props&&t.props.length&&(void 0!==t.include?t.include?!t.props.find(function(t){return t.key===e&&(void 0===t.static||t.static)}):t.props.find(function(t){return t.key===e&&(void 0===t.static||t.static)}):!t.props.find(function(t){return t.key===e&&t.include&&(void 0===t.static||t.static)})))}).forEach(function(r){copyProp(e,r,t.type)}),Object.getOwnPropertyNames(t.type.prototype).filter(function(e){return!("constructor"===e||t.props&&t.props.length&&(void 0!==t.include?t.include?!t.props.find(function(t){return t.key===e&&(void 0===t.static||!t.static)}):t.props.find(function(t){return t.key===e&&(void 0===t.static||!t.static)}):!t.props.find(function(t){return t.key===e&&t.include&&(void 0===t.static||!t.static)})))}).forEach(function(r){copyProp(e.prototype,r,t.type.prototype)})})}},"5fde126e2b8545be1742":function(e,t){},"5fe27eddff92ec2dbac5":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={title:{label:"Title",column:"title",direction:"asc"},updatedAt:{label:"Updated at",column:"updatedAt",direction:"desc"},objectsCount:{label:"Figures count",column:"objectsCount",direction:"desc"}}},"659f57c2583aed40f7ba":function(e,t){},"6715a79b0d2347edbd3c":function(e,t,r){"use strict";var n=r("d69baaed370f6383475a");r.n(n).a},"681a6d9c7e25c39f953e":function(e,t,r){"use strict";var n=r("05ba3a883f5efe53edb3");r.n(n).a},"690accb83097d4891a2b":function(e,t,r){},"690e6aa790ddfb543ac1":function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n=r("c90887849e6e38ab5d76"),o=r("fa4339c8926dcb397641"),i={title:o.titleSchema.required(),description:o.descriptionSchema.allow("")},a=(n.default.object().keys(i),{title:o.titleSchema.required(),groupId:o.idSchema.required(),srcWorkspaceId:o.idSchema.required(),sharedLinkToken:n.default.string().optional(),isPublic:o.booleanSchema.optional().default(!1)});n.default.object().keys(a)},"69fe2de0e6d074435636":function(e,t){},"6aa168588514092b880e":function(e,t,r){"use strict";var n=r("5e6bc464288d52b4d3d9");r.n(n).a},"6d30f70e740934193417":function(e,t){},"6da208cf308cff51720e":function(e,t,r){"use strict";var n=r("a269f709e151b271345a");r.n(n).a},"6e4195d952ff52196ac2":function(e,t,r){},"6ebccb67b17c947188b7":function(e,t,r){"use strict";r("364b250cfb7cb23af2d1"),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("4e997ff4fa36eb673213");var n,o,i=r("c90887849e6e38ab5d76"),a=r("fa4339c8926dcb397641"),s=r("7f9c1fb802a7f39bc6fa"),c={ids:a.idsSchema.min(1).required(),status:(n=i.default.string()).allow.apply(n,(o=Object.values(s.a),function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(o)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}())).required()};i.default.object().keys(c)},"6f161cbf7bd26742f557":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATQAAAD/CAMAAABIB9puAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUIzN0RDN0ZDNkY4MTFFN0JFOUNCQkFEOTk5NUQ0MEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUIzN0RDODBDNkY4MTFFN0JFOUNCQkFEOTk5NUQ0MEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBM0REREIzNEM2RjUxMUU3QkU5Q0JCQUQ5OTk1RDQwQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1QjM3REM3RUM2RjgxMUU3QkU5Q0JCQUQ5OTk1RDQwQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiGYQF0AAABgUExURbvO31FLRXJuZ0ys/kpCPCYlIKOiF0A4Mp5LU9/gAmllX9wPDjJAOHBvNZclI5STMl1aVG1tElpgWUxME15mZHOAjz1LQ39WXGBdKYWDGVBXUoKAU8C/DM4vNbpDS////zU6Z5YAABNDSURBVHja7N1pY6OsFgBgfMdqautISNqoTef+/395OQdQcAXFrZUv03YSGp6ew+KC5H9ncS7kJDjRTrQT7UQ70c7yc9DInwmF/Gq0SWQrsZH9kpEJn42QNdjIXs3IFu89Mtq8di+vtku0ma3mar8PjcyNFLJwqJFdBtr2NRwNzUOcLBxqZI+B5gHtz69D20cdJ9qJdqKdaCfaiXainWgn2ol2op1oJ9qJNrSyd0T7+CC/BI0MnHtyQyMfH05swy8lhNdHfMA61GTZYDJ0xs4JDc1c1Mh4ZY5/htk1WTZ48DynE5pzI4lNQ2eyOdZk12AyeHbYBY04t5EM5zkRqTVLzbUmuwZr59Tnoel/0ploxGwcma7mXJNVg0euQ3BAm5BNpL8q0mz6NDTnmhzRZvZpUzpuYtfS6WruNbn1afNHT/LhZ/Tsate0BJ1Qk22D/3ibp314mad1xsKkUJtQk0WD5bDSvySwniDLmtwCgowsK4jx5RQ055rGGkyqEJu7jCJViHlYRtXt00diMiE/p9Q00mCri/es0CZPQYfRjAXGLDSHmoYbPDg9c0Jznp6Nopn1TjoWMLWmwQb/8Yb2sRSauZSdg+ZQ01CDieXFteNoZMYS8WDp+cdbpH34jrQ6EvS14rzR076mgQYTb2hkCbQPc0rkY55mW9NAg60vfR9Fm3UAh4zMFIZ/5jLnsK6pv8HWgTY+15sTaANrTy8Lgik12aERb2jEF1p7yTj12JB7Tf0Ntr8vZQRtntnQoaGPoe/dVsNONfU1mDjcyzOMNtOs/8itUSGZbuZeU0+DiW1/NopG5vRng2hyfCGEkLnnCBxr6mwwcbtjbADNw3kPYjnCEKe3WtVEqi/N2uecHSe2A0HvJ+3+TA4tJ0N/EuJ02K6rJvXdhze06v6ByXX0fKap4dK3qvzfnLwlHZ9vOlp9+8D0Oro/kx80H2bis7U+3+QGa7dczIjWzs/kBc2PWWNkndlg/TaVOf3i+BDhiEb8mnWuqCY22Li1Z9ZgMjqsEsf6iFczH5EmO3/zdqhdRRpW59PMQ5+GM7fGLWT76tNgkurVzMPoCXsENN60s9FzzoLKbk7k3uD2ympv8zRvZh5XBK23TB6B568Itinnhcon2lpo5+3Y01fdm1ZxMLRzi4lN4uQ3bmZybpszsdXnBk2rtvu3bgV2bjo3g+3c3nAdtt+9keaey4l2op1oJ9qJdqKd5UQ70XaK9u5QPrXi8Kb37cqLUUQTSiiMsTuU/zrLx3AhjmL4G53YPjdV0/FUK0rJdtdLN5z4p+lIqr/BeNvlX4gpuAOhNZPFiLZBu65CXrpLtxnD3yPhLDXcknktNRVvok2MdQC6ozUI6zBTRUSb9Yd83yGbTjdKqEPaojWqlG57sphD1y3YC0gcAg0KhcLUd58HVut2GwjCmpG4mj0eD0qrWj71Uf392OVzvMhWE/vkpCj2uDzQjSo1m2HkcH7DhONosTLjXnXhbu1QG5T/QfFHrOOMk/2rC2ejA6H2QwVlGUWLP2VfZpjpavHLzPLj0GJEa5vVapNC7diIJB4xC83c/MaiqwVh/LJQ2S+aUdpmAZ+dQKApsre3t0pNhtpyajvFbKA1C5qx2uxNlIba2mhbO46h4SxYolVmSo2jwWIqCHegtibhKBrV0N7eTDWOhmohz+t2bv9cxRG0QAQaon3raG8CDUKNlUF/BT+ScAyNsjtLxNhpmAm0yyMZQYsP4+kNLQzofRjtwdid8k7NSzkKngXafTDS+P8zX2gb6MVTCO3QHj1oD0Sj3tFW8/v79++EKBxFYxwtaQ8EcvRMOBpbFG1ZwL9vfye8awytZCI/e+ZpmJ0crVYLoah/1Tf1t/vii98WQgO13hUBHDHno2c4s2zFtxQaRTRTrV6xY6DNR/MYhY7ZOQ2t73PjN2GdnxftIEdllohA84S2iOIoWjwbLTS6phDQ1PjZcTxNoYWLl4WC0Cca/6f6AU46OtTQTM7S1iq+h+LYE1qriPxsqdVmdD0073SI5t4bjqIZalAEmcxNj8PAFn4Gmn13OI6mxgI+xcXTnsCGYYZoNNjQbDbhMFovogWa7NYquIuc1E6bozWQg0313NCqYoUmM1SyXS4KbUpuroEW7gCt6tcE20OhMZfcDMxi/nRBuEHFRdFwZSDdFBqzjDNBEoyVMFi4d9wALajYBBoXs1kJBI5FvmWlcSMEtHAxNOzY8CQLSx589LQjc0czAXW/RSQFmvPIS1y68ADPtl++vy+24XAENPcZC3Eb+aAYv2kpsb7kXRCtK3/DjsOCjmg2v2khr2XUrP/+ZlkGLQiOofZr0IITbdtoOzyaut4ey0pse0KzhuI8aZrmeR4Iq1R8J0sQ1F/1uc0T3AWaW2wBUpFlWYFQ12taaOV6RS75gv7Fw+9BEynI0Yooej4jLsRLYRb5s4iXLO2f/P4WtBIijIdXGOQFN+NqETcCqKwqyFagKUfNgzxNqf8O7jho3CyLnlGW3+LbFdFe+XdfHYW/7BX+73rjL4y+aF+wTabbA5qFF4Wenmclhypu3CJDtNcnoun3VCo0zN48L55PjLec+hxSd4BmE2NfPPPQ4PUVMHg/H2Gv9dVEk2r8vzIYLhA5L+Ab+nvQxCQszSByeF5mrxhewqbpZcDBazBNrzEkc9YXbD8PTUzBeImgk+J9VAFpmX1Z3TL+3xckMX9XAfEGtXTNfn8cGvb9EeRjgR1Yyr/nxdIM1DJITJ6kEZ+G8HmbJ7Xt0Qan/YWYO1wRLbLWMul4HXz6xkdenA7T+Wq7ReNRBpMunHFlvN9/wvxiGloGEzrsFUWuzw62vaKJzITJKnDxsbC/2x9XwwEVxl1eW9fq6mho3ZmJszKcOBSFmD9MBaujDSINZscRrCp+YHryCRbvhGRKDs0tXIINBgXsIWG1lf8wtJJP4GHIFImZzfbS4MSfAZfyeT2QHh8NM1P1Y5FPM6EWYbhlsCZTa4TDo5VwIOMqD2L4yMv2SgFnIHxpVR05OvjkFuf/ap7xzLyCGeuEjM91o0zF2qHRSj5gZjD7x856ITNcJ8Aqg7NFE9V2hFZCXxblsL7kYF9LmYk1gvw96bHRaI6LpohHWhQtCCZnbRmiRbiMPy5aisfIYAnw9bWwGY4IqTjcxEvqHGw7QcvxiCE0Yrm+rGNJChOQDBcITmfg94AGZ0rkXJZny9d/93uyjpo4/BvBGZijoXE2GDb5kpqjycsmVwo2OFGDf6s8OCQansnMErEtYLJehuJZGIy1w6HhGiD7StmqaLCwysRM2ilD94EmVptf1f6Ta6HJ9Sic43LJ0H1cAANzM74W3AANgw2PpTtk6F7QYL6UbIGGbE+MtQOipdrusKuiiVMvcJbPNkF3g5bqe+om66rh4Uk+XUuPh1Zq+xCvi5YkYnlwPDS6GVqSJLgQzVLLseBEE2jiIkHLaceZnoAmT7ICWnAQtNgYCBpoPAySFULtC688tTzesRs0Y8pRoyXroNEkTeFSXbtebSdo1yIdQEs6G+oVjdIcrtW1m3XsA+125amRdqAlPWh+A1Ch8cnaUdBijpb3ojHWjeZzBgxoAUd7HgktbqMlY2j8hYmvXMVIS8Wh42OgxV1o92G0BNf2ia9cFWjZb0JLkrlqNVp2CDRxdzegmYc5RtGohsaMXJ2OJpafwTHQYMoBVyi2Dw4JtNaYiWgVLIMnBc1Hg49QWK0J9oF2xRt4xtDqPMTgqtDoNLQ6pxGNwvQ2t1p97gMtxVNCcvl570djMll9oGk9IaCVPMRut5uV2sZocS+aao7WpcnOyw9a0kDD8/y4kjoQ2rNCYwZakvREWjIXrXZXaHg1YZYfBS3T0VgTzZxbNNCSiWiMUh2Nq8GJxNfX6KBorImmxkx9IGiiJa6BpqMlAo2b/SQ0rZho/EvYMMEdjbbRskOgxSZa/ZhHpZbIc6GsDw0ipgwkWt/SoHPxCmh3bc7xk9Dwfk/YTQw82gMBmsFGion+/8YB305JgWaOBAdDk5Nb/YGiOprMv0TGXIUGhZt9fko0RsXrmj0hax1Gwi5NvPiw6cnHraK45qURasoMNqoTah1oDMwkGqt0+X+LOEpkghtLU/lG8ahr8ZpjohXX2y3Q0ZIaLZC7JELzaSWRyNiq0PCVsgZ8mpeMOqr89JFFvYIdDE3bw45PxW/imYNlR6TJe9mFhoywCiQI8FGtTE5QUUK8pxQ5S+WMJKnJlKoMtXrKgWc/j4IW8mWffLplpWakp9pZUqExioklRcXoCV9/ig2b5E9rNFqlM5BS9UTbRqTBzX+3254X7K3dmmPjWdpyjSkaqNASre3wjQCVPV6FVpYaJUMgWqcqNdDkYCzCNC2u8ctLvBxaHMde0eA5qoGmpqOJ/gfDgtZo0NlXD5KG/wrUnp1a/DH1bhl11aO660GjRsvz28uSaMOPC7H4Te1twWP1OO02Wt3ECo0yVj02WnDSykzey1mK19RBhZGpiKmKPm3FHuDjBkaP3S6CNmXvZvEM8lrtntRDn9ktSTRamxloVEeTr5LZLQcIoa8q1A9zwHMg4zw/Cpp4JlX1zHJWd1400cMiSYy+SZKJ3AvknKVGUy/Cbq8eiPWJiB5pIaDditGrb/eBBg+fvd1un220xFh2dqDR6qVUvbOJJkKtpGrYYCaa7NRKEWmwEVa6dzT1KKZrAVu0BHWC3pOhIgcCPQAx7hir0jAozbGyTtRONNy73u7ahA3RjEdp3HCPlyJvh5pxcKNupLZAr6NPTeZaaFR2dubkgzFz+AwDedx9r2iN54/cIr6Cec060donkHqiTzGouQhVqwE1krA6NDW0am3B0XBPo3z3A4GOFuVqrqaGtp5T50YEtvmqGW29ghAV1qElZzHVb1FosI66Lb8i8DEQxDe5WJaBBqFmf61B0s1mhlIj0UUwMtZMzwh2Ahw5jbfYMspxyqGOMART0BqHaCu1ak6RtA+yqWHDRBOHW/KRCyIXX3u6oaXKrFriTL2Ilukz/vaVu0k9X/5PGz2DHM99Zmm+gwW7fMaGA1o5B02qsf4a5LBRHSBWs9sQTn5GI8eHVj7K4YLG5qFRXEsMdYNGIFZoeOI62xNa77jRRqOz0QYrSMzrEio0PGN8bLRZndoktMDi8O0GByHXQhvJb5ieGYGp0hO3sg6OiVay6VeFJto81jqbJVqeXq/XfG9ooS3axFAzlqX2b9HR8jw8DNozm4/WWMpPQMt3idalBhuAPaOU+kNzebOOBmqHQcOt8IOyORK4sjUXTK5o4V7ROtTCtLi+vLx8dqBNV3N6Cy0V2i4Hgi63UJw+09FKNlPN8sUKjWpo10OgyQNrPtCc7mHpQkt3OE+zQKtPm8+/h8c2mRWaOD6U7xItHEALWmimmzdE82D5D0ALGmjmRd6znDoP95powdHQQAyuOaPNg9UmWtLVPbWMem9JHkDb7UAwjIYX6rVDrcvQaL9tWHWcVzBGz/yAaJ/iXPsI2gjlfwOnqzpPAFZHOa7XPU5u+9BiXBEIs678tFdzf5s8zAFbuRWHirRbnlaB9hnoF2q4qU2grtCy5+gGdDtCu+ETd1j5qUpQqittJ9lNRnt9Hmb0DPEBd1mKaO/vcN2V9sRTZpSl0PAcwXOPh7v70Ap5GFKa4dVq6opQvdC+YrC6yjI1EOzzHMEImiITBV+q0rXz4btjnqyrdKGVez3vaYMGVng16Xv83lEa1fZoWsZnzSi7NDiaVhwM7Rnlkkwr7bU9uqovujU/9WIRoiUGWpCmV9zuIjgWWvPKtcHSe8b+vUnaJdvUxP2w4aqhfKOrhqamZ/6yQFHxGb/HIunjFiJu7497c4zftLLpDWWroY3FKXwY8XBffEp0fhw0uHQTnmG6llTc8euj65JXd/tHk6c+eXa02WLYZcSx3Dr1Yd1hFv5CsR6BC1j5r+erkv5IE33f4/v774QH2iyBFubyaZ56c7E9txtOnpwK4HeUG1zy3nwh/iJxjh8fAhr0m+GdkY9//y4PGG+3RxMtwgfmwlW48oYMLFd87K5TgeuNOwouLc0XSjTIy+EVlLgF936/Py7/LngPoFuwLYMWy9tU9eTJITGvraaOm0Hi5QpOpWwuHkbeQFPbkRXi4T59ZhBluKfP43K5JPc7Y27BthDaDR9MUGgF2HLcrvHpmJ3Xzp6uneeZRKue+tVrJskqNGQLNkcTf26zm5b5CTsD1JKqmC+uflhcO3MTa7oWjZKHAzdcdpklFdr9Th3UPO/Up7MZRd6bEd9cS9w74TC7OF7C2AKNm90rMw3t7hBrfndLiPvvmVpvzjZsFlCx1xYvYMZHT/gSY816NPB84/82ZKaaRW4CGETZhU85LvzLR+KUoUsc7t5CzRaN1p3ZP1n4lwLNOkOXuJZjAzTL9AxKGWc1mWB7YIauhjZ8N/u+0AKJ1jATag7d2s9As9jjQRs5W2aVGrNbGiyJFm+EFo9k50OYfcsi1AQaXQdtF2qWO4rg0JlItO/vNyxC7fJ42Pdqy6LFW5l1q8lAQzRlJtXq/Nw6PVdys969pmT10FmZcbU61BZHgw9mc/v2RmhxD9pDZmcPGjy/Y7Dwiv8vwAC90oexkMSIEQAAAABJRU5ErkJggg=="},"6f85eb15a67f370c0bde":function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("b42383ffd481a2f01f84");var n=r("9e0829ebb5f4d9754370"),o=r("7ee98bac1562359c81b0"),i=r("52cf01d8f4c3baca94b3");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){function LineDrawer(){return function(e,t){if(!(e instanceof LineDrawer))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,_getPrototypeOf(LineDrawer).apply(this,arguments))}var t,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(LineDrawer,o.a),t=LineDrawer,a=[{key:"_getArea",value:function(e){for(var t=0,r=1,n=e.length;r<n;++r){var o=e[r-1],a=e[r];t+=Object(i.d)(a.left-o.left,a.top-o.top)}return t}},{key:"isValid",value:function(e){return e.points.length>=2}},{key:"type",get:function(){return n.SHAPE_TYPES.LINE}}],(r=[{key:"isPointWithin",value:function(e){return Object(i.e)(e,this.points,this.rect)}},{key:"getClosestPoint",value:function(e){return Object(i.a)(this.points,e)}}])&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),LineDrawer}()},"700b238641f19ad1bebd":function(e,t,r){},"70a4e2f8e50a91194d59":function(e,t,r){"use strict";var n=r("42e474200ac14c22cf73");r.n(n).a},"71e5fd9f8a7b76e9ed07":function(e,t,r){"use strict";r("364b250cfb7cb23af2d1"),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("4e997ff4fa36eb673213");var n,o,i=r("c90887849e6e38ab5d76"),a=r("9e0829ebb5f4d9754370"),s=(n=i.default.string()).allow.apply(n,(o=Object.values(a.ACTIVITY_LOG),function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(o)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}())).required(),c=i.default.array().items(i.default.string()).max(2).allow(""),u={column:i.default.string(),order:i.default.string().valid("asc","desc")},l={offset:i.default.number().integer().min(0),limit:i.default.number().integer().positive(),datesInterval:c,timeInterval:c,date:i.default.string(),types:i.default.array().items(s),sort:i.default.object().keys(u)};i.default.object().keys(l)},"725e816b46da86ed4ba1":function(e,t,r){"use strict";var n=r("510c97a2832dee6670a2");r.d(t,"a",function(){return n.b}),r.d(t,"b",function(){return n.c}),r.d(t,"c",function(){return n.d}),r.d(t,"d",function(){return n.e}),r.d(t,"e",function(){return n.f}),r.d(t,"f",function(){return n.g})},"72754adc47b502a73656":function(e,t,r){},"7312fa4ae9207c1dc6c3":function(e,t,r){"use strict";r.r(t);var n=r("57b485d6257d13d8a174"),o=r.n(n),i=r("148e35ef930017ad8147"),a=r.n(i),s=r("01d16a391b82cbd5b98a"),c=r("a53baa878501528dfe5d");!s.i||s.j||s.h||o.a.use(a.a,{id:42731119,env:"production",router:c.a,options:{clickmap:!1,trackLinks:!0,accurateTrackBounce:!0,webvisor:!1}})},"73db41e66c080da9c958":function(e,t,r){"use strict";r("0137df683cb4c701ae49")},"75fac8029131a50a5fc6":function(e,t,r){"use strict";var n=r("77a795662606784fffe3");r.n(n).a},"7620223c78e78a4ba49d":function(e,t,r){},"76e0800e24aff8698c6e":function(e,t,r){},"77a795662606784fffe3":function(e,t,r){},"78226668d0f593834bf3":function(e,t,r){"use strict";var n=r("a058949576c99c773896");r.n(n).a},"79036b6f230fe5b6ba23":function(e,t,r){},"7906ff6fd0f767cfe3dd":function(e,t){},"7b301b455e0195dcc854":function(e,t,r){"use strict";r.r(t),r.d(t,"onAnalyticsReady",function(){return onAnalyticsReady}),r("2810e53ad7174f3c046d"),r("afab45c263329fc2e21e");var n=r("57b485d6257d13d8a174"),o=r.n(n),i=r("9f58d96dc1f9f8d8fe6e"),a=r.n(i),s=r("01d16a391b82cbd5b98a"),c=r("a53baa878501528dfe5d");function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function onAnalyticsReady(){return new Promise(function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.i||s.j||s.h){t.next=5;break}return t.next=3,Object(i.onAnalyticsReady)();case 3:return e(),t.abrupt("return");case 5:e();case 6:case"end":return t.stop()}},_callee)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}())}!s.i||s.j||s.h||o.a.use(a.a,{id:"UA-104398718-1",linkers:["supervise.ly"],router:c.a})},"7d074b0d47dd6102152e":function(e,t,r){"use strict";var n;function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i});var o={POINT:"point",LINE:"line",RECTANGLE:"rectangle",POLYGON:"polygon",BITMAP:"bitmap",GRAPH:"graph"},i=(_defineProperty(n={},o.POINT,"Point"),_defineProperty(n,o.LINE,"Line"),_defineProperty(n,o.RECTANGLE,"Rectangle"),_defineProperty(n,o.POLYGON,"Polygon"),_defineProperty(n,o.BITMAP,"Bitmap"),_defineProperty(n,o.GRAPH,"Keypoints"),n)},"7d87a61856980ad34a1a":function(e,t,r){},"7de3d0dd9ce0dba99c1a":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="32" height="32" viewBox="0 0 24 24" fill=""><path d="M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19C6.45,19 6,18.55 6,18V3C6,2.45 6.45,2 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z"/></svg>'},"7e600945e9cf50d4102a":function(e,t,r){},"7ee98bac1562359c81b0":function(e,t,r){"use strict";r.d(t,"a",function(){return _}),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("b42383ffd481a2f01f84"),r("47e89aed260415009385"),r("06e9118d715347cc6fbf"),r("a86c41d10c7ccf1c6873"),r("4ee649c87692c7abb6dd"),r("87997867a0dfb75f73e8"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df"),r("cc0dee3c24a086419bc5");var n,o=r("bd2555d9b4311aab9971"),i=r("5f9e65e24255a01903f6"),a=r("5f60e446fe6f0a2bb415"),s=r("3e184cdc0af6f0ad3e63"),c=r("01d16a391b82cbd5b98a"),u=r("52cf01d8f4c3baca94b3"),l=r("2d07655de945d5332ec5"),p=r("33f5d04d64e8d312e0e8"),f=r("4edf36051f647444455a");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var d={"graphics:add":"rect:add","graphics:remove":"rect:remove"},_=(_applyDecoratedDescriptor((n=function(e){function BaseFigure(){var e,t,r;!function(e,t){if(!(e instanceof BaseFigure))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=_getPrototypeOf(BaseFigure)).call.apply(e,[this].concat(o)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(this):r,_defineProperty(_assertThisInitialized(t),"_visible",!0),_defineProperty(_assertThisInitialized(t),"_opacity",1),_defineProperty(_assertThisInitialized(t),"_locked",!1),_defineProperty(_assertThisInitialized(t),"_color",""),_defineProperty(_assertThisInitialized(t),"_border",1.5),_defineProperty(_assertThisInitialized(t),"_template",null),_defineProperty(_assertThisInitialized(t),"_lockPointsUpdates",!1),_defineProperty(_assertThisInitialized(t),"_shouldDraw",!1),_defineProperty(_assertThisInitialized(t),"parent",null),_defineProperty(_assertThisInitialized(t),"destroyed",!1),_defineProperty(_assertThisInitialized(t),"copied",!1),_defineProperty(_assertThisInitialized(t),"isHole",!1),_defineProperty(_assertThisInitialized(t),"children",new Set),_defineProperty(_assertThisInitialized(t),"points",[]),_defineProperty(_assertThisInitialized(t),"limit",{width:1/0,height:1/0}),_defineProperty(_assertThisInitialized(t),"leftTopPoint",null),t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(BaseFigure,o.EventEmitter),t=BaseFigure,n=[{key:"normalizePointLocation",value:function(e,t){var r=!1;return e.left<0&&(e.left=0,r=!0),e.top<0&&(e.top=0,r=!0),e.left>t.width&&(e.left=t.width,r=!0),e.top>t.height&&(e.top=t.height,r=!0),{point:e,isOutOfBounds:r}}},{key:"isValid",value:function(){return!0}},{key:"_getArea",value:function(){return 0}},{key:"getArea",value:function(e){if(!e||!e.length)return 0;if(1===e.length)return 1;var t=this._getArea(e);return Number.isNaN(t)||!Number.isFinite(t)||t<0?0:t}},{key:"Point",get:function(){return p.a}},{key:"Rect",get:function(){return f.a}},{key:"type",get:function(){return""}},{key:"_updateFields",get:function(){return["id","visible","rectVisible","locked","color","opacity","border","limit","bitmap"]}},{key:"maxPoints",get:function(){return 1/0}},{key:"graphicsType",get:function(){return"vector"}}],(r=[{key:"init",value:function(e){this.rect=new this.constructor.Rect,Object(c.n)(this,this.rect,d),this.rect.init({visible:!1,color:this.color}),this.isHole=!!e.isHole,this.parent=e.parent,this.parent&&this.parent.addChild(this),this.update(e),e.points&&this.addPoints(e.points)}},{key:"update",value:function(e){Object(c.d)(this,e,this.constructor._updateFields)}},{key:"_drawHole",value:function(){}},{key:"_drawHoles",value:function(){this.holes.forEach(function(e){e.visible&&e.points.length&&e._drawHole()})}},{key:"_draw",value:function(){}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHole)return this._shouldDraw&&(this.parent._shouldDraw=!0),void this.parent.draw();(e||this._shouldDraw)&&(this._draw(),this._shouldDraw=!1)}},{key:"render",value:function(){this.emit("render")}},{key:"_onPointOver",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["point:pointer:over"].concat(t))}},{key:"_onPointOut",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["point:pointer:out"].concat(t))}},{key:"_onPointDown",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["point:pointer:down"].concat(t))}},{key:"_onPointUp",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["point:pointer:up"].concat(t))}},{key:"_onPointUpOutside",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["point:pointer:upoutside"].concat(t))}},{key:"_onPointMove",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.emit.apply(this,["point:pointer:move",e].concat(r))}},{key:"_onPointBeforeChangeCoords",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["before:change:coords"].concat(t))}},{key:"_onPointChangedCoords",value:function(e){if(!this._lockPointsUpdates){this.normalizePointLocation(e),this.children.size&&this.children.forEach(function(e){return e.restrictPosition()}),this.updateBoundingRect(),this.draw(!0);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.emit.apply(this,["changed:coords",e].concat(r))}}},{key:"_onPointChangedSelected",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.emit.apply(this,["point:changed:selected"].concat(t))}},{key:"_makePoint",value:function(e){var t=this._mapNewPoint(e);if(t instanceof this.constructor.Point)return t.removeAllListeners(),t;var r=t.locked,n=void 0===r?this.locked:r,o=t.visible,i=void 0===o?this.visible:o,a=new this.constructor.Point;return a.init(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},t,{locked:n,visible:i,figure:this})),a}},{key:"_mapNewPoint",value:function(e){return e}},{key:"_addPointEventArg",value:function(){}},{key:"_beforePointAdd",value:function(){}},{key:"_afterPointAdd",value:function(){}},{key:"_addPoint",value:function(e,t){var r=this;if(!this.canAddPoint)return null;var n=t;null==n&&(n=this.points.length);var o=this._makePoint(e);return this.normalizePointLocation(o),this._beforePointAdd(o,n),o.on("pointer:over",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._onPointOver.apply(r,[o].concat(t))}).on("pointer:out",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._onPointOut.apply(r,[o].concat(t))}).on("pointer:down",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._onPointDown.apply(r,[o].concat(t))}).on("pointer:up",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._onPointUp.apply(r,[o].concat(t))}).on("pointer:upoutside",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._onPointUpOutside.apply(r,[o].concat(t))}).on("pointer:move",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._onPointMove.apply(r,[o].concat(t))}).on("before:change:coords",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._onPointBeforeChangeCoords.apply(r,[o].concat(t))}).on("changed:coords",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._onPointChangedCoords.apply(r,[o].concat(t))}).on("changed:selected",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._onPointChangedSelected.apply(r,[o].concat(t))}),n===this.points.length?this.points.push(o):this.points.splice(n,0,o),this._shouldDraw=!0,this._afterPointAdd(o,n),this.emit("point:add",o,this._addPointEventArg(o,n)),{point:o,index:n}}},{key:"addPointAt",value:function(e,t){this._addPoint(e,t),this.updateBoundingRect()}},{key:"addPoint",value:function(e){this.addPointAt(e,e.index)}},{key:"addPoints",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.forEach(function(e){return t._addPoint(e,e.index)}),r&&this.updateBoundingRect()}},{key:"_removePointEventArg",value:function(){}},{key:"_removePoint",value:function(e){var t=this.points[e];return this.destroyed||this._beforePointRemove(t,e),t.destroy(),this.points.splice(e,1),this._shouldDraw=!0,this.destroyed||this._afterPointRemove(t,e),this.emit("point:remove",t,this._removePointEventArg(t,e)),e}},{key:"_beforePointRemove",value:function(){}},{key:"_afterPointRemove",value:function(){}},{key:"removePoint",value:function(e){this._removePoint(e),this.destroyed||this.restrictPosition(!0)}},{key:"removePoints",value:function(e){var t=this;Object(c.f)(e,this.points).forEach(function(e){return t._removePoint(e)}),this.destroyed||this.restrictPosition(!0)}},{key:"removeAll",value:function(){this.removePoints(this.points),this.removeChildren(this.children)}},{key:"addChild",value:function(e){this.children.add(e)}},{key:"addChildren",value:function(e){var t=this;e.forEach(function(e){return t.addChild(e)})}},{key:"removeChild",value:function(e){this.children&&this.children.delete(e)}},{key:"removeChildren",value:function(e){var t=this;e.forEach(function(e){return t.removeChild(e)})}},{key:"_normalizePointInsideParent",value:function(e){var t=this.parent.getClosestPoint(e);t&&t.position&&(this._lockPointsUpdates=!0,Object.assign(e,function(e,t){return{left:t.left+1*Math.sign(t.left-e.left),top:t.top+1*Math.sign(t.top-e.top),depth:t.depth+1*Math.sign(t.depth-e.depth)}}(e,t.position)),this._lockPointsUpdates=!1)}},{key:"normalizePointLocation",value:function(e){var t=!1;return this.parent?this.parent.isPointWithin(e)?t=!1:(this._normalizePointInsideParent(e),t=!0):(e.left<0&&(e.left=0,t=!0),e.top<0&&(e.top=0,t=!0),e.left>this.limit.width&&(e.left=this.limit.width,t=!0),e.top>this.limit.height&&(e.top=this.limit.height,t=!0)),t&&this.updateBoundingRect(),t}},{key:"isPointExists",value:function(e){for(var t=0,r=this.points.length;t<r;++t){var n=this.points[t];if(n!==e&&n.left===e.left&&n.top===e.top)return!0}return!1}},{key:"isPointWithin",value:function(){return!0}},{key:"getClosestPoint",value:function(){return null}},{key:"restrictPosition",value:function(e){for(var t=!1,r=new Set(Object(u.c)(this.points)),n=0,o=this.points.length;n<o;++n){var i=this.points[n];this.normalizePointLocation(i,!1)&&(t=!0),!this.allowDuplicates&&this.isPointExists(i)&&r.add(i)}r.size&&this.emit("redundant:points",_toConsumableArray(r)),this.children.forEach(function(e){return e.restrictPosition()}),(e||t)&&this.updateBoundingRect()}},{key:"getArea",value:function(){return this.constructor.getArea(this.points)}},{key:"updateBoundingRect",value:function(){var e=this;this.rect.updateDimensions(this.points);var t=null;if(this.points.length){var r=Number.MAX_VALUE;this.points.forEach(function(t){t.top===e.rect.top&&t.left<r&&(r=t.left)}),t={left:r,top:this.rect.top}}this.leftTopPoint=t}},{key:"showRect",value:function(){this.rect&&(this.rect.visible=!0)}},{key:"hideRect",value:function(){this.rect&&(this.rect.visible=!1)}},{key:"getAreaScale",value:function(e){var t=e.height/this.rect.height,r=e.width/this.rect.width,n=Math.min(r,t)/1.25;return{x:n,y:n}}},{key:"scale",value:function(e,t){t?t.set({left:t.left*e.x,top:t.top*e.y}):this.points.forEach(function(t){return t.set({left:t.left*e.x,top:t.top*e.y})})}},{key:"scaleToArea",value:function(e){this.scale(this.getAreaScale(e)),this.draw()}},{key:"scaleFactor",value:function(e){this.scale({x:e,y:e}),this.draw()}},{key:"clone",value:function(){var e=new this.constructor;return e.copied=!0,e.init(this),e}},{key:"_beforeDestroy",value:function(){}},{key:"_destroy",value:function(){}},{key:"destroy",value:function(){return this._beforeDestroy(),this._destroy(),this.destroyed=!0,this.emit("destroy"),this.removeAll(),this.parent&&(this.children.forEach(function(e){e.parent=null}),this.parent.removeChild(this)),this.children=null,this.points=null,this.parent=null,this.removeAllListeners(),null}},{key:"type",get:function(){return this.constructor.type}},{key:"visible",get:function(){return this._visible},set:function(e){this._visible=e,this.visible||this.hideRect()}},{key:"rectVisible",get:function(){return!!this.rect&&this.rect.visible},set:function(e){this.rect.visible=e}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.rect&&(this.rect.color=e)}},{key:"border",get:function(){return this._border},set:function(e){this._border=e}},{key:"template",get:function(){return this._template},set:function(e){this._template=e}},{key:"bitmap",get:function(){return this._bitmap},set:function(e){this._bitmap=e}},{key:"canAddPoint",get:function(){return this.points.length<this.constructor.maxPoints}},{key:"allowDuplicates",get:function(){return!1}},{key:"locked",get:function(){return this._locked},set:function(e){this._locked=e}},{key:"isValid",get:function(){return this.constructor.isValid(this)}},{key:"holes",get:function(){return _toConsumableArray(this.children).filter(function(e){return e.isHole})}}])&&_defineProperties(t.prototype,r),n&&_defineProperties(t,n),BaseFigure}()).prototype,"visible",[a.a,s.a],Object.getOwnPropertyDescriptor(n.prototype,"visible"),n.prototype),_applyDecoratedDescriptor(n.prototype,"rectVisible",[a.a],Object.getOwnPropertyDescriptor(n.prototype,"rectVisible"),n.prototype),_applyDecoratedDescriptor(n.prototype,"opacity",[a.a,s.a],Object.getOwnPropertyDescriptor(n.prototype,"opacity"),n.prototype),_applyDecoratedDescriptor(n.prototype,"color",[a.a,s.a],Object.getOwnPropertyDescriptor(n.prototype,"color"),n.prototype),_applyDecoratedDescriptor(n.prototype,"border",[a.a,s.a],Object.getOwnPropertyDescriptor(n.prototype,"border"),n.prototype),_applyDecoratedDescriptor(n.prototype,"addChild",[s.a],Object.getOwnPropertyDescriptor(n.prototype,"addChild"),n.prototype),_applyDecoratedDescriptor(n.prototype,"removeChild",[s.a],Object.getOwnPropertyDescriptor(n.prototype,"removeChild"),n.prototype),n);Object(i.a)(_,[{type:l.a}])},"7f9c1fb802a7f39bc6fa":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={UNREAD:"unread",READ:"readed"}},"80ad12c6506a59195955":function(e,t,r){},"816b386075a8d61b717b":function(e,t,r){"use strict";var n=r("581c25cdc09920fd8289");r.n(n).a},"816e7732949845b05bfd":function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("22ee624462a7244acc0e"),r("b42383ffd481a2f01f84");var n=r("9e0829ebb5f4d9754370"),o=r("7ee98bac1562359c81b0"),i=r("52cf01d8f4c3baca94b3");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function segmentsSum(e){for(var t=0,r=0,n=e.length;r<n;++r){var o=(r+1)%e.length;t+=e[r].left*e[o].top,t-=e[o].left*e[r].top}return t}var a=function(e){function PolygonFigure(){var e,t,r,n,o;!function(e,t){if(!(e instanceof PolygonFigure))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return this,t=!(r=(e=_getPrototypeOf(PolygonFigure)).call.apply(e,[this].concat(a)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(this):r,null,(o="_isClockwise")in(n=_assertThisInitialized(t))?Object.defineProperty(n,o,{value:null,enumerable:!0,configurable:!0,writable:!0}):n[o]=null,t}var t,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PolygonFigure,o.a),t=PolygonFigure,a=[{key:"_getArea",value:function(e){return Math.abs(segmentsSum(e)/2)}},{key:"isValid",value:function(e){return e.points.length>=3}},{key:"type",get:function(){return n.SHAPE_TYPES.POLYGON}}],(r=[{key:"getSegments",value:function(){if(!this.points||this.points.length<2)return[];for(var e=[],t=1,r=this.points.length;t<r;++t){var n=t-1,o=this.points[n],i=this.points[t];e.push({point1:o,point2:i,point1Index:n,point2Index:t,x1:o.left,x2:i.left,y1:o.top,y2:i.top})}var a=this.points[this.points.length-1],s=this.points[0];return e.push({point1:a,point2:s,point1Index:this.points.length-1,point2Index:0,x1:a.left,x2:s.left,y1:a.top,y2:s.top}),e}},{key:"isPointWithin",value:function(e){return Object(i.e)(e,this.points,this.rect)}},{key:"updateBoundingRect",value:function(){var e;this.updateClockwise();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=_get(_getPrototypeOf(PolygonFigure.prototype),"updateBoundingRect",this)).call.apply(e,[this].concat(r))}},{key:"updateClockwise",value:function(){this._isClockwise=segmentsSum(this.points)>=0}},{key:"getClosestPoint",value:function(e){return Object(i.a)(this.points,e)}},{key:"isClockwise",get:function(){return this._isClockwise}}])&&_defineProperties(t.prototype,r),a&&_defineProperties(t,a),PolygonFigure}()},"8333cfdeddda72a96411":function(e,t,r){},"83aae9157d614d279fc4":function(e,t,r){"use strict";r("47e89aed260415009385"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n=r("c90887849e6e38ab5d76"),o=r("fa4339c8926dcb397641");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={title:o.titleSchema.required(),description:o.descriptionSchema.allow(""),isNewDataset:n.default.boolean().required().strip(),onlyTransferLearning:n.default.boolean().required(),architectureId:o.idSchema,projectId:o.idSchema,datasetId:o.idSchema.allow(null),datasetTitle:o.titleSchema},a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},i,{pluginVersionId:i.architectureId.required(),projectId:i.projectId.when("isNewDataset",{is:!1,then:i.projectId.required()}),datasetTitle:i.datasetTitle.when("isNewDataset",{is:!0,then:i.datasetTitle.required()})}),s=(n.default.object().keys(a),{title:o.titleSchema,description:o.descriptionSchema.allow(""),readme:n.default.string().allow(""),allowPublicSmart:n.default.boolean()}),c=(n.default.object().keys(s),{type:n.default.string().trim().valid(["model","train","inference","inferenceLimit"]),organization:o.titleSchema.required(),description:o.descriptionSchema.allow(""),modelId:o.idSchema.when("type",{is:"model",then:n.default.required()})}),u=(n.default.object().keys(c),{title:o.titleSchema,weightId:o.idSchema,taskId:o.idSchema}),l=(n.default.object().keys(u),{page:n.default.number().integer().positive(),limit:n.default.number().integer().positive(),sort:n.default.object().keys(o.sortingSchema),architectureId:o.idSchema,ready:n.default.boolean().default(null),showDisabled:n.default.boolean().optional().default(!0),type:n.default.string().trim().allow("train","test"),title:o.titleSchema});n.default.object().keys(l)},"84137e7091526f4ae896":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="32" height="32" viewBox="0 0 24 24" fill=""><path d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>'},"84295a61134fb8a1951a":function(e,t){},"859560fdf58f03d5af41":function(e,t){},"8750ccd2d5fc1c881c3e":function(e,t,r){},"88cf583d7e99d16abfa6":function(e,t,r){"use strict";var n=r("9f7a0b70477acdef240e");r.n(n).a},"89231cc2992cc1e35cc8":function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o});var n={PENDING:"pending",STOPPED:"stopped",IN_PROGRESS:"in_progress",ON_REVIEW:"on_review",REVIEW_COMPLETED:"review_completed",COMPLETED:"completed"},o={ALL:"all",EDIT_ALL:"edit_all",ONLY_OWN:"only_own"}},"893f8805d089d6a8fe5a":function(e,t,r){"use strict";var n=r("b10e58d504f41f88a603");r.n(n).a},"89932bc54f57210cc410":function(e,t,r){"use strict";var n=r("eca42fce204b0aac29a1");r.n(n).a},"8a555c6b372ade0ce59e":function(e,t){},"8ab9eff72ea5e9b91e4a":function(e,t,r){"use strict";var n=r("c5d455e08dd29de4d248");r.n(n).a},"8b22c5587e25920da516":function(e,t,r){"use strict";var n=r("ab2336566bc27a276095");r.n(n).a},"8b491dc126a3abe46131":function(e,t,r){"use strict";var n=r("98b97e28f448c9fa6850");r.n(n).a},"8ce7ab3f045019d3e451":function(e,t){},"8d2f5ae083198d11b26d":function(e,t,r){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return function(e,t,r){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&_setPrototypeOf(o,r.prototype),o}).apply(null,arguments)}(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function normalizeIndex(e,t){var r=t;return r<0?0!=(r%=e)&&(r+=e):r>=e&&(r%=e),r}r.d(t,"a",function(){return n}),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("22ee624462a7244acc0e"),r("ecbd7af7d78f58b964e0"),r("d67962f1d0253308d14a"),r("b42383ffd481a2f01f84"),r("d366eac6ddb92c017a0d"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("aa7b434460007d4b1170");var n=function(e){function ListOrderedMap(e){var t;return function(e,t){if(!(e instanceof ListOrderedMap))throw new TypeError("Cannot call a class as a function")}(this),(t=function(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,_getPrototypeOf(ListOrderedMap).call(this)))._indexes=[],t._idToIndexesMap=new Map,e&&Array.from(e).forEach(function(e){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e,2),n=r[0],o=r[1];t.set(n,o)}),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ListOrderedMap,_wrapNativeSuper(Map)),t=ListOrderedMap,(r=[{key:"_updateIndexes",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._indexes.length-1,r=e;r<=t;++r)this._idToIndexesMap.set(this._indexes[r],r)}},{key:"first",value:function(){return this.getAt(0)}},{key:"firstKey",value:function(){return this._indexes[0]}},{key:"last",value:function(){return this.getAt(this._indexes.length)}},{key:"lastKey",value:function(){return this._indexes[this._indexes.length]}},{key:"nextKey",value:function(e){return this._indexes[this.indexOf(e)+1]}},{key:"previousKey",value:function(e){return this._indexes[this.indexOf(e)-1]}},{key:"getAt",value:function(e){return this.get(this._indexes[e])}},{key:"hasAt",value:function(e){return this.has(this._indexes[e])}},{key:"setAt",value:function(e,t,r){var n=!this.has(e);if(_get(_getPrototypeOf(ListOrderedMap.prototype),"set",this).call(this,e,t),null!=r)if(n){var o=r;o>this._indexes.length?o=this._indexes.length:o<0&&(o=0),this._idToIndexesMap.set(e,o),o===this._indexes.length?this._indexes.push(e):this._indexes.splice(o,0,e),this._updateIndexes(o+1)}else this.moveKey(e,r);else n&&(this._idToIndexesMap.set(e,this._indexes.length),this._indexes.push(e))}},{key:"set",value:function(e,t){return this.setAt(e,t)}},{key:"delete",value:function(e){_get(_getPrototypeOf(ListOrderedMap.prototype),"delete",this).call(this,e);var t=this._idToIndexesMap.get(e);this._idToIndexesMap.delete(e),this._indexes.splice(t,1),this._updateIndexes(t)}},{key:"deleteAt",value:function(e){return this.delete(this._indexes[e])}},{key:"indexOf",value:function(e){return this._idToIndexesMap.get(e)}},{key:"move",value:function(e,t){var r=normalizeIndex(this._indexes.length,e),n=normalizeIndex(this._indexes.length,t);if(r!==n){var o=this._indexes[r];this._indexes.splice(r,1),this._indexes.splice(n,0,o),r>n?this._updateIndexes(n,r):this._updateIndexes(r,n)}}},{key:"moveKey",value:function(e,t){return this.move(this.indexOf(e),t)}},{key:"swap",value:function(e,t){var r=normalizeIndex(this._indexes.length,e),n=normalizeIndex(this._indexes.length,t);if(r!==n){var o=this._indexes[r],i=this._indexes[n];this._idToIndexesMap.set(o,n),this._idToIndexesMap.set(i,r),this._indexes[r]=i,this._indexes[n]=o}}},{key:"forEach",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this._indexes.forEach(function(n,o){e.call(r,t.get(n),n,o,t)})}},{key:"slice",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this;return this._indexes.slice(e,t,function(e,t){r.call(o,n.get(e),e,t,n)}).map(function(e){return n.get(e)})}},{key:"clear",value:function(){_get(_getPrototypeOf(ListOrderedMap.prototype),"clear",this).call(this),this._indexes=[],this._idToIndexesMap=new Map}},{key:"entries",value:function(){var e=this;return this._indexes.map(function(t){return[t,e.get(t)]})}},{key:"keys",value:function(){return this._indexes.slice(0)}},{key:"values",value:function(){var e=this;return this._indexes.map(function(t){return e.get(t)})}},{key:"indexes",value:function(){return this._indexes.map(function(e,t){return t})}},{key:"clone",value:function(){return new this.constructor(this.entries())}}])&&_defineProperties(t.prototype,r),ListOrderedMap}()},"8dd2e6f858aae89c9288":function(e,t,r){"use strict";var n=r("72754adc47b502a73656");r.n(n).a},"90cdbfc95aa791a91fea":function(e,t,r){},"92677abab09e8e71947b":function(e,t){},"9344762bccae751ce4c2":function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n=r("c90887849e6e38ab5d76"),o=r("fa4339c8926dcb397641"),i={title:o.titleSchema.required(),groupId:o.idSchema.required(),workspaceId:o.idSchema.required(),srcNotebookId:o.idSchema.required(),sharedLinkToken:n.default.string().optional(),isPublic:o.booleanSchema.optional().default(!1)};n.default.object().keys(i)},"93ea1ae0a314a511a85b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATQAAAD/CAMAAABIB9puAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTNERERCMzJDNkY1MTFFN0JFOUNCQkFEOTk5NUQ0MEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTNERERCMzNDNkY1MTFFN0JFOUNCQkFEOTk5NUQ0MEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBM0REREIzMEM2RjUxMUU3QkU5Q0JCQUQ5OTk1RDQwQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBM0REREIzMUM2RjUxMUU3QkU5Q0JCQUQ5OTk1RDQwQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkujVxUAAABgUExURTI8M5fO/kuq/TxGPThCOUtUS+rz+lU4L3QuJ5KcqD5IPjpEOtHi8TU/NjtFPDdBOI8lH9HV2kFFO257i5oeGjo+NXuHljA6Mbe9xTxEOz9KP0A+NpsgG5ofG5sgHP///y+mOQMAABiYSURBVHja7J0Ld+K6roDpkE2nBBJ627RkQnr+/7+8JPFDkiXZedAyQ7zWOXuAkMeHrLfdzf/WMXpsVgQrtBXaCm2FtkJbxwpthbZC+3eh7Z6efo0eT0+7B4a2m0DMcNs9KrRD9/SH0Y+/O3SsD48J7Wm6wHQi+vSI0A6znvvpYWQNQtvNlJUrtd3DQXuaO7+eHmSCbpCgzRSU3YOI2mZROXkQUUPQZuvxw8NBW2BuXefnw0Gbf7oV2gpthbZCW6Gt0FZoK7QV2gpthfbPQ9stAm13fp2bVPmLoO2UnHg6tNe3t7eP1zm3/jrv698Lra9XHWZC2328deM8Q86uZ1iE2svby82hHUzFbh60l7dhvEyfY52svv4l0Fydcw6085sdH4efpvYN0Hwx+Wk6tNc3Pz6my9p5EWq3h3YANfXdVGiHNzjOcyRtAWq3hwb7EKZKmjECc6F1zGbKmtGsL17HXiX/vDS0g84sDdoLYjb1oQeNNk+vcdASzjdapx1+zbWeZ8zsZQ6zmdbg9XwdH90t9P86u5dLW8/dTD8NK7S3j7mWc7YNJTrtZWFoh8PBGNDD5IiAKLSJthOSmkvtptAGZ6PDJRdI49CWUWgoGnidLK83h2YNwGFWloMotImWc3fF9OLHFeHuLqF5p3YOtNdFjEAgr9NPdFNoT6pPmwptGYUWUuse87y7N2iwE/cwHdoyCi041Usvwy93Bm3369cSkvZy1URLxE+E2ouR4fN9QUMt35N1Wi8Mr4voIZRdssry476g/UqcnTq089sB6LWP2dnqF8C+//duCWiv52XCqEOqoMWgncHDLtDU/OLldTlJWyrLkWoGItCuMnZeMA/WncinJM4fL4d7grZLZhYxBIcPk96er9AWHMTfTtC4CdAO6cyiftpLn94+3xMz6jwuAQ0tlopq2pQw6nxewAgsOnxeqE8NfXT/eZ0B7WncQrt4wP76MVehHdSxgHVZwOXYdSP1ign5tN3rzMr6mzruA9qo8R29HCu0Fdo/AW2piOC+oL2o4zus7dqftkJboa3QVmgrtBXaCu27oa2LZEdDW5djT4K2LvwfDW3dYmICtHUzkynQ1m1zJkBbN2iaAm3dCmwKtHXTuSnQ1u0Np0BbN9KcBG0dK7QV2gpthbZCW0cE2n/rGD02RT/yPL/+/5aM/TC27KCfXF/+UcYeDvsG/2l8RK8hXpW9If0uwuts/vtnoO2jGBaGVlBk/jtbfSQIgLsjSR7GQYue1h0if3l4svjh9nN8WQStCEFst8nQ/iQOhcIMaKOI7zG0fdrVOWhe2B4E2n4+tLquLTkIS5y24ikFPeFfwlNtk7H5D1N+CHjomB8i6SgLra4HW0B1G3oj5YziDZtXrKSmSZoMTb+r0fLLzTJ47N8EbX9n0DpkAzTMCyo7ehnWdMamFz31Vvyu+Bvps3OSC8NQ07T35r8rq9wMLGYE2l6FluTqQGjm/FtJHpQrJni1CZDoBaLQtj8Mjd7IPUAj5igGzY3Cw8LQxis0diaNmS3BFcmNq9DYb+wTpz/8svEqYtA8JmIWUpRBRPtgO4gPp5eYCG1PkHVfke59S71RHpmj9t3QHCrjjiZA4376tDjSHl94aOwjAGhUBw3HX2lBaFse2vWLnpMaJKTNQM69/UMfT/ecoeSMCiO22yAFEUqu/S94VCBotRtYfii0goe2FyU5XW39CaDFkcFAQAikVY3kbbWeh8DPat66Ehl4OWzmkH8Q2tZNRwbaFgkYC818syeCoHX/MdCybmBoklxzT/dnhoUMM3K8Cph+SgotdRRGznxcbgaEhqhFoMW9isAOSgSiCkflopwOaMEJ0ExadoAGragZHbSyLA03bzeVNK3ko0mCRsFLQqH7aUwimZpUSWjt4xTQDKJJug+nasfMzdkOmgNXFAtCi82X0dC2k6Htx0LDyTAGGpikV2h/ynKAZmdnqBUTE2qpSkZNcXITlHxIofH1Cn+aAswxHhr1aEl60Q03PQ00G3kOGk2mlhqQoMcPHD6sQbTaBGN+toETqlZ8vK8eSz/TgDswqY8HLZ6znwDNfV4UCrZ4KiJU/YU63yE0bVrzF9WKim5Oxq1nmOnjnDcPbfA44Kf8Q+Jkh/KYe3fwPswxFUxCGN06OR0SUSY8lR19q5mCiq4oSVvhbRK9Dy5HRlJpdwDNRQtzoA1PuBS0LYQW5B/Zr7EnEicTOppREsKNOS42ERgexl2RFc6h6pEbz4GFVvPCIioTDhrNPAKbYCAztw8SFQU9GnjT9E4UNQfqCcFBsvcPNflwBRtQhzrNOWIDUsrLOmgQoLVn1rmdDy38oR4EGgzYycD5NsENLRCyPj0Aw11Bf4jQkFuq9uRY7UaDczP9aCqMQmOfty64Spz/KoIGTpNzQ5jqDN4hq1LHtITm0iRmKcjBNLNFzY9TTpBYXRfKCL1CA80nOnKJGAcNNrfRb9X0d/x2aIFRC6FtJ0LL7Mjjg9dMPDQq/tup0NQvRwAHNnuL1ewW52V5Ziw0k+WAwmalL0TJXCB3pVN6OBP0omJxLAZip5eUiWGlknfK0CldXjbnOzOQIu0/7CKCcdD689YzoBUqNP6RofFYApoL3gpXOCHQwuwKhFbaQSFp85ZAs+zowZKXjKApXXActEKDFlzPvZaCIwutdhUB2yuxF+N5A+3osCFciBoRxgI7eFsGW1iusIThA6q9g0ytR8yQbEP9GYQmmuV3rqiUPbceqIV2PAJqGjTzBoCGahGBMMLmwAL2JhVcC+FWMNA8tEJS+2o8J8zeAZqQCR7+56EdzfAzNGOgZb3q646waV7U/5ECzR4wAxpJJYrxtjmyKKZDE+6FQDsaJA4dVHOWGdB/1HfD0Ejw4j6sGYPOQCiwLkI4cauF/wqx69Y64eCOyiGf2/BNHJQ6hTYIm6cG2BBkUCadrBFoSP+impjs7zJ5UMgRJwyph2WzQAXzAw4pIhvb4d+IccxMj2Pt2kP98f0FVWjAMIyFVtwO2pZ6WNOgaUFAPh4asQCZwMwemTORJ/S9c+G+6mLL59cLHGmIZrWG0x1dWAkF8xpCBj+jKwVzMQ2GHEILLYCH5oWRd+3C6KnmcwnO7nJlDJKFEBR3XWMxItBq726i0DqEWEu4+NxPF0b9bdCc5N4LNOp2eOes5Afrz/kriRcO3suBM4InO06Rp6QUoILNhLAGvkWhkYNxE4wJozYbBVsGoFl0ypHo95N+r9q/4xQ5PYhNEIAnToPGI5NA5hgadKr8XTtoV2qbb4SW/xvQhgFc3JCYM5heJsnEjaXkgsnFT09+CqJ349DMQ3o08Dfsbpoys7PTX95zDV2pzX6zQdggNEaLgXlMDlFNQh7Rsf5lqHNyRkz4T3xvRY2Z5VCkuVNA/x9xY38UBRpIfwTIjiUVNAFa8a3Q6jg0fm6OgXb10/bh9CwBDKDAiL3IGBOaDE2sBkXmoHwhGJ0UNZNvZn1eYDVtsKAbaQPt81OAdhTHwCoMH7LY7IR9qlz5rNYUl3W4RGh+zQ1zG948FE7BufZjAk1h1p+cg5ZFoJUWWhYvyvDQpEJGret/dwZ3Rfv85g0bhzHPCmJ0XND2gWnoGIfPQqEhnRZlxgSpUaOJqhByTVqAZkVNhlawiT0CzYfeDDQflGqWGUHbQCYysiyqy7C/LUw5HCkneCnMxbBUuKqmCI0mScD0hLfDeG8wb4OhddhKmRpy2EpKLCMlBsHLxYJUqJ6dYgVsIqgO0p4Fq4rkvgAEja9YDj6c+1oIzWGzqDabJGgZDy0eJiePGdDY0us4aDWGFlCDg1pWNg+Zy8UFp47Ay7pumufxo2mayp3XulU1iqt5Zp08y+XQGkzAgjdkNbBd9WAIPqlaI8Tou8iZzcYMx+z5+ff40WGrKbSwEutFOQ+XZTLMRF/b5B8HqjXQviq0zY2gdcxO40eP7Y6gfRJvDRELJq1c7EuBNsjZ6Wv0GKjVGdQ2UEmS7AgxghQUbEbgU6c4rALnM4aAKDZu8ND4VBKIxEgt0MzN0wRmA7XGUiOQOEtD9bmRFyXYx35aLRz+3dB6GzCRmaM2D1q+ALQ4K0oNlUYFaFxmfNbcDKmpLmA/++jcdMfzvlJKOj0OjbehpZinhLLFVRM6Zs0cZl8nRI0prCBOKMUxlGXCVImZLDnYnyTsnsqRD/q90OYyo7K2ALQsgMa1nI2GFkcmFat8ZDF8aebc5KwBdVDdLAMkQVU6CMecVpYjXAfNjahOIwotSIbHkHloeT5fzvAMBSIECh9UNcG+lqC2AgSNlzOSlxoDDZlNvlWhyhpuVN0w/36ebjdDWftJaH9GiBmCRpg1KeHkfDnz1DIw8bATz+YOcVRKvCOSqmGhZQq0TxJWhcxA1QV8khROnk7tItBODpqXLPOkfMztiLEpBrYoKo6ypNBIUIXVmQitrAYVHx3XJ27TAs2YrD33E/7/zHDaoH9R11kAraat1+7fbHN25qqjy0EjclYJZvHSDUaR/04RylMsDFVySGG7NIXmYxS++i5205Ye2mcwAhNQwvowmJjHo5Uzjtm4x0Xq7xSxoXIOqfGFsUyeeq41wn+qOQMY2ic7OGhDRwfNeBhmLSdo7MSqmvgQs0cUHptCanzEBPiFtSAPzbcpqtD6f/nUEIssbCkKigelJGcitKqUO8ntJ41oWOJOi3FJMlqpvy00Lf1NIPq52XKIQvWmQnP3V2aiBxOnZmQtXAhRcvWgPEcd/2KAAz7abDViEWzXmVnZudleOK2PkCFomQqtHzU/bxN8vd4nadiVENoqiUhYuBC0qpeHfspcUqBdrg5HOjT2gCRoZobeDFodZyaBM9qsU9jtRYVmP720Jw8teAKKjM0MJEIbggbm/ORimZgYxJwmQOO0WVU11qNtv5KQtcay8dDC2qBP+ILD0qCZGVqVGdN6KAoTu5xuqqSx2myYmJ0FcGKmQ2tPpg5Xfgc0PEPHQCPgOGhFhJkwNX3cxHsWITTj1nYFXz2JSZbMkJEO7TR4uZSZsgSHbVWKQktFNjDrhEw3msjb6OaLXlMgyoVphM7yZGiDrNWYT4Y9DJqNd+2nHLRsJjTLLDIvA2iV0jy+PLT+ZyKykggNZN44P02FdhTlbEjziNDQW+bFAI0aJ3Elh1BrHgutybJgUaFzdMm0RWtmEDTnm/RdyNhPGzM3237w0FoUHjDQ4qtfpPr8SGg4MgiWFWaoRoBWMNteZ1RD4JzbRGh9CHA1h6OhNT8ALQucCJCtR1AKGRoWUAQt0Qo0xgZI0MwnEjTV3Q5XTc6FFlDL89DV9d0uoDvTHQcqCGHAnmgFurn5LkDr3qLQgIbJNGi06S2n3nr3zjhov0l/Wz/yICKA3S+g+OesEQrrr47rfqTpNAqNQLsgGbu0XFjFSFpYZtbcN+entSOoMRnKml2chCoyJOcNGU6E9ttagSnQyvIboXE5yj4mjS1OksL6idCcVwuHwUNAEmohtEyDhqrNoFQ4ChrvhoRhFSl4ZloOBkJLdGyxoEFo4AWMnoKcLWpuSBEylDUeo9PY0WtWt0w6um+LV37lOGgQX8MI2jRo5QRox9nQBnPUlf1LZcWq1qeSBA0LXfMcChqERmKBLx4a7RS3BIU7Jf7OzPK8L/SRfVtgWwMP7YhcjuSOPhHapfd2lThUgybu/BGwWwCaM6NVifMfbkMa2F1Ef76HhPYFzCiFth22JU6EpuCi0BhmbUquw9eh4F4VR8QM1VdZaOV8aEi5waTRwMxAE3Ra/3MHK1ZSoL2zyHRol4tLDQU3Eb4I79dK55LQKsJs22/lfJ2euVRcMVr+u6GFLO4EWj1A6+Usi0FL7e6m0DyoBGjdp/1dYhqg5sxsDcJ6HTeB1vcDm71Zu7lJrCX9WVOgEefWuGljoRlfHCrYyCpc75yBdxeGhv6W0ZAXymFTFCfsU6D9/jlo2W2hGR8N3tutoUXKBAaa65QWoZUsNDuRloVGt62xGW7uZvzLRJ3mAiobRl3arzQZ841qMHMrL5KPNYwvCg1mO0Ge8SgxA9DUhVEMtN83hFb+MLQM999NhEYWrxwrU7xrv9ionMl720SuTQ3F5qa+nmNJaCirDjKz4b4QOGkQ+GmxlIfJ3F6iN3Whzlz308Y3Y1Ac8XLoIl8Smk9iMz9lycqZcW4ps42aJ6oGUyCJlpuQrQZN7nj7dmg03ymJmYM2hFEBNN2MKtQSoIX7Fv0kNHKtYwI0bD0/tXwHyUPybckDHqPqRGh6Qyr1R/qmrqhz6y5sbiXVEPA5O4EZ43LoyDA0rvHVUeLkzEDrV0qVcWjoVquqOsphVG+GWgQtxZ7T2LOsQmRHokzKXuVOhGbbX0ZBu44hZ9pUI6HhJ7kVNEbMAmi2VGChfX6mQ+OptRBay0I7DU196tZP46DZ0KTFOnYstOi0xD9obwj0ZqtwrU9p2oZOQSsCruWx2BRRQ8UW4RAIDVUl0I82Dlr4w3HrJSZC8wnVhi64SIPWDp2wM6AdYd3zFtCOidA+I+sv3L5Nma/fD73wjhpKR7bK6Lu7+ZqqlEbjoPkLkep+m9acGZQsuBwLNztphV2BZpH1f36kzznlg7Cd8K8cIWasQcXXocsgF15KnSRfTA0/LFvMgubKl0wUmgRtCG9y//cQu4xwr9hOeDpGoV3mQaust3OX0EJmXa3G/bH1bZ9BMdAu6E5ToMU3TpSgPbvVycEcDB1DfXFbD02+D/nertC2KfqMMNt3guYeoW3f39vEoUM7knQf3xrXsumVSyuIms+ThtDSmSFR06EZ+SxLWxM0yPKsdPHUFdt7MrUe2nEWtK/LeGiXW0NjvA0gaFd9lrs8nVu1OA5aFVsNKaJUoEkFbNGUatBU9XGFVnwmLFkp89z+YdArMrgxTGOnaOpQHTX1Vg007wpeSLLgXYT2lQBN0aW0ykLWRkmObek25iHbD1VjqXWO2nM1khgPjWZYsJYYAa1f6xvWnYyI+xQDDy1cs0jDzoDoJGqNNjFKeQV4ZWKoC4rQLxYZhAZqZbLLoVhtzo6z0DaTBtdPGqdWiQqtZFw381mDoXXYXGjgkaWVe2Ro0feQTovyYQ9hG0onzVAu3kN3XlFoIHBz0EYVi71hZiucXXKCydz+ADTRGsSglY0ADfkb06AdpTQRczv6ihVaqeJAVmOnp6NWBRNThZY1LsPB+xXRyCloAT4eJ9jxyNoo+qYATRA0Oaa60BkqZDSMAbOZD1ubYOLL9JL1ZGilv9FR0DYCNF7O1EAU21AVmk0XuV1L7xra5yxoRNlcqPYZVnu5SpPy1yJ6aJXb5e/CKi8KLbYINQUa2gMeqBEF2ueNoQ0bJFeJJT3LTBSpODTO5eBXmESWoPwctNbuxl1po+mXBlfGhb5HaIzp1KH5dI0dYsLjwjgHp9R9wczOiGr6332QUiAwlohs28VCOyZKWlJwgHNcDplEjYPWJm5AN+xmFfHAkjwPV/npNeqR/KmFyO74dwKtbdM31o95ranQOgti/MTNItAMuPR+NQDt3Q0VGtflwY1xlV9U1VehGel+HhQaKE46ZlwzYwK0ERvGW2jv78nQvuLE5kJTqJnmCFPnZ9W8fcK7hZaQYr2kxZIImrwnmdm31MRwHJfvgvb+rkDDEqQSndZpZvNmydDKMvyjO9hmjoSWmES7CbQJtLgTK336Q8OXhChc6LpCk6GZ/wULqheG5hdN6dDwA7GJ6ZF5sAgzvBgcYzMrtBo2b8//RQEe2n4qNBhGjYImmYs0TlDr89Ao0dHQ2MXByFDsZzLbbCg0TCKckzo0rVXKQUnw8BRoVRyaFkbdDhrOdP3L0CL1gU++agCg2YLtJQxdKDTBGmguQ5DajEPjV50qzIaHDD4XdVoMGZM6CqExOzP5x+yOUPxfzwKuDhL7DqZDG1s6enhorQ4taQGnXVAmMvu0aTXMDMxpBI290Qualuk9RhBaexNJO7Jz86gx617vI8mgSFo3gCaHhAkyJkLTajR8oI9foV2tqmMEmsJseOMhoMFkZ1eWiEzFFGiqVpOZhdYzSMuEdrO9DTSaRCIITyCr3lS87RTFJqxOpUJTrE0PjfHs453e6kB5Ier503/zARbc7MXXalQn7ah4G/6Ifx9aX0NpaNP2XGhisS7B7WWgLTRQtClDY6p64dxsmiqFGP3rfyE0tAOMCi3SR2R02mhtpUgiVuhhSgNT4aIl8PoKLVHMdGggZ/QI0JoyLJzwtlKGhhJte6XXJbnCPtWZUFwIrkVD3CdcbuTo3dnmKDfAsg4GK2fg33+0iJxdibEENLrhDknwo4eWm1ziW4MMfzuiOeq1c+VPwYZi9rDQjotBE5r2YtSGXalHzs5QPyUk+L80ZsIn7XtLpufw1084Z0LWaxq0zWRoKL2YIHYXZXwpZRF2hxn+WHtPPLSjLGpxaP8vwAAS16klQ9CBYAAAAABJRU5ErkJggg=="},"9654618d8367de065382":function(e,t,r){"use strict";var n=r("7e600945e9cf50d4102a");r.n(n).a},"96f8362dc09d49febb0f":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="32" height="32" viewBox="0 0 24 24" fill=""><path d="M2,4H8V6H16V4H22V10H20V14H22V20H16V18H8V20H2V14H4V10H2V4M16,10V8H8V10H6V14H8V16H16V14H18V10H16M4,6V8H6V6H4M18,6V8H20V6H18M4,16V18H6V16H4M18,16V18H20V16H18Z"/></svg>'},"98397d66c772b34a0217":function(e,t){},"989a42060903e47c0cff":function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"d",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"a",function(){return a}),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df");var n={REPLACE:"replace",IGNORE:"ignore"},o={CLONE:"clone",IMPORT:"import",IMPORT_AGENT:"import_agent",EXPORT:"export",BACKUP:"backup",RESTORE:"restore",REMOVE:"remove",TRAIN:"train",INFERENCE:"inference",SMART_TOOL:"smarttool",DEPLOY_MODEL:"infer_rpc",UPLOAD_MODEL:"upload_model",UPLOAD_IMAGES:"upload_images",CLEANUP:"cleanup",CLEAN_CHECKPOINTS:"clean_checkpoints",CUSTOM:"custom",PIPELINE:"pipeline",EXPORT_NOTEBOOK:"export_notebook",UPDATE_AGENT:"update_agent",PYTHON:"python"},i={ON_ERROR:"on_error",NEVER:"never"},a=new Set([o.IMPORT,o.IMPORT_AGENT,o.EXPORT,o.TRAIN,o.INFERENCE,o.DEPLOY_MODEL,o.CUSTOM,o.PIPELINE,o.PYTHON]);new Set([o.CLONE,o.BACKUP,o.RESTORE,o.REMOVE,o.EXPORT_NOTEBOOK]),new Set([o.CLEANUP]),new Set([o.DEPLOY_MODEL,o.SMART_TOOL])},"98b97e28f448c9fa6850":function(e,t,r){},"9b1d987fa6d55df40a83":function(e,t,r){"use strict";var n=r("29936396def38d5defbc");r.n(n).a},"9c896fb6926f77e30ea1":function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("47e89aed260415009385");var n,o=r("6d8089820eedc734c4ea"),i=r("c4ff9fc90ae775b45209");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={IMPORT:"import",DTL:"dtl",TRAIN:"train",INFERENCE:"inference",CUSTOM:"custom",PIPELINE:"pipeline",PYTHON:"python"};(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}})({},Object(o.omit)(a,"PIPELINE")),_defineProperty(n={},a.TRAIN,i.a.ARCHITECTURE),_defineProperty(n,a.INFERENCE,i.a.ARCHITECTURE),_defineProperty(n,a.IMPORT,i.a.IMPORT),_defineProperty(n,a.DTL,i.a.DTL),_defineProperty(n,a.CUSTOM,i.a.CUSTOM)},"9e0829ebb5f4d9754370":function(e,t,r){"use strict";var n=r("1b726e7ce4061546ecfc");r.d(t,"CLICKER_FILTER_TYPES",function(){return n.a}),r.d(t,"JOI_FORM_CUSTOM_TYPES",function(){return n.b}),r.d(t,"LOG_LEVELS",function(){return n.c}),r.d(t,"LOG_LEVEL_NAMES",function(){return n.d}),r.d(t,"POLYGON_TOOL_OPTIONS",function(){return n.e}),r.d(t,"STORAGE_PROVIDERS",function(){return n.f}),r.d(t,"TAG_TYPES",function(){return n.g});var o=r("d93711b385e8c0def2ac");r.d(t,"ACTIVITY_LOG",function(){return o.a});var i=r("7d074b0d47dd6102152e");r.d(t,"SHAPE_TYPES",function(){return i.a}),r.d(t,"SHAPE_TYPES_LABELS",function(){return i.b}),r("faf7059dd6c86b16a85c"),r("9c896fb6926f77e30ea1");var a=r("1c84413533b434a33065");r.o(a,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return a.ACL_ACTIONS}),r.o(a,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return a.ACL_SECTIONS}),r.o(a,"AGENT_CAPABILITIES_TASK_TYPES")&&r.d(t,"AGENT_CAPABILITIES_TASK_TYPES",function(){return a.AGENT_CAPABILITIES_TASK_TYPES}),r.o(a,"FIGURES_TOOLS")&&r.d(t,"FIGURES_TOOLS",function(){return a.FIGURES_TOOLS}),r.o(a,"FIGURE_TAGS_SPECIAL")&&r.d(t,"FIGURE_TAGS_SPECIAL",function(){return a.FIGURE_TAGS_SPECIAL}),r.o(a,"IMAGES_SORT_OPTIONS")&&r.d(t,"IMAGES_SORT_OPTIONS",function(){return a.IMAGES_SORT_OPTIONS}),r.o(a,"IMAGE_TAGS_SPECIAL")&&r.d(t,"IMAGE_TAGS_SPECIAL",function(){return a.IMAGE_TAGS_SPECIAL}),r.o(a,"IMPORT_CONFLICT_ACTION")&&r.d(t,"IMPORT_CONFLICT_ACTION",function(){return a.IMPORT_CONFLICT_ACTION}),r.o(a,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return a.JOB_FIGURES_VISIBILITY_MODE}),r.o(a,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return a.JOB_IMAGE_STATUS}),r.o(a,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return a.JOB_STATUS}),r.o(a,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return a.PLUGINS_TYPES}),r.o(a,"PROJECT_SHOW_GRAPH_LABELS_MODE")&&r.d(t,"PROJECT_SHOW_GRAPH_LABELS_MODE",function(){return a.PROJECT_SHOW_GRAPH_LABELS_MODE}),r.o(a,"PROJECT_SHOW_TAGS_MODE")&&r.d(t,"PROJECT_SHOW_TAGS_MODE",function(){return a.PROJECT_SHOW_TAGS_MODE}),r.o(a,"PROJECT_TAGS_SCENE_LOCATION_MODE")&&r.d(t,"PROJECT_TAGS_SCENE_LOCATION_MODE",function(){return a.PROJECT_TAGS_SCENE_LOCATION_MODE}),r.o(a,"PROJECT_TAGS_VALUE_TYPE")&&r.d(t,"PROJECT_TAGS_VALUE_TYPE",function(){return a.PROJECT_TAGS_VALUE_TYPE}),r.o(a,"PROJECT_TAGS_VALUE_TYPE_OPTIONS")&&r.d(t,"PROJECT_TAGS_VALUE_TYPE_OPTIONS",function(){return a.PROJECT_TAGS_VALUE_TYPE_OPTIONS}),r.o(a,"SHARE_LINK_TYPES")&&r.d(t,"SHARE_LINK_TYPES",function(){return a.SHARE_LINK_TYPES}),r.o(a,"TAG_APPLICABLE_TYPES")&&r.d(t,"TAG_APPLICABLE_TYPES",function(){return a.TAG_APPLICABLE_TYPES}),r.o(a,"TASK_RESTART_POLICIES")&&r.d(t,"TASK_RESTART_POLICIES",function(){return a.TASK_RESTART_POLICIES}),r.o(a,"TASK_TYPES")&&r.d(t,"TASK_TYPES",function(){return a.TASK_TYPES}),r.o(a,"USER_DEFAULT_SETTINGS")&&r.d(t,"USER_DEFAULT_SETTINGS",function(){return a.USER_DEFAULT_SETTINGS}),r.o(a,"USER_SETTINGS")&&r.d(t,"USER_SETTINGS",function(){return a.USER_SETTINGS}),r.o(a,"mergeProjectSettings")&&r.d(t,"mergeProjectSettings",function(){return a.mergeProjectSettings});var s=r("d11cd0540728c616a05b");r.d(t,"FIGURES_TOOLS",function(){return s.a});var c=r("84295a61134fb8a1951a");r.o(c,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return c.ACL_ACTIONS}),r.o(c,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return c.ACL_SECTIONS}),r.o(c,"AGENT_CAPABILITIES_TASK_TYPES")&&r.d(t,"AGENT_CAPABILITIES_TASK_TYPES",function(){return c.AGENT_CAPABILITIES_TASK_TYPES}),r.o(c,"FIGURE_TAGS_SPECIAL")&&r.d(t,"FIGURE_TAGS_SPECIAL",function(){return c.FIGURE_TAGS_SPECIAL}),r.o(c,"IMAGES_SORT_OPTIONS")&&r.d(t,"IMAGES_SORT_OPTIONS",function(){return c.IMAGES_SORT_OPTIONS}),r.o(c,"IMAGE_TAGS_SPECIAL")&&r.d(t,"IMAGE_TAGS_SPECIAL",function(){return c.IMAGE_TAGS_SPECIAL}),r.o(c,"IMPORT_CONFLICT_ACTION")&&r.d(t,"IMPORT_CONFLICT_ACTION",function(){return c.IMPORT_CONFLICT_ACTION}),r.o(c,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return c.JOB_FIGURES_VISIBILITY_MODE}),r.o(c,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return c.JOB_IMAGE_STATUS}),r.o(c,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return c.JOB_STATUS}),r.o(c,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return c.PLUGINS_TYPES}),r.o(c,"PROJECT_SHOW_GRAPH_LABELS_MODE")&&r.d(t,"PROJECT_SHOW_GRAPH_LABELS_MODE",function(){return c.PROJECT_SHOW_GRAPH_LABELS_MODE}),r.o(c,"PROJECT_SHOW_TAGS_MODE")&&r.d(t,"PROJECT_SHOW_TAGS_MODE",function(){return c.PROJECT_SHOW_TAGS_MODE}),r.o(c,"PROJECT_TAGS_SCENE_LOCATION_MODE")&&r.d(t,"PROJECT_TAGS_SCENE_LOCATION_MODE",function(){return c.PROJECT_TAGS_SCENE_LOCATION_MODE}),r.o(c,"PROJECT_TAGS_VALUE_TYPE")&&r.d(t,"PROJECT_TAGS_VALUE_TYPE",function(){return c.PROJECT_TAGS_VALUE_TYPE}),r.o(c,"PROJECT_TAGS_VALUE_TYPE_OPTIONS")&&r.d(t,"PROJECT_TAGS_VALUE_TYPE_OPTIONS",function(){return c.PROJECT_TAGS_VALUE_TYPE_OPTIONS}),r.o(c,"SHARE_LINK_TYPES")&&r.d(t,"SHARE_LINK_TYPES",function(){return c.SHARE_LINK_TYPES}),r.o(c,"TAG_APPLICABLE_TYPES")&&r.d(t,"TAG_APPLICABLE_TYPES",function(){return c.TAG_APPLICABLE_TYPES}),r.o(c,"TASK_RESTART_POLICIES")&&r.d(t,"TASK_RESTART_POLICIES",function(){return c.TASK_RESTART_POLICIES}),r.o(c,"TASK_TYPES")&&r.d(t,"TASK_TYPES",function(){return c.TASK_TYPES}),r.o(c,"USER_DEFAULT_SETTINGS")&&r.d(t,"USER_DEFAULT_SETTINGS",function(){return c.USER_DEFAULT_SETTINGS}),r.o(c,"USER_SETTINGS")&&r.d(t,"USER_SETTINGS",function(){return c.USER_SETTINGS}),r.o(c,"mergeProjectSettings")&&r.d(t,"mergeProjectSettings",function(){return c.mergeProjectSettings});var u=r("5fe27eddff92ec2dbac5");r.d(t,"IMAGES_SORT_OPTIONS",function(){return u.a});var l=r("edd4df3a18a3d3cf7c09");r.o(l,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return l.ACL_ACTIONS}),r.o(l,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return l.ACL_SECTIONS}),r.o(l,"AGENT_CAPABILITIES_TASK_TYPES")&&r.d(t,"AGENT_CAPABILITIES_TASK_TYPES",function(){return l.AGENT_CAPABILITIES_TASK_TYPES}),r.o(l,"FIGURE_TAGS_SPECIAL")&&r.d(t,"FIGURE_TAGS_SPECIAL",function(){return l.FIGURE_TAGS_SPECIAL}),r.o(l,"IMAGE_TAGS_SPECIAL")&&r.d(t,"IMAGE_TAGS_SPECIAL",function(){return l.IMAGE_TAGS_SPECIAL}),r.o(l,"IMPORT_CONFLICT_ACTION")&&r.d(t,"IMPORT_CONFLICT_ACTION",function(){return l.IMPORT_CONFLICT_ACTION}),r.o(l,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return l.JOB_FIGURES_VISIBILITY_MODE}),r.o(l,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return l.JOB_IMAGE_STATUS}),r.o(l,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return l.JOB_STATUS}),r.o(l,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return l.PLUGINS_TYPES}),r.o(l,"PROJECT_SHOW_GRAPH_LABELS_MODE")&&r.d(t,"PROJECT_SHOW_GRAPH_LABELS_MODE",function(){return l.PROJECT_SHOW_GRAPH_LABELS_MODE}),r.o(l,"PROJECT_SHOW_TAGS_MODE")&&r.d(t,"PROJECT_SHOW_TAGS_MODE",function(){return l.PROJECT_SHOW_TAGS_MODE}),r.o(l,"PROJECT_TAGS_SCENE_LOCATION_MODE")&&r.d(t,"PROJECT_TAGS_SCENE_LOCATION_MODE",function(){return l.PROJECT_TAGS_SCENE_LOCATION_MODE}),r.o(l,"PROJECT_TAGS_VALUE_TYPE")&&r.d(t,"PROJECT_TAGS_VALUE_TYPE",function(){return l.PROJECT_TAGS_VALUE_TYPE}),r.o(l,"PROJECT_TAGS_VALUE_TYPE_OPTIONS")&&r.d(t,"PROJECT_TAGS_VALUE_TYPE_OPTIONS",function(){return l.PROJECT_TAGS_VALUE_TYPE_OPTIONS}),r.o(l,"SHARE_LINK_TYPES")&&r.d(t,"SHARE_LINK_TYPES",function(){return l.SHARE_LINK_TYPES}),r.o(l,"TAG_APPLICABLE_TYPES")&&r.d(t,"TAG_APPLICABLE_TYPES",function(){return l.TAG_APPLICABLE_TYPES}),r.o(l,"TASK_RESTART_POLICIES")&&r.d(t,"TASK_RESTART_POLICIES",function(){return l.TASK_RESTART_POLICIES}),r.o(l,"TASK_TYPES")&&r.d(t,"TASK_TYPES",function(){return l.TASK_TYPES}),r.o(l,"USER_DEFAULT_SETTINGS")&&r.d(t,"USER_DEFAULT_SETTINGS",function(){return l.USER_DEFAULT_SETTINGS}),r.o(l,"USER_SETTINGS")&&r.d(t,"USER_SETTINGS",function(){return l.USER_SETTINGS}),r.o(l,"mergeProjectSettings")&&r.d(t,"mergeProjectSettings",function(){return l.mergeProjectSettings});var p=r("aeebf6797391ce13e889");r.d(t,"PROJECT_SHOW_GRAPH_LABELS_MODE",function(){return p.a}),r.d(t,"PROJECT_SHOW_TAGS_MODE",function(){return p.b}),r.d(t,"PROJECT_TAGS_SCENE_LOCATION_MODE",function(){return p.c}),r.d(t,"PROJECT_TAGS_VALUE_TYPE",function(){return p.d}),r.d(t,"PROJECT_TAGS_VALUE_TYPE_OPTIONS",function(){return p.e}),r.d(t,"mergeProjectSettings",function(){return p.f});var f=r("989a42060903e47c0cff");r.d(t,"AGENT_CAPABILITIES_TASK_TYPES",function(){return f.a}),r.d(t,"IMPORT_CONFLICT_ACTION",function(){return f.b}),r.d(t,"TASK_RESTART_POLICIES",function(){return f.c}),r.d(t,"TASK_TYPES",function(){return f.d});var d=r("007e2f901f143b0063bb");r.d(t,"USER_DEFAULT_SETTINGS",function(){return d.a}),r.d(t,"USER_SETTINGS",function(){return d.c});var _=r("859560fdf58f03d5af41");r.o(_,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return _.ACL_ACTIONS}),r.o(_,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return _.ACL_SECTIONS}),r.o(_,"FIGURE_TAGS_SPECIAL")&&r.d(t,"FIGURE_TAGS_SPECIAL",function(){return _.FIGURE_TAGS_SPECIAL}),r.o(_,"IMAGE_TAGS_SPECIAL")&&r.d(t,"IMAGE_TAGS_SPECIAL",function(){return _.IMAGE_TAGS_SPECIAL}),r.o(_,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return _.JOB_FIGURES_VISIBILITY_MODE}),r.o(_,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return _.JOB_IMAGE_STATUS}),r.o(_,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return _.JOB_STATUS}),r.o(_,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return _.PLUGINS_TYPES}),r.o(_,"SHARE_LINK_TYPES")&&r.d(t,"SHARE_LINK_TYPES",function(){return _.SHARE_LINK_TYPES}),r.o(_,"TAG_APPLICABLE_TYPES")&&r.d(t,"TAG_APPLICABLE_TYPES",function(){return _.TAG_APPLICABLE_TYPES});var y=r("2e899ef6b64c1edfb532");r.o(y,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return y.ACL_ACTIONS}),r.o(y,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return y.ACL_SECTIONS}),r.o(y,"FIGURE_TAGS_SPECIAL")&&r.d(t,"FIGURE_TAGS_SPECIAL",function(){return y.FIGURE_TAGS_SPECIAL}),r.o(y,"IMAGE_TAGS_SPECIAL")&&r.d(t,"IMAGE_TAGS_SPECIAL",function(){return y.IMAGE_TAGS_SPECIAL}),r.o(y,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return y.JOB_FIGURES_VISIBILITY_MODE}),r.o(y,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return y.JOB_IMAGE_STATUS}),r.o(y,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return y.JOB_STATUS}),r.o(y,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return y.PLUGINS_TYPES}),r.o(y,"SHARE_LINK_TYPES")&&r.d(t,"SHARE_LINK_TYPES",function(){return y.SHARE_LINK_TYPES}),r.o(y,"TAG_APPLICABLE_TYPES")&&r.d(t,"TAG_APPLICABLE_TYPES",function(){return y.TAG_APPLICABLE_TYPES});var g=r("59f1b6605b24f530994c");r.o(g,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return g.ACL_ACTIONS}),r.o(g,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return g.ACL_SECTIONS}),r.o(g,"FIGURE_TAGS_SPECIAL")&&r.d(t,"FIGURE_TAGS_SPECIAL",function(){return g.FIGURE_TAGS_SPECIAL}),r.o(g,"IMAGE_TAGS_SPECIAL")&&r.d(t,"IMAGE_TAGS_SPECIAL",function(){return g.IMAGE_TAGS_SPECIAL}),r.o(g,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return g.JOB_FIGURES_VISIBILITY_MODE}),r.o(g,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return g.JOB_IMAGE_STATUS}),r.o(g,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return g.JOB_STATUS}),r.o(g,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return g.PLUGINS_TYPES}),r.o(g,"SHARE_LINK_TYPES")&&r.d(t,"SHARE_LINK_TYPES",function(){return g.SHARE_LINK_TYPES}),r.o(g,"TAG_APPLICABLE_TYPES")&&r.d(t,"TAG_APPLICABLE_TYPES",function(){return g.TAG_APPLICABLE_TYPES});var h=r("10056bba30cd518ff6cb");r.d(t,"IMAGE_TAGS_SPECIAL",function(){return h.a}),r.d(t,"TAG_APPLICABLE_TYPES",function(){return h.b});var b=r("015c0de8729d1accb6db");r.o(b,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return b.ACL_ACTIONS}),r.o(b,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return b.ACL_SECTIONS}),r.o(b,"FIGURE_TAGS_SPECIAL")&&r.d(t,"FIGURE_TAGS_SPECIAL",function(){return b.FIGURE_TAGS_SPECIAL}),r.o(b,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return b.JOB_FIGURES_VISIBILITY_MODE}),r.o(b,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return b.JOB_IMAGE_STATUS}),r.o(b,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return b.JOB_STATUS}),r.o(b,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return b.PLUGINS_TYPES}),r.o(b,"SHARE_LINK_TYPES")&&r.d(t,"SHARE_LINK_TYPES",function(){return b.SHARE_LINK_TYPES});var v=r("21c9b9dc8d994c745f44");r.o(v,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return v.ACL_ACTIONS}),r.o(v,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return v.ACL_SECTIONS}),r.o(v,"FIGURE_TAGS_SPECIAL")&&r.d(t,"FIGURE_TAGS_SPECIAL",function(){return v.FIGURE_TAGS_SPECIAL}),r.o(v,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return v.JOB_FIGURES_VISIBILITY_MODE}),r.o(v,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return v.JOB_IMAGE_STATUS}),r.o(v,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return v.JOB_STATUS}),r.o(v,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return v.PLUGINS_TYPES}),r.o(v,"SHARE_LINK_TYPES")&&r.d(t,"SHARE_LINK_TYPES",function(){return v.SHARE_LINK_TYPES}),r("2132b7a92754e3fc960f"),r("59548a76725c1a44390b");var m=r("1f24b1c1631adced2f18");r.d(t,"FIGURE_TAGS_SPECIAL",function(){return m.a});var O=r("503c1434b44b1a06d784");r.o(O,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return O.ACL_ACTIONS}),r.o(O,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return O.ACL_SECTIONS}),r.o(O,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return O.JOB_FIGURES_VISIBILITY_MODE}),r.o(O,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return O.JOB_IMAGE_STATUS}),r.o(O,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return O.JOB_STATUS}),r.o(O,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return O.PLUGINS_TYPES}),r.o(O,"SHARE_LINK_TYPES")&&r.d(t,"SHARE_LINK_TYPES",function(){return O.SHARE_LINK_TYPES});var P=r("26015173042bd44a5ea1");r.o(P,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return P.ACL_ACTIONS}),r.o(P,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return P.ACL_SECTIONS}),r.o(P,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return P.JOB_FIGURES_VISIBILITY_MODE}),r.o(P,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return P.JOB_IMAGE_STATUS}),r.o(P,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return P.JOB_STATUS}),r.o(P,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return P.PLUGINS_TYPES}),r.o(P,"SHARE_LINK_TYPES")&&r.d(t,"SHARE_LINK_TYPES",function(){return P.SHARE_LINK_TYPES}),r("79036b6f230fe5b6ba23");var T=r("3a4039aaa40cb7a7a7ef");r.d(t,"SHARE_LINK_TYPES",function(){return T.a});var S=r("2ecd84c8cd25e23da709");r.o(S,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return S.ACL_ACTIONS}),r.o(S,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return S.ACL_SECTIONS}),r.o(S,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return S.JOB_FIGURES_VISIBILITY_MODE}),r.o(S,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return S.JOB_IMAGE_STATUS}),r.o(S,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return S.JOB_STATUS}),r.o(S,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return S.PLUGINS_TYPES});var j=r("9e4337ea88e70979117d");r.o(j,"ACL_ACTIONS")&&r.d(t,"ACL_ACTIONS",function(){return j.ACL_ACTIONS}),r.o(j,"ACL_SECTIONS")&&r.d(t,"ACL_SECTIONS",function(){return j.ACL_SECTIONS}),r.o(j,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return j.JOB_FIGURES_VISIBILITY_MODE}),r.o(j,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return j.JOB_IMAGE_STATUS}),r.o(j,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return j.JOB_STATUS}),r.o(j,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return j.PLUGINS_TYPES});var w=r("5354c482095f5ead6005");r.d(t,"ACL_ACTIONS",function(){return w.a}),r.d(t,"ACL_SECTIONS",function(){return w.b});var I=r("144a4c52161809512414");r.o(I,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return I.JOB_FIGURES_VISIBILITY_MODE}),r.o(I,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return I.JOB_IMAGE_STATUS}),r.o(I,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return I.JOB_STATUS}),r.o(I,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return I.PLUGINS_TYPES});var E=r("98397d66c772b34a0217");r.o(E,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return E.JOB_FIGURES_VISIBILITY_MODE}),r.o(E,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return E.JOB_IMAGE_STATUS}),r.o(E,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return E.JOB_STATUS}),r.o(E,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return E.PLUGINS_TYPES});var C=r("2552c24b020126fc6ce1");r.o(C,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return C.JOB_FIGURES_VISIBILITY_MODE}),r.o(C,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return C.JOB_IMAGE_STATUS}),r.o(C,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return C.JOB_STATUS}),r.o(C,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return C.PLUGINS_TYPES});var k=r("514c53a7f7ee5bb3f19c");r.o(k,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return k.JOB_FIGURES_VISIBILITY_MODE}),r.o(k,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return k.JOB_IMAGE_STATUS}),r.o(k,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return k.JOB_STATUS}),r.o(k,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return k.PLUGINS_TYPES});var A=r("23ffeadd01de75e61cb9");r.o(A,"JOB_FIGURES_VISIBILITY_MODE")&&r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return A.JOB_FIGURES_VISIBILITY_MODE}),r.o(A,"JOB_IMAGE_STATUS")&&r.d(t,"JOB_IMAGE_STATUS",function(){return A.JOB_IMAGE_STATUS}),r.o(A,"JOB_STATUS")&&r.d(t,"JOB_STATUS",function(){return A.JOB_STATUS}),r.o(A,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return A.PLUGINS_TYPES});var F=r("89231cc2992cc1e35cc8");r.d(t,"JOB_FIGURES_VISIBILITY_MODE",function(){return F.a}),r.d(t,"JOB_STATUS",function(){return F.b});var x=r("d41ce8549e786ec2bfeb");r.d(t,"JOB_IMAGE_STATUS",function(){return x.a});var R=r("6d30f70e740934193417");r.o(R,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return R.PLUGINS_TYPES});var L=r("43f03bbf7c8e2a7f6ddf");r.o(L,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return L.PLUGINS_TYPES});var D=r("1d38117166ab109cd06a");r.o(D,"PLUGINS_TYPES")&&r.d(t,"PLUGINS_TYPES",function(){return D.PLUGINS_TYPES});var G=r("c4ff9fc90ae775b45209");r.d(t,"PLUGINS_TYPES",function(){return G.a}),r("4f5240ab2841b269e5a3"),r("b3315b5da9c92a3db2ae"),r("4ed4f586f2caef2fd7a7"),r("dd1b049a7e602d219ec1"),r("3d4013cb89bb50c024c0"),r("5d1a9382f9802de0586b"),r("50632b5842f0e33f1900"),r("7f9c1fb802a7f39bc6fa")},"9e4337ea88e70979117d":function(e,t){},"9f491344cd11ab9730e6":function(e,t,r){"use strict";r("4e997ff4fa36eb673213"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n=r("c90887849e6e38ab5d76"),o=r("fa4339c8926dcb397641"),i=r("89231cc2992cc1e35cc8"),a={start:n.default.number().positive(),end:n.default.number().positive()},s={title:o.titleSchema.required().description("ImageTag name"),positive:o.booleanSchema.optional().default(!0).description("true/false to include/exclude images with specified Tag name")},c={classes:n.default.array().items(o.titleSchema).unique().optional().default([]).description("Allowed Class names for annotators"),projectTags:n.default.array().items(o.titleSchema).unique().optional().default([]).description("Allowed Project Tag names for annotators"),imageTags:n.default.array().items(s).optional().default([]).description("Tagged images to annotate").unique("title"),range:n.default.object().keys(a).optional().description("Images range to annotate"),imageTagsLimit:n.default.number().positive().allow(0),imageFiguresLimit:n.default.number().positive().allow(0),confirmationCode:n.default.string().optional().allow(""),sendNotifications:o.booleanSchema.optional().default(!1),figuresVisibilityMode:n.default.string().optional().valid(Object.values(i.a)).default(i.a.ALL)},u={datasetId:o.idSchema.allow(null).optional().description("Dataset ID to annotate"),description:o.descriptionSchema.allow("").optional().default("").description("Job description").max(255).error(new Error('"Description" field max size exceeded. You can put large description in "Readme" field')),projectId:o.idSchema.required().description("Project ID to annotate"),readme:n.default.string().allow("").optional().default("").description("Job readme"),roleId:o.idSchema.required().description("Role ID"),title:o.basenameSchema.required().description("New Job name"),userIds:o.idsSchema.min(1).required().description("Annotators IDs"),reviewerId:o.idSchema.optional().description("Reviewer ID"),meta:n.default.object().keys(c).optional().description("Job's additional parameters").default(n.default.validate({},c).value)},l=(n.default.object().keys(u),{sendNotifications:o.booleanSchema.optional().default(!1),figuresVisibilityMode:n.default.string().optional().valid(Object.values(i.a)).default(i.a.ALL)}),p={description:o.descriptionSchema.allow("").optional().default("").description("Job description").max(255).error(new Error('"Description" field max size exceeded. You can put large description in "Readme" field')),readme:n.default.string().allow("").optional().default("").description("Job readme"),meta:n.default.object().keys(l).optional().description("Job's additional parameters").default(n.default.validate({},l).value)},f=(n.default.object().keys(p),{title:o.basenameSchema.required().description("New Job name"),reviewerId:o.idSchema.optional().description("Reviewer ID"),userIds:o.idsSchema.min(1).required().description("Annotators IDs"),completeExisting:o.booleanSchema.optional().default(!0).description("Mark existing Job as Completed")});n.default.object().keys(f)},"9f7a0b70477acdef240e":function(e,t,r){},a058949576c99c773896:function(e,t,r){},a204ede153771f9515bd:function(e,t,r){var n={"./index.js":"c90887849e6e38ab5d76","./number/round.js":"d6d04c08585cb4fc1bea"};function webpackContext(e){var t=webpackContextResolve(e);return r(t)}function webpackContextResolve(e){var t=n[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}webpackContext.keys=function(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id="a204ede153771f9515bd"},a269f709e151b271345a:function(e,t,r){},a46b0dca8900f4ab15ef:function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("4e997ff4fa36eb673213");var n=r("c90887849e6e38ab5d76"),o=r("9e0829ebb5f4d9754370"),i=r("fa4339c8926dcb397641"),a=n.default.string().valid(Object.values(o.PLUGINS_TYPES)),s={id:i.idSchema,keywords:i.keywordsSchema,type:[a,n.default.array().items(a)],version:i.idSchema,versionId:i.idSchema,imageType:n.default.string().valid(o.TASK_TYPES.TRAIN,o.TASK_TYPES.INFERENCE),onlyGroup:n.default.boolean().default(!1),showDisabled:n.default.boolean().default(!1),filterByMajorVersion:n.default.boolean().default(!1)},c=(n.default.object().keys(s),{title:i.titleSchema.required(),order:n.default.number().integer().min(1),dockerImage:i.dockerImageSchema,isDefault:i.booleanSchema.optional().default(!1)});n.default.object().keys(c)},a530329f958e1c44e4d2:function(e,t,r){"use strict";var n=r("da7219a3ff5b89c1b64d");r.n(n).a},a53baa878501528dfe5d:function(e,t,r){"use strict";var n={};r.r(n),r.d(n,"moveFigures",function(){return xe}),r.d(n,"select",function(){return Ge}),r.d(n,"polygon",function(){return Ne}),r.d(n,"bitmap",function(){return lt}),r.d(n,"rectangle",function(){return _t}),r.d(n,"polyline",function(){return bt}),r.d(n,"point",function(){return Pt}),r.d(n,"smart",function(){return kt}),r.d(n,"fill",function(){return Rt}),r.d(n,"cut",function(){return Bt}),r.d(n,"crop",function(){return Ut}),r.d(n,"graph",function(){return Jt}),r.d(n,"tagFigures",function(){return Xt});var o={};r.r(o),r.d(o,"smart",function(){return wc}),r.d(o,"polygon",function(){return Ic}),r.d(o,"polyline",function(){return Ec}),r.d(o,"bitmap",function(){return Rc}),r.d(o,"moveFigures",function(){return Lc}),r.d(o,"graph",function(){return Bc});var i,a=r("57b485d6257d13d8a174"),s=r.n(a),c=r("c3b0708e8710951e3c0b"),u=(r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("b42383ffd481a2f01f84"),r("8f8e69c55f4350e79324"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=Object(u.a)()(i=function(e){function PageNotFound(){return function(e,t){if(!(e instanceof PageNotFound))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,_getPrototypeOf(PageNotFound).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PageNotFound,s.a),PageNotFound}())||i,p=r("0faaf8224a56e452295d"),f=Object(p.a)(l,function(){var e=this.$createElement,t=this._self._c||e;return t("center",[t("h2",[this._v("404 Page not found :(")])])},[],!1,null,null,null);f.options.__file="PageNotFound.vue";var d,_=f.exports,y=(r("afab45c263329fc2e21e"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("47e89aed260415009385"),r("8a50176570bf0fca6631"),r("2810e53ad7174f3c046d"),r("999c55cff43a633f7a5f")),g=r("09461657d5abd9aa9de1"),h=r("1cfab3396007e2203c1b");function Notificationsvue_type_script_lang_js_typeof(e){return(Notificationsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Notificationsvue_type_script_lang_js_getPrototypeOf(e){return(Notificationsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Notificationsvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Notificationsvue_type_script_lang_js_setPrototypeOf(e,t){return(Notificationsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=Object(u.a)()(d=function(e){function FiguresNotification(){var e,t,r,n,o;!function(e,t){if(!(e instanceof FiguresNotification))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return this,t=!(r=(e=Notificationsvue_type_script_lang_js_getPrototypeOf(FiguresNotification)).call.apply(e,[this].concat(a)))||"object"!==Notificationsvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?Notificationsvue_type_script_lang_js_assertThisInitialized(this):r,null,(o="curMsg")in(n=Notificationsvue_type_script_lang_js_assertThisInitialized(t))?Object.defineProperty(n,o,{value:null,enumerable:!0,configurable:!0,writable:!0}):n[o]=null,t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Notificationsvue_type_script_lang_js_setPrototypeOf(e,t)}(FiguresNotification,s.a),t=FiguresNotification,(r=[{key:"render",value:function(){}},{key:"created",value:function(){h.a.on("clicker-notification",this.showNotification)}},{key:"beforeDestroy",value:function(){h.a.removeListener("clicker-notification",this.showNotification)}},{key:"showNotification",value:function(e){var t=e&&"string"==typeof e?e:"dataset updated";if(this.curMsg)return this.curMsg.message=t,this.curMsg.clearTimer(),void this.curMsg.startTimer();this.curMsg=this.$message({message:t,customClass:"clicker-notification",onClose:this.messageClosed})}},{key:"messageClosed",value:function(){this.curMsg=null}}])&&_defineProperties(t.prototype,r),FiguresNotification}())||d,v=(r("4441bda630e3fa4f2e06"),Object(p.a)(b,void 0,void 0,!1,null,null,null));v.options.__file="Notifications.vue";var m,O=v.exports,P=r("0dc59bb738a230862512"),T=r.n(P),S=r("9e0829ebb5f4d9754370"),j=r("01d16a391b82cbd5b98a"),w=r("725e816b46da86ed4ba1");function NewFeaturesDialogvue_type_script_lang_js_typeof(e){return(NewFeaturesDialogvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NewFeaturesDialogvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NewFeaturesDialogvue_type_script_lang_js_getPrototypeOf(e){return(NewFeaturesDialogvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NewFeaturesDialogvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NewFeaturesDialogvue_type_script_lang_js_setPrototypeOf(e,t){return(NewFeaturesDialogvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=Object(u.a)(m=function(e){function NewFeaturesDialog(){var e,t,r,n,o;!function(e,t){if(!(e instanceof NewFeaturesDialog))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return this,t=!(r=(e=NewFeaturesDialogvue_type_script_lang_js_getPrototypeOf(NewFeaturesDialog)).call.apply(e,[this].concat(a)))||"object"!==NewFeaturesDialogvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?NewFeaturesDialogvue_type_script_lang_js_assertThisInitialized(this):r,!1,(o="dialogOpen")in(n=NewFeaturesDialogvue_type_script_lang_js_assertThisInitialized(t))?Object.defineProperty(n,o,{value:!1,enumerable:!0,configurable:!0,writable:!0}):n[o]=!1,t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NewFeaturesDialogvue_type_script_lang_js_setPrototypeOf(e,t)}(NewFeaturesDialog,s.a),t=NewFeaturesDialog,(r=[{key:"open",value:function(){this.dialogOpen=!0,localStorage.setItem("update20","yes")}},{key:"close",value:function(){this.dialogOpen=!1}},{key:"created",value:function(){localStorage.getItem("update20")||this.open()}}])&&NewFeaturesDialogvue_type_script_lang_js_defineProperties(t.prototype,r),NewFeaturesDialog}())||m,E=(r("e8be6da21bb3f18f6fa4"),Object(p.a)(I,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"new-features-dialog",attrs:{center:!0,size:"large",visible:e.dialogOpen},on:{"update:visible":function(t){e.dialogOpen=t}}},[n("h2",[e._v("Great news, everyone!")]),e._v(" "),n("p",[e._v("We have updated Image Annotation Tool to make annotation process easier and faster!")]),e._v(" "),n("el-row",{staticClass:"features",attrs:{gutter:30}},[n("el-col",{attrs:{span:6}},[n("img",{attrs:{src:r("6f161cbf7bd26742f557")}}),e._v(" "),n("b",[e._v("New Smart tool")]),e._v(" "),n("p",[n("b",[e._v("Killer feature!")]),e._v(" Select a region and our class-agnostic neural network will segment largest object. Correct output with brush.")])]),e._v(" "),n("el-col",{attrs:{span:6}},[n("img",{attrs:{src:r("f8774464778879403b4d")}}),e._v(" "),n("b",[e._v("Tools instead of Modes")]),e._v(" "),n("p",[e._v("Just like in Photoshop: choose a tool and draw what you want. Every tool has its own settings.")])]),e._v(" "),n("el-col",{attrs:{span:6}},[n("img",{attrs:{src:r("93ea1ae0a314a511a85b")}}),e._v(" "),n("b",[e._v("New Bitmap tool")]),e._v(" "),n("p",[e._v("Choose brush size and draw any shape you want. Erase bad parts, fill or remove selection.")])]),e._v(" "),n("el-col",{attrs:{span:6}},[n("img",{attrs:{src:r("0677f9d8ed1c7e386df0")}}),e._v(" "),n("b",[e._v("Add classes on the fly")]),e._v(" "),n("p",[e._v("You don't have to go back to Projects to add new Classes anymore. Dialog will open if there is no classes.")])])],1),e._v(" "),n("hr"),e._v(" "),n("br"),e._v(" "),n("el-row",[n("el-col",{staticClass:"tips",attrs:{span:18}},[n("p",[n("b",[e._v("Tip")]),e._v(": After you finished drawing an object, you can start a new one of the same class by pressing SPACE or "),n("el-button",{attrs:{size:"mini"}},[n("i",{staticClass:"zmdi zmdi-check-all"})])],1),e._v(" "),n("p",[n("b",[e._v("Tip")]),e._v(": Assign a hotkey to a class to switch between them quickly")]),e._v(" "),n("p",[n("b",[e._v("Tip")]),e._v(": Hold right mouse button to drag scene while creating an object")])]),e._v(" "),n("el-col",{staticClass:"help",attrs:{span:6}},[n("p",{staticStyle:{margin:"3px"}},[e._v("\n        Have questions or found a bug? Feel free to chat with us at our "),n("a",{attrs:{href:"https://supervise.ly/slack",target:"_blank"}},[e._v("Slack channel")]),e._v("! We are here to help.\n      ")])])],1),e._v(" "),n("br"),e._v(" "),n("center",[n("el-button",{attrs:{type:"primary"},on:{click:e.close}},[e._v("\n      Close\n    ")])],1)],1)},[],!1,null,null,null));E.options.__file="NewFeaturesDialog.vue";var C,k=E.exports;function ToolButtonvue_type_script_lang_js_typeof(e){return(ToolButtonvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolButtonvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ToolButtonvue_type_script_lang_js_getPrototypeOf(e){return(ToolButtonvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolButtonvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolButtonvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r("92a1c426d3e09d462222"),r("132a80cfdf396f588204");var A=Object(u.a)({props:["active","title","disabled","icon","mod","titleDisabled"]})(C=function(e){function ToolButton(){return function(e,t){if(!(e instanceof ToolButton))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolButtonvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolButtonvue_type_script_lang_js_getPrototypeOf(ToolButton).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolButtonvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolButton,s.a),t=ToolButton,(r=[{key:"onClick",value:function(){this.disabled||this.$emit("click")}},{key:"isImage",get:function(){return this.icon&&"data:"===this.icon.slice(0,5)}},{key:"isSvg",get:function(){return this.icon&&this.icon.includes("<svg")}},{key:"content",get:function(){return this.disabled&&this.titleDisabled?"⚠ ".concat(this.titleDisabled):this.title}}])&&ToolButtonvue_type_script_lang_js_defineProperties(t.prototype,r),ToolButton}())||C,F=(r("4407354fa371dea5370e"),Object(p.a)(A,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-tooltip",{staticClass:"tool-button",class:{active:e.active,disabled:e.disabled},attrs:{effect:"dark","open-delay":300}},[r("button",{on:{click:e.onClick}},[e._t("default"),e._v(" "),e.icon&&e.isSvg?r("span",{staticClass:"svg-icon",domProps:{innerHTML:e._s(e.icon)}}):e._e(),e._v(" "),e.icon&&e.isImage?r("img",{attrs:{src:e.icon}}):e._e(),e._v(" "),!e.icon||e.isImage||e.isSvg?e._e():r("i",{class:e.icon}),e._v(" "),e.mod?r("i",{staticClass:"mod",class:"zmdi zmdi-"+e.mod}):e._e()],2),e._v(" "),r("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.content)},slot:"content"})])},[],!1,null,null,null));F.options.__file="ToolButton.vue";var x,R,L,D,G=F.exports,B=(r("4e997ff4fa36eb673213"),r("40a27335430d1c9c2cd9"),r("8dfdfca4da68cfc097d3")),M=r("a70790f4aa1651a8466c"),z=r("fa4339c8926dcb397641"),N=(r("8a790e943c743416bf90"),r("3472e16a03943e6faffa"),r("6d8089820eedc734c4ea")),U=r("c90887849e6e38ab5d76"),H=r("33477f9082208f755173");function JoiFormvue_type_script_lang_js_typeof(e){return(JoiFormvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JoiFormvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JoiFormvue_type_script_lang_js_getPrototypeOf(e){return(JoiFormvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JoiFormvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JoiFormvue_type_script_lang_js_setPrototypeOf(e,t){return(JoiFormvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=(x=Object(u.a)({props:["model","schema","submit","labelWidth","labelPosition","inline"]}),R=Object(u.b)("schema",{immediate:!0}),x((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((D=function(e){function PluginsList(){var e,t,r,n,o,i;!function(e,t){if(!(e instanceof PluginsList))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return this,t=!(r=(e=JoiFormvue_type_script_lang_js_getPrototypeOf(PluginsList)).call.apply(e,[this].concat(s)))||"object"!==JoiFormvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?JoiFormvue_type_script_lang_js_assertThisInitialized(this):r,i={},(o="rules")in(n=JoiFormvue_type_script_lang_js_assertThisInitialized(t))?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JoiFormvue_type_script_lang_js_setPrototypeOf(e,t)}(PluginsList,s.a),t=PluginsList,(r=[{key:"schemaChanged",value:function(){this.rules=this.schema?function(e){return Object(N.mapValues)(e,function(e){return function(e){return[{validator:function(t,r,n){n(U.default.validate(r,e,{language:H.en}).error||void 0)},trigger:"change"}]}(e)})}(this.schema):{},this.$nextTick(this.clearValidate)}},{key:"validateField",value:function(e){this.$refs.form&&e&&this.$refs.form.validateField(e)}},{key:"onSubmit",value:function(e){var t=this;this.$refs.form.validate(function(e){t.isValid=e,e&&t.$emit("submit")}),e.preventDefault()}},{key:"reset",value:function(){this.$refs.form&&this.$refs.form.resetFields()}},{key:"clearValidate",value:function(){this.$refs.form.fields.forEach(function(e){e.validateState="",e.validateMessage="",e.validateDisabled=!1})}},{key:"mounted",value:function(){this.$el.addEventListener("submit",this.onSubmit)}},{key:"slotData",get:function(){if(!this.$refs.form)return{};var e=this.$refs.form;return{reset:this.reset,clearValidate:this.clearValidate,validate:e.validate,validateField:e.validateField}}}])&&JoiFormvue_type_script_lang_js_defineProperties(t.prototype,r),PluginsList}()).prototype,"schemaChanged",[R],Object.getOwnPropertyDescriptor(D.prototype,"schemaChanged"),D.prototype),L=D))||L),Y=(r("b4db3e952aacccdb214d"),Object(p.a)(V,function(){var e=this.$createElement;return(this._self._c||e)("el-form",{ref:"form",attrs:{model:this.model,rules:this.rules,"label-width":this.labelWidth,"label-position":this.labelPosition,inline:this.inline}},[this._t("default",null,null,this.slotData)],2)},[],!1,null,"89e4e0b0",null));Y.options.__file="JoiForm.vue";var J,W,q,Z,$,Q=Y.exports;function AddClassDialogvue_type_script_lang_js_typeof(e){return(AddClassDialogvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function AddClassDialogvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AddClassDialogvue_type_script_lang_js_getPrototypeOf(e){return(AddClassDialogvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AddClassDialogvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AddClassDialogvue_type_script_lang_js_setPrototypeOf(e,t){return(AddClassDialogvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AddClassDialogvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){AddClassDialogvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function AddClassDialogvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var K=(J=Object(u.a)({components:{"color-picker":B.Sketch,JoiForm:Q},props:{title:{type:String,default:"Create class"},visible:{type:Boolean,default:!1},lockShape:{type:Boolean,default:!1}},computed:_objectSpread({},Object(y.c)("dataset",["projectHotkeys"]),Object(y.c)("tools",["currentTool"])),methods:_objectSpread({},Object(y.b)("dataset/classes",["createClass"]))}),W=Object(u.b)("dialogOpen"),q=Object(u.b)("visible"),J((AddClassDialogvue_type_script_lang_js_applyDecoratedDescriptor(($=function(e){function AddHoleButton(){var e,t,r;!function(e,t){if(!(e instanceof AddHoleButton))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=AddClassDialogvue_type_script_lang_js_getPrototypeOf(AddHoleButton)).call.apply(e,[this].concat(o)))||"object"!==AddClassDialogvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?AddClassDialogvue_type_script_lang_js_assertThisInitialized(this):r,AddClassDialogvue_type_script_lang_js_defineProperty(AddClassDialogvue_type_script_lang_js_assertThisInitialized(t),"schema",Object.freeze(M.a)),AddClassDialogvue_type_script_lang_js_defineProperty(AddClassDialogvue_type_script_lang_js_assertThisInitialized(t),"SHAPE_TYPES",S.SHAPE_TYPES),AddClassDialogvue_type_script_lang_js_defineProperty(AddClassDialogvue_type_script_lang_js_assertThisInitialized(t),"colorPicker",{hex:""}),AddClassDialogvue_type_script_lang_js_defineProperty(AddClassDialogvue_type_script_lang_js_assertThisInitialized(t),"newClass",null),AddClassDialogvue_type_script_lang_js_defineProperty(AddClassDialogvue_type_script_lang_js_assertThisInitialized(t),"dialogOpen",!1),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AddClassDialogvue_type_script_lang_js_setPrototypeOf(e,t)}(AddHoleButton,s.a),t=AddHoleButton,(r=[{key:"hotkeyChange",value:function(e){this.newClass.hotkey=e.toUpperCase()}},{key:"dialogOpenChanged",value:function(e){var t=this;e&&(this.schema=Object.freeze(Object(z.HotkeySchemaModifier)(M.a,this.projectHotkeys)),this.newClass.shape=this.currentTool&&this.currentTool.shapes?this.currentTool.shapes[0]:"polygon",this.setColor("#".concat(Object(j.e)())),this.$nextTick(function(){t.$refs.titleInput.$refs.input.focus()})),this.$emit("update:visible",this.dialogOpen)}},{key:"visibleChanged",value:function(){this.dialogOpen=this.visible}},{key:"colorPickerChanged",value:function(e){this.colorPicker=e,this.newClass.color=this.colorPicker.hex}},{key:"reset",value:function(){this.newClass={title:"",description:"",shape:"",hotkey:"",color:""}}},{key:"setColor",value:function(e){this.newClass.color=e,this.colorPicker.hex=this.newClass.color}},{key:"closeDialog",value:function(){this.dialogOpen=!1,this.reset()}},{key:"onSubmit",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.createClass(this.newClass);case 3:this.closeDialog(),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0.response&&e.t0.response.data&&"NONUNIQUE"===e.t0.response.data.error&&this.$message.error('Class with name "'.concat(this.newClass.title,'" already exists')),e.t0;case 10:case"end":return e.stop()}},_callee,this,[[0,6]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"created",value:function(){this.reset()}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"shapeOptions",get:function(){return Object.values(S.SHAPE_TYPES).map(function(e){return{value:e,label:S.SHAPE_TYPES_LABELS[e]}})}},{key:"havePermissions",get:function(){var e=this.dataset,t=e.groupId,r=e.workspaceId,n=e.projectId,o=e.id;return this.$acl({action:S.ACL_ACTIONS.IMAGES.REMOVE,teamId:t,workspaceId:r,projectId:n,datasetId:o})}},{key:"canSubmit",get:function(){var e;return this.newClass.shape!==S.SHAPE_TYPES.GRAPH&&(null===(e=this.newClass)||void 0===e?void 0:e.title)&&this.havePermissions}}])&&AddClassDialogvue_type_script_lang_js_defineProperties(t.prototype,r),AddHoleButton}()).prototype,"dialogOpenChanged",[W],Object.getOwnPropertyDescriptor($.prototype,"dialogOpenChanged"),$.prototype),AddClassDialogvue_type_script_lang_js_applyDecoratedDescriptor($.prototype,"visibleChanged",[q],Object.getOwnPropertyDescriptor($.prototype,"visibleChanged"),$.prototype),Z=$))||Z),X=(r("d5779329e7fbc6e3ad66"),Object(p.a)(K,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"add-class-dialog",attrs:{title:e.title,visible:e.dialogOpen},on:{"update:visible":function(t){e.dialogOpen=t},close:e.closeDialog}},[e.havePermissions?e.newClass.shape===e.SHAPE_TYPES.GRAPH?r("div",{staticClass:"warning-box"},[r("i",{staticClass:"el-icon-warning mr15"}),e._v(" "),r("div",{staticClass:"worning-box-message"},[e._v("\n      To create Keypoints shape class please follow the "),r("a",{attrs:{href:"/projects/"+e.dataset.projectId+"/classes/new?shape="+e.SHAPE_TYPES.GRAPH}},[e._v("link")]),e._v(".\n    ")])]):e._e():r("div",{staticClass:"error-message mb15"},[e._v("\n    You don't have permissions to create a class. Please, contact administrator.\n  ")]),e._v(" "),r("joi-form",{ref:"form",attrs:{model:e.newClass,schema:e.schema,"label-width":"100px"},on:{submit:e.onSubmit}},[r("el-form-item",{attrs:{prop:"title",label:"Title",required:""}},[r("el-input",{ref:"titleInput",attrs:{placeholder:"Pedestrian"},model:{value:e.newClass.title,callback:function(t){e.$set(e.newClass,"title",t)},expression:"newClass.title"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"description",label:"Description"}},[r("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.newClass.description,callback:function(t){e.$set(e.newClass,"description",t)},expression:"newClass.description"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"hotkey",label:"Hotkey"}},[r("el-col",{attrs:{span:6}},[r("el-input",{attrs:{value:e.newClass.hotkey},on:{input:e.hotkeyChange}})],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"shape",label:"Shape",required:""}},[r("el-select",{attrs:{disabled:e.lockShape,placeholder:"Select","no-data-text":"No data"},model:{value:e.newClass.shape,callback:function(t){e.$set(e.newClass,"shape",t)},expression:"newClass.shape"}},e._l(e.shapeOptions,function(e){return r("el-option",{key:e.shape,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"color",label:"Color",required:""}},[r("el-popover",{ref:"colorpopover",attrs:{placement:"top",trigger:"click"}},[r("color-picker",{attrs:{value:e.colorPicker},on:{input:e.colorPickerChanged}})],1),e._v(" "),r("div",{staticClass:"color-box"},[r("el-input",{directives:[{name:"popover",rawName:"v-popover:colorpopover",arg:"colorpopover"}],staticClass:"color-input",model:{value:e.newClass.color,callback:function(t){e.$set(e.newClass,"color",t)},expression:"newClass.color"}}),e._v(" "),r("div",{staticClass:"color-indicator",style:{"background-color":e.newClass.color}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{"native-type":"submit",type:"primary",disabled:!e.canSubmit}},[e._v("\n        Create\n      ")]),e._v(" "),r("el-button",{on:{click:e.closeDialog}},[e._v("\n        Cancel\n      ")])],1)],1)],1)},[],!1,null,null,null));X.options.__file="AddClassDialog.vue";var ee,te=X.exports;function ClassSelectorvue_type_script_lang_js_typeof(e){return(ClassSelectorvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClassSelectorvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ClassSelectorvue_type_script_lang_js_getPrototypeOf(e){return(ClassSelectorvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ClassSelectorvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ClassSelectorvue_type_script_lang_js_setPrototypeOf(e,t){return(ClassSelectorvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ClassSelectorvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ClassSelectorvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ClassSelectorvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var re=Object(u.a)({components:{AddClassDialog:te},props:["classes"],computed:ClassSelectorvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/figures",["currentFigure"]),Object(y.c)("dataset/classes",["currentClass"])),methods:ClassSelectorvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/classes",["setClass"]),Object(y.b)("dataset/figures",["setFigureClass"]))})(ee=function(e){function ClassSelector(){var e,t,r;!function(e,t){if(!(e instanceof ClassSelector))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=ClassSelectorvue_type_script_lang_js_getPrototypeOf(ClassSelector)).call.apply(e,[this].concat(o)))||"object"!==ClassSelectorvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?ClassSelectorvue_type_script_lang_js_assertThisInitialized(this):r,ClassSelectorvue_type_script_lang_js_defineProperty(ClassSelectorvue_type_script_lang_js_assertThisInitialized(t),"dialogOpen",!1),ClassSelectorvue_type_script_lang_js_defineProperty(ClassSelectorvue_type_script_lang_js_assertThisInitialized(t),"addClassOption",{label:"Create class",value:"addClass"}),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClassSelectorvue_type_script_lang_js_setPrototypeOf(e,t)}(ClassSelector,s.a),t=ClassSelector,(r=[{key:"setCurrentClass",value:function(e){e!==this.addClassOption.value?this.selectedClassId!==e&&(this.setClass(e),this.hasValidFigureClass&&this.setFigureClass({figureId:this.currentFigure.id,classId:e})):this.dialogOpen=!0}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"hasValidFigureClass",get:function(){return this.currentFigure&&null!=this.currentFigure.classId}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}},{key:"SHAPE_TYPES_LABELS",get:function(){return S.SHAPE_TYPES_LABELS}},{key:"selectedClassId",get:function(){return this.classes.length?this.hasValidFigureClass?this.currentFigure.classId:this.storeClasses.selected:null}},{key:"storeClasses",get:function(){return this.$store.state.dataset.classes}},{key:"disableClassSelector",get:function(){return this.currentFigure&&(!this.currentFigure.classId||!this.currentClass)}}])&&ClassSelectorvue_type_script_lang_js_defineProperties(t.prototype,r),ClassSelector}())||ee,ne=(r("4248c8be0acb128176c6"),Object(p.a)(re,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-select",{staticClass:"class-select-input",attrs:{"popper-class":"class-select-popper",size:"small",filterable:"",value:e.selectedClassId,disabled:e.disableClassSelector},on:{input:e.setCurrentClass}},[r("el-option",{attrs:{disabled:!!e.$route.query.jobId||!e.$acl({action:e.ACL_ACTIONS.IMAGES.REMOVE,teamId:e.$team,workspaceId:e.$workspace,projectId:e.dataset.projectId,datasetId:e.dataset.id}),label:e.addClassOption.label,value:e.addClassOption.value}},[r("div",{staticClass:"item add-new-item"},[r("span",[r("i",{staticClass:"zmdi zmdi-plus"})]),e._v(" "),r("span",{staticClass:"middle"},[e._v("\n          "+e._s(e.addClassOption.label)+"\n        ")])])]),e._v(" "),e._l(e.classes,function(t){return r("el-option",{key:t.id,attrs:{label:t.title,value:t.id}},[r("div",{staticClass:"item"},[r("span",[r("b",{staticClass:"circle",style:{backgroundColor:t.color}})]),e._v(" "),r("span",{staticClass:"middle"},[e._v("\n          "+e._s(t.title)+"\n          "),r("small",[e._v(e._s(e.SHAPE_TYPES_LABELS[t.shape]))])]),e._v(" "),t.hotkey?r("span",[r("div",{staticClass:"hotkey"},[e._v("\n            "+e._s(t.hotkey)+"\n          ")])]):e._e()])])})],2),e._v(" "),r("add-class-dialog",{attrs:{visible:e.dialogOpen},on:{"update:visible":function(t){e.dialogOpen=t}}})],1)},[],!1,null,null,null));ne.options.__file="ClassSelector.vue";var oe,ie=ne.exports;function ToolCreateAndEditOptionsvue_type_script_lang_js_typeof(e){return(ToolCreateAndEditOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolCreateAndEditOptionsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ToolCreateAndEditOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolCreateAndEditOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolCreateAndEditOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolCreateAndEditOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ToolCreateAndEditOptionsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ae=Object(u.a)({components:{ClassSelector:ie},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ToolCreateAndEditOptionsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.c)("dataset/classes",["toolClasses"]),Object(y.c)("tools",["currentTool"]))})(oe=function(e){function ToolCreateAndEditOptions(){return function(e,t){if(!(e instanceof ToolCreateAndEditOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolCreateAndEditOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolCreateAndEditOptionsvue_type_script_lang_js_getPrototypeOf(ToolCreateAndEditOptions).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolCreateAndEditOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolCreateAndEditOptions,s.a),t=ToolCreateAndEditOptions,(r=[{key:"filteredClasses",get:function(){return this.toolClasses(this.currentTool.id)}}])&&ToolCreateAndEditOptionsvue_type_script_lang_js_defineProperties(t.prototype,r),ToolCreateAndEditOptions}())||oe,se=(r("468684a604d48426a9b7"),Object(p.a)(ae,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"toolCreateAndEditOptions"},[t("class-selector",{attrs:{classes:this.filteredClasses}})],1)},[],!1,null,"6ec31c1d",null));se.options.__file="ToolCreateAndEditOptions.vue";var ce,ue,le,pe,fe=se.exports;function NewModeButtonvue_type_script_lang_js_typeof(e){return(NewModeButtonvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NewModeButtonvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NewModeButtonvue_type_script_lang_js_getPrototypeOf(e){return(NewModeButtonvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NewModeButtonvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NewModeButtonvue_type_script_lang_js_setPrototypeOf(e,t){return(NewModeButtonvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NewModeButtonvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){NewModeButtonvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function NewModeButtonvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("b0bb438726ec472be138");var de=(ce=Object(u.a)({props:["disabled"],components:{ToolButton:G},computed:NewModeButtonvue_type_script_lang_js_objectSpread({},Object(y.c)("tools",["currentTool"])),methods:NewModeButtonvue_type_script_lang_js_objectSpread({},Object(y.b)("tools",["setNewMode","setCurrentToolOption","updateToolState"]))}),ue=Object(u.b)("currentTool.state.accepted"),ce((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((pe=function(e){function NewModeButton(){var e,t,r;!function(e,t){if(!(e instanceof NewModeButton))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=NewModeButtonvue_type_script_lang_js_getPrototypeOf(NewModeButton)).call.apply(e,[this].concat(o)))||"object"!==NewModeButtonvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?NewModeButtonvue_type_script_lang_js_assertThisInitialized(this):r,NewModeButtonvue_type_script_lang_js_defineProperty(NewModeButtonvue_type_script_lang_js_assertThisInitialized(t),"quitFillCrop",!1),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NewModeButtonvue_type_script_lang_js_setPrototypeOf(e,t)}(NewModeButton,s.a),t=NewModeButton,(r=[{key:"fillCropAcceptedChanged",value:function(e){null===e&&this.quitFillCrop&&this.setCurrentToolOption(this.tools.all.bitmap.options.brushCreate.id)}},{key:"onClick",value:function(){this.isFillCropMode?(this.quitFillCrop=!0,this.updateToolState({toolId:this.currentTool.id,value:NewModeButtonvue_type_script_lang_js_objectSpread({},this.currentTool.state,{accepted:!0})})):this.setNewMode()}},{key:"tools",get:function(){return this.$store.state.tools}},{key:"isFillCropMode",get:function(){return this.currentTool.option===this.tools.all.bitmap.options.fill.id||this.currentTool.option===this.tools.all.bitmap.options.crop.id}},{key:"tooltipTitle",get:function(){return this.isFillCropMode?"Accept changes and quit ".concat(this.currentTool.option,' mode <i class="icon-keyboard"></i>SPACE'):'Complete edit and start new <i class="icon-keyboard"></i>SPACE'}}])&&NewModeButtonvue_type_script_lang_js_defineProperties(t.prototype,r),NewModeButton}()).prototype,"fillCropAcceptedChanged",[ue],Object.getOwnPropertyDescriptor(pe.prototype,"fillCropAcceptedChanged"),pe.prototype),le=pe))||le),_e=Object(p.a)(de,function(){var e=this.$createElement;return(this._self._c||e)("tool-button",{attrs:{title:this.tooltipTitle,"title-disabled":"Create object first",icon:"zmdi zmdi-check-all",disabled:this.disabled},on:{click:this.onClick}})},[],!1,null,null,null);_e.options.__file="NewModeButton.vue";var ye,ge=_e.exports;function AddHoleButtonvue_type_script_lang_js_typeof(e){return(AddHoleButtonvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AddHoleButtonvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AddHoleButtonvue_type_script_lang_js_getPrototypeOf(e){return(AddHoleButtonvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AddHoleButtonvue_type_script_lang_js_setPrototypeOf(e,t){return(AddHoleButtonvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AddHoleButtonvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){AddHoleButtonvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function AddHoleButtonvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df");var he=new Set([S.SHAPE_TYPES.POLYGON]),be=Object(u.a)({components:{ToolButton:G},computed:AddHoleButtonvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/classes",["currentClass"]),Object(y.c)("dataset/figures",["currentFigure"]),Object(y.c)("tools",["currentTool"])),methods:AddHoleButtonvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/classes",["setClass"]),Object(y.b)("tools",["setToolOption"]))})(ye=function(e){function AddHoleButton(){return function(e,t){if(!(e instanceof AddHoleButton))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==AddHoleButtonvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,AddHoleButtonvue_type_script_lang_js_getPrototypeOf(AddHoleButton).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AddHoleButtonvue_type_script_lang_js_setPrototypeOf(e,t)}(AddHoleButton,s.a),t=AddHoleButton,(r=[{key:"setActive",value:function(){this.setClass(null),this.setToolOption({toolId:this.currentTool.id,optionId:this.currentTool.defaultOption})}},{key:"isActive",get:function(){return this.currentFigure&&!this.currentClass}},{key:"classes",get:function(){return this.$store.state.dataset.classes}},{key:"showHoleBtn",get:function(){if(!this.currentFigure)return!1;if(this.currentFigure.classId){var e=this.classes.all[this.currentFigure.classId];if(!he.has(e.shape))return!1}return!0}}])&&AddHoleButtonvue_type_script_lang_js_defineProperties(t.prototype,r),AddHoleButton}())||ye,ve=Object(p.a)(be,function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.showHoleBtn?r("tool-button",{attrs:{active:e.isActive,disabled:e.isActive,title:"Create new Hole inside"},on:{click:e.setActive}},[e.isActive?r("span",{staticClass:"edit-icon"},[e._v("*")]):r("i",{staticClass:"mod zmdi zmdi-plus"}),e._v(" "),r("i",{staticClass:"zmdi zmdi-filter-tilt-shift"})]):e._e()},[],!1,null,null,null);ve.options.__file="AddHoleButton.vue";var me,Oe=ve.exports;function ToolEditOptionsvue_type_script_lang_js_typeof(e){return(ToolEditOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolEditOptionsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ToolEditOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolEditOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolEditOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolEditOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ToolEditOptionsvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ToolEditOptionsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ToolEditOptionsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pe=Object(u.a)({components:{ToolCreateAndEditOptions:fe,NewModeButton:ge,AddHoleButton:Oe,ToolButton:G},computed:ToolEditOptionsvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/figures",[]),Object(y.c)("tools",["currentTool"])),methods:ToolEditOptionsvue_type_script_lang_js_objectSpread({},Object(y.b)("tools",["updateToolState"]))})(me=function(e){function ToolEditOptions(){return function(e,t){if(!(e instanceof ToolEditOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolEditOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolEditOptionsvue_type_script_lang_js_getPrototypeOf(ToolEditOptions).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolEditOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolEditOptions,s.a),t=ToolEditOptions,(r=[{key:"hasStateProp",value:function(e){return e in this.currentTool.state}},{key:"updateToolStateProp",value:function(e){return this.updateToolState({toolId:this.currentTool.id,value:ToolEditOptionsvue_type_script_lang_js_objectSpread({},this.currentTool.state,e)})}}])&&ToolEditOptionsvue_type_script_lang_js_defineProperties(t.prototype,r),ToolEditOptions}())||me,Te=(r("5e712c972df2f6d27537"),Object(p.a)(Pe,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"toolEditOptions"},[r("tool-create-and-edit-options"),e._v(" "),r("new-mode-button"),e._v(" "),r("add-hole-button"),e._v(" "),e.hasStateProp("showPoints")?r("tool-button",{attrs:{title:e.currentTool.state.showPoints?"Hide points":"Show points",active:e.currentTool.state.showPoints},on:{click:function(t){return e.updateToolStateProp({showPoints:!e.currentTool.state.showPoints})}}},[e.currentTool.state.showPoints?r("i",{staticClass:"zmdi zmdi-eye"}):r("i",{staticClass:"zmdi zmdi-eye-off"})]):e._e()],1)},[],!1,null,"1b55b003",null));Te.options.__file="ToolEditOptions.vue";var Se,je=Te.exports;function ToolCreateOptionsvue_type_script_lang_js_typeof(e){return(ToolCreateOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolCreateOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolCreateOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolCreateOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolCreateOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=Object(u.a)({components:{ToolCreateAndEditOptions:fe,NewModeButton:ge,AddHoleButton:Oe}})(Se=function(e){function ToolCreateOptions(){return function(e,t){if(!(e instanceof ToolCreateOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolCreateOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolCreateOptionsvue_type_script_lang_js_getPrototypeOf(ToolCreateOptions).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolCreateOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolCreateOptions,s.a),ToolCreateOptions}())||Se,Ie=Object(p.a)(we,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"toolCreateOptions"},[t("tool-create-and-edit-options"),this._v(" "),t("new-mode-button",{attrs:{disabled:!0}}),this._v(" "),t("add-hole-button")],1)},[],!1,null,null,null);Ie.options.__file="ToolCreateOptions.vue";var Ee,Ce=Ie.exports;function ToolMoveFiguresOptionsvue_type_script_lang_js_typeof(e){return(ToolMoveFiguresOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolMoveFiguresOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolMoveFiguresOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolMoveFiguresOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolMoveFiguresOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke=Object(u.a)(Ee=function(e){function ToolMoveFiguresOptions(){return function(e,t){if(!(e instanceof ToolMoveFiguresOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolMoveFiguresOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolMoveFiguresOptionsvue_type_script_lang_js_getPrototypeOf(ToolMoveFiguresOptions).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolMoveFiguresOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolMoveFiguresOptions,s.a),ToolMoveFiguresOptions}())||Ee,Ae=Object(p.a)(ke,function(){var e=this.$createElement;return(this._self._c||e)("div")},[],!1,null,null,null);Ae.options.__file="ToolMoveFiguresOptions.vue";var Fe,xe=Ae.exports;function ToolSelectOptionsvue_type_script_lang_js_typeof(e){return(ToolSelectOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolSelectOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolSelectOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolSelectOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolSelectOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re=Object(u.a)(Fe=function(e){function ToolSelectOptions(){return function(e,t){if(!(e instanceof ToolSelectOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolSelectOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolSelectOptionsvue_type_script_lang_js_getPrototypeOf(ToolSelectOptions).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolSelectOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolSelectOptions,s.a),ToolSelectOptions}())||Fe,Le=(r("c2f25cf9b3da63764a18"),Object(p.a)(Re,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"toolSelectOptions"})},[],!1,null,"5a08573c",null));Le.options.__file="ToolSelectOptions.vue";var De,Ge=Le.exports;function ToolPolygonOptionsvue_type_script_lang_js_typeof(e){return(ToolPolygonOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolPolygonOptionsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ToolPolygonOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolPolygonOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolPolygonOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolPolygonOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ToolPolygonOptionsvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ToolPolygonOptionsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ToolPolygonOptionsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Be=Object(u.a)({components:{ToolButton:G},computed:ToolPolygonOptionsvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/figures",["currentFigure"]),Object(y.c)("tools",["currentTool"])),methods:ToolPolygonOptionsvue_type_script_lang_js_objectSpread({},Object(y.b)("tools",["setCurrentToolOption"]))})(De=function(e){function ToolPolygonOptions(){return function(e,t){if(!(e instanceof ToolPolygonOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolPolygonOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolPolygonOptionsvue_type_script_lang_js_getPrototypeOf(ToolPolygonOptions).apply(this,arguments))}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolPolygonOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolPolygonOptions,s.a),t=ToolPolygonOptions,(n=[{key:"tools",get:function(){return this.$store.state.tools}},{key:"toolOptions",get:function(){var e=this;return[{id:this.tools.all.polygon.options.consecutive.id,get title(){var t,r="Add points consecutively";return(null===(t=e.currentTool)||void 0===t?void 0:t.option)===e.tools.all.polygon.options.closestSegment.id&&(r+=' <i class="icon-keyboard"></i>SHIFT + Click'),r},icon:r("f8727d5d83b7fa2d80af"),mod:"plus"},{id:this.tools.all.polygon.options.closestSegment.id,get title(){var t,r="Add points to cursor's closest segment";return(null===(t=e.currentTool)||void 0===t?void 0:t.option)===e.tools.all.polygon.options.consecutive.id&&(r+=' <i class="icon-keyboard"></i>SHIFT + Click'),r},icon:r("27fbc10111cb6c1a7a45"),mod:"plus"},{id:this.tools.all.polygon.options.pointsEraser.id,title:"Click on point to remove",icon:r("59d21970c039a81816d0"),mod:"minus"},{id:this.tools.all.polygon.options.pointsOrder.id,title:"Click on point to set as first",icon:r("59d21970c039a81816d0"),mod:"zero"}]}}])&&ToolPolygonOptionsvue_type_script_lang_js_defineProperties(t.prototype,n),ToolPolygonOptions}())||De,Me=Object(p.a)(Be,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"toolPolygonOptions"},e._l(e.toolOptions,function(t){return r("tool-button",{key:t.id,attrs:{active:e.currentTool.option&&t.id===e.currentTool.option,title:t.title,disabled:!e.currentTool.ready||e.currentTool.disabled,icon:t.icon,mod:t.mod},on:{click:function(r){return e.setCurrentToolOption(t.id)}}})}),1)},[],!1,null,null,null);Me.options.__file="ToolPolygonOptions.vue";var ze,Ne=Me.exports,Ue=(r("1afad0614fe3f94846c0"),r("144e366c8b9457689b18"),r("96ca42dd30e576870f68")),He=r.n(Ue),Ve=(r("aa7b434460007d4b1170"),r("b9eb131367e97ba69b9f"));function AcceptCancelButtonsvue_type_script_lang_js_typeof(e){return(AcceptCancelButtonsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AcceptCancelButtonsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AcceptCancelButtonsvue_type_script_lang_js_getPrototypeOf(e){return(AcceptCancelButtonsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AcceptCancelButtonsvue_type_script_lang_js_setPrototypeOf(e,t){return(AcceptCancelButtonsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ye=Object(u.a)({components:{ToolButton:G},props:{value:[Boolean,Object],acceptAllowed:{type:[Boolean,Object],default:!0}}})(ze=function(e){function AcceptCancelButtons(){return function(e,t){if(!(e instanceof AcceptCancelButtons))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==AcceptCancelButtonsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,AcceptCancelButtonsvue_type_script_lang_js_getPrototypeOf(AcceptCancelButtons).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AcceptCancelButtonsvue_type_script_lang_js_setPrototypeOf(e,t)}(AcceptCancelButtons,s.a),t=AcceptCancelButtons,(r=[{key:"setAccept",value:function(){this.acceptAllowed&&(this.$emit("accept"),this.$emit("update:value",!0))}},{key:"setCancel",value:function(){this.$emit("cancel"),this.$emit("update:value",!1)}}])&&AcceptCancelButtonsvue_type_script_lang_js_defineProperties(t.prototype,r),AcceptCancelButtons}())||ze,Je=(r("6da208cf308cff51720e"),Object(p.a)(Ye,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"accept-cancel-buttons"},[t("tool-button",{attrs:{disabled:!this.acceptAllowed,icon:"zmdi zmdi-check",title:"Apply changes","title-disabled":"Draw polygon first"},on:{click:this.setAccept}}),this._v(" "),t("tool-button",{attrs:{disabled:!this.acceptAllowed,icon:"zmdi zmdi-close",title:"Cancel changes","title-disabled":"Draw polygon first"},on:{click:this.setCancel}})],1)},[],!1,null,"37bda618",null));Je.options.__file="AcceptCancelButtons.vue";var We,qe=Je.exports;function NumberSlidervue_type_script_lang_js_typeof(e){return(NumberSlidervue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NumberSlidervue_type_script_lang_js_getPrototypeOf(e){return(NumberSlidervue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NumberSlidervue_type_script_lang_js_setPrototypeOf(e,t){return(NumberSlidervue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ze=Object(u.a)({props:["value","min","max","step","postfix","title"]})(We=function(e){function NumberSlider(){return function(e,t){if(!(e instanceof NumberSlider))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==NumberSlidervue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,NumberSlidervue_type_script_lang_js_getPrototypeOf(NumberSlider).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NumberSlidervue_type_script_lang_js_setPrototypeOf(e,t)}(NumberSlider,s.a),NumberSlider}())||We,$e=(r("75fac8029131a50a5fc6"),Object(p.a)(Ze,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-tooltip",{attrs:{effect:"dark","open-delay":300}},[r("el-popover",{attrs:{placement:"bottom",width:"250",trigger:"click"}},[r("div",{staticStyle:{display:"flex","align-items":"center"},attrs:{slot:"reference"},slot:"reference"},[r("input",{staticClass:"mr5",domProps:{value:e.value},on:{input:function(t){e.$emit("input",parseInt(t.target.value,10))}}}),e._v(" "),r("small",[e._v(e._s(e.postfix))])]),e._v(" "),r("el-slider",{attrs:{min:e.min,max:e.max,step:e.step,value:e.value,"show-tooltip":!1},on:{input:function(t){return e.$emit("input",t)}}})],1),e._v(" "),r("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.title)},slot:"content"})],1)},[],!1,null,"88aaed5c",null));$e.options.__file="NumberSlider.vue";var Qe,Ke=$e.exports;function ToolHelpvue_type_script_lang_js_typeof(e){return(ToolHelpvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolHelpvue_type_script_lang_js_getPrototypeOf(e){return(ToolHelpvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolHelpvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolHelpvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r("4ee649c87692c7abb6dd");var Xe=Object(u.a)({props:{maxWidth:{type:Number,default:180}}})(Qe=function(e){function ToolHelp(){return function(e,t){if(!(e instanceof ToolHelp))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolHelpvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolHelpvue_type_script_lang_js_getPrototypeOf(ToolHelp).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolHelpvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolHelp,s.a),ToolHelp}())||Qe,et=(r("cc041b965709e10cca23"),Object(p.a)(Xe,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"help",style:{"max-width":this.maxWidth+"px"}},[this._t("default"),this._v(" "),t("i",{staticClass:"icon-info-with-circle"})],2)},[],!1,null,"c0b983aa",null));et.options.__file="ToolHelp.vue";var tt,rt,nt,ot,it,at=et.exports;function ToolBitmapOptionsvue_type_script_lang_js_typeof(e){return(ToolBitmapOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ToolBitmapOptionsvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ToolBitmapOptionsvue_type_script_lang_js_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){ToolBitmapOptionsvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){ToolBitmapOptionsvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function ToolBitmapOptionsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ToolBitmapOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolBitmapOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolBitmapOptionsvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ToolBitmapOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolBitmapOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ToolBitmapOptionsvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function ToolBitmapOptionsvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ToolBitmapOptionsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ToolBitmapOptionsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var st=(tt=Object(u.a)({components:{ToolButton:G,AcceptCancelButtons:qe,NumberSlider:Ke,ToolHelp:at},computed:ToolBitmapOptionsvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["currentImage"]),Object(y.c)("dataset/figures",["currentFigure"]),Object(y.c)("tools",["currentTool","isCreateMode"])),methods:ToolBitmapOptionsvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/figures",["updateBitmapInFigure","createFigure","createTmpFigure","setHistoryGroup","createHistoryGroup"]),Object(y.b)("tools",["setCurrentToolOption","updateToolState"]))}),rt=Object(u.b)("toolState.accepted"),nt=Object(u.b)("accepted"),tt((ToolBitmapOptionsvue_type_script_lang_js_applyDecoratedDescriptor((it=function(e){function ToolBitmapOptions(){var e,t,r;!function(e,t){if(!(e instanceof ToolBitmapOptions))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=ToolBitmapOptionsvue_type_script_lang_js_getPrototypeOf(ToolBitmapOptions)).call.apply(e,[this].concat(o)))||"object"!==ToolBitmapOptionsvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?ToolBitmapOptionsvue_type_script_lang_js_assertThisInitialized(this):r,ToolBitmapOptionsvue_type_script_lang_js_defineProperty(ToolBitmapOptionsvue_type_script_lang_js_assertThisInitialized(t),"accepted",null),ToolBitmapOptionsvue_type_script_lang_js_defineProperty(ToolBitmapOptionsvue_type_script_lang_js_assertThisInitialized(t),"acceptAllowed",!1),ToolBitmapOptionsvue_type_script_lang_js_defineProperty(ToolBitmapOptionsvue_type_script_lang_js_assertThisInitialized(t),"keyMap",new Map),ToolBitmapOptionsvue_type_script_lang_js_defineProperty(ToolBitmapOptionsvue_type_script_lang_js_assertThisInitialized(t),"brushSizeTooltip",'Brush size <i class="icon-keyboard"></i>[ or <i class="icon-keyboard"></i>]'),ToolBitmapOptionsvue_type_script_lang_js_defineProperty(ToolBitmapOptionsvue_type_script_lang_js_assertThisInitialized(t),"optionHandlers",{cut:function(){var e=ToolBitmapOptionsvue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:return t=e.origin,r=e.cut,this.createHistoryGroup({title:Ve.a.selection.cut}),a.next=6,Promise.all([this.updateBitmapInFigure({figureId:this.currentFigure.id,bitmap:t}),this.createTmpFigure({imageId:this.currentFigure.imageId,classId:this.currentFigure.classId,bitmap:r,setSelected:!1})]);case 6:return n=a.sent,o=_slicedToArray(n,2),i=o[1],this.setHistoryGroup(null),a.next=12,this.createFigure({figureId:i,setSelected:!1});case 12:case"end":return a.stop()}},_callee,this)}));return function(t){return e.apply(this,arguments)}}()}),t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolBitmapOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolBitmapOptions,s.a),t=ToolBitmapOptions,(n=[{key:"fillCropAcceptedChanged",value:function(e){if(e&&!this.acceptAllowed)return this.accepted=null,this.toolState.drawTool.selectionTool.removeAll(),this.updateToolState({toolId:this.currentTool.id,value:ToolBitmapOptionsvue_type_script_lang_js_objectSpread({},this.currentTool.state,{accepted:null})}),void this.setCurrentToolOption(this.tools.all.bitmap.options.brushCreate.id);this.acceptedChanged(e)}},{key:"acceptedChanged",value:function(){var e=ToolBitmapOptionsvue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(null!==e){o.next=2;break}return o.abrupt("return");case 2:if(!e){o.next=18;break}if(t="",this.currentTool.option===this.tools.all.bitmap.options.fill.id?t="fill":this.currentTool.option===this.tools.all.bitmap.options.crop.id?t="crop":this.currentTool.option===this.tools.all.bitmap.options.cut.id&&(t="cut"),!t){o.next=16;break}if(r=this.toolState.drawTool.selectionTool[t](this.currentFigure.bitmap),this.toolState.drawTool.selectionTool.removeAll(),!(n=this.optionHandlers[t])){o.next=14;break}return o.next=12,n.call(this,r);case 12:o.next=16;break;case 14:return o.next=16,this.updateBitmapInFigure({figureId:this.currentFigure.id,bitmap:r});case 16:o.next=19;break;case 18:this.toolState.drawTool.selectionTool.removeAll();case 19:this.accepted=null,this.updateToolState({toolId:this.currentTool.id,value:ToolBitmapOptionsvue_type_script_lang_js_objectSpread({},this.currentTool.state,{accepted:null})}),this.setCurrentToolOption(this.currentTool.option||this.tools.all.bitmap.options.brushCreate.id);case 22:case"end":return o.stop()}},_callee2,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setToolOption",value:function(e){this.setCurrentToolOption(e),[this.tools.all.bitmap.options.fill.id,this.tools.all.bitmap.options.crop.id].includes(e)&&He.a.info({title:"Notice",message:"Place three points to polygon from bitmap"})}},{key:"setNewToolState",value:function(e){this.updateToolState({toolId:this.currentTool.id,value:ToolBitmapOptionsvue_type_script_lang_js_objectSpread({},this.currentTool.state,e)})}},{key:"updateBrushSize",value:function(e){this.setNewToolState({brushSize:e})}},{key:"created",value:function(){var e=this;this.drawTool=this.toolState.drawTool,this.toolState.drawTool.selectionTool.on("ready",function(t){e.acceptAllowed=t}),this.keyMap=new Map([[["["],{handler:function(){e.isFillCropMode||e.updateBrushSize(e.currentTool.state.brushSize-1)}}],[["]"],{handler:function(){e.isFillCropMode||e.updateBrushSize(e.currentTool.state.brushSize+1)}}]])}},{key:"beforeDestroy",value:function(){this.drawTool&&(this.drawTool.selectionTool&&this.drawTool.selectionTool.removeAll(),this.drawTool=null)}},{key:"tools",get:function(){return this.$store.state.tools}},{key:"toolOptions",get:function(){var e=this;return[{id:this.tools.all.bitmap.options.brushCreate.id,get title(){var t,r="Brush";return(null===(t=e.currentTool)||void 0===t?void 0:t.option)===e.tools.all.bitmap.options.brushEraser.id&&(r+=' <i class="icon-keyboard"></i>SHIFT + Click'),r},icon:"icon-round-brush"},{id:this.tools.all.bitmap.options.brushEraser.id,get title(){var t,r="Eraser";return(null===(t=e.currentTool)||void 0===t?void 0:t.option)===e.tools.all.bitmap.options.brushCreate.id&&(r+=' <i class="icon-keyboard"></i>SHIFT + Click'),r},icon:"icon-eraser",get disabled(){return e.isCreateMode}},{id:this.tools.all.bitmap.options.bucketFill.id,title:"Bucket Fill",icon:"zmdi zmdi-format-color-fill",get disabled(){return e.isCreateMode}},{id:this.tools.all.bitmap.options.fill.id,title:"Polygon Fill",icon:r("c786aad2c16ab18193dc"),get disabled(){return e.isCreateMode}},{id:this.tools.all.bitmap.options.crop.id,title:"Polygon Crop",icon:"zmdi zmdi-crop",get disabled(){return e.isCreateMode}},{id:this.tools.all.bitmap.options.cut.id,title:"Polygon Cut",icon:"zmdi zmdi-scissors",get disabled(){return e.isCreateMode}}]}},{key:"toolState",get:function(){return this.currentTool.state}},{key:"isFillCropMode",get:function(){return this.currentTool.option===this.tools.all.bitmap.options.fill.id||this.currentTool.option===this.tools.all.bitmap.options.crop.id||this.currentTool.option===this.tools.all.bitmap.options.cut.id}}])&&ToolBitmapOptionsvue_type_script_lang_js_defineProperties(t.prototype,n),ToolBitmapOptions}()).prototype,"fillCropAcceptedChanged",[rt],Object.getOwnPropertyDescriptor(it.prototype,"fillCropAcceptedChanged"),it.prototype),ToolBitmapOptionsvue_type_script_lang_js_applyDecoratedDescriptor(it.prototype,"acceptedChanged",[nt],Object.getOwnPropertyDescriptor(it.prototype,"acceptedChanged"),it.prototype),ot=it))||ot),ct=(r("5bdbd452e205621159ed"),Object(p.a)(st,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"hotkeys",rawName:"v-hotkeys",value:e.keyMap,expression:"keyMap"}],staticClass:"toolBitmapOptions"},[e.isFillCropMode?r("accept-cancel-buttons",{attrs:{value:e.accepted,"accept-allowed":e.acceptAllowed},on:{"update:value":function(t){e.accepted=t}}}):[e._l(e.toolOptions,function(t){return r("tool-button",{key:t.id,attrs:{active:e.currentTool.option&&t.id===e.currentTool.option,title:t.title,"title-disabled":"Draw something first",disabled:!e.currentTool.ready||t.disabled,icon:t.icon},on:{click:function(r){return e.setToolOption(t.id)}}})}),e._v(" "),r("tool-button",{attrs:{active:e.currentTool.state.eraseUnderlyingPixels,title:"Erase underlying pixels in other Bitmap objects","title-disabled":"Only available for the Brush option",disabled:e.currentTool.option!==e.tools.all.bitmap.options.brushCreate.id,icon:"icon-align-bottom"},on:{click:function(t){return e.setNewToolState({eraseUnderlyingPixels:!e.currentTool.state.eraseUnderlyingPixels})}}}),e._v(" "),r("el-tooltip",[r("number-slider",{staticClass:"brush-size",attrs:{min:1,max:256,step:1,postfix:"px",value:e.currentTool.state.brushSize,title:e.brushSizeTooltip},on:{input:function(t){return e.updateBrushSize(t)}}})],1)]],2)},[],!1,null,"eedf7c62",null));ct.options.__file="ToolBitmapOptions.vue";var ut,lt=ct.exports;function ToolRectangleOptionsvue_type_script_lang_js_typeof(e){return(ToolRectangleOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolRectangleOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolRectangleOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolRectangleOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolRectangleOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ToolRectangleOptionsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pt=Object(u.a)({components:{ToolHelp:at},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ToolRectangleOptionsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.c)("tools",["isCreateMode"]))})(ut=function(e){function ToolRectangleOptions(){return function(e,t){if(!(e instanceof ToolRectangleOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolRectangleOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolRectangleOptionsvue_type_script_lang_js_getPrototypeOf(ToolRectangleOptions).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolRectangleOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolRectangleOptions,s.a),ToolRectangleOptions}())||ut,ft=Object(p.a)(pt,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.isCreateMode?t("tool-help",[this._v("\n    Place two points to form a rectangle\n  ")]):this._e()],1)},[],!1,null,null,null);ft.options.__file="ToolRectangleOptions.vue";var dt,_t=ft.exports;function ToolPolylineOptionsvue_type_script_lang_js_typeof(e){return(ToolPolylineOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolPolylineOptionsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ToolPolylineOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolPolylineOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolPolylineOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolPolylineOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ToolPolylineOptionsvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ToolPolylineOptionsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ToolPolylineOptionsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yt=Object(u.a)({components:{ToolButton:G},computed:ToolPolylineOptionsvue_type_script_lang_js_objectSpread({},Object(y.c)("tools",["currentTool"])),methods:ToolPolylineOptionsvue_type_script_lang_js_objectSpread({},Object(y.b)("tools",["setCurrentToolOption"]))})(dt=function(e){function ToolPolylineOptions(){return function(e,t){if(!(e instanceof ToolPolylineOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolPolylineOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolPolylineOptionsvue_type_script_lang_js_getPrototypeOf(ToolPolylineOptions).apply(this,arguments))}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolPolylineOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolPolylineOptions,s.a),t=ToolPolylineOptions,(n=[{key:"tools",get:function(){return this.$store.state.tools}},{key:"toolOptions",get:function(){var e=this;return[{id:this.tools.all.polyline.options.consecutive.id,get title(){var t,r="Add points consecutively";return(null===(t=e.currentTool)||void 0===t?void 0:t.option)===e.tools.all.polyline.options.closestSegment.id&&(r+=' <i class="icon-keyboard"></i>SHIFT + Click'),r},svg:r("f8727d5d83b7fa2d80af"),mod:"plus"},{id:this.tools.all.polyline.options.closestSegment.id,get title(){var t,r="Add points to cursor's closest segment";return(null===(t=e.currentTool)||void 0===t?void 0:t.option)===e.tools.all.polyline.options.consecutive.id&&(r+=' <i class="icon-keyboard"></i>SHIFT + Click'),r},svg:r("27fbc10111cb6c1a7a45"),mod:"plus"},{id:this.tools.all.polyline.options.pointsEraser.id,title:"Click on point to remove",svg:r("59d21970c039a81816d0"),mod:"minus"}]}}])&&ToolPolylineOptionsvue_type_script_lang_js_defineProperties(t.prototype,n),ToolPolylineOptions}())||dt,gt=(r("edb9565a96bfaf23de8a"),Object(p.a)(yt,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"toolPolylineOptions"},e._l(e.toolOptions,function(t){return r("tool-button",{key:t.id,attrs:{active:e.currentTool.option&&t.id===e.currentTool.option,title:t.title,disabled:!e.currentTool.ready},on:{click:function(r){return e.setCurrentToolOption(t.id)}}},[t.mod?r("i",{staticClass:"mod",class:"zmdi zmdi-"+t.mod}):e._e(),e._v(" "),t.svg?r("span",{staticClass:"svg-icon",domProps:{innerHTML:e._s(t.svg)}}):r("i",{class:t.icon})])}),1)},[],!1,null,"5cd996c6",null));gt.options.__file="ToolPolylineOptions.vue";var ht,bt=gt.exports;function ToolPointOptionsvue_type_script_lang_js_typeof(e){return(ToolPointOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolPointOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolPointOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolPointOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolPointOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vt=Object(u.a)(ht=function(e){function ToolPointOptions(){return function(e,t){if(!(e instanceof ToolPointOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolPointOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolPointOptionsvue_type_script_lang_js_getPrototypeOf(ToolPointOptions).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolPointOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolPointOptions,s.a),ToolPointOptions}())||ht,mt=(r("ad7786354ed0e053124a"),Object(p.a)(vt,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"toolPointOptions"})},[],!1,null,"27cf4806",null));mt.options.__file="ToolPointOptions.vue";var Ot,Pt=mt.exports;function SmartModelSelectorvue_type_script_lang_js_typeof(e){return(SmartModelSelectorvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SmartModelSelectorvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function SmartModelSelectorvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SmartModelSelectorvue_type_script_lang_js_getPrototypeOf(e){return(SmartModelSelectorvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SmartModelSelectorvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SmartModelSelectorvue_type_script_lang_js_setPrototypeOf(e,t){return(SmartModelSelectorvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SmartModelSelectorvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){SmartModelSelectorvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function SmartModelSelectorvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tt=Object(u.a)({components:{ToolHelp:at},computed:SmartModelSelectorvue_type_script_lang_js_objectSpread({},Object(y.c)("settings",["currentModel"])),methods:SmartModelSelectorvue_type_script_lang_js_objectSpread({},Object(y.b)("settings",["setSmartModel"]))})(Ot=function(e){function SmartModelSelector(){var e,t,r;!function(e,t){if(!(e instanceof SmartModelSelector))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=SmartModelSelectorvue_type_script_lang_js_getPrototypeOf(SmartModelSelector)).call.apply(e,[this].concat(o)))||"object"!==SmartModelSelectorvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?SmartModelSelectorvue_type_script_lang_js_assertThisInitialized(this):r,SmartModelSelectorvue_type_script_lang_js_defineProperty(SmartModelSelectorvue_type_script_lang_js_assertThisInitialized(t),"loading",!0),SmartModelSelectorvue_type_script_lang_js_defineProperty(SmartModelSelectorvue_type_script_lang_js_assertThisInitialized(t),"models",[]),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SmartModelSelectorvue_type_script_lang_js_setPrototypeOf(e,t)}(SmartModelSelector,s.a),t=SmartModelSelector,(r=[{key:"setCurrentModel",value:function(e){this.currentModel&&this.currentModel.id===e||this.setSmartModel(e)}},{key:"created",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){var e,t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.get("/annotation/tools/smart").then(function(e){return e.data});case 2:(e=r.sent)&&e.length?(t=Object(N.keyBy)(e,"id"),this.currentModel&&t[this.currentModel.id]||this.setSmartModel(e[0].id),this.models=e):this.$message.error("No deployed SmartTools"),this.loading=!1;case 5:case"end":return r.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){SmartModelSelectorvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){SmartModelSelectorvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"selectedModelId",get:function(){return this.models.length&&this.currentModel?this.currentModel.id:null}}])&&SmartModelSelectorvue_type_script_lang_js_defineProperties(t.prototype,r),SmartModelSelector}())||Ot,St=(r("053efad46671ae5a4ea1"),Object(p.a)(Tt,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"smart-model-selector"},[this.models.length>1?t("el-select",{staticClass:"smart-model-select-input",attrs:{"popper-class":"smart-model-select-popper",size:"small",value:this.selectedModelId},on:{input:this.setCurrentModel}},this._l(this.models,function(e){return t("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1):t("tool-help",[this._v("\n    Set two points to form ROI for object segmentation\n  ")])],1)},[],!1,null,null,null));St.options.__file="index.vue";var jt,wt=St.exports;function ToolSmartOptionsvue_type_script_lang_js_typeof(e){return(ToolSmartOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolSmartOptionsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ToolSmartOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolSmartOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolSmartOptionsvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ToolSmartOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolSmartOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ToolSmartOptionsvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ToolSmartOptionsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ToolSmartOptionsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var It=Object(u.a)({components:{ToolButton:G,NumberSlider:Ke,SmartModelSelector:wt},computed:ToolSmartOptionsvue_type_script_lang_js_objectSpread({},Object(y.c)("tools",["currentTool"])),methods:ToolSmartOptionsvue_type_script_lang_js_objectSpread({},Object(y.b)("tools",["setCurrentToolOption","updateToolState","setTool"]))})(jt=function(e){function ToolSmartOptions(){var e,t,r;!function(e,t){if(!(e instanceof ToolSmartOptions))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=ToolSmartOptionsvue_type_script_lang_js_getPrototypeOf(ToolSmartOptions)).call.apply(e,[this].concat(o)))||"object"!==ToolSmartOptionsvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?ToolSmartOptionsvue_type_script_lang_js_assertThisInitialized(this):r,ToolSmartOptionsvue_type_script_lang_js_defineProperty(ToolSmartOptionsvue_type_script_lang_js_assertThisInitialized(t),"isToolReady",!1),t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolSmartOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolSmartOptions,s.a),t=ToolSmartOptions,(n=[{key:"created",value:function(){var e=this;this.toolState.drawTool.on("ready",function(t){e.isToolReady=t})}},{key:"tools",get:function(){return this.$store.state.tools}},{key:"toolOptions",get:function(){var e=this;return[{id:this.tools.all.bitmap.id,title:"Save and edit as Bitmap",icon:"zmdi zmdi-image-o",onClick:function(){e.setTool({toolId:e.tools.all.bitmap.id})}},{id:this.tools.all.smart.options.pointPositive.id,title:"Positive Point",icon:"zmdi zmdi-dot-circle-alt",mod:"check"},{id:this.tools.all.smart.options.pointNegative.id,title:"Negative Point",icon:"zmdi zmdi-dot-circle-alt",mod:"close"},{id:this.tools.all.smart.options.pointsEraser.id,title:"Click on point to remove",icon:r("59d21970c039a81816d0"),mod:"minus"}]}},{key:"toolState",get:function(){return this.currentTool.state}}])&&ToolSmartOptionsvue_type_script_lang_js_defineProperties(t.prototype,n),ToolSmartOptions}())||jt,Et=(r("d2354919a7674e6bc2d8"),Object(p.a)(It,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.isToolReady?r("div",{staticClass:"smart-tool-options"},e._l(e.toolOptions,function(t){return r("tool-button",{key:t.id,attrs:{active:e.currentTool.option&&t.id===e.currentTool.option,title:t.title,disabled:!e.currentTool.ready||t.disabled,mod:t.mod,icon:t.icon},on:{click:function(r){t.onClick?t.onClick():e.setCurrentToolOption(t.id)}}})}),1):[r("smart-model-selector")]],2)},[],!1,null,"9f9e7f94",null));Et.options.__file="ToolSmartOptions.vue";var Ct,kt=Et.exports;function ToolFillOptionsvue_type_script_lang_js_typeof(e){return(ToolFillOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolFillOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolFillOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolFillOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolFillOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var At=Object(u.a)(Ct=function(e){function ToolFillOptions(){return function(e,t){if(!(e instanceof ToolFillOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolFillOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolFillOptionsvue_type_script_lang_js_getPrototypeOf(ToolFillOptions).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolFillOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolFillOptions,s.a),ToolFillOptions}())||Ct,Ft=(r("9b1d987fa6d55df40a83"),Object(p.a)(At,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"toolFillOptions"})},[],!1,null,"023509e2",null));Ft.options.__file="ToolFillOptions.vue";var xt,Rt=Ft.exports;function ToolCutOptionsvue_type_script_lang_js_typeof(e){return(ToolCutOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolCutOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolCutOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolCutOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolCutOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lt=Object(u.a)(xt=function(e){function ToolCutOptions(){return function(e,t){if(!(e instanceof ToolCutOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolCutOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolCutOptionsvue_type_script_lang_js_getPrototypeOf(ToolCutOptions).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolCutOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolCutOptions,s.a),ToolCutOptions}())||xt,Dt=(r("8ab9eff72ea5e9b91e4a"),Object(p.a)(Lt,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"toolCutOptions"})},[],!1,null,"58c303f4",null));Dt.options.__file="ToolCutOptions.vue";var Gt,Bt=Dt.exports;function ToolCropOptionsvue_type_script_lang_js_typeof(e){return(ToolCropOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolCropOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolCropOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolCropOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolCropOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mt=Object(u.a)(Gt=function(e){function ToolCropOptions(){return function(e,t){if(!(e instanceof ToolCropOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolCropOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolCropOptionsvue_type_script_lang_js_getPrototypeOf(ToolCropOptions).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolCropOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolCropOptions,s.a),ToolCropOptions}())||Gt,zt=(r("1d426532832d51251b63"),Object(p.a)(Mt,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"toolCropOptions"})},[],!1,null,"6d33b5e2",null));zt.options.__file="ToolCropOptions.vue";var Nt,Ut=zt.exports;function ToolGraphOptionsvue_type_script_lang_js_typeof(e){return(ToolGraphOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolGraphOptionsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ToolGraphOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolGraphOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolGraphOptionsvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ToolGraphOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolGraphOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ToolGraphOptionsvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ToolGraphOptionsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ToolGraphOptionsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ht=Object(u.a)({components:{ToolButton:G,ToolHelp:at},computed:ToolGraphOptionsvue_type_script_lang_js_objectSpread({},Object(y.c)("tools",["currentTool"])),methods:ToolGraphOptionsvue_type_script_lang_js_objectSpread({},Object(y.b)("tools",["setCurrentToolOption"]))})(Nt=function(e){function ToolGraphOptions(){var e,t,r;!function(e,t){if(!(e instanceof ToolGraphOptions))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=ToolGraphOptionsvue_type_script_lang_js_getPrototypeOf(ToolGraphOptions)).call.apply(e,[this].concat(o)))||"object"!==ToolGraphOptionsvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?ToolGraphOptionsvue_type_script_lang_js_assertThisInitialized(this):r,ToolGraphOptionsvue_type_script_lang_js_defineProperty(ToolGraphOptionsvue_type_script_lang_js_assertThisInitialized(t),"isToolReady",!1),t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolGraphOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolGraphOptions,s.a),t=ToolGraphOptions,(n=[{key:"created",value:function(){var e=this;this.toolState.drawTool.on("ready",function(t){e.isToolReady=t})}},{key:"tools",get:function(){return this.$store.state.tools}},{key:"toolOptions",get:function(){var e=this;return[{id:this.tools.all.graph.options.pointsMove.id,get title(){var t,r="Drag a point to move";return(null===(t=e.currentTool)||void 0===t?void 0:t.option)===e.tools.all.graph.options.pointsErase.id&&(r+=" (SHIFT + Click)"),r},icon:"zmdi zmdi-arrows"},{id:this.tools.all.graph.options.pointsErase.id,title:"Click on a point to remove",svg:r("59d21970c039a81816d0"),mod:"minus"}]}},{key:"toolState",get:function(){return this.currentTool.state}}])&&ToolGraphOptionsvue_type_script_lang_js_defineProperties(t.prototype,n),ToolGraphOptions}())||Nt,Vt=(r("527f617bc7a5e4c500cc"),Object(p.a)(Ht,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"toolGraphOptions"},[e.isToolReady?r("div",e._l(e.toolOptions,function(t){return r("tool-button",{key:t.id,attrs:{active:e.currentTool.option&&t.id===e.currentTool.option,title:t.title,disabled:!e.currentTool.ready},on:{click:function(r){return e.setCurrentToolOption(t.id)}}},[t.mod?r("i",{staticClass:"mod",class:"zmdi zmdi-"+t.mod}):e._e(),e._v(" "),t.svg?r("span",{staticClass:"svg-icon",domProps:{innerHTML:e._s(t.svg)}}):r("i",{class:t.icon})])}),1):[r("tool-help",[e._v("\n      Set two points to fit a Keypoints template into\n    ")])]],2)},[],!1,null,"fc92fb7a",null));Vt.options.__file="ToolGraphOptions.vue";var Yt,Jt=Vt.exports;function ToolTagFiguresOptionsvue_type_script_lang_js_typeof(e){return(ToolTagFiguresOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ToolTagFiguresOptionsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ToolTagFiguresOptionsvue_type_script_lang_js_getPrototypeOf(e){return(ToolTagFiguresOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ToolTagFiguresOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(ToolTagFiguresOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wt=Object(u.a)({components:{ToolHelp:at}})(Yt=function(e){function ToolPolygonOptions(){return function(e,t){if(!(e instanceof ToolPolygonOptions))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ToolTagFiguresOptionsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ToolTagFiguresOptionsvue_type_script_lang_js_getPrototypeOf(ToolPolygonOptions).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ToolTagFiguresOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(ToolPolygonOptions,s.a),t=ToolPolygonOptions,(r=[{key:"selectedTag",get:function(){return this.$store.state.tags.selected}}])&&ToolTagFiguresOptionsvue_type_script_lang_js_defineProperties(t.prototype,r),ToolPolygonOptions}())||Yt,qt=Object(p.a)(Wt,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"toolTagFiguresOptions"},[this.selectedTag&&this.selectedTag.figureId?t("tool-help",{attrs:{"max-width":200}},[t("span",[this._v("\n      Edit tags of selected object in sidebar or press ESC to cancel\n    ")])]):this._e()],1)},[],!1,null,null,null);qt.options.__file="ToolTagFiguresOptions.vue";var Zt,$t,Qt,Kt,Xt=qt.exports,er=(r("e22e606178dee4da7044"),r("985a6ac0d62c56a3580e")),tr=r.n(er);function hotkeysToMouseTrap(e){return e.map(function(e){return e.join("+").replace(/arrow/gi,"").replace("delete","del").replace("escape","esc")})}function ImageStatusvue_type_script_lang_js_typeof(e){return(ImageStatusvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ImageStatusvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ImageStatusvue_type_script_lang_js_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){ImageStatusvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){ImageStatusvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function ImageStatusvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ImageStatusvue_type_script_lang_js_getPrototypeOf(e){return(ImageStatusvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ImageStatusvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ImageStatusvue_type_script_lang_js_setPrototypeOf(e,t){return(ImageStatusvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ImageStatusvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ImageStatusvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ImageStatusvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("06e9118d715347cc6fbf");var rr=[S.JOB_IMAGE_STATUS.ACCEPTED,S.JOB_IMAGE_STATUS.REJECTED],nr=(Zt=Object(u.a)({computed:ImageStatusvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["currentImage"])),methods:ImageStatusvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/images",["setImageStatus","nextImage"]))}),$t=Object(u.b)("settings.hotkeys.confirmImage",{immediate:!0}),Zt((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Kt=function(e){function ImageStatus(){var e,t,r;!function(e,t){if(!(e instanceof ImageStatus))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=ImageStatusvue_type_script_lang_js_getPrototypeOf(ImageStatus)).call.apply(e,[this].concat(o)))||"object"!==ImageStatusvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?ImageStatusvue_type_script_lang_js_assertThisInitialized(this):r,ImageStatusvue_type_script_lang_js_defineProperty(ImageStatusvue_type_script_lang_js_assertThisInitialized(t),"loading",!1),ImageStatusvue_type_script_lang_js_defineProperty(ImageStatusvue_type_script_lang_js_assertThisInitialized(t),"JOB_IMAGE_STATUS",S.JOB_IMAGE_STATUS),ImageStatusvue_type_script_lang_js_defineProperty(ImageStatusvue_type_script_lang_js_assertThisInitialized(t),"JOB_STATUS",S.JOB_STATUS),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ImageStatusvue_type_script_lang_js_setPrototypeOf(e,t)}(ImageStatus,s.a),t=ImageStatus,(r=[{key:"hotkeysChanged",value:function(){var e=this;this.keyMap=new Map([[hotkeysToMouseTrap(this.settings.hotkeys.confirmImage),{handler:function(){var t=ImageStatusvue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.confirm(S.JOB_IMAGE_STATUS.DONE);case 2:case"end":return t.stop()}},_callee)}));return function(){return t.apply(this,arguments)}}()}]]),this.$el&&this.$el._updateKeyMap()}},{key:"confirm",value:function(){var e=ImageStatusvue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.disabled&&!this.loading){t.next=2;break}return t.abrupt("return");case 2:if(e!==S.JOB_IMAGE_STATUS.DONE||this.canConfirm){t.next=4;break}return t.abrupt("return");case 4:if(!rr.includes(e)||this.isJobCreator){t.next=6;break}return t.abrupt("return");case 6:return t.prev=6,this.loading=!0,t.next=10,this.setImageStatus({imageId:this.currentImage.id,status:e});case 10:return t.next=12,this.nextImage();case 12:return t.prev=12,this.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},_callee2,this,[[6,,12,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"user",get:function(){return this.$store.state.user}},{key:"settings",get:function(){return this.$store.state.settings}},{key:"text",get:function(){return this.currentImage.reviewStatus===S.JOB_IMAGE_STATUS.DONE?"Finished":this.isWorker?"Confirm":"In progress"}},{key:"canConfirm",get:function(){return this.isWorker&&this.currentImage.reviewStatus!==S.JOB_IMAGE_STATUS.DONE&&[S.JOB_STATUS.PENDING,S.JOB_STATUS.IN_PROGRESS].includes(this.$job.status)}},{key:"isJobCreator",get:function(){return this.$acl({action:S.ACL_ACTIONS.JOBS.CREATE,teamId:this.$team})||this.$job.reviewerId===this.user.id}},{key:"isWorker",get:function(){return this.user.id===this.$job.userId||!this.$acl({action:S.ACL_ACTIONS.JOBS.CREATE,teamId:this.$team,jobId:this.$job.id})}}])&&ImageStatusvue_type_script_lang_js_defineProperties(t.prototype,r),ImageStatus}()).prototype,"hotkeysChanged",[$t],Object.getOwnPropertyDescriptor(Kt.prototype,"hotkeysChanged"),Kt.prototype),Qt=Kt))||Qt),or=(r("d4a576817cf0cd9b2859"),Object(p.a)(nr,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"hotkeys",rawName:"v-hotkeys",value:e.keyMap,expression:"keyMap"}],staticClass:"image-status"},[e.canConfirm?r("el-tooltip",{attrs:{effect:"dark","open-delay":300,content:"Confirm"}},[r("a",{staticClass:"btn",on:{click:function(t){return e.confirm(e.JOB_IMAGE_STATUS.DONE)}}},[r("i",{staticClass:"zmdi zmdi-check-all"})])]):r("div",{staticClass:"status"},[e.$job.status===e.JOB_STATUS.ON_REVIEW?r("span",[r("el-button",{staticClass:"btn",class:{active:e.currentImage.reviewStatus===e.JOB_IMAGE_STATUS.ACCEPTED},attrs:{title:"Accept",disabled:!e.isJobCreator},on:{click:function(t){return e.confirm(e.JOB_IMAGE_STATUS.ACCEPTED)}}},[r("i",{staticClass:"zmdi zmdi-thumb-up"})]),e._v(" "),r("el-button",{staticClass:"btn",class:{active:e.currentImage.reviewStatus===e.JOB_IMAGE_STATUS.REJECTED},attrs:{title:"Reject",disabled:!e.isJobCreator},on:{click:function(t){return e.confirm(e.JOB_IMAGE_STATUS.REJECTED)}}},[r("i",{staticClass:"zmdi zmdi-thumb-down"})])],1):e.currentImage.reviewStatus===e.JOB_IMAGE_STATUS.DONE||e.$job.status===e.JOB_STATUS.COMPLETED?r("span",[r("i",{staticClass:"zmdi zmdi-check-all",staticStyle:{"margin-right":"5px"}}),e._v("\n      Finished\n    ")]):r("span",[r("i",{staticClass:"zmdi zmdi-refresh"}),e._v("\n      In progress\n    ")])])],1)},[],!1,null,"362d98a9",null));or.options.__file="ImageStatus.vue";var ir,ar,sr,cr,ur=or.exports;function ImagesNavigatorvue_type_script_lang_js_typeof(e){return(ImagesNavigatorvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ImagesNavigatorvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ImagesNavigatorvue_type_script_lang_js_getPrototypeOf(e){return(ImagesNavigatorvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ImagesNavigatorvue_type_script_lang_js_setPrototypeOf(e,t){return(ImagesNavigatorvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ImagesNavigatorvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ImagesNavigatorvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ImagesNavigatorvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lr=(ir=Object(u.a)({computed:ImagesNavigatorvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["currentImage","orderedImages","total"])),methods:ImagesNavigatorvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/images",["nextImage","prevImage"])),components:{ImageStatus:ur}}),ar=Object(u.b)("settings.hotkeys"),ir((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((cr=function(e){function ImagesNavigator(){return function(e,t){if(!(e instanceof ImagesNavigator))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ImagesNavigatorvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ImagesNavigatorvue_type_script_lang_js_getPrototypeOf(ImagesNavigator).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ImagesNavigatorvue_type_script_lang_js_setPrototypeOf(e,t)}(ImagesNavigator,s.a),t=ImagesNavigator,(r=[{key:"hotkeysChanged",value:function(){this.keyMap=new Map([[hotkeysToMouseTrap(this.settings.hotkeys.previousImage),{throttle:500,handler:this.prevImage}],[hotkeysToMouseTrap(this.settings.hotkeys.nextImage),{throttle:500,handler:this.nextImage}]]),this.$el&&this.$el._updateKeyMap()}},{key:"imageChangedHandler",value:function(e){if(Number.isFinite(parseInt(e,10))){var t="Images scrolled to the ".concat(e>0?"first":"last"," image");tr.a.info({showClose:!0,message:t})}}},{key:"created",value:function(){this.hotkeysChanged(this.settings.hotkeys),h.a.on("scroll-images-dir-changed",this.imageChangedHandler)}},{key:"beforeDestroy",value:function(){h.a.removeListener("scroll-images-dir-changed",this.imageChangedHandler)}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"settings",get:function(){return this.$store.state.settings}},{key:"projectLink",get:function(){return"".concat(window.location.origin,"/projects/").concat(this.dataset.projectId)}},{key:"progressWidth",get:function(){return this.dataset&&this.total?"".concat(100*(this.orderedImages.indexOf(this.currentImage)+1)/this.total,"%"):"0%"}}])&&ImagesNavigatorvue_type_script_lang_js_defineProperties(t.prototype,r),ImagesNavigator}()).prototype,"hotkeysChanged",[ar],Object.getOwnPropertyDescriptor(cr.prototype,"hotkeysChanged"),cr.prototype),sr=cr))||sr),pr=(r("06e00455d3fe271af7e3"),Object(p.a)(lr,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"hotkeys",rawName:"v-hotkeys",value:e.keyMap,expression:"keyMap"},{name:"loading",rawName:"v-loading",value:e.dataset.loading,expression:"dataset.loading"}],staticClass:"images-navigator"},[r("div",{staticClass:"inline-block",on:{click:e.prevImage}},[r("el-tooltip",{attrs:{effect:"dark","open-delay":300,content:"Previous image (←)"}},[r("a",{staticClass:"btn"},[r("i",{staticClass:"icon-chevron-left"})])])],1),e._v(" "),r("div",{staticClass:"inline-block progress-wrapper"},[r("div",{staticClass:"progress-line"},[r("b",{style:{width:e.progressWidth}})]),e._v(" "),e.currentImage?r("el-tooltip",{attrs:{effect:"dark","open-delay":300,content:e.currentImage.title}},[r("b",{staticClass:"image-name"},[e._v("\n        "+e._s(e.currentImage.title)+"\n      ")])]):r("b",[e._v("\n      —\n    ")]),e._v(" "),r("div",{staticClass:"info"},[e.currentImage?r("el-tooltip",{attrs:{effect:"dark","open-delay":300}},[r("span",{attrs:{slot:"content"},slot:"content"},[r("div",[e._v("Project: "+e._s(e.dataset.projectTitle))]),e._v(" "),r("div",[e._v("Dataset: "+e._s(e.dataset.title))])]),e._v(" "),r("span",{staticClass:"titles"},[r("a",{staticClass:"project-title",attrs:{href:e.projectLink}},[e._v("\n            "+e._s(e.dataset.projectTitle)+"\n          ")]),e._v(" "),r("i",{staticClass:"icon-chevron-small-right chevron"}),e._v(" "),r("span",{staticClass:"dataset-title"},[e._v("\n            "+e._s(e.dataset.title)+"\n          ")])])]):e._e()],1)],1),e._v(" "),r("div",{staticClass:"inline-block"},[r("el-tooltip",{attrs:{effect:"dark","open-delay":300,content:"Next image (→)"}},[r("a",{staticClass:"btn",on:{click:e.nextImage}},[r("i",{staticClass:"icon-chevron-right"})])])],1),e._v(" "),e.currentImage&&e.currentImage.reviewStatus?r("image-status",{staticClass:"inline-block"}):e._e()],1)},[],!1,null,null,null));pr.options.__file="ImagesNavigator.vue";var fr,dr,_r,yr,gr,hr,br=pr.exports;function Hotkeysvue_type_script_lang_js_typeof(e){return(Hotkeysvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hotkeysvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hotkeysvue_type_script_lang_js_getPrototypeOf(e){return(Hotkeysvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hotkeysvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hotkeysvue_type_script_lang_js_setPrototypeOf(e,t){return(Hotkeysvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hotkeysvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function Hotkeysvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("51375b56c22999064d80"),r("e4048f669033667d4d6a"),r("2c8bc077db23e6b802e1");var vr=(fr=Object(u.a)({props:{data:Array,description:String,readonly:{type:Boolean,default:!1},clean:Boolean,recording:Boolean,buttonsLimit:{type:Number,default:6},aliasLimit:{type:Number,default:3}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Hotkeysvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.c)("dataset",["projectHotkeysMap"]))}),dr=Object(u.b)("data"),_r=Object(u.b)("current"),yr=Object(u.b)("clean"),fr((Hotkeysvue_type_script_lang_js_applyDecoratedDescriptor((hr=function(e){function Hotkeys(){var e,t,r;!function(e,t){if(!(e instanceof Hotkeys))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=Hotkeysvue_type_script_lang_js_getPrototypeOf(Hotkeys)).call.apply(e,[this].concat(o)))||"object"!==Hotkeysvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?Hotkeysvue_type_script_lang_js_assertThisInitialized(this):r,Hotkeysvue_type_script_lang_js_defineProperty(Hotkeysvue_type_script_lang_js_assertThisInitialized(t),"currentData",null),Hotkeysvue_type_script_lang_js_defineProperty(Hotkeysvue_type_script_lang_js_assertThisInitialized(t),"current",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hotkeysvue_type_script_lang_js_setPrototypeOf(e,t)}(Hotkeys,s.a),t=Hotkeys,(r=[{key:"dataChanged",value:function(e){this.currentData=e.slice(0)}},{key:"currentChanged",value:function(e){this.$emit("update:recording",!!e)}},{key:"cleanChanged",value:function(e){e?(document.body.removeEventListener("keydown",this.onHotKeyDown,{capture:!0}),this.cancelCurrent()):document.body.addEventListener("keydown",this.onHotKeyDown,{capture:!0})}},{key:"getHumanCode",value:function(e){return e.toUpperCase()}},{key:"getSaveCode",value:function(e){var t=e.code;return"Quote"===t||"Comma"===t||"Period"===t||"Slash"===t||"Backslash"===t||"Semicolon"===t||"Minus"===t||"Equal"===t||t.includes("Bracket")?t=e.key:(t=t.replace(/^(Key|Digit|Numpad)/,"").replace("Control","ctrl")).includes("Arrow")||(t=t.replace(/(Left|Right)/,"")),t.toLowerCase()}},{key:"setCurrent",value:function(e,t){this.cancelCurrent(),(e||this.canAddHotkey)&&(this.current={value:[],old:e},e?this.$set(this.currentData,t,this.current.value):this.currentData.push(this.current.value))}},{key:"removeHotkeys",value:function(e,t){this.$emit("update:data",this.data.filter(function(e,r){return r!==t}))}},{key:"cancelCurrent",value:function(){this.dataChanged(this.data),this.current=null}},{key:"sendUpdate",value:function(){var e=this,t=this.data.slice(0),r=-1;this.current.old&&(r=this.data.findIndex(function(t){return Object(N.isEqual)(t,e.current.old)})),-1===r?t.push(this.current.value):t[r]=this.current.value,this.current=null,this.$emit("update:data",t)}},{key:"validateHotkey",value:function(){var e,t=this.current.value.map(function(e){return e.toUpperCase()}).join("_");t||(e="Invalid hotkey");var r=this.projectHotkeysMap.get(t);if(r&&!e){var n="Hotkey already assigned";r.title&&(n+=" to ".concat(r.title)),e=n}if(e)return this.$message.error(e),void this.clearHotkeyInput();this.sendUpdate()}},{key:"clearHotkeyInput",value:function(){var e=this;if(this.current.value.length){var t=null;if(this.current.old&&(t=this.data.findIndex(function(t){return Object(N.isEqual)(t,e.current.old)})),-1!==t)return void this.setCurrent(this.current.old,t)}this.cancelCurrent()}},{key:"onHotKeyDown",value:function(e){if(this.current)if("Escape"!==e.key)if("Enter"!==e.key){if(e.preventDefault(),!e.repeat&&this.canAddButton){var t=this.getSaveCode(e);t&&!this.current.value.includes(t)&&(this.current.value.push(t),this.current.value.sort(function(e,t){return e.length>1&&1===t.length?-1:1===e.length&&t.length>1?1:e>t?1:-1}))}}else this.validateHotkey();else this.clearHotkeyInput()}},{key:"created",value:function(){this.dataChanged(this.data)}},{key:"mounted",value:function(){document.body.addEventListener("keydown",this.onHotKeyDown,{capture:!0})}},{key:"beforeDestroy",value:function(){this.cleanChanged(!0)}},{key:"canAddHotkey",get:function(){return this.currentData&&this.currentData.length<this.aliasLimit}},{key:"canAddButton",get:function(){return this.current&&this.current.value.length<this.buttonsLimit}}])&&Hotkeysvue_type_script_lang_js_defineProperties(t.prototype,r),Hotkeys}()).prototype,"dataChanged",[dr],Object.getOwnPropertyDescriptor(hr.prototype,"dataChanged"),hr.prototype),Hotkeysvue_type_script_lang_js_applyDecoratedDescriptor(hr.prototype,"currentChanged",[_r],Object.getOwnPropertyDescriptor(hr.prototype,"currentChanged"),hr.prototype),Hotkeysvue_type_script_lang_js_applyDecoratedDescriptor(hr.prototype,"cleanChanged",[yr],Object.getOwnPropertyDescriptor(hr.prototype,"cleanChanged"),hr.prototype),gr=hr))||gr),mr=(r("e883d3c198465c5aef11"),Object(p.a)(vr,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{ref:"hotkeys",staticClass:"hotkeys",class:{current:e.current}},[e.currentData?r("span",{staticClass:"left"},[e._l(e.currentData,function(t,n){return r("span",[0!==n?r("span",{staticClass:"hotkey-split"},[e._v("or")]):e._e(),e._v(" "),r("span",{staticClass:"hotkey-group"},[r("span",{directives:[{name:"show",rawName:"v-show",value:!e.readonly&&!e.current,expression:"!readonly && !current"}],staticClass:"hotkey-group-menu"},[r("span",{staticClass:"hotkey-group-menu-item"},[r("i",{staticClass:"mod zmdi zmdi-edit",on:{click:function(r){return e.setCurrent(t,n)}}})]),e._v(" "),r("span",{staticClass:"hotkey-group-menu-item"},[r("i",{staticClass:"mod zmdi zmdi-delete",on:{click:function(r){return e.removeHotkeys(t,n)}}})])]),e._v(" "),e._l(t,function(n,o){return r("span",{directives:[{name:"show",rawName:"v-show",value:t.length,expression:"hotkeys.length"}]},[0!==o?r("span",{staticClass:"hotkey-split"},[e._v("+")]):e._e(),e._v(" "),r("span",{staticClass:"hotkey"},[e._v(e._s(e.getHumanCode(n)))])])}),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:!t.length&&e.current,expression:"!hotkeys.length && current"}],staticClass:"hotkey"},[e._v("<Hold down the sequence>")])],2)])}),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:!e.readonly&&!e.current&&e.canAddHotkey,expression:"!readonly && !current && canAddHotkey"}]},[r("span",{staticClass:"hotkey-add",on:{click:function(t){return e.setCurrent()}}},[r("i",{staticClass:"mod zmdi zmdi-plus-circle"})])])],2):e._e(),e._v(" "),r("span",{staticClass:"description"},[e._v(e._s(e.description))])])},[],!1,null,null,null));mr.options.__file="Hotkeys.vue";var Or,Pr=mr.exports;function HotkeysDialogvue_type_script_lang_js_typeof(e){return(HotkeysDialogvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HotkeysDialogvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HotkeysDialogvue_type_script_lang_js_getPrototypeOf(e){return(HotkeysDialogvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HotkeysDialogvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HotkeysDialogvue_type_script_lang_js_setPrototypeOf(e,t){return(HotkeysDialogvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function HotkeysDialogvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tr=Object(u.a)({props:["hotkeys","clean"],components:{Hotkeys:Pr}})(Or=function(e){function HotkeysDialog(){var e,t,r;!function(e,t){if(!(e instanceof HotkeysDialog))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=HotkeysDialogvue_type_script_lang_js_getPrototypeOf(HotkeysDialog)).call.apply(e,[this].concat(o)))||"object"!==HotkeysDialogvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?HotkeysDialogvue_type_script_lang_js_assertThisInitialized(this):r,HotkeysDialogvue_type_script_lang_js_defineProperty(HotkeysDialogvue_type_script_lang_js_assertThisInitialized(t),"modes",[]),HotkeysDialogvue_type_script_lang_js_defineProperty(HotkeysDialogvue_type_script_lang_js_assertThisInitialized(t),"currentTab",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HotkeysDialogvue_type_script_lang_js_setPrototypeOf(e,t)}(HotkeysDialog,s.a),t=HotkeysDialog,(r=[{key:"isReadonly",value:function(e){var t=this.currentRecording;return t?t!==e:!!e.readonly}},{key:"getHotKeys",value:function(e){return e.id?Object(N.get)(this.hotkeys,e.id,[]):e.hotkeys}},{key:"hotkeysUpdated",value:function(e,t){if(t.id){var r=Object(N.cloneDeep)(this.hotkeys);Object(N.set)(r,t.id,e),this.$emit("update:hotkeys",r)}}},{key:"created",value:function(){this.modes=[{title:"General",items:[{id:"previousImage",description:"Previous image"},{id:"nextImage",description:"Next image"},{id:"complete",description:"Save object & start next"},{id:"undo",description:"Undo last action"},{id:"redo",description:"Redo last action"},{hotkeys:[["<CLASS hotkey>"]],description:"Set current class and tool",readonly:!0},{hotkeys:[["<TAG hotkey>"]],description:"Add tag",readonly:!0}]},{title:"Tools",items:[{hotkeys:[["["]],description:"Decrease bitmap brush size",readonly:!0},{hotkeys:[["]"]],description:"Increase bitmap brush size",readonly:!0},{id:"tools.moveScene",description:"Move tool"},{id:"tools.select",description:"Select tool"},{id:"tools.moveFigures",description:"Drag tool"},{id:"tools.tagFigures",description:"Tag tool"},{id:"tools.".concat(S.FIGURES_TOOLS.POINT),description:"Point tool"},{id:"tools.".concat(S.FIGURES_TOOLS.RECTANGLE),description:"Rectangle tool"},{id:"tools.".concat(S.FIGURES_TOOLS.POLYLINE),description:"Polyline tool"},{id:"tools.".concat(S.FIGURES_TOOLS.POLYGON),description:"Polygon tool"},{id:"tools.".concat(S.FIGURES_TOOLS.BITMAP),description:"Bitmap tool"},{id:"tools.".concat(S.FIGURES_TOOLS.SMART),description:"Smart tool"},{id:"tools.".concat(S.FIGURES_TOOLS.GRAPH),description:"Keypoints tool"}]},{title:"Scene",items:[{hotkeys:[["alt","-"],["alt","mouse wheel"]],description:"Decrease points size",readonly:!0},{hotkeys:[["alt","+"],["alt","mouse wheel"]],description:"Increase points size",readonly:!0},{hotkeys:[["shift","-"],["shift","mouse wheel"]],description:"Decrease objects opacity",readonly:!0},{hotkeys:[["shift","+"],["shift","mouse wheel"]],description:"Increase objects opacity",readonly:!0},{hotkeys:[["shift","h"]],description:"Randomize objects' colors",readonly:!0}]},{title:"Objects",items:[{hotkeys:[["alt","j"]],description:"Clone objects from previous image",readonly:!0},{hotkeys:[["esc"]],description:"Deselect current object, cancel tool action",readonly:!0},{hotkeys:[["shift","Left Mouse Button"]],description:"Alternative tool action (ex. negative points in Smart tool)",readonly:!0},{hotkeys:[["delete"]],description:"Delete hovered point from current object",readonly:!0},{id:"removeCurrentObject",description:"Delete current object"},{id:"toggleFiguresVisibility",description:"Toggle objects visibility (except current if selected)"},{id:"toggleSelectedFigureVisibility",description:"Toggle current object visibility"},{hotkeys:[["ctrl","c"]],description:"Copy visible figures to the clipboard",readonly:!0},{hotkeys:[["ctrl","v"]],description:"Insert figures from the clipboard",readonly:!0}]},{title:"Job",items:[{id:"confirmImage",description:"Confirm image"}]}],this.currentTab=this.modes[0].title}},{key:"currentRecording",get:function(){var e=null;return this.modes.some(function(t){return t.items.some(function(t){return!!t.recording&&(e=t,!0)})}),e}}])&&HotkeysDialogvue_type_script_lang_js_defineProperties(t.prototype,r),HotkeysDialog}())||Or,Sr=(r("ed902824c7edfed739c3"),Object(p.a)(Tr,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{recording:e.currentRecording}},[r("div",{staticClass:"hotkeys-hint",class:{hidden:!e.currentRecording}},[e._v("\n    Press ENTER to finish or ESC to cancel\n  ")]),e._v(" "),r("el-tabs",{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},e._l(e.modes,function(t){return r("el-tab-pane",{key:t.title,attrs:{label:t.title,name:t.title}},e._l(t.items,function(t,n){return r("hotkeys",{key:t.id||n,attrs:{data:e.getHotKeys(t),description:t.description,readonly:e.isReadonly(t),recording:t.recording,clean:e.clean},on:{"update:recording":function(r){return e.$set(t,"recording",r)},"update:data":function(r){return e.hotkeysUpdated(r,t)}}})}),1)}),1)],1)},[],!1,null,"d98af044",null));Sr.options.__file="HotkeysDialog.vue";var jr,wr,Ir,Er,Cr=Sr.exports,kr=(r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("14471fdfe1a633789f19"),r("1f114f89726caab4cfd9"),r("87997867a0dfb75f73e8"),r("f2149823c7cbb1d26d0b"));function StringsArrayInputvue_type_script_lang_js_typeof(e){return(StringsArrayInputvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function StringsArrayInputvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function StringsArrayInputvue_type_script_lang_js_getPrototypeOf(e){return(StringsArrayInputvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function StringsArrayInputvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function StringsArrayInputvue_type_script_lang_js_setPrototypeOf(e,t){return(StringsArrayInputvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function StringsArrayInputvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("406d0451405e28c4822f");var Ar=(jr=Object(u.a)({props:{values:{type:Array,default:function(){return[]}}}}),wr=Object(u.b)("values",{immediate:!0}),jr((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Er=function(e){function StringsArrayInput(){var e,t,r;!function(e,t){if(!(e instanceof StringsArrayInput))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=StringsArrayInputvue_type_script_lang_js_getPrototypeOf(StringsArrayInput)).call.apply(e,[this].concat(o)))||"object"!==StringsArrayInputvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?StringsArrayInputvue_type_script_lang_js_assertThisInitialized(this):r,StringsArrayInputvue_type_script_lang_js_defineProperty(StringsArrayInputvue_type_script_lang_js_assertThisInitialized(t),"curValues",[]),StringsArrayInputvue_type_script_lang_js_defineProperty(StringsArrayInputvue_type_script_lang_js_assertThisInitialized(t),"errorMessage",""),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&StringsArrayInputvue_type_script_lang_js_setPrototypeOf(e,t)}(StringsArrayInput,s.a),t=StringsArrayInput,(r=[{key:"valuesChanged",value:function(e){this.curValues=(e||[]).map(function(e){return{value:"".concat(e),isEdit:!1}})}},{key:"isValid",value:function(e){var t=!0;return e||(t=!1),this.curValues.find(function(t){return!t.isEdit&&t.value===e})&&(t=!1,this.errorMessage='Value "'.concat(e,'" already exist')),t&&(this.errorMessage=""),t}},{key:"add",value:function(){this.curValues.push({value:"",isEdit:!0})}},{key:"remove",value:function(e){this.$emit("update:values",this.curValues.map(function(e){return e.value}).filter(function(t,r){return r!==e}))}},{key:"onInputConfirm",value:function(e){this.isValid(this.curValues[e].value)&&this.$emit("update:values",this.curValues.map(function(e){return e.value}))}},{key:"clearEdit",value:function(){this.valuesChanged(this.values),this.errorMessage=""}},{key:"isEdit",get:function(){return this.curValues.some(function(e){return e.isEdit})}}])&&StringsArrayInputvue_type_script_lang_js_defineProperties(t.prototype,r),StringsArrayInput}()).prototype,"valuesChanged",[wr],Object.getOwnPropertyDescriptor(Er.prototype,"valuesChanged"),Er.prototype),Ir=Er))||Ir),Fr=(r("88cf583d7e99d16abfa6"),Object(p.a)(Ar,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"strings-array-input"},[e.curValues.length>0?r("table",e._l(e.curValues,function(t,n){return r("tr",{key:n},[r("td",[e._v(e._s(n+1))]),e._v(" "),r("td",{attrs:{width:"100%"}},[t.isEdit?r("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{autofocus:!0,size:"mini"},nativeOn:{keydown:function(t){if("keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault(),t.stopPropagation()}},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"tag.value"}}):r("span",[e._v(e._s(t.value))])],1),e._v(" "),r("td",[t.isEdit?[r("el-button",{staticClass:"action-icon-btn",attrs:{size:"small",disabled:!e.isValid(t.value)},on:{click:function(t){return e.onInputConfirm(n)}}},[r("i",{staticClass:"zmdi zmdi-check"})]),e._v(" "),r("el-button",{staticClass:"action-icon-btn",attrs:{size:"small"},on:{click:function(t){return e.clearEdit(n)}}},[r("i",{staticClass:"zmdi zmdi-close"})])]:[r("el-button",{staticClass:"action-icon-btn",attrs:{size:"small",disabled:t.isEdit!==e.isEdit},on:{click:function(e){t.isEdit=!0}}},[r("i",{staticClass:"zmdi zmdi-edit"})]),e._v(" "),r("el-button",{staticClass:"action-icon-btn",attrs:{size:"small",disabled:t.isEdit!==e.isEdit},on:{click:function(t){return e.remove(n)}}},[r("i",{staticClass:"zmdi zmdi-delete"})])]],2)])}),0):e._e(),e._v(" "),r("div",{staticClass:"mt10"},[e.errorMessage?r("div",{staticClass:"el-form-item__error custom-error"},[e._v("\n      "+e._s(e.errorMessage)+"\n    ")]):e._e(),e._v(" "),r("el-button",{attrs:{size:"small",disabled:e.isEdit},on:{click:e.add}},[r("i",{staticClass:"zmdi zmdi-plus mr5"}),e._v(" Add value\n    ")])],1)])},[],!1,null,"22643e16",null));Fr.options.__file="StringsArrayInput.vue";var xr,Rr,Lr,Dr,Gr=Fr.exports;function ProjectSettingsFormvue_type_script_lang_js_typeof(e){return(ProjectSettingsFormvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ProjectSettingsFormvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ProjectSettingsFormvue_type_script_lang_js_getPrototypeOf(e){return(ProjectSettingsFormvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ProjectSettingsFormvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ProjectSettingsFormvue_type_script_lang_js_setPrototypeOf(e,t){return(ProjectSettingsFormvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ProjectSettingsFormvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Br=(xr=Object(u.a)({components:{JoiForm:Q,StringsArrayInput:Gr,"color-picker":B.Sketch},props:{readonly:{type:Boolean,default:!1},settings:Object}}),Rr=Object(u.b)("settings",{immediate:!0}),xr((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Dr=function(e){function ProjectSettingsFrom(){var e,t,r;!function(e,t){if(!(e instanceof ProjectSettingsFrom))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=ProjectSettingsFormvue_type_script_lang_js_getPrototypeOf(ProjectSettingsFrom)).call.apply(e,[this].concat(o)))||"object"!==ProjectSettingsFormvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?ProjectSettingsFormvue_type_script_lang_js_assertThisInitialized(this):r,ProjectSettingsFormvue_type_script_lang_js_defineProperty(ProjectSettingsFormvue_type_script_lang_js_assertThisInitialized(t),"JOI_FORM_CUSTOM_TYPES",S.JOI_FORM_CUSTOM_TYPES),ProjectSettingsFormvue_type_script_lang_js_defineProperty(ProjectSettingsFormvue_type_script_lang_js_assertThisInitialized(t),"schema",Object.freeze(kr.a)),ProjectSettingsFormvue_type_script_lang_js_defineProperty(ProjectSettingsFormvue_type_script_lang_js_assertThisInitialized(t),"formItems",{}),ProjectSettingsFormvue_type_script_lang_js_defineProperty(ProjectSettingsFormvue_type_script_lang_js_assertThisInitialized(t),"colorPickers",{}),ProjectSettingsFormvue_type_script_lang_js_defineProperty(ProjectSettingsFormvue_type_script_lang_js_assertThisInitialized(t),"form",{}),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ProjectSettingsFormvue_type_script_lang_js_setPrototypeOf(e,t)}(ProjectSettingsFrom,s.a),t=ProjectSettingsFrom,(r=[{key:"settingsChanged",value:function(){this.form=Object.assign({},this.settings)}},{key:"onColorChange",value:function(e,t){this.form[e]=t.hex}},{key:"splitCamelSnakeAnyCase",value:function(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/[_-]/g," ")}},{key:"created",value:function(){var e=this,t=function(){var e={},t=U.default.object().keys(kr.a).describe().children;return Object.keys(t).forEach(function(r){var n,o,i,a=t[r];if(a.meta){var s=Object.assign.apply(Object,[{}].concat(function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(a.meta)));if(s.category&&("alternatives"!==a.type||s.type)){var c={label:s.label||r,description:a.description,meta:s};"required"===(null===(n=a.flags)||void 0===n?void 0:n.presence)&&(c.required=!0);var u=(null===(o=c.meta)||void 0===o?void 0:o.type)||a.type;if(u===S.JOI_FORM_CUSTOM_TYPES.SELECT&&(null===(i=a.valids)||void 0===i?void 0:i.length))c.options={valids:a.valids};else if(a.type===S.JOI_FORM_CUSTOM_TYPES.NUMBER){var l=0,p=1/0,f=c.meta.stepSize;a.rules.forEach(function(e){var t=e.name,r=e.arg;"min"===t?l=r:"max"===t?p=r:"positive"===t&&(l=1)}),c.options={min:l,max:p,step:f||1===p?.1:1}}c.type=u,e[s.category]?e[s.category][r]=c:e[s.category]=ProjectSettingsFormvue_type_script_lang_js_defineProperty({},"".concat(r),c)}}}),e}(),r={};Object.keys(t).forEach(function(n){Object.keys(t[n]).forEach(function(o){var i,a,s=t[n][o];"colorpicker"!==!(null==s?void 0:null===(i=s.meta)||void 0===i?void 0:i.type)&&(r[o]=null===(a=e.settings)||void 0===a?void 0:a[o])})}),this.colorPickers=r,this.formItems=t}}])&&ProjectSettingsFormvue_type_script_lang_js_defineProperties(t.prototype,r),ProjectSettingsFrom}()).prototype,"settingsChanged",[Rr],Object.getOwnPropertyDescriptor(Dr.prototype,"settingsChanged"),Dr.prototype),Lr=Dr))||Lr),Mr=(r("e58c09ccf6b95500742a"),Object(p.a)(Br,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"project-settings"},[r("joi-form",{attrs:{schema:e.schema,model:e.form,"label-position":"top"},on:{submit:function(t){return e.$emit("submit",e.form)}}},[r("el-tabs",{attrs:{type:"card"}},e._l(e.formItems,function(t,n){return r("el-tab-pane",{key:n,attrs:{label:e._f("capitalize")(n)}},e._l(t,function(t,n){return r("el-form-item",{key:n,attrs:{label:t.label,prop:n}},[r("div",{staticClass:"description"},[e._v("\n            "+e._s(e._f("capitalize")(t.description))+"\n          ")]),e._v(" "),t.type===e.JOI_FORM_CUSTOM_TYPES.SELECT?r("el-select",{attrs:{disabled:e.readonly,size:"small"},model:{value:e.form[n],callback:function(t){e.$set(e.form,n,t)},expression:"form[key]"}},e._l(t.options.valids,function(t,n){return r("el-option",{key:n,attrs:{label:e._f("capitalize")(e.splitCamelSnakeAnyCase(t)),value:t}})}),1):t.type===e.JOI_FORM_CUSTOM_TYPES.BOOLEAN?r("el-checkbox",{attrs:{disabled:e.readonly},model:{value:e.form[n],callback:function(t){e.$set(e.form,n,t)},expression:"form[key]"}},[e._v("\n            Enable\n          ")]):t.type===e.JOI_FORM_CUSTOM_TYPES.STRING?r("el-input",{attrs:{disabled:e.readonly,size:"small"},model:{value:e.form[n],callback:function(t){e.$set(e.form,n,t)},expression:"form[key]"}}):t.type===e.JOI_FORM_CUSTOM_TYPES.NUMBER?r("el-input-number",{attrs:{disabled:e.readonly,size:"small",min:t.options.min,max:t.options.max,step:t.options.step},model:{value:e.form[n],callback:function(t){e.$set(e.form,n,t)},expression:"form[key]"}}):t.type===e.JOI_FORM_CUSTOM_TYPES.STRINGS_ARRAY?r("strings-array-input",{staticStyle:{width:"250px"},attrs:{values:e.form[n],disabled:e.readonly},on:{"update:values":function(t){return e.$set(e.form,n,t)}}}):t.type===e.JOI_FORM_CUSTOM_TYPES.COLOR_PICKER?r("div",[r("el-popover",{attrs:{placement:"top",trigger:"click"}},[r("color-picker",{attrs:{value:e.colorPickers[n]},on:{input:function(t){return e.onColorChange(n,t)}}}),e._v(" "),r("div",{staticClass:"color-box",attrs:{slot:"reference"},slot:"reference"},[r("el-input",{staticClass:"color-input",attrs:{disabled:e.readonly},model:{value:e.form[n],callback:function(t){e.$set(e.form,n,t)},expression:"form[key]"}}),e._v(" "),r("div",{staticClass:"color-indicator",style:{"background-color":e.form[n]}})],1)],1)],1):e._e()],1)}),1)}),1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{disabled:e.readonly,"native-type":"submit",type:"primary"}},[e._v("\n        Save\n      ")])],1)],1)],1)},[],!1,null,null,null));Mr.options.__file="ProjectSettingsForm.vue";var zr,Nr,Ur,Hr,Vr,Yr=Mr.exports;function DefaultSettingsDialogvue_type_script_lang_js_typeof(e){return(DefaultSettingsDialogvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DefaultSettingsDialogvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function DefaultSettingsDialogvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function DefaultSettingsDialogvue_type_script_lang_js_getPrototypeOf(e){return(DefaultSettingsDialogvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DefaultSettingsDialogvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DefaultSettingsDialogvue_type_script_lang_js_setPrototypeOf(e,t){return(DefaultSettingsDialogvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DefaultSettingsDialogvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function DefaultSettingsDialogvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jr=(zr=Object(u.a)({props:["title","visible"],components:{ProjectSettingsForm:Yr},methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){DefaultSettingsDialogvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.b)("dataset",["updateDefaultSettings"]))}),Nr=Object(u.b)("dialogOpen"),Ur=Object(u.b)("visible"),zr((DefaultSettingsDialogvue_type_script_lang_js_applyDecoratedDescriptor((Vr=function(e){function DefaultSettingsDialog(){var e,t,r;!function(e,t){if(!(e instanceof DefaultSettingsDialog))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=DefaultSettingsDialogvue_type_script_lang_js_getPrototypeOf(DefaultSettingsDialog)).call.apply(e,[this].concat(o)))||"object"!==DefaultSettingsDialogvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?DefaultSettingsDialogvue_type_script_lang_js_assertThisInitialized(this):r,DefaultSettingsDialogvue_type_script_lang_js_defineProperty(DefaultSettingsDialogvue_type_script_lang_js_assertThisInitialized(t),"settings",{}),DefaultSettingsDialogvue_type_script_lang_js_defineProperty(DefaultSettingsDialogvue_type_script_lang_js_assertThisInitialized(t),"dialogOpen",!1),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DefaultSettingsDialogvue_type_script_lang_js_setPrototypeOf(e,t)}(DefaultSettingsDialog,s.a),t=DefaultSettingsDialog,(r=[{key:"dialogOpenChanged",value:function(){this.dialogOpen&&(this.settings=Object(N.cloneDeep)(this.defaultSettings))}},{key:"visibleChanged",value:function(){this.dialogOpen=this.visible}},{key:"close",value:function(){this.$emit("update:visible",!1)}},{key:"save",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.updateDefaultSettings(e);case 3:this.close(),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),this.$message.error("Something went wrong. Please try again later"),t.t0;case 10:case"end":return t.stop()}},_callee,this,[[0,6]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){DefaultSettingsDialogvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){DefaultSettingsDialogvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"defaultSettings",get:function(){return this.$store.state.dataset.settings}}])&&DefaultSettingsDialogvue_type_script_lang_js_defineProperties(t.prototype,r),DefaultSettingsDialog}()).prototype,"dialogOpenChanged",[Nr],Object.getOwnPropertyDescriptor(Vr.prototype,"dialogOpenChanged"),Vr.prototype),DefaultSettingsDialogvue_type_script_lang_js_applyDecoratedDescriptor(Vr.prototype,"visibleChanged",[Ur],Object.getOwnPropertyDescriptor(Vr.prototype,"visibleChanged"),Vr.prototype),Hr=Vr))||Hr),Wr=(r("c51b6c3b609d7368f325"),Object(p.a)(Jr,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"project-default-settings",attrs:{title:e.title,visible:e.dialogOpen,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogOpen=t}}},[r("project-settings-form",{attrs:{settings:e.settings},on:{submit:e.save}})],1)},[],!1,null,"73abdc27",null));Wr.options.__file="DefaultSettingsDialog.vue";var qr,Zr,$r,Qr,Kr=Wr.exports;function Headbarvue_type_script_lang_js_typeof(e){return(Headbarvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Headbarvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Headbarvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Headbarvue_type_script_lang_js_getPrototypeOf(e){return(Headbarvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Headbarvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Headbarvue_type_script_lang_js_setPrototypeOf(e,t){return(Headbarvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Headbarvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Headbarvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function Headbarvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function blobFromCanvas(e){return new Promise(function(t,r){try{Object(w.f)(e).data.toBlob(function(e){t(e)})}catch(e){r(e)}})}var Xr=(qr=Object(u.a)({components:{ImagesNavigator:br,HotkeysDialog:Cr,NewFeaturesDialog:k,DefaultSettingsDialog:Kr},computed:Headbarvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["isImageEmpty","currentImage"]),Object(y.c)("dataset/figures",["currentFigure"]),Object(y.c)("dataset/classes",["currentClass","orderedClasses"]),Object(y.c)("tools",["currentTool","isCreateMode","isEditMode"]),Object(y.d)("dataset/figures",{historyVersion:"currentStateVersion",history:"history"}),Object(y.d)("scene",{currentCanvas:"canvas"}),Object(y.d)("dataset",["projectId","id"])),methods:Headbarvue_type_script_lang_js_objectSpread({},Object(y.b)("settings",["switchTheme","setHotkeys"]),Object(y.b)("app",["toggleJobInfo"]))}),Zr=Object(u.b)("hotkeysPopupOpen"),qr((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Qr=function(e){function Headbar(){var e,t,r;!function(e,t){if(!(e instanceof Headbar))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=Headbarvue_type_script_lang_js_getPrototypeOf(Headbar)).call.apply(e,[this].concat(o)))||"object"!==Headbarvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?Headbarvue_type_script_lang_js_assertThisInitialized(this):r,Headbarvue_type_script_lang_js_defineProperty(Headbarvue_type_script_lang_js_assertThisInitialized(t),"isFullscreen",!1),Headbarvue_type_script_lang_js_defineProperty(Headbarvue_type_script_lang_js_assertThisInitialized(t),"screenshotUploading",!1),Headbarvue_type_script_lang_js_defineProperty(Headbarvue_type_script_lang_js_assertThisInitialized(t),"hotkeysPopupOpen",!1),Headbarvue_type_script_lang_js_defineProperty(Headbarvue_type_script_lang_js_assertThisInitialized(t),"defaultSettingsPopupOpen",!1),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Headbarvue_type_script_lang_js_setPrototypeOf(e,t)}(Headbar,s.a),t=Headbar,(r=[{key:"hotkeysPopupOpenChanged",value:function(e){this.$hotkeys.enabled=!e}},{key:"onFullscreenChange",value:function(){this.isFullscreen=T.a.isFullscreen}},{key:"fullscreen",value:function(){T.a.enabled&&T.a.toggle()}},{key:"toggleSettingsDialog",value:function(){this.disableSettingsBtn||(this.defaultSettingsPopupOpen=!this.defaultSettingsPopupOpen)}},{key:"toggleHotkeysDialog",value:function(){this.$acl({action:S.ACL_ACTIONS.FIGURES.UPDATE,teamId:this.$team,workspaceId:this.$workspace,projectId:this.dataset.projectId,datasetId:this.dataset.id})&&(this.hotkeysPopupOpen=!this.hotkeysPopupOpen)}},{key:"getSceneScreenshot",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){var e,t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.disableScreenshotBtn){o.next=2;break}return o.abrupt("return");case 2:return this.screenshotUploading=!0,o.prev=3,o.next=6,blobFromCanvas(this.currentCanvas);case 6:return e=o.sent,(t=new FormData).append("image",e,this.currentImage.title),o.next=11,Object(g.e)(t);case 11:r=o.sent,n=r.url,window.open("".concat(window.location.origin,"/").concat(n),"_blank").focus(),o.next=20;break;case 17:throw o.prev=17,o.t0=o.catch(3),o.t0;case 20:return o.prev=20,this.screenshotUploading=!1,o.finish(20);case 23:case"end":return o.stop()}},_callee,this,[[3,17,20,23]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){Headbarvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){Headbarvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"mounted",value:function(){T.a.enabled&&T.a.onchange(this.onFullscreenChange),"dark"===this.settings.theme&&this.switchTheme()}},{key:"beforeDestroy",value:function(){T.a.enabled&&document.removeEventListener(T.a.raw.fullscreenchange,this.onFullscreenChange,!1)}},{key:"isEnterprise",get:function(){return j.h}},{key:"helpLink",get:function(){return"".concat(this.$env.DOCS_URL,"/en/annotation/")}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"classes",get:function(){return this.dataset.classes}},{key:"user",get:function(){return this.$store.state.user}},{key:"settings",get:function(){return this.$store.state.settings}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}},{key:"job",get:function(){return this.$store.state.app.job}},{key:"disableSettingsBtn",get:function(){return!this.$acl({action:S.ACL_ACTIONS.IMAGES.REMOVE,teamId:this.$team,workspaceId:this.$workspace,projectId:this.dataset.projectId,datasetId:this.dataset.id})}},{key:"disableScreenshotBtn",get:function(){return!this.currentCanvas||!this.currentImage||!this.$acl({action:S.ACL_ACTIONS.IMAGES.REMOVE,teamId:this.$team,workspaceId:this.$workspace,projectId:this.dataset.projectId,datasetId:this.dataset.id})}},{key:"generalOptionsComponent",get:function(){return this.isCreateMode?Ce:this.isEditMode?je:null}},{key:"optionsComponent",get:function(){return this.currentTool?n[this.currentTool.id]:null}}])&&Headbarvue_type_script_lang_js_defineProperties(t.prototype,r),Headbar}()).prototype,"hotkeysPopupOpenChanged",[Zr],Object.getOwnPropertyDescriptor(Qr.prototype,"hotkeysPopupOpenChanged"),Qr.prototype),$r=Qr))||$r),en=(r("b1350e9811574a6393e6"),Object(p.a)(Xr,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"headbar"},[r("div",{staticClass:"left-group"},[e._m(0),e._v(" "),e.$acl({action:e.ACL_ACTIONS.FIGURES.UPDATE,teamId:e.$team,workspaceId:e.$workspace,projectId:e.projectId,datasetId:e.id})?r("div",{staticClass:"tool-options"},[r(e.generalOptionsComponent,{tag:"component",staticClass:"tool-options"}),e._v(" "),r(e.optionsComponent,{tag:"component",staticClass:"tool-options"})],1):e._e()]),e._v(" "),r("div",{staticClass:"navigator-wrapper"},[r("images-navigator")],1),e._v(" "),r("div",{staticClass:"right-group"},[r("div",{staticClass:"btn-group"},[e.job&&e.job.readme?r("a",{staticClass:"btn",on:{click:e.toggleJobInfo}},[r("i",{staticClass:"zmdi zmdi-info"}),e._v(" "),r("div",[e._v("Job info")])]):e._e(),e._v(" "),e.isEnterprise?e._e():r("a",{staticClass:"btn",attrs:{target:"_blank",href:"/projects?workforce"}},[r("i",{staticClass:"zmdi zmdi-accounts"}),e._v(" "),r("div",[e._v("Workforce")]),e._v(" "),r("b",{staticClass:"new"},[e._v("new")])]),e._v(" "),r("a",{staticClass:"btn",attrs:{disabled:e.disableSettingsBtn},on:{click:e.toggleSettingsDialog}},[r("i",{staticClass:"zmdi zmdi-settings"}),e._v(" "),r("div",[e._v("Settings")])]),e._v(" "),r("a",{directives:[{name:"loading",rawName:"v-loading",value:e.screenshotUploading,expression:"screenshotUploading"}],staticClass:"btn",attrs:{disabled:e.disableScreenshotBtn},on:{click:e.getSceneScreenshot}},[r("i",{staticClass:"zmdi zmdi-camera"}),e._v(" "),r("div",[e._v("Screenshot")])]),e._v(" "),r("a",{staticClass:"btn"},[r("el-tooltip",[r("span",[r("i",{staticClass:"zmdi",class:{"zmdi-fullscreen":!e.isFullscreen,"zmdi-fullscreen-exit":e.isFullscreen}}),e._v(" "),r("div",[e._v(e._s(e.isFullscreen?"Exit fullscreen":"Fullscreen"))])]),e._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n            Please, press "),r("i",{staticClass:"icon-keyboard",staticStyle:{padding:"2px 3px 0 8px"}}),e._v(" F11\n          ")])])],1),e._v(" "),r("a",{staticClass:"btn",attrs:{disabled:!e.$acl({action:e.ACL_ACTIONS.FIGURES.UPDATE,projectId:e.dataset.projectId,datasetId:e.dataset.id})},on:{click:e.toggleHotkeysDialog}},[r("i",{staticClass:"zmdi zmdi-keyboard"}),e._v(" "),r("div",[e._v("Hotkeys")])])]),e._v(" "),r("div",{staticClass:"divider"}),e._v(" "),r("div",{staticClass:"btn-group"},[r("a",{staticClass:"btn",attrs:{href:"/logout"}},[r("i",{staticClass:"icon-log-out"}),e._v(" "),r("div",[e._v(e._s(e.user.login))])])])]),e._v(" "),r("el-dialog",{attrs:{title:"Hotkeys",visible:e.hotkeysPopupOpen},on:{"update:visible":function(t){e.hotkeysPopupOpen=t}}},[r("hotkeys-dialog",{attrs:{hotkeys:e.settings.hotkeys,clean:!e.hotkeysPopupOpen},on:{"update:hotkeys":e.setHotkeys}})],1),e._v(" "),r("default-settings-dialog",{attrs:{title:"Default settings",visible:e.defaultSettingsPopupOpen},on:{"update:visible":function(t){e.defaultSettingsPopupOpen=t}}})],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"logo-btn",attrs:{href:"/projects"}},[t("i",{staticClass:"icon-home"})])}],!1,null,"0f5437aa",null));en.options.__file="Headbar.vue";var tn,rn,nn,on,an,sn=en.exports;function UpgradeDialogvue_type_script_lang_js_typeof(e){return(UpgradeDialogvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UpgradeDialogvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function UpgradeDialogvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function UpgradeDialogvue_type_script_lang_js_getPrototypeOf(e){return(UpgradeDialogvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UpgradeDialogvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UpgradeDialogvue_type_script_lang_js_setPrototypeOf(e,t){return(UpgradeDialogvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function UpgradeDialogvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function UpgradeDialogvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cn=(tn=Object(u.a)({computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){UpgradeDialogvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.d)("settings",["smartToolRestrictions"]),Object(y.c)("settings",["isSmartToolAvailable"]))}),rn=Object(u.b)("isSmartToolAvailable"),nn=Object(u.b)("smartToolRestrictions.count"),tn((UpgradeDialogvue_type_script_lang_js_applyDecoratedDescriptor((an=function(e){function UpgradeDialog(){var e,t,r;!function(e,t){if(!(e instanceof UpgradeDialog))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=UpgradeDialogvue_type_script_lang_js_getPrototypeOf(UpgradeDialog)).call.apply(e,[this].concat(o)))||"object"!==UpgradeDialogvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?UpgradeDialogvue_type_script_lang_js_assertThisInitialized(this):r,UpgradeDialogvue_type_script_lang_js_defineProperty(UpgradeDialogvue_type_script_lang_js_assertThisInitialized(t),"dialogOpen",!1),UpgradeDialogvue_type_script_lang_js_defineProperty(UpgradeDialogvue_type_script_lang_js_assertThisInitialized(t),"reason",null),UpgradeDialogvue_type_script_lang_js_defineProperty(UpgradeDialogvue_type_script_lang_js_assertThisInitialized(t),"loading",!1),UpgradeDialogvue_type_script_lang_js_defineProperty(UpgradeDialogvue_type_script_lang_js_assertThisInitialized(t),"form",{email:t.user.email,name:t.user.name||t.user.login,source:null,message:""}),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UpgradeDialogvue_type_script_lang_js_setPrototypeOf(e,t)}(UpgradeDialog,s.a),t=UpgradeDialog,(r=[{key:"availableChanged",value:function(e,t){0!==this.smartToolRestrictions.max&&!0===t&&!1===e&&(this.reason="smart",this.dialogOpen=!0)}},{key:"restrictionsChanged",value:function(e,t){null!==this.smartToolRestrictions.max&&e-t==1&&this.isSmartToolAvailable&&tr.a.info("You have ".concat(this.smartToolRestrictions.max-e," smart objects available for today"))}},{key:"upgrade",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,this.form.source=this.reason,e.next=4,g.a.post("/contact",this.form);case 4:this.loading=!1,this.closeDialog(),tr.a.success({message:"Thank you for your interest! We will contact you soon",showClose:!0,duration:0});case 7:case"end":return e.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){UpgradeDialogvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){UpgradeDialogvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"closeDialog",value:function(){this.form.message="",this.reason=null,this.dialogOpen=!1}},{key:"created",value:function(){var e=this;h.a.on("upgrade",function(){e.reason="history",e.dialogOpen=!0})}},{key:"user",get:function(){return this.$store.state.user}}])&&UpgradeDialogvue_type_script_lang_js_defineProperties(t.prototype,r),UpgradeDialog}()).prototype,"availableChanged",[rn],Object.getOwnPropertyDescriptor(an.prototype,"availableChanged"),an.prototype),UpgradeDialogvue_type_script_lang_js_applyDecoratedDescriptor(an.prototype,"restrictionsChanged",[nn],Object.getOwnPropertyDescriptor(an.prototype,"restrictionsChanged"),an.prototype),on=an))||on),un=(r("bf952b7524de911c1302"),Object(p.a)(cn,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"upgrade-dialog",attrs:{title:"Upgrade Supervisely",visible:e.dialogOpen},on:{"update:visible":function(t){e.dialogOpen=t}}},[r("p",{directives:[{name:"show",rawName:"v-show",value:"smart"===e.reason,expression:"reason === 'smart'"}]},[e._v("\n    You have reached your day limit for smart annotattion objects.\n  ")]),e._v(" "),r("p",[e._v("Free version of Supervisely has limits."),r("br"),e._v("Upgrade to a full version and get extended features:")]),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("ul",[r("li",[e._v("More space for your images")]),e._v(" "),r("li",[e._v("Unlimited smart objects")]),e._v(" "),r("li",[e._v("Revision history")]),e._v(" "),r("li",[e._v("User-activity monitor")])])]),e._v(" "),r("el-col",{attrs:{span:12}},[r("ul",[r("li",[e._v("Multi-user accounts")]),e._v(" "),r("li",[e._v("Shared access")]),e._v(" "),r("li",[e._v("Data backups")]),e._v(" "),r("li",[e._v("Priority support")])])])],1),e._v(" "),r("p",[e._v("... and more!")]),e._v(" "),r("b",[e._v("Send us request")]),e._v(" "),r("el-input",{attrs:{type:"textarea",placeholder:"Leave your suggestions and wishes here",rows:3,disabled:e.loading},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}}),e._v(" "),r("center",[r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.upgrade}},[e._v("\n      Upgrade\n    ")])],1)],1)},[],!1,null,null,null));un.options.__file="UpgradeDialog.vue";var ln,pn,fn,dn,_n,yn=un.exports;function Toolbarvue_type_script_lang_js_typeof(e){return(Toolbarvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Toolbarvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Toolbarvue_type_script_lang_js_getPrototypeOf(e){return(Toolbarvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Toolbarvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Toolbarvue_type_script_lang_js_setPrototypeOf(e,t){return(Toolbarvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Toolbarvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function Toolbarvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Toolbarvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function Toolbarvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gn=(ln=Object(u.a)({components:{AddClassDialog:te,UpgradeDialog:yn,Hotkeys:Pr},computed:Toolbarvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/figures",["currentFigure"]),Object(y.c)("tools",["currentTool","isCreateTool","isEditTool","isEditMode","isToolDisabled"]),Object(y.c)("dataset/classes",["currentClass","orderedClasses","toolClasses"]),Object(y.d)("settings",["smartToolRestrictions"]),Object(y.d)("dataset",["projectId","id"])),methods:Toolbarvue_type_script_lang_js_objectSpread({},Object(y.b)("settings",["switchTheme"]),Object(y.b)("tools",["setTool","setNewMode"]))}),pn=Object(u.b)("currentTool"),fn=Object(u.b)("dialogOpen"),ln((Toolbarvue_type_script_lang_js_applyDecoratedDescriptor((_n=function(e){function Toolbar(){var e,t,r;!function(e,t){if(!(e instanceof Toolbar))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=Toolbarvue_type_script_lang_js_getPrototypeOf(Toolbar)).call.apply(e,[this].concat(o)))||"object"!==Toolbarvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?Toolbarvue_type_script_lang_js_assertThisInitialized(this):r,Toolbarvue_type_script_lang_js_defineProperty(Toolbarvue_type_script_lang_js_assertThisInitialized(t),"lastTool",null),Toolbarvue_type_script_lang_js_defineProperty(Toolbarvue_type_script_lang_js_assertThisInitialized(t),"dialogOpen",!1),t}var t,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Toolbarvue_type_script_lang_js_setPrototypeOf(e,t)}(Toolbar,s.a),t=Toolbar,(n=[{key:"isActive",value:function(e){return this.currentTool&&e===this.currentTool.id}},{key:"toolTitle",value:function(e){return e.disabled&&e.titleDisabled?e.titleDisabled:e.control?e.title:"Add ".concat(e.title.toLowerCase())}},{key:"currentToolChanged",value:function(e,t){this.currentTool&&t&&this.isCreateTool(this.currentTool.id)&&(this.toolClasses(this.currentTool.id).length||(this.lastTool=t.id,this.dialogOpen=!0))}},{key:"dialogOpenChanged",value:function(){this.dialogOpen||null==this.lastTool||(this.toolClasses(this.currentTool.id).length||this.setTool({toolId:this.lastTool}),this.lastTool=null)}},{key:"onToolClick",value:function(e){e.disabled||(this.currentTool&&this.currentTool.id===e.id&&this.currentTool.id!==this.tools.all.tagFigures.id?this.isEditMode&&this.setNewMode():this.setTool({toolId:e.id}))}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"classes",get:function(){return this.dataset.classes}},{key:"tools",get:function(){return this.$store.state.tools}},{key:"settings",get:function(){return this.$store.state.settings}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}},{key:"toolsItems",get:function(){var e=this,t=this,n=this.dataset,o=n.groupId,i=n.workspaceId,a=n.projectId,s=n.id,c=!this.$acl({action:S.ACL_ACTIONS.FIGURES.UPDATE,teamId:o,workspaceId:i,projectId:a,datasetId:s});return[{id:this.tools.all.moveScene.id,title:"Move scene",icon:"zmdi zmdi-arrows",svg:r("84137e7091526f4ae896"),description:'or <i class="icon-mouse"></i> right button',control:!0},{id:this.tools.all.select.id,title:"Select object to edit",icon:"zmdi zmdi-edit",svg:r("7de3d0dd9ce0dba99c1a"),control:!0,isDisabled:c},{id:this.tools.all.moveFigures.id,title:"Drag object around",icon:"zmdi zmdi-arrows",control:!0,isDisabled:c},{id:this.tools.all.tagFigures.id,title:"Tag objects",icon:"icon-price-tag",control:!0,isDisabled:c},{id:this.tools.all.point.id,title:"Point",icon:"zmdi zmdi-edit",svg:r("fae7f9865838550df17e"),isDisabled:c},{id:this.tools.all.rectangle.id,title:"Rectangle",icon:"zmdi zmdi-brush",svg:r("96f8362dc09d49febb0f"),isDisabled:c},{id:this.tools.all.polyline.id,title:"Polyline",icon:"zmdi zmdi-edit",svg:r("4ea367e5137f9cc516c1"),isDisabled:c},{id:this.tools.all.polygon.id,title:"Polygon",icon:"zmdi zmdi-edit",svg:r("c786aad2c16ab18193dc"),isDisabled:c},{id:this.tools.all.bitmap.id,title:"Bitmap",icon:"icon-round-brush",isDisabled:c},{id:this.tools.all.smart.id,title:"Smart",icon:"zmdi zmdi-picture-in-picture",svg:r("b96a318fd1aa3a7bbfdf"),isDisabled:c,get titleDisabled(){var e="You have reached day limit for smart objects. Upgrade Supervisely";return 0===t.smartToolRestrictions.max&&(e="Smart annotation is disabled"),e}},{id:this.tools.all.graph.id,title:"Keypoints",icon:"zmdi zmdi-edit",svg:r("292306329c1511c97755"),isDisabled:c}].map(function(r){return Toolbarvue_type_script_lang_js_objectSpread({},r,{hotkeys:e.settings.hotkeys.tools[r.id]||[],get disabled(){return r.isDisabled||t.isToolDisabled(r.id)||(t.isCreateTool(r.id)||t.isEditTool(r.id))&&!t.hasPermissionsToCreateClass&&!t.toolClasses(r.id).length}})})}},{key:"toolsItemsMap",get:function(){return this.toolsItems.reduce(function(e,t){return e.set(t.id,t),e},new Map)}},{key:"hasPermissionsToCreateClass",get:function(){if(!this.dataset)return!1;var e=this.dataset,t=e.groupId,r=e.workspaceId,n=e.projectId,o=e.id;return this.$acl({action:S.ACL_ACTIONS.IMAGES.REMOVE,teamId:t,workspaceId:r,projectId:n,datasetId:o})}},{key:"addClassTitle",get:function(){if(!this.currentTool)return"";var e=this.toolsItemsMap.get(this.currentTool.id);return e?"⚠️ No class found for ".concat(e.title,". Please create one"):""}}])&&Toolbarvue_type_script_lang_js_defineProperties(t.prototype,n),Toolbar}()).prototype,"currentToolChanged",[pn],Object.getOwnPropertyDescriptor(_n.prototype,"currentToolChanged"),_n.prototype),Toolbarvue_type_script_lang_js_applyDecoratedDescriptor(_n.prototype,"dialogOpenChanged",[fn],Object.getOwnPropertyDescriptor(_n.prototype,"dialogOpenChanged"),_n.prototype),dn=_n))||dn),hn=(r("14f7411f8a980aee5243"),Object(p.a)(gn,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"toolbar"},[r("div",{staticClass:"btn-group"},e._l(e.toolsItems,function(t){return r("el-tooltip",{key:t.id,staticClass:"btn",class:{active:e.isActive(t.id)},attrs:{effect:"dark","open-delay":300,placement:"right"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("span",[e._v(e._s(e.toolTitle(t)))]),e._v(" "),t.hotkeys.length?[r("i",{staticClass:"icon-keyboard",staticStyle:{padding:"2px 3px 0 8px"}}),e._v(" "+e._s(t.hotkeys[0][0])+"\n        ")]:e._e(),e._v(" "),t.description?[r("span",{domProps:{innerHTML:e._s(t.description)}})]:e._e()],2),e._v(" "),r("button",{class:{disabled:t.disabled},on:{click:function(r){return e.onToolClick(t)}}},[t.control?e._e():[e.isEditMode&&e.isActive(t.id)?r("span",{staticClass:"edit-icon"},[e._v("*")]):r("span",{staticClass:"add-icon"},[e._v("+")])],e._v(" "),t.svg?r("span",{staticClass:"svg-icon",domProps:{innerHTML:e._s(t.svg)}}):r("i",{class:t.icon})],2)])}),1),e._v(" "),r("add-class-dialog",{attrs:{title:e.addClassTitle,"lock-shape":!0,visible:e.dialogOpen},on:{"update:visible":function(t){e.dialogOpen=t}}}),e._v(" "),r("upgrade-dialog")],1)},[],!1,null,null,null));hn.options.__file="Toolbar.vue";var bn,vn,mn,On,Pn=hn.exports,Tn=r("4c2d184a08edf4f91442"),Sn=r.n(Tn);function Splitvue_type_script_lang_js_typeof(e){return(Splitvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Splitvue_type_script_lang_js_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Splitvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Splitvue_type_script_lang_js_getPrototypeOf(e){return(Splitvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Splitvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Splitvue_type_script_lang_js_setPrototypeOf(e,t){return(Splitvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jn=(bn=Object(u.a)({props:{direction:{type:String,default:"vertical"},gutterSize:{type:Number,default:5},sizes:Array,minSize:[Number,Array],snapOffset:Number}}),vn=Object(u.b)("sizes"),bn((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((On=function(e){function Split(){var e,t,r,n,o;!function(e,t){if(!(e instanceof Split))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return this,t=!(r=(e=Splitvue_type_script_lang_js_getPrototypeOf(Split)).call.apply(e,[this].concat(a)))||"object"!==Splitvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?Splitvue_type_script_lang_js_assertThisInitialized(this):r,null,(o="splitter")in(n=Splitvue_type_script_lang_js_assertThisInitialized(t))?Object.defineProperty(n,o,{value:null,enumerable:!0,configurable:!0,writable:!0}):n[o]=null,t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Splitvue_type_script_lang_js_setPrototypeOf(e,t)}(Split,s.a),t=Split,(r=[{key:"sizesUpdated",value:function(e){var t=this;this.$nextTick(function(){var r;t.splitter&&t.splitter.destroy(),t.splitter=Sn()(Splitvue_type_script_lang_js_toConsumableArray(t.$el.children),{sizes:e,minSize:t.minSize||0,direction:t.direction||"vertical",gutterSize:t.gutterSize||5,snapOffset:null!==(r=t.snapOffset)&&void 0!==r?r:30})})}},{key:"collapse",value:function(e){this.splitter.collapse(e)}},{key:"mounted",value:function(){var e;this.splitter=Sn()(Splitvue_type_script_lang_js_toConsumableArray(this.$el.children),{sizes:this.sizes,minSize:this.minSize||0,direction:this.direction||"vertical",gutterSize:this.gutterSize||5,snapOffset:null!==(e=this.snapOffset)&&void 0!==e?e:30})}},{key:"beforeDestroy",value:function(){this.splitter.destroy()}}])&&Splitvue_type_script_lang_js_defineProperties(t.prototype,r),Split}()).prototype,"sizesUpdated",[vn],Object.getOwnPropertyDescriptor(On.prototype,"sizesUpdated"),On.prototype),mn=On))||mn),wn=(r("893f8805d089d6a8fe5a"),Object(p.a)(jn,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"split"},[this._t("default")],2)},[],!1,null,null,null));wn.options.__file="Split.vue";var In,En=wn.exports,Cn=r("f0fc4174c28bc05a69fc"),kn=(r("a61732f157539e8a726f"),r("41b11af1442716978a08")),An=(r("a86c41d10c7ccf1c6873"),r("4ec995cd966d933da1db"),r("835b52def12443a7fd28")),Fn=r.n(An);function FilterPopupvue_type_script_lang_js_typeof(e){return(FilterPopupvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FilterPopupvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FilterPopupvue_type_script_lang_js_getPrototypeOf(e){return(FilterPopupvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FilterPopupvue_type_script_lang_js_setPrototypeOf(e,t){return(FilterPopupvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xn=Object(u.a)({props:{title:{type:String,default:""},hasSettings:{type:Boolean,default:!1},filters:{type:Array,default:function(){return[]}},iconClass:{type:String,default:"icon-funnel"}},components:{ElBadge:Fn.a}})(In=function(e){function FilterPopup(){return function(e,t){if(!(e instanceof FilterPopup))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==FilterPopupvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,FilterPopupvue_type_script_lang_js_getPrototypeOf(FilterPopup).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FilterPopupvue_type_script_lang_js_setPrototypeOf(e,t)}(FilterPopup,s.a),t=FilterPopup,(r=[{key:"toggle",value:function(){this.$refs.popup.doToggle()}}])&&FilterPopupvue_type_script_lang_js_defineProperties(t.prototype,r),FilterPopup}())||In,Rn=(r("072b73ca9d1323289a9c"),Object(p.a)(xn,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-popover",{ref:"popup",attrs:{"popper-class":"filter-popup",placement:"right",width:"450",trigger:"manual"}},[r("a",{staticClass:"btn-panel-filter",class:{active:e.hasSettings},attrs:{slot:"reference"},on:{click:e.toggle},slot:"reference"},[e.filters&&e.filters.length?[r("el-badge",{staticClass:"badge-item",attrs:{value:e.filters.length}},[r("i",{class:[e.iconClass]})])]:r("i",{class:[e.iconClass]})],2),e._v(" "),r("div",{staticClass:"filter-popup-header"},[e._t("title",[r("h3",[e._v(e._s(e.title))])]),e._v(" "),r("a",{staticClass:"close",on:{click:e.toggle}},[r("i",{staticClass:"zmdi zmdi-close"})])],2),e._v(" "),e._t("default")],2)},[],!1,null,null,null));Rn.options.__file="FilterPopup.vue";var Ln,Dn,Gn,Bn,Mn,zn=Rn.exports;function ImagesFiltervue_type_script_lang_js_typeof(e){return(ImagesFiltervue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ImagesFiltervue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ImagesFiltervue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ImagesFiltervue_type_script_lang_js_getPrototypeOf(e){return(ImagesFiltervue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ImagesFiltervue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ImagesFiltervue_type_script_lang_js_setPrototypeOf(e,t){return(ImagesFiltervue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ImagesFiltervue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ImagesFiltervue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ImagesFiltervue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function resetFilter(e){return ImagesFiltervue_type_script_lang_js_objectSpread({objectsRange:[1,9999],range:[0,9999],value:"",tagId:null,tag:null,showObjectsRange:!1,showValues:!1},e)}var Nn=/\[\[\s*(\d+-?\d*)\s*]]/,Un=(ImagesFiltervue_type_script_lang_js_defineProperty(Ln={},S.CLICKER_FILTER_TYPES.IMAGES_FILENAME,function(e){if(!e.value)return null;var t={value:e.value},r=Nn.exec(e.value);if(r){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(r[1].split("-").map(function(e){return parseInt(e,10)}),2),o=n[0],i=n[1];Number.isNaN(o)||(t.from=o),Number.isNaN(i)||(t.to=i),t.value=t.value.replace(r[0],"")}return t}),ImagesFiltervue_type_script_lang_js_defineProperty(Ln,S.CLICKER_FILTER_TYPES.IMAGES_TAG,function(e,t){var r=e.value;return e.tagId&&!r&&e.tag.settings.type===S.PROJECT_TAGS_VALUE_TYPE.ANY_NUMBER&&e.range&&(r={from:e.range[0],to:e.range[1]}),{tagId:e.tagId,include:t,value:r}}),ImagesFiltervue_type_script_lang_js_defineProperty(Ln,S.CLICKER_FILTER_TYPES.OBJECTS_TAG,function(e,t){var r=e.value,n={from:e.objectsRange[0],to:e.objectsRange[1]};return e.tagId&&!r&&e.tag.settings.type===S.PROJECT_TAGS_VALUE_TYPE.ANY_NUMBER&&e.range&&(r={from:e.range[0],to:e.range[1]}),ImagesFiltervue_type_script_lang_js_objectSpread({},n,{tagId:e.tagId,include:t,value:r})}),ImagesFiltervue_type_script_lang_js_defineProperty(Ln,S.CLICKER_FILTER_TYPES.OBJECTS_CLASS,function(e){var t=e.value;return ImagesFiltervue_type_script_lang_js_objectSpread({},{from:e.objectsRange[0],to:e.objectsRange[1]},{classId:t})}),ImagesFiltervue_type_script_lang_js_defineProperty(Ln,S.CLICKER_FILTER_TYPES.OBJECTS_ANNOTATOR,function(e){var t=e.value;return t?ImagesFiltervue_type_script_lang_js_objectSpread({},{from:e.objectsRange[0],to:e.objectsRange[1]},{userId:t}):null}),Ln),Hn=(Dn=Object(u.a)({components:{FilterPopup:zn},props:{filter:{type:Array,default:function(){return[]}},hasSettings:{type:Boolean,default:!1},tags:{type:Array,default:function(){return[]}},classes:{type:Array,default:function(){return[]}},members:{type:Array,default:function(){return[]}},currentUser:{type:Object,default:function(){return{}}},iconClass:{type:String,default:"icon-funnel"}}}),Gn=Object(u.b)("filters",{deep:!0}),Dn((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Mn=function(e){function ImagesFilter(){var e,t,r;!function(e,t){if(!(e instanceof ImagesFilter))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=ImagesFiltervue_type_script_lang_js_getPrototypeOf(ImagesFilter)).call.apply(e,[this].concat(o)))||"object"!==ImagesFiltervue_type_script_lang_js_typeof(r)&&"function"!=typeof r?ImagesFiltervue_type_script_lang_js_assertThisInitialized(this):r,ImagesFiltervue_type_script_lang_js_defineProperty(ImagesFiltervue_type_script_lang_js_assertThisInitialized(t),"filters",[]),ImagesFiltervue_type_script_lang_js_defineProperty(ImagesFiltervue_type_script_lang_js_assertThisInitialized(t),"currState",[]),ImagesFiltervue_type_script_lang_js_defineProperty(ImagesFiltervue_type_script_lang_js_assertThisInitialized(t),"prevState",[]),ImagesFiltervue_type_script_lang_js_defineProperty(ImagesFiltervue_type_script_lang_js_assertThisInitialized(t),"PREDEFINED_FILTERS",[{label:"All images",filters:[]},{label:"With one object or more",filters:[resetFilter({type:"objectsOfClass"})]},{label:"Without any objects",filters:[resetFilter({type:"objectsOfClass",showObjectsRange:!0,objectsRange:[0,0]})]}]),ImagesFiltervue_type_script_lang_js_defineProperty(ImagesFiltervue_type_script_lang_js_assertThisInitialized(t),"FILTERS",{imagesFilename:{label:"By Filename",input:"text",icon:"icon-flash",map:function(e){var t=S.CLICKER_FILTER_TYPES.IMAGES_FILENAME;return{type:t,data:Un[t](e)}}},imagesWithTag:{label:"With tag",input:"tag",source:"image",divided:!0,icon:"icon-price-tag",map:function(e){var t=S.CLICKER_FILTER_TYPES.IMAGES_TAG;return{type:t,data:Un[t](e,!0)}}},imagesWithoutTag:{label:"Without tag",input:"tag",source:"image",icon:"icon-price-tag",map:function(e){var t=S.CLICKER_FILTER_TYPES.IMAGES_TAG;return{type:t,data:Un[t](e,!1)}}},objectsWithTag:{label:"Objects with tag",input:"tag",source:"objects",divided:!0,icon:"icon-price-tag",map:function(e){var t=S.CLICKER_FILTER_TYPES.OBJECTS_TAG;return{type:t,data:Un[t](e,!0)}}},objectsWithoutTag:{label:"Objects without tag",input:"tag",source:"objects",icon:"icon-price-tag",map:function(e){var t=S.CLICKER_FILTER_TYPES.OBJECTS_TAG;return{type:t,data:Un[t](e,!1)}}},objectsOfClass:{label:"Objects of class",input:"class",source:"objects",divided:!0,icon:"icon-round-brush",map:function(e){var t=S.CLICKER_FILTER_TYPES.OBJECTS_CLASS;return{type:t,data:Un[t](e)}}},objectsByAnnotator:{label:"Objects by annotator",input:"user",source:"objects",divided:!0,icon:"icon-team",map:function(e){var t=S.CLICKER_FILTER_TYPES.OBJECTS_ANNOTATOR;return{type:t,data:Un[t](e)}}}}),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ImagesFiltervue_type_script_lang_js_setPrototypeOf(e,t)}(ImagesFilter,s.a),t=ImagesFilter,(r=[{key:"filterChanged",value:function(){var e=this,t=this.filters.map(function(t){var r=e.tagsById[t.tagId],n=e.FILTERS[t.type].map(ImagesFiltervue_type_script_lang_js_objectSpread({},t,{tag:r}));return n.data=Object(N.mapValues)(n.data,function(e){return Array.isArray(e)&&!e.length?null:""===e?null:e}),n}).filter(function(e){return e});this.currState=Object(N.cloneDeep)(t)}},{key:"openFilterAdditional",value:function(e){e.showObjectsRange=!0,e.showValues=!0}},{key:"filterTypeChanged",value:function(e){var t=e.type,r=e.idx,n={type:t},o=this.FILTERS[t];(null==o?void 0:o.source)&&(n.source=o.source),Object.assign(this.filters[r],resetFilter(n))}},{key:"tagSelected",value:function(e){var t=this.tagsById[e.tagId];Object.assign(e,resetFilter({tag:t,tagId:e.tagId}))}},{key:"predefinedFilterSelected",value:function(e){this.filters=Object(N.cloneDeep)(e),this.prevState=Object(N.cloneDeep)(e)}},{key:"addFilter",value:function(){this.filters.push(resetFilter({type:"imagesFilename"}))}},{key:"applyFilter",value:function(){this.prevState=Object(N.cloneDeep)(this.currState),this.$emit("change",{filters:this.currState})}},{key:"clearFilters",value:function(){this.filters=[],this.currState=[],this.applyFilter(),this.prevState=[]}},{key:"removeFilter",value:function(e){this.filters.splice(e,1)}},{key:"created",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.PREDEFINED_FILTERS.push({label:"Labeled by me",filters:[resetFilter({type:"objectsByAnnotator",value:this.currentUser.id})]});case 1:case"end":return e.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){ImagesFiltervue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){ImagesFiltervue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"hasChanges",get:function(){return!Object(N.isEqual)(this.prevState,this.currState)}},{key:"tagsById",get:function(){return Object(N.keyBy)(this.tags,"id")}},{key:"predefinedFilterLabel",get:function(){var e,t=this;return(null===(e=this.PREDEFINED_FILTERS.find(function(e){var r=e.filters;return Object(N.isEqual)(t.filters,r)}))||void 0===e?void 0:e.label)||"Custom Filter"}}])&&ImagesFiltervue_type_script_lang_js_defineProperties(t.prototype,r),ImagesFilter}()).prototype,"filterChanged",[Gn],Object.getOwnPropertyDescriptor(Mn.prototype,"filterChanged"),Mn.prototype),Bn=Mn))||Bn),Vn=(r("8dd2e6f858aae89c9288"),Object(p.a)(Hn,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("filter-popup",{attrs:{"icon-class":e.iconClass,"has-settings":e.hasSettings,filters:e.filters,title:"Images Filter"}},[r("div",{attrs:{slot:"title"},slot:"title"},[r("h3",[e._v("\n      Show images:\n      "),r("el-dropdown",{on:{command:e.predefinedFilterSelected}},[r("span",{staticClass:"link-dropdown"},[r("a",[e._v(e._s(e.predefinedFilterLabel))]),e._v(" "),r("i",{staticClass:"icon-chevron-down"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.PREDEFINED_FILTERS,function(t,n){return r("el-dropdown-item",{key:n,attrs:{command:t.filters}},[e._v("\n            "+e._s(t.label)+"\n          ")])}),1)],1)],1)]),e._v(" "),r("div",{staticClass:"images-filter"},[0===e.filters.length?r("div",{staticClass:"no-filters"},[e._v("\n      No filters applied\n    ")]):e._l(e.filters,function(t,n){return r("div",{key:n,staticClass:"filter-line"},[r("div",{staticClass:"label"},[r("el-dropdown",{on:{command:e.filterTypeChanged}},[r("span",{staticClass:"link-dropdown"},[r("i",{staticClass:"type-icon",class:e.FILTERS[t.type].icon}),e._v(" "),r("a",[e._v(e._s(e.FILTERS[t.type].label))]),e._v(" "),r("i",{staticClass:"icon-chevron-down"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.FILTERS,function(t,o){return r("el-dropdown-item",{key:o,attrs:{divided:t.divided,command:{type:o,idx:n}}},[e._v("\n              "+e._s(t.label)+"\n            ")])}),1)],1)],1),e._v(" "),r("div",{staticClass:"input"},["text"===e.FILTERS[t.type].input?[r("el-input",{attrs:{size:"small",placeholder:"img* or [[0-1000]]"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"filter.value"}})]:e._e(),e._v(" "),"class"===e.FILTERS[t.type].input?[r("el-select",{attrs:{size:"small",filterable:"",placeholder:"Choose class"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"filter.value"}},[r("el-option",{attrs:{label:"Any class",value:""}}),e._v(" "),e._l(e.classes,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})],2)]:e._e(),e._v(" "),"tag"===e.FILTERS[t.type].input?[r("el-select",{attrs:{size:"small",filterable:"",placeholder:"Choose tag"},on:{change:function(r){return e.tagSelected(t)}},model:{value:t.tagId,callback:function(r){e.$set(t,"tagId",r)},expression:"filter.tagId"}},[r("el-option",{attrs:{label:"Any tag",value:""}}),e._v(" "),e._l(e.tags,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})],2)]:e._e(),e._v(" "),"user"===e.FILTERS[t.type].input?[r("el-select",{attrs:{size:"small",filterable:"",placeholder:"Choose annotator"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"filter.value"}},e._l(e.members,function(e){return r("el-option",{key:e.id,attrs:{label:e.name||e.login,value:e.id}})}),1)]:e._e(),e._v(" "),r("div",{staticClass:"additional-btns"},[t.tag&&"none"!==t.tag.settings.type?r("a",{directives:[{name:"show",rawName:"v-show",value:!t.showValues,expression:"!filter.showValues"}],on:{click:function(r){return e.openFilterAdditional(t)}}},[e._v("\n            any value\n          ")]):e._e(),e._v(" "),"objects"===e.FILTERS[t.type].source?r("a",{directives:[{name:"show",rawName:"v-show",value:!t.showObjectsRange,expression:"!filter.showObjectsRange"}],on:{click:function(r){return e.openFilterAdditional(t)}}},[e._v("\n            at least one object\n          ")]):e._e()]),e._v(" "),"tag"===e.FILTERS[t.type].input?[t.tag&&"any_string"===t.tag.settings.type?r("div",{directives:[{name:"show",rawName:"v-show",value:t.showValues,expression:"filter.showValues"}],staticClass:"additional"},[r("span",[e._v("with value:")]),e._v(" "),r("el-input",{attrs:{size:"mini",placeholder:"Any value"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"filter.value"}})],1):e._e(),e._v(" "),t.tag&&"oneof_string"===t.tag.settings.type?r("div",{directives:[{name:"show",rawName:"v-show",value:t.showValues,expression:"filter.showValues"}],staticClass:"additional"},[r("span",[e._v("with one of the values:")]),e._v(" "),r("el-select",{attrs:{size:"mini",filterable:"",multiple:"",placeholder:"Any value"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"filter.value"}},e._l(t.tag.settings.values,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1):e._e(),e._v(" "),t.tag&&"any_number"===t.tag.settings.type?r("div",{directives:[{name:"show",rawName:"v-show",value:t.showValues,expression:"filter.showValues"}],staticClass:"additional"},[r("span",[e._v("with value in range:")]),e._v(" "),r("el-input",{staticClass:"range",attrs:{type:"number",size:"mini"},model:{value:t.range[0],callback:function(r){e.$set(t.range,0,r)},expression:"filter.range[0]"}}),e._v("\n            -\n            "),r("el-input",{staticClass:"range",attrs:{type:"number",size:"mini"},model:{value:t.range[1],callback:function(r){e.$set(t.range,1,r)},expression:"filter.range[1]"}})],1):e._e()]:e._e(),e._v(" "),"objects"===e.FILTERS[t.type].source?r("div",{directives:[{name:"show",rawName:"v-show",value:t.showObjectsRange,expression:"filter.showObjectsRange"}],staticClass:"additional"},[r("span",[e._v("# of objects:")]),e._v(" "),r("el-input",{staticClass:"range",attrs:{size:"mini"},model:{value:t.objectsRange[0],callback:function(r){e.$set(t.objectsRange,0,r)},expression:"filter.objectsRange[0]"}}),e._v("\n          -\n          "),r("el-input",{staticClass:"range",attrs:{size:"mini"},model:{value:t.objectsRange[1],callback:function(r){e.$set(t.objectsRange,1,r)},expression:"filter.objectsRange[1]"}})],1):e._e()],2),e._v(" "),r("a",{staticClass:"close right-part"},[r("i",{staticClass:"icon-cross",on:{click:function(t){return e.removeFilter(n)}}})])])}),e._v(" "),r("div",{staticClass:"text-center mt15"},[r("el-button",{attrs:{type:"primary",size:"small",disabled:!e.hasChanges},on:{click:e.applyFilter}},[e._v("\n        Apply filter\n      ")]),e._v(" "),r("el-button",{attrs:{size:"small"},on:{click:e.addFilter}},[e._v("\n        Add filter\n      ")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"small",disabled:!e.filters.length},on:{click:e.clearFilters}},[e._v("\n        Clear\n      ")])],1)],2)])},[],!1,null,"30d759a5",null));Vn.options.__file="ImagesFilter.vue";var Yn,Jn=Vn.exports,Wn=r("151ea03ad35283d9cb85"),qn=r.n(Wn),Zn=r("c80a488c7e9644b1317c");function Panelvue_type_script_lang_js_typeof(e){return(Panelvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Panelvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Panelvue_type_script_lang_js_getPrototypeOf(e){return(Panelvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Panelvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Panelvue_type_script_lang_js_setPrototypeOf(e,t){return(Panelvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Panelvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $n=Object(u.a)({props:["title","icon","disabled"]})(Yn=function(e){function Panel(){var e,t,r;!function(e,t){if(!(e instanceof Panel))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=Panelvue_type_script_lang_js_getPrototypeOf(Panel)).call.apply(e,[this].concat(o)))||"object"!==Panelvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?Panelvue_type_script_lang_js_assertThisInitialized(this):r,Panelvue_type_script_lang_js_defineProperty(Panelvue_type_script_lang_js_assertThisInitialized(t),"resizeInstance",null),Panelvue_type_script_lang_js_defineProperty(Panelvue_type_script_lang_js_assertThisInitialized(t),"scrollSize",qn()()),Panelvue_type_script_lang_js_defineProperty(Panelvue_type_script_lang_js_assertThisInitialized(t),"panelHeight",0),Panelvue_type_script_lang_js_defineProperty(Panelvue_type_script_lang_js_assertThisInitialized(t),"wrap",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Panelvue_type_script_lang_js_setPrototypeOf(e,t)}(Panel,s.a),t=Panel,(r=[{key:"panelResizeHandler",value:function(){var e=getComputedStyle(this.$refs.panelBody),t=parseInt(e.height,10)+this.scrollSize;this.panelHeight!==t&&(this.wrap.style.height="".concat(t,"px"),this.updateScrollbar(),this.panelHeight=t)}},{key:"updateScrollbar",value:function(){this.$refs.scrollbar.update()}},{key:"mounted",value:function(){this.wrap=this.$refs.scrollbar.$refs.wrap,this.resizeInstance=new Zn.ResizeSensor(this.$el,this.panelResizeHandler),this.updateScrollbar()}},{key:"beforeDestroy",value:function(){this.resizeInstance&&this.resizeInstance.detach()}}])&&Panelvue_type_script_lang_js_defineProperties(t.prototype,r),Panel}())||Yn,Qn=(r("008b7e12a467795fc40c"),Object(p.a)($n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"panel"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.disabled,expression:"disabled"}],staticClass:"disabled-overlay"}),e._v(" "),r("a",{staticClass:"panel-title"},[r("span",{staticClass:"title-text"},[e.icon?r("i",{staticClass:"panel-icon",class:e.icon}):e._e(),e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),r("i",{staticClass:"numbers"},[e._t("numbers")],2),e._v(" "),r("div",{staticClass:"panel-tabs"},[e._t("tabs")],2),e._v(" "),r("div",{staticClass:"actions"},[e._t("right")],2)]),e._v(" "),r("div",{ref:"panelBody",staticClass:"panel-body"},[r("el-scrollbar",{ref:"scrollbar"},[e._t("default")],2)],1)])},[],!1,null,null,null));Qn.options.__file="Panel.vue";var Kn,Xn=Qn.exports;function TableListvue_type_script_lang_js_typeof(e){return(TableListvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TableListvue_type_script_lang_js_getPrototypeOf(e){return(TableListvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TableListvue_type_script_lang_js_setPrototypeOf(e,t){return(TableListvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eo=Object(u.a)({props:["header"]})(Kn=function(e){function TableList(){return function(e,t){if(!(e instanceof TableList))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==TableListvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,TableListvue_type_script_lang_js_getPrototypeOf(TableList).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TableListvue_type_script_lang_js_setPrototypeOf(e,t)}(TableList,s.a),TableList}())||Kn,to=(r("0095170bff5ecd813418"),Object(p.a)(eo,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"table-list"},[this.header?t("table",[t("thead",[t("tr",[t("th",{staticClass:"padding"}),this._v(" "),this._t("head"),this._v(" "),t("th",{staticClass:"padding"})],2)])]):this._e(),this._v(" "),this._t("default")],2)},[],!1,null,null,null));to.options.__file="TableList.vue";var ro,no=to.exports;function CountBarvue_type_script_lang_js_typeof(e){return(CountBarvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CountBarvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CountBarvue_type_script_lang_js_getPrototypeOf(e){return(CountBarvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CountBarvue_type_script_lang_js_setPrototypeOf(e,t){return(CountBarvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oo=Object(u.a)({props:["maxValue","count"]})(ro=function(e){function CountBar(){return function(e,t){if(!(e instanceof CountBar))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==CountBarvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,CountBarvue_type_script_lang_js_getPrototypeOf(CountBar).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CountBarvue_type_script_lang_js_setPrototypeOf(e,t)}(CountBar,s.a),t=CountBar,(r=[{key:"power",get:function(){return this.maxValue>0?"".concat(Math.floor(100*this.count/this.maxValue),"%"):0}}])&&CountBarvue_type_script_lang_js_defineProperties(t.prototype,r),CountBar}())||ro,io=(r("4f78958f3a5e414669f8"),Object(p.a)(oo,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"count-bar"},[t("div",{staticClass:"inner",style:{width:this.power}}),this._v(" "),t("div",{staticClass:"text",attrs:{title:"Objects count"}},[this._t("default")],2)])},[],!1,null,null,null));io.options.__file="CountBar.vue";var ao,so=io.exports;function ImagesListRowvue_type_script_lang_js_typeof(e){return(ImagesListRowvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ImagesListRowvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ImagesListRowvue_type_script_lang_js_getPrototypeOf(e){return(ImagesListRowvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ImagesListRowvue_type_script_lang_js_setPrototypeOf(e,t){return(ImagesListRowvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ImagesListRowvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ImagesListRowvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ImagesListRowvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var co=Object(u.a)({props:["img","maxObjectsCount"],components:{CountBar:so},computed:ImagesListRowvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["list"])),methods:ImagesListRowvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/images",["setImage","removeImage"]))})(ao=function(e){function ImagesListRow(){return function(e,t){if(!(e instanceof ImagesListRow))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==ImagesListRowvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ImagesListRowvue_type_script_lang_js_getPrototypeOf(ImagesListRow).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ImagesListRowvue_type_script_lang_js_setPrototypeOf(e,t)}(ImagesListRow,s.a),t=ImagesListRow,(r=[{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"fullPath",get:function(){return this.img.pathOriginal.replace("/image-converter/convert","")}},{key:"preview",get:function(){return this.img.preview}},{key:"isActive",get:function(){return this.img.id===this.dataset.images.selected}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}}])&&ImagesListRowvue_type_script_lang_js_defineProperties(t.prototype,r),ImagesListRow}())||ao,uo=Object(p.a)(co,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",{class:{active:e.isActive},attrs:{id:"image-"+e.img.id}},[r("td",{staticClass:"padding"}),e._v(" "),r("td",{staticClass:"preview clickable",on:{click:function(t){return e.setImage({imageId:e.img.id})}}},[e.preview?r("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.preview,expression:"preview",arg:"background-image"}],staticClass:"preview-pic"}):r("div",{staticClass:"preview-pic remote"},[r("i",{staticClass:"zmdi zmdi-cloud-off"})])]),e._v(" "),r("td",{staticClass:"w100"},[r("div",{staticClass:"title",on:{click:function(t){return e.setImage({imageId:e.img.id})}}},[e._v("\n      "+e._s(e.img.title)+"\n    ")]),e._v(" "),r("div",[r("span",{staticClass:"img-info objects-count"},[r("i",{staticClass:"icon-layers"}),e._v(" "),r("b",[e._v(e._s(e.img.objectsCount))])]),e._v(" "),r("span",{staticClass:"img-info"},[r("i",{staticClass:"icon-calendar"}),e._v(" "),r("b",[e._v(e._s(e._f("moment")(e.img.updatedAt,"from","now")))])])])]),e._v(" "),r("td",{staticClass:"icn"},[e.$acl({action:e.ACL_ACTIONS.IMAGES.REMOVE,teamId:e.$team,workspaceId:e.$workspace,projectId:e.dataset.projectId,datasetId:e.dataset.id})?r("el-dropdown",{staticClass:"show-on-hover"},[r("span",{staticClass:"el-dropdown-link"},[r("i",{staticClass:"zmdi zmdi-download download-icon"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("a",{attrs:{target:"_blank",download:e.dataset.projectTitle+"_"+e.dataset.title+"_"+e.img.title,href:e.fullPath}},[e._v("\n            Download image\n          ")])]),e._v(" "),r("el-dropdown-item",[r("a",{on:{click:function(t){return e.$emit("download-annotation",e.img.id)}}},[e._v("\n            Download annotation\n          ")])])],1)],1):e._e()],1),e._v(" "),r("td",{staticClass:"icn"},[r("el-button",{staticClass:"show-on-hover icon-btn black",attrs:{disabled:1===e.list.length||!e.$acl({action:e.ACL_ACTIONS.IMAGES.REMOVE,projectId:e.dataset.projectId,datasetId:e.dataset.id}),type:"text",title:1===e.list.length?"Can't delete last image":"Delete image"},on:{click:function(t){return e.removeImage(e.img.id)}}},[r("i",{staticClass:"icon-trash"})])],1),e._v(" "),r("td",{staticClass:"padding"})])},[],!1,null,null,null);uo.options.__file="ImagesListRow.vue";var lo,po,fo,_o,yo,go=uo.exports;function ImagesListvue_type_script_lang_js_typeof(e){return(ImagesListvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ImagesListvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ImagesListvue_type_script_lang_js_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){ImagesListvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){ImagesListvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function ImagesListvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ImagesListvue_type_script_lang_js_getPrototypeOf(e){return(ImagesListvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ImagesListvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ImagesListvue_type_script_lang_js_setPrototypeOf(e,t){return(ImagesListvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ImagesListvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function ImagesListvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ImagesListvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ImagesListvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ho=(lo=Object(u.a)({props:["list","filter","hasSettings"],components:{TableList:no,ImagesListRow:go},computed:ImagesListvue_type_script_lang_js_objectSpread({},Object(y.d)("dataset/images",["filters"]),Object(y.c)("dataset/images",{currentImage:"currentImage",imagesList:"list"})),methods:ImagesListvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/images",["updateDescription","initImages","getImages","setPage"]))}),po=Object(u.b)("filter",{deep:!0}),fo=Object(u.b)("filters"),lo((ImagesListvue_type_script_lang_js_applyDecoratedDescriptor((yo=function(e){function ImagesList(){var e,t,r;!function(e,t){if(!(e instanceof ImagesList))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=ImagesListvue_type_script_lang_js_getPrototypeOf(ImagesList)).call.apply(e,[this].concat(o)))||"object"!==ImagesListvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?ImagesListvue_type_script_lang_js_assertThisInitialized(this):r,ImagesListvue_type_script_lang_js_defineProperty(ImagesListvue_type_script_lang_js_assertThisInitialized(t),"updatePageInput",Object(N.debounce)(t.pageChanged,500)),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ImagesListvue_type_script_lang_js_setPrototypeOf(e,t)}(ImagesList,s.a),t=ImagesList,(r=[{key:"update",value:function(){var e=ImagesListvue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t,r,n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.$store.state,t=e.settings,r=e.dataset,n=t.lastImageId,i.next=4,this.getImages({datasetId:this.$route.params.datasetId});case 4:(o=r.images.selected)&&n&&o===n&&o!==this.imagesList[0]&&this.$message.info("Last viewed image selected");case 6:case"end":return i.stop()}},_callee,this)}));return function(){return e.apply(this,arguments)}}()},{key:"created",value:function(){var e=ImagesListvue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=this.$route,t=e.query,r=e.hash,n=Object.assign({},t),r&&(o=r.split("-"),n.imgId=o[1]),i={query:n,datasetId:this.$route.params.datasetId},!Object.keys(n).length){a.next=8;break}return a.next=7,this.initImages(i);case 7:return a.abrupt("return");case 8:return a.next=10,this.update();case 10:case"end":return a.stop()}},_callee2,this)}));return function(){return e.apply(this,arguments)}}()},{key:"pageChanged",value:function(e){var t=parseInt(e,10);t!==this.page&&(this.setPage(t),this.update())}},{key:"filterUpdated",value:function(){this.setPage(1),this.update()}},{key:"filtersUpdated",value:function(){this.setPage(1),this.update()}},{key:"total",get:function(){return this.$store.state.dataset.images.totalFiltered}},{key:"maxObjectsCount",get:function(){return this.list.reduce(function(e,t){return Math.max(e,t.objectsCount)},0)}},{key:"page",get:function(){return this.$store.state.dataset.images.page}},{key:"perPage",get:function(){return this.$store.state.dataset.images.perPage}}])&&ImagesListvue_type_script_lang_js_defineProperties(t.prototype,r),ImagesList}()).prototype,"filterUpdated",[po],Object.getOwnPropertyDescriptor(yo.prototype,"filterUpdated"),yo.prototype),ImagesListvue_type_script_lang_js_applyDecoratedDescriptor(yo.prototype,"filtersUpdated",[fo],Object.getOwnPropertyDescriptor(yo.prototype,"filtersUpdated"),yo.prototype),_o=yo))||_o),bo=(r("c873513577cfc1aefa93"),Object(p.a)(ho,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"images-list"},[e.list.length>0?r("table-list",[e.total>0&&e.list.length>0&&e.total>e.list.length?r("el-pagination",{staticClass:"el-pagination",attrs:{small:"","current-page":e.page,total:e.total,"page-size":e.perPage,layout:"prev, pager, next, jumper"},on:{"current-change":e.pageChanged}}):e._e(),e._v(" "),r("table",{ref:"table"},[r("tbody",e._l(e.list,function(t){return r("images-list-row",{key:t.id,attrs:{img:t,"max-objects-count":e.maxObjectsCount},on:{"download-annotation":function(t){return e.$emit("download-annotation",t)}}})}),1)]),e._v(" "),e.total>0&&e.list.length>0&&e.total>e.list.length?r("el-pagination",{staticClass:"el-pagination",attrs:{small:"","current-page":e.page,total:e.total,"page-size":e.perPage,layout:"prev, pager, next, jumper"},on:{"current-change":e.pageChanged}}):e._e()],1):r("div",{staticClass:"objects-empty"},[r("div",[r("b",[e._v("No images")]),r("br"),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.hasSettings,expression:"hasSettings"}]},[e._v("that match the filter criteria")])])])],1)},[],!1,null,null,null));bo.options.__file="ImagesList.vue";var vo,mo,Oo,Po,To,So=bo.exports;function Imagesvue_type_script_lang_js_typeof(e){return(Imagesvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Imagesvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Imagesvue_type_script_lang_js_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){Imagesvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){Imagesvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function Imagesvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Imagesvue_type_script_lang_js_getPrototypeOf(e){return(Imagesvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Imagesvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Imagesvue_type_script_lang_js_setPrototypeOf(e,t){return(Imagesvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Imagesvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function Imagesvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Imagesvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function Imagesvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function getAnnotationJson(e){return g.d.post("/annotations.info",{imageId:e}).then(function(e){return e.data})}var jo=(vo=Object(u.a)({components:{Panel:Xn,ImagesList:So,ImagesFilter:Jn},computed:Imagesvue_type_script_lang_js_objectSpread({},Object(y.c)("tags",["orderedTags"]),Object(y.c)("dataset/classes",["orderedClasses"]),Object(y.c)("dataset/images",["orderedImages","imagesById"]),Object(y.d)("dataset/images",{filter:"filter",loading:"listLoading",currentImageId:"selected"})),methods:Imagesvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/images",["setFilter"]))}),mo=Object(u.b)("currentImageId"),Oo=Object(u.b)("orderedImages"),vo((Imagesvue_type_script_lang_js_applyDecoratedDescriptor((To=function(e){function Images(){var e,t,r;!function(e,t){if(!(e instanceof Images))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=Imagesvue_type_script_lang_js_getPrototypeOf(Images)).call.apply(e,[this].concat(o)))||"object"!==Imagesvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?Imagesvue_type_script_lang_js_assertThisInitialized(this):r,Imagesvue_type_script_lang_js_defineProperty(Imagesvue_type_script_lang_js_assertThisInitialized(t),"localLoading",!1),Imagesvue_type_script_lang_js_defineProperty(Imagesvue_type_script_lang_js_assertThisInitialized(t),"members",[]),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Imagesvue_type_script_lang_js_setPrototypeOf(e,t)}(Images,s.a),t=Images,(r=[{key:"onFilterChanged",value:function(e){this.setFilter(Object.assign({},this.filter,e))}},{key:"downloadAnnotation",value:function(){var e=Imagesvue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,r,n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this.localLoading=!0,i.prev=1,t=this.imagesById[e],i.next=5,getAnnotationJson(e);case 5:r=i.sent,n="".concat(t.title.split(".").slice(0,-1).join("."),".json"),o=new Blob([JSON.stringify(r.annotation)],{type:"application/json"}),Object(kn.j)(o,n),i.next=15;break;case 11:throw i.prev=11,i.t0=i.catch(1),this.$message.error("Something went wrong. Please try again later"),i.t0;case 15:return i.prev=15,this.localLoading=!1,i.finish(15);case 18:case"end":return i.stop()}},_callee,this,[[1,11,15,18]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onCurrentImageChanged",value:function(e){null!=e&&(window.location.href="#image-".concat(e))}},{key:"orderedImagesChanged",value:function(){var e=this;this.$nextTick(function(){e.$refs.panel.updateScrollbar()})}},{key:"created",value:function(){var e=Imagesvue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$acl({action:S.ACL_ACTIONS.MEMBERS.LIST,teamId:this.$team,workspaceId:this.$workspace})){e.next=7;break}return e.next=4,Object(g.b)(this.$team);case 4:this.members=e.sent,e.next=8;break;case 7:this.members=[Object(N.pick)(this.currentUser,["id","login","name"])];case 8:case"end":return e.stop()}},_callee2,this)}));return function(){return e.apply(this,arguments)}}()},{key:"total",get:function(){return this.$store.state.dataset.images.totalFiltered}},{key:"currentUser",get:function(){return this.$store.state.user}},{key:"hasSettings",get:function(){return""!==this.filter.name||"any"!==this.filter.objectsCount||0!==this.filter.imageTags.length}}])&&Imagesvue_type_script_lang_js_defineProperties(t.prototype,r),Images}()).prototype,"onCurrentImageChanged",[mo],Object.getOwnPropertyDescriptor(To.prototype,"onCurrentImageChanged"),To.prototype),Imagesvue_type_script_lang_js_applyDecoratedDescriptor(To.prototype,"orderedImagesChanged",[Oo],Object.getOwnPropertyDescriptor(To.prototype,"orderedImagesChanged"),To.prototype),Po=To))||Po),wo=Object(p.a)(jo,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("panel",{ref:"panel",attrs:{title:"Images",icon:"icon-images"}},[r("span",{attrs:{slot:"numbers"},slot:"numbers"},[e.hasSettings?r("span",[e._v("\n      "+e._s(e.orderedImages.length)+" of \n    ")]):e._e(),e._v("\n    "+e._s(e.total)+"\n  ")]),e._v(" "),r("images-filter",{attrs:{slot:"right","has-settings":e.hasSettings,tags:e.orderedTags,classes:e.orderedClasses,members:e.members,"current-user":e.currentUser},on:{change:e.onFilterChanged},slot:"right"}),e._v(" "),r("images-list",{directives:[{name:"loading",rawName:"v-loading",value:e.loading||e.localLoading,expression:"loading || localLoading"}],attrs:{"has-settings":e.hasSettings,filter:e.filter,list:e.orderedImages},on:{"download-annotation":e.downloadAnnotation}})],1)},[],!1,null,null,null);wo.options.__file="Images.vue";var Io,Eo=wo.exports;function BindFigureToInstancePopovervue_type_script_lang_js_typeof(e){return(BindFigureToInstancePopovervue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BindFigureToInstancePopovervue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function BindFigureToInstancePopovervue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function BindFigureToInstancePopovervue_type_script_lang_js_getPrototypeOf(e){return(BindFigureToInstancePopovervue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BindFigureToInstancePopovervue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BindFigureToInstancePopovervue_type_script_lang_js_setPrototypeOf(e,t){return(BindFigureToInstancePopovervue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BindFigureToInstancePopovervue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){BindFigureToInstancePopovervue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function BindFigureToInstancePopovervue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Co=Object(u.a)({computed:BindFigureToInstancePopovervue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/figures",["filteredSidebarFiguresWithoutInstances"])),methods:BindFigureToInstancePopovervue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/figures",["setHoveredFigure","setShowHoveredFigure","addFigureToInstance"]))})(Io=function(e){function BindFigureToInstancePopover(){var e,t,r;!function(e,t){if(!(e instanceof BindFigureToInstancePopover))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=BindFigureToInstancePopovervue_type_script_lang_js_getPrototypeOf(BindFigureToInstancePopover)).call.apply(e,[this].concat(o)))||"object"!==BindFigureToInstancePopovervue_type_script_lang_js_typeof(r)&&"function"!=typeof r?BindFigureToInstancePopovervue_type_script_lang_js_assertThisInitialized(this):r,BindFigureToInstancePopovervue_type_script_lang_js_defineProperty(BindFigureToInstancePopovervue_type_script_lang_js_assertThisInitialized(t),"setHoveredFigureDelayed",Object(N.throttle)(t.setHoveredFigure,100)),BindFigureToInstancePopovervue_type_script_lang_js_defineProperty(BindFigureToInstancePopovervue_type_script_lang_js_assertThisInitialized(t),"popoverVisible",!1),BindFigureToInstancePopovervue_type_script_lang_js_defineProperty(BindFigureToInstancePopovervue_type_script_lang_js_assertThisInitialized(t),"figure",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BindFigureToInstancePopovervue_type_script_lang_js_setPrototypeOf(e,t)}(BindFigureToInstancePopover,s.a),t=BindFigureToInstancePopover,(r=[{key:"open",value:function(e){this.figure=e,this.popoverVisible=!0}},{key:"onClosed",value:function(){this.figure=null}},{key:"addToInstance",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.addFigureToInstance({instanceId:e.id,figureId:this.figure.id});case 2:this.popoverVisible=!1;case 3:case"end":return t.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){BindFigureToInstancePopovervue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){BindFigureToInstancePopovervue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"onFigureEnter",value:function(e){e&&e.visible&&(this.setShowHoveredFigure(!0),this.setHoveredFigureDelayed(e.id))}},{key:"onFigureLeave",value:function(){this.setHoveredFigure(null)}},{key:"classes",get:function(){return this.$store.state.dataset.classes.all}},{key:"list",get:function(){var e=this;return this.figure?this.filteredSidebarFiguresWithoutInstances.filter(function(t){return t.id!==e.figure.id&&null!=t.classId}):[]}}])&&BindFigureToInstancePopovervue_type_script_lang_js_defineProperties(t.prototype,r),BindFigureToInstancePopover}())||Io,ko=(r("0e4281620283677fb789"),Object(p.a)(Co,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click"},on:{hide:e.onClosed},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[r("div",{staticClass:"bind-instance-figures-list"},[e._v("\n    Bind to object\n    "),r("div",{staticClass:"figures-list"},[r("el-scrollbar",{ref:"scrollbar"},[r("ul",e._l(e.list,function(t){return r("li",{key:t.id,on:{mouseenter:function(r){return e.onFigureEnter(t)},mouseleave:function(t){return e.onFigureLeave()}}},[r("a",{on:{click:function(r){return e.addToInstance(t)}}},[r("div",{staticClass:"circle",style:{"background-color":e.classes[t.classId].color}}),e._v(" "),r("span",{staticClass:"figure-title"},[e._v("\n                "+e._s(e.classes[t.classId].title)+"\n              ")])])])}),0)])],1)]),e._v(" "),r("el-button",{staticClass:"bind-instance-figures-opener",attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("\n    open\n  ")])],1)},[],!1,null,null,null));ko.options.__file="BindFigureToInstancePopover.vue";var Ao,Fo=ko.exports,xo=(r("72555732aea7ef591f05"),r("e7aa46edd5854d463eb1")),Ro=r.n(xo);function CloneFiguresFromImagevue_type_script_lang_js_typeof(e){return(CloneFiguresFromImagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CloneFiguresFromImagevue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function CloneFiguresFromImagevue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CloneFiguresFromImagevue_type_script_lang_js_getPrototypeOf(e){return(CloneFiguresFromImagevue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CloneFiguresFromImagevue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CloneFiguresFromImagevue_type_script_lang_js_setPrototypeOf(e,t){return(CloneFiguresFromImagevue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function CloneFiguresFromImagevue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){CloneFiguresFromImagevue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function CloneFiguresFromImagevue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lo=Object(u.a)({computed:CloneFiguresFromImagevue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["isFirstImage"]),Object(y.d)("dataset",{projectId:"projectId",datasetId:"id"})),methods:CloneFiguresFromImagevue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/images",["cloneFiguresFromPrevImage"]))})(Ao=function(e){function CloneFiguresFromImage(){var e,t,r;!function(e,t){if(!(e instanceof CloneFiguresFromImage))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=CloneFiguresFromImagevue_type_script_lang_js_getPrototypeOf(CloneFiguresFromImage)).call.apply(e,[this].concat(o)))||"object"!==CloneFiguresFromImagevue_type_script_lang_js_typeof(r)&&"function"!=typeof r?CloneFiguresFromImagevue_type_script_lang_js_assertThisInitialized(this):r,CloneFiguresFromImagevue_type_script_lang_js_defineProperty(CloneFiguresFromImagevue_type_script_lang_js_assertThisInitialized(t),"keyMap",new Map),CloneFiguresFromImagevue_type_script_lang_js_defineProperty(CloneFiguresFromImagevue_type_script_lang_js_assertThisInitialized(t),"ACL_ACTIONS",S.ACL_ACTIONS),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CloneFiguresFromImagevue_type_script_lang_js_setPrototypeOf(e,t)}(CloneFiguresFromImage,s.a),t=CloneFiguresFromImage,(r=[{key:"cloneFigures",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ro.a.confirm("Copy objects from previous image. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:return e.prev=8,e.next=11,this.cloneFiguresFromPrevImage();case 11:e.next=17;break;case 13:throw e.prev=13,e.t1=e.catch(8),this.$message.error("Something went wrong. Please try again later"),e.t1;case 17:case"end":return e.stop()}},_callee,this,[[0,5],[8,13]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){CloneFiguresFromImagevue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){CloneFiguresFromImagevue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"created",value:function(){var e=this;this.keyMap=new Map([[["alt+j"],{handler:function(){e.cloneFigures()}}]])}}])&&CloneFiguresFromImagevue_type_script_lang_js_defineProperties(t.prototype,r),CloneFiguresFromImage}())||Ao,Do=(r("1943f9d98b3c617e722b"),Object(p.a)(Lo,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("el-tooltip",[e.isFirstImage?e._e():r("el-button",{directives:[{name:"hotkeys",rawName:"v-hotkeys",value:e.keyMap,expression:"keyMap"}],staticClass:"icon-btn",attrs:{disabled:!e.$acl({action:e.ACL_ACTIONS.FIGURES.CREATE,projectId:e.projectId,datasetId:e.datasetId}),type:"text"},on:{click:function(t){return e.cloneFigures()}}},[r("i",{staticClass:"zmdi zmdi-copy"})]),e._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n      Copy objects from previous image "),r("i",{staticClass:"icon-keyboard",staticStyle:{padding:"2px 3px 0 8px"}}),e._v(" ALT + J\n    ")])],1)],1)},[],!1,null,"6c6fb43b",null));Do.options.__file="CloneFiguresFromImage.vue";var Go,Bo=Do.exports;function FiguresNotificationvue_type_script_lang_js_typeof(e){return(FiguresNotificationvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FiguresNotificationvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FiguresNotificationvue_type_script_lang_js_getPrototypeOf(e){return(FiguresNotificationvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FiguresNotificationvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FiguresNotificationvue_type_script_lang_js_setPrototypeOf(e,t){return(FiguresNotificationvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mo=Object(u.a)()(Go=function(e){function FiguresNotification(){var e,t,r,n,o;!function(e,t){if(!(e instanceof FiguresNotification))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return this,t=!(r=(e=FiguresNotificationvue_type_script_lang_js_getPrototypeOf(FiguresNotification)).call.apply(e,[this].concat(a)))||"object"!==FiguresNotificationvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?FiguresNotificationvue_type_script_lang_js_assertThisInitialized(this):r,!1,(o="isVisible")in(n=FiguresNotificationvue_type_script_lang_js_assertThisInitialized(t))?Object.defineProperty(n,o,{value:!1,enumerable:!0,configurable:!0,writable:!0}):n[o]=!1,t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FiguresNotificationvue_type_script_lang_js_setPrototypeOf(e,t)}(FiguresNotification,s.a),t=FiguresNotification,(r=[{key:"created",value:function(){h.a.on("figures-updated",this.figuresUpdated)}},{key:"beforeDestroy",value:function(){h.a.removeListener("figures-updated",this.figuresUpdated)}},{key:"figuresUpdated",value:function(){var e=this;this.timeout&&clearTimeout(this.timeout),this.isVisible=!0,this.timeout=setTimeout(function(){e.isVisible=!1},1e3)}}])&&FiguresNotificationvue_type_script_lang_js_defineProperties(t.prototype,r),FiguresNotification}())||Go,zo=(r("816b386075a8d61b717b"),Object(p.a)(Mo,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"inline-notification"},[t("transition",{attrs:{name:"fade"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:this.isVisible,expression:"isVisible"}],staticClass:"zmdi zmdi-check"})])],1)},[],!1,null,"002f1db8",null));zo.options.__file="FiguresNotification.vue";var No,Uo=zo.exports,Ho=r("78599a33ba59a2a18a8a"),Vo=r.n(Ho),Yo=r("f9e71c3bf7e07577fce6");function FiguresListRowvue_type_script_lang_js_typeof(e){return(FiguresListRowvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FiguresListRowvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function FiguresListRowvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FiguresListRowvue_type_script_lang_js_getPrototypeOf(e){return(FiguresListRowvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FiguresListRowvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FiguresListRowvue_type_script_lang_js_setPrototypeOf(e,t){return(FiguresListRowvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FiguresListRowvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){FiguresListRowvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function FiguresListRowvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jo=Object(u.a)({props:["figure","open","isGroupItem","totalArea","hasAtLeastOneChildren","isDragging"],computed:FiguresListRowvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["currentImage"]),Object(y.d)("dataset",["projectId","id"])),methods:FiguresListRowvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/figures",["toggleFigure","toggleFigureVisible","toggleFigureLock","removeFigure","toggleFilterByInstanceId","setHoveredFigure","setShowHoveredFigure","addFigureToInstance","scheduleRemoveFromRecentHovered"]))})(No=function(e){function FiguresListRow(){var e,t,r;!function(e,t){if(!(e instanceof FiguresListRow))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=FiguresListRowvue_type_script_lang_js_getPrototypeOf(FiguresListRow)).call.apply(e,[this].concat(o)))||"object"!==FiguresListRowvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?FiguresListRowvue_type_script_lang_js_assertThisInitialized(this):r,FiguresListRowvue_type_script_lang_js_defineProperty(FiguresListRowvue_type_script_lang_js_assertThisInitialized(t),"JOB_FIGURES_VISIBILITY_MODE",S.JOB_FIGURES_VISIBILITY_MODE),FiguresListRowvue_type_script_lang_js_defineProperty(FiguresListRowvue_type_script_lang_js_assertThisInitialized(t),"setHoveredFigureDelayed",Object(N.throttle)(t.setHoveredFigure,100)),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FiguresListRowvue_type_script_lang_js_setPrototypeOf(e,t)}(FiguresListRow,s.a),t=FiguresListRow,(r=[{key:"onFigureEnter",value:function(){this.figure.visible&&!this.isDragging&&(this.setShowHoveredFigure(!0),this.setHoveredFigureDelayed(this.figure.id))}},{key:"onFigureLeave",value:function(){this.isDragging||(this.setHoveredFigure(null),this.scheduleRemoveFromRecentHovered(this.figure.id))}},{key:"onFigureRightClick",value:function(){}},{key:"unbindFromGroup",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.addFigureToInstance({instanceId:null,figureId:this.figure.id});case 2:case"end":return e.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){FiguresListRowvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){FiguresListRowvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"classes",get:function(){return this.dataset.classes.all}},{key:"isHole",get:function(){return null==this.figure.classId}},{key:"isActive",get:function(){return this.figure.id===this.dataset.figures.selected}},{key:"user",get:function(){return this.$store.state.user}},{key:"areaPerc",get:function(){var e,t;if(!this.totalArea)return 0;var r=this.figure.area,n=0;return(null===(e=this.figure.instances)||void 0===e?void 0:e.length)&&(r=this.figure.instances.reduce(function(e,t){return t.area+e},0)),(null===(t=this.figure.holes)||void 0===t?void 0:t.length)&&(n=this.figure.holes.reduce(function(e,t){return t.area+e},0)),Math.ceil((r-n)/this.totalArea*100)}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}},{key:"lockTitle",get:function(){return this.figure.editable?this.figure.locked?"Unlock object":"Lock figure":"This object is not editable"}},{key:"pointsTitle",get:function(){return this.figure.bitmap?"Bitmap object without points":"".concat(this.figure.pointsCount," points")}}])&&FiguresListRowvue_type_script_lang_js_defineProperties(t.prototype,r),FiguresListRow}())||No,Wo=(r("281e5a6f947ddedfad19"),Object(p.a)(Jo,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",{class:{disabled:!e.figure.visible,active:e.isActive},attrs:{id:"figure-"+e.figure.id},on:{mouseenter:function(t){return e.onFigureEnter()},mouseleave:function(t){return e.onFigureLeave()}}},[r("td",{staticClass:"padding"}),e._v(" "),r("td",{staticClass:"icn"},[!e.isGroupItem&&!e.isHole&&e.figure.holes.length>0?r("a",{staticClass:"toggle-open",on:{click:function(t){return e.$emit("toggleOpen")}}},[e.open?r("i",{staticClass:"icon-triangle-down"}):r("i",{staticClass:"icon-triangle-right"})]):e._e()]),e._v(" "),r("td",{staticClass:"priority",attrs:{title:"Priority"}},[e.isGroupItem&&!e.isHole?r("i",{staticClass:"zmdi zmdi-long-arrow-return zmdi-hc-flip-horizontal"}):e.figure.priority?r("div",[r("span",[e._v("#")]),e._v(e._s(e.figure.priority)+"\n    ")]):e._e()]),e._v(" "),r("td",{staticClass:"cnt icn clickable",on:{click:function(t){return e.toggleFigure(e.figure.id)}}},[e.figure.classId?r("div",{staticClass:"circle",style:{"background-color":e.classes[e.figure.classId].color}}):e._e()]),e._v(" "),r("td",{staticClass:"class-name clickable",on:{click:function(t){return e.toggleFigure(e.figure.id)},contextmenu:function(t){return t.preventDefault(),e.onFigureRightClick(e.figure.id)}}},[e.isHole?r("span",[r("i",{staticClass:"zmdi zmdi-long-arrow-return zmdi-hc-flip-horizontal"}),e._v("\n      Hole\n    ")]):r("span",{attrs:{title:e.classes[e.figure.classId].title}},[e._v("\n      "+e._s(e.classes[e.figure.classId].title)+"\n    ")])]),e._v(" "),r("td",{staticClass:"area"},[e.areaPerc>1?r("span",[e._v("\n      "+e._s(e.areaPerc)+"%\n    ")]):e._e()]),e._v(" "),e.hasAtLeastOneChildren&&e.isGroupItem?r("td",{staticClass:"w100"}):e._e(),e._v(" "),e.hasAtLeastOneChildren&&e.isGroupItem?r("td",{staticClass:"icn"}):e._e(),e._v(" "),r("td",{staticClass:"icn"},[e.isHole?e._e():r("span",[e.isGroupItem?r("span",[e.figure.instanceId?r("el-button",{staticClass:"show-on-hover icon-btn black",attrs:{disabled:!e.$acl({action:e.ACL_ACTIONS.FIGURES.UPDATE,projectId:e.projectId,datasetId:e.id}),type:"text"},on:{click:e.unbindFromGroup}},[r("i",{staticClass:"zmdi zmdi-close",attrs:{title:"Unbind"}})]):e._e()],1):r("el-button",{staticClass:"show-on-hover icon-btn black",attrs:{disabled:!e.$acl({action:e.ACL_ACTIONS.FIGURES.UPDATE,projectId:e.projectId,datasetId:e.id}),type:"text"},on:{click:function(t){return t.stopPropagation(),e.$emit("bindFigureToInstance",e.figure)}}},[r("i",{staticClass:"icon-link",attrs:{title:"Bind"}})])],1)]),e._v(" "),r("td",{staticClass:"icn"},[r("el-button",{staticClass:"show-on-hover icon-btn black",attrs:{disabled:!e.$acl([{action:e.ACL_ACTIONS.FIGURES.REMOVE_ALL,projectId:e.projectId,datasetId:e.id},{action:e.ACL_ACTIONS.FIGURES.REMOVE,projectId:e.projectId,datasetId:e.id,check:function(){return!e.$job||e.$job.userId!==e.user.id||e.$job.meta.figuresVisibilityMode===e.JOB_FIGURES_VISIBILITY_MODE.ALL||e.figure.createdBy===e.user.id}}]),type:"text"},on:{click:function(t){return e.removeFigure(e.figure.id)}}},[e.isActive?r("el-tooltip",{attrs:{"open-delay":200}},[r("i",{staticClass:"icon-trash"}),e._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n          Delete selected object"),r("i",{staticClass:"icon-keyboard",staticStyle:{padding:"2px 3px 0 8px"}}),e._v(" SHIFT + D\n        ")])]):r("i",{staticClass:"icon-trash",attrs:{title:"Delete object "+e.figure.createdBy+"- "+e.user.id}})],1)],1),e._v(" "),r("td",{staticClass:"icn show-hide"},[r("a",{attrs:{title:e.figure.visible?"Hide":"Show"},on:{click:function(t){return e.toggleFigureVisible(e.figure.id)}}},[r("i",{class:e.figure.visible?"icon-eye":"icon-eye-with-line"})]),e._v(" "),r("i",{staticClass:"icon-edit show-on-active"})]),e._v(" "),r("td",{staticClass:"padding"})])},[],!1,null,"1aebf534",null));Wo.options.__file="FiguresListRow.vue";var qo,Zo=Wo.exports;function Tagsvue_type_script_lang_js_typeof(e){return(Tagsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tagsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tagsvue_type_script_lang_js_getPrototypeOf(e){return(Tagsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tagsvue_type_script_lang_js_setPrototypeOf(e,t){return(Tagsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tagsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $o=Object(u.a)({props:{tags:[Array,Object],isOpen:Boolean,showOpen:{type:Boolean,default:null},showRemove:{type:Boolean,default:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Tagsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.d)("tags",["selected"]))})(qo=function(e){function Tags(){return function(e,t){if(!(e instanceof Tags))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==Tagsvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Tagsvue_type_script_lang_js_getPrototypeOf(Tags).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tagsvue_type_script_lang_js_setPrototypeOf(e,t)}(Tags,s.a),t=Tags,(r=[{key:"icon",value:function(e){var t=e.type;return"class"===t?"icon-info":"user"===t?"icon-user":"size"===t?"icon-ruler":"description"===t?"":"icon-price-tag"}},{key:"canClose",value:function(e){return!("tag"!==e.type||!this.canRemoveTag)&&"showRemove"in this.$options.propsData&&this.showRemove}},{key:"onOpen",value:function(e,t){this.$emit("openTag",e?e.id:null,{isPlus:t,isDescription:"description"===(null==e?void 0:e.type)})}},{key:"handleClose",value:function(e){this.$emit("removeTag",e.id)}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}},{key:"canRemoveTag",get:function(){var e=this.dataset,t=e.groupId,r=e.workspaceId,n=e.projectId,o=e.id;return this.$acl({action:S.ACL_ACTIONS.FIGURES.UPDATE,teamId:t,workspaceId:r,projectId:n,datasetId:o})}},{key:"list",get:function(){if(!this.tags)return[];var e=Array.isArray(this.tags)?this.tags:[this.tags];return e.length?e:[]}},{key:"showOpenBtn",get:function(){return"showOpen"in this.$options.propsData?this.showOpen:0===this.list.length}}])&&Tagsvue_type_script_lang_js_defineProperties(t.prototype,r),Tags}())||qo,Qo=(r("afc488314e559ce7f3ac"),Object(p.a)($o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tags-row"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showOpenBtn,expression:"showOpenBtn"}],staticClass:"tag button-new-tag",on:{click:function(t){return e.onOpen(null,!0)}}},[r("i",{staticClass:"icon-price-tag"})]),e._v(" "),e._l(e.list,function(t){return r("div",{key:t.id,staticClass:"tag",class:{description:"description"===t.type,closeable:e.canClose(t),selected:e.selected&&t.id===e.selected.id},style:{color:t.color||"black"},on:{click:function(r){return e.onOpen(t)}}},[e.icon(t)?r("i",{staticClass:"icn",class:e.icon(t)}):e._e(),e._v("\n    "+e._s(t.title)),t.value?r("i",{staticStyle:{"font-weight":"normal"}},[e._v(": "+e._s(e._f("truncate")(t.value,20)))]):e._e(),e._v(" "),e.canClose(t)?r("span",{staticClass:"close",on:{click:function(r){return r.stopPropagation(),e.handleClose(t)}}},[r("i",{staticClass:"zmdi zmdi-close"})]):e._e()])})],2)},[],!1,null,null,null));Qo.options.__file="Tags.vue";var Ko,Xo=Qo.exports;function FiguresListGroupTitleRowvue_type_script_lang_js_typeof(e){return(FiguresListGroupTitleRowvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FiguresListGroupTitleRowvue_type_script_lang_js_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function FiguresListGroupTitleRowvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function FiguresListGroupTitleRowvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FiguresListGroupTitleRowvue_type_script_lang_js_getPrototypeOf(e){return(FiguresListGroupTitleRowvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FiguresListGroupTitleRowvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FiguresListGroupTitleRowvue_type_script_lang_js_setPrototypeOf(e,t){return(FiguresListGroupTitleRowvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FiguresListGroupTitleRowvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){FiguresListGroupTitleRowvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function FiguresListGroupTitleRowvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ei=Object(u.a)({props:["figure","open","totalArea","isDragging"],components:{Tags:Xo},computed:FiguresListGroupTitleRowvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["currentImage"]),Object(y.d)("dataset",["projectId","id"])),methods:FiguresListGroupTitleRowvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/figures",["toggleFigureLock","removeFigures","setFiguresRectsVisible","setHoveredFigure","setShowHoveredFigure","setFiguresVisible"]))})(Ko=function(e){function FiguresListGroupTitleRow(){var e,t,r;!function(e,t){if(!(e instanceof FiguresListGroupTitleRow))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=FiguresListGroupTitleRowvue_type_script_lang_js_getPrototypeOf(FiguresListGroupTitleRow)).call.apply(e,[this].concat(o)))||"object"!==FiguresListGroupTitleRowvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?FiguresListGroupTitleRowvue_type_script_lang_js_assertThisInitialized(this):r,FiguresListGroupTitleRowvue_type_script_lang_js_defineProperty(FiguresListGroupTitleRowvue_type_script_lang_js_assertThisInitialized(t),"ACL_ACTIONS",S.ACL_ACTIONS),FiguresListGroupTitleRowvue_type_script_lang_js_defineProperty(FiguresListGroupTitleRowvue_type_script_lang_js_assertThisInitialized(t),"setFiguresRectsVisibleDelayed",Object(N.throttle)(t.setFiguresRectsVisible,100)),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FiguresListGroupTitleRowvue_type_script_lang_js_setPrototypeOf(e,t)}(FiguresListGroupTitleRow,s.a),t=FiguresListGroupTitleRow,(r=[{key:"toggleFiguresGroupHidden",value:function(){this.setFiguresVisible({figuresIds:this.figuresGroup.map(function(e){return e.id}),value:this.isFigureGroupHidden})}},{key:"removeFiguresGroup",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ro.a.confirm("This will permanently delete all objects in this group. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"});case 2:return e.next=4,this.removeFigures({imageId:this.currentImage.id,figuresIds:this.figure.instances.map(function(e){return e.id})});case 4:case"end":return e.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){FiguresListGroupTitleRowvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){FiguresListGroupTitleRowvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"onFigureEnter",value:function(){this.isDragging||(this.setShowHoveredFigure(!0),this.setFiguresRectsVisibleDelayed({figuresIds:this.figure.instances.map(function(e){return e.id}),value:!0}))}},{key:"onFigureLeave",value:function(){this.isDragging||(this.setFiguresRectsVisibleDelayed({figuresIds:this.figure.instances.map(function(e){return e.id}),value:!1}),this.setHoveredFigure(null))}},{key:"onFigureRightClick",value:function(){}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"classes",get:function(){return this.dataset.classes.all}},{key:"figures",get:function(){return this.dataset.figures}},{key:"isHole",get:function(){return null==this.figure.classId}},{key:"isActive",get:function(){return this.figure.id===this.figures.selected}},{key:"areaPerc",get:function(){var e=this.figure.instances.reduce(function(e,t){return t.area+e},0),t=this.figure.holes.reduce(function(e,t){return t.area+e},0);return Math.round((e-t)/this.totalArea*100)}},{key:"lockTitle",get:function(){return this.figure.editable?this.figure.locked?"Unlock object":"Lock figure":"This object is not editable"}},{key:"figuresGroup",get:function(){return[].concat(FiguresListGroupTitleRowvue_type_script_lang_js_toConsumableArray(this.figure.instances),FiguresListGroupTitleRowvue_type_script_lang_js_toConsumableArray(this.figure.holes))}},{key:"isFigureGroupHidden",get:function(){return this.figuresGroup.every(function(e){return!e.visible})}}])&&FiguresListGroupTitleRowvue_type_script_lang_js_defineProperties(t.prototype,r),FiguresListGroupTitleRow}())||Ko,ti=(r("daad4957c024e5a1a5dd"),Object(p.a)(ei,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",{class:{disabled:e.isFigureGroupHidden},attrs:{id:"figure-"+e.figure.id},on:{mouseenter:function(t){return e.onFigureEnter()},mouseleave:function(t){return e.onFigureLeave()}}},[r("td",{staticClass:"padding"}),e._v(" "),r("td",{staticClass:"icn"},[e.figure.instances.length>0?r("a",{staticClass:"toggle-open",on:{click:function(t){return e.$emit("toggleOpen")}}},[e.open?r("i",{staticClass:"icon-triangle-down"}):r("i",{staticClass:"icon-triangle-right"})]):e._e()]),e._v(" "),r("td",{staticClass:"priority",attrs:{title:"Priority"}},[e.figure.priority?r("div",[r("span",[e._v("#")]),e._v(e._s(e.figure.priority)+"\n    ")]):e._e()]),e._v(" "),r("td",{staticClass:"cnt icn clickable",on:{click:function(t){return e.$emit("toggleOpen")}}},[e.figure.classId?r("div",{staticClass:"circle",style:{"background-color":e.classes[e.figure.classId].color}}):e._e()]),e._v(" "),r("td",{staticClass:"class-name clickable",on:{click:function(t){return e.$emit("toggleOpen")},contextmenu:function(t){return t.preventDefault(),e.onFigureRightClick(e.figure.id)}}},[e.isHole?r("span",[r("i",{staticClass:"zmdi zmdi-long-arrow-return zmdi-hc-flip-horizontal"}),e._v("\n      Hole\n    ")]):r("span",{attrs:{title:e.classes[e.figure.classId].title}},[e._v("\n      "+e._s(e.classes[e.figure.classId].title)+"\n    ")])]),e._v(" "),r("td",{staticClass:"area"},[e.areaPerc>1?r("span",[e._v("\n      "+e._s(e.areaPerc)+"%\n    ")]):e._e()]),e._v(" "),r("td",{staticClass:"icn"}),e._v(" "),r("td",{staticClass:"icn"},[r("el-button",{staticClass:"show-on-hover icon-btn black",attrs:{disabled:!e.$acl({action:e.ACL_ACTIONS.FIGURES.REMOVE,projectId:e.projectId,datasetId:e.id}),type:"text",title:"Delete all in the group"},on:{click:e.removeFiguresGroup}},[r("i",{staticClass:"icon-trash"})])],1),e._v(" "),r("td",{staticClass:"icn show-hide"},[r("a",{on:{click:e.toggleFiguresGroupHidden}},[r("i",{class:e.isFigureGroupHidden?"icon-eye-with-line":"icon-eye",attrs:{title:e.isFigureGroupHidden?"Show all in the group":"Hide all in the group"}})]),e._v(" "),r("i",{staticClass:"icon-edit show-on-active"})]),e._v(" "),r("td",{staticClass:"padding"})])},[],!1,null,"5348d698",null));ti.options.__file="FiguresListGroupTitleRow.vue";var ri,ni,oi,ii,ai=ti.exports;function FiguresListRowGroupvue_type_script_lang_js_typeof(e){return(FiguresListRowGroupvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FiguresListRowGroupvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FiguresListRowGroupvue_type_script_lang_js_getPrototypeOf(e){return(FiguresListRowGroupvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FiguresListRowGroupvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FiguresListRowGroupvue_type_script_lang_js_setPrototypeOf(e,t){return(FiguresListRowGroupvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var si=(ri=Object(u.a)({props:["figure","totalArea","isGroupItem","hasAtLeastOneChildren","isDragging"],components:{FiguresListRow:Zo,FiguresListGroupTitleRow:ai}}),ni=Object(u.b)("selected"),ri((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((ii=function(e){function FiguresListRowGroup(){var e,t,r,n,o;!function(e,t){if(!(e instanceof FiguresListRowGroup))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return this,t=!(r=(e=FiguresListRowGroupvue_type_script_lang_js_getPrototypeOf(FiguresListRowGroup)).call.apply(e,[this].concat(a)))||"object"!==FiguresListRowGroupvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?FiguresListRowGroupvue_type_script_lang_js_assertThisInitialized(this):r,!1,(o="isOpen")in(n=FiguresListRowGroupvue_type_script_lang_js_assertThisInitialized(t))?Object.defineProperty(n,o,{value:!1,enumerable:!0,configurable:!0,writable:!0}):n[o]=!1,t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FiguresListRowGroupvue_type_script_lang_js_setPrototypeOf(e,t)}(FiguresListRowGroup,s.a),t=FiguresListRowGroup,(r=[{key:"selectedChanged",value:function(){var e,t=this;this.selected&&!this.isOpen&&(null===(e=this.figure.instances)||void 0===e?void 0:e.length)&&this.figure.instances.find(function(e){return e.id===t.selected})&&(this.isOpen=!0)}},{key:"toggleOpen",value:function(){this.isOpen=!this.isOpen}},{key:"selected",get:function(){return this.$store.state.dataset.figures.selected}}])&&FiguresListRowGroupvue_type_script_lang_js_defineProperties(t.prototype,r),FiguresListRowGroup}()).prototype,"selectedChanged",[ni],Object.getOwnPropertyDescriptor(ii.prototype,"selectedChanged"),ii.prototype),oi=ii))||oi),ci=(r("d1b5f583f2b08718bd18"),Object(p.a)(si,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tbody",[!e.isGroupItem&&e.figure.instances.length?[r("figures-list-group-title-row",{attrs:{"total-area":e.totalArea,figure:e.figure,open:e.isOpen,"is-figures-group":!0,"is-dragging":e.isDragging},on:{toggleOpen:e.toggleOpen}}),e._v(" "),e.isOpen?[r("tr",{staticClass:"no-highlight"},[r("td",{staticClass:"table-list",attrs:{colspan:"13"}},[r("table",{staticClass:"list-body"},e._l(e.figure.instances,function(t){return r("figures-list-row-group",{key:t.id,attrs:{figure:t,"total-area":e.totalArea,"is-group-item":!0,"is-dragging":e.isDragging},on:{bindFigureToInstance:function(t){return e.$emit("bindFigureToInstance",t)}}})}),1)]),e._v(" "),r("td",{staticClass:"padding"})])]:e._e()]:[r("figures-list-row",{attrs:{"total-area":e.totalArea,figure:e.figure,open:e.isOpen,"is-group-item":e.isGroupItem,"has-at-least-one-children":e.hasAtLeastOneChildren,"is-dragging":e.isDragging},on:{toggleOpen:e.toggleOpen,bindFigureToInstance:function(t){return e.$emit("bindFigureToInstance",t)}}}),e._v(" "),e.isOpen?e._l(e.figure.holes,function(t){return r("figures-list-row",{key:t.id,attrs:{"total-area":e.totalArea,figure:t,"has-at-least-one-children":e.hasAtLeastOneChildren}})}):e._e()]],2)},[],!1,null,"36814e3e",null));ci.options.__file="FiguresListRowGroup.vue";var ui,li=ci.exports;function FiguresListvue_type_script_lang_js_typeof(e){return(FiguresListvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FiguresListvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function FiguresListvue_type_script_lang_js_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function FiguresListvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FiguresListvue_type_script_lang_js_getPrototypeOf(e){return(FiguresListvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FiguresListvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FiguresListvue_type_script_lang_js_setPrototypeOf(e,t){return(FiguresListvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FiguresListvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){FiguresListvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function FiguresListvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pi=Object(u.a)({components:{TableList:no,FiguresListRowGroup:li,Draggable:Vo.a},computed:FiguresListvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["currentImage"]),Object(y.c)("dataset/figures",["filteredHolesMap","filteredSidebarFigures","filteredSidebarFiguresWithoutInstances","filteredFiguresIds","currentFigure","filteredInstancesMap"]),Object(y.d)("dataset",["projectId","id"])),methods:FiguresListvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/figures",["setFiguresVisible","setFiguresLock","removeFigures","reorderFigures"]))})(ui=function(e){function FiguresList(){var e,t,r;!function(e,t){if(!(e instanceof FiguresList))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=FiguresListvue_type_script_lang_js_getPrototypeOf(FiguresList)).call.apply(e,[this].concat(o)))||"object"!==FiguresListvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?FiguresListvue_type_script_lang_js_assertThisInitialized(this):r,FiguresListvue_type_script_lang_js_defineProperty(FiguresListvue_type_script_lang_js_assertThisInitialized(t),"page",1),FiguresListvue_type_script_lang_js_defineProperty(FiguresListvue_type_script_lang_js_assertThisInitialized(t),"pageSize",100),FiguresListvue_type_script_lang_js_defineProperty(FiguresListvue_type_script_lang_js_assertThisInitialized(t),"TAG_TYPES",S.TAG_TYPES),FiguresListvue_type_script_lang_js_defineProperty(FiguresListvue_type_script_lang_js_assertThisInitialized(t),"isDragging",!1),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FiguresListvue_type_script_lang_js_setPrototypeOf(e,t)}(FiguresList,s.a),t=FiguresList,(r=[{key:"orderFigures",value:function(e){var t=e.moved;if(t){var r=t.newIndex,n=t.oldIndex,o=FiguresListvue_type_script_lang_js_toConsumableArray(this.list),i=(this.page-1)*this.pageSize,a=i+n,s=i+r,c=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(o.splice(a,1),1)[0];o.splice(s,0,c),this.reorderFigures({imageId:this.currentImage.id,figures:o.map(function(e){return Object(N.pick)(e,"id","priority")})}),o=null}}},{key:"toggleAllHidden",value:function(){this.setFiguresVisible({figuresIds:this.filteredFiguresIds,value:this.isAllHidden})}},{key:"toggleAllLocked",value:function(){this.setFiguresLock({figuresIds:this.filteredFiguresIds,value:this.isAllLocked})}},{key:"removeAll",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ro.a.confirm("This will permanently delete all objects. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"});case 2:return e.next=4,this.removeFigures({imageId:this.currentImage.id,figuresIds:this.filteredFiguresIds});case 4:case"end":return e.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){FiguresListvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){FiguresListvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"total",get:function(){return this.list.length}},{key:"totalArea",get:function(){return this.currentImage.area||0}},{key:"pagedList",get:function(){return this.list.slice((this.page-1)*this.pageSize,this.page*this.pageSize)}},{key:"hasAtLeastOneChildren",get:function(){return this.pagedList.some(function(e){return e.holes.length||e.instances.length})}},{key:"figures",get:function(){return this.$store.state.dataset.figures}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}},{key:"draggableOptions",get:function(){return{disabled:this.figures.filters.sidebar.orderBy!==Yo.a.PRIORITY}}},{key:"list",get:function(){var e=this,t={};return Object.keys(this.filteredInstancesMap).forEach(function(r){var n=[];e.filteredInstancesMap[r].forEach(function(t){n.push(FiguresListvue_type_script_lang_js_objectSpread({},t,{holes:e.filteredHolesMap[t.id]||[],instances:[]}))}),t[r]=n}),this.filteredSidebarFiguresWithoutInstances.map(function(r){var n=FiguresListvue_type_script_lang_js_objectSpread({},r,{holes:e.filteredHolesMap[r.id]||[]});return n.instances=t[r.id]?[n].concat(FiguresListvue_type_script_lang_js_toConsumableArray(t[r.id])):[],n})},set:function(e){}},{key:"isAllHidden",get:function(){return this.filteredSidebarFigures.every(function(e){return!e.visible})}},{key:"isAllLocked",get:function(){return this.filteredSidebarFigures.every(function(e){return!e.editable})}}])&&FiguresListvue_type_script_lang_js_defineProperties(t.prototype,r),FiguresList}())||ui,fi=(r("8b491dc126a3abe46131"),Object(p.a)(pi,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"figures-list"},[e.filteredSidebarFigures&&e.filteredSidebarFigures.length?r("table-list",{attrs:{header:!0}},[r("template",{slot:"head"},[r("th",{staticClass:"icn"}),e._v(" "),r("th",{staticClass:"priority"},[r("i",{staticClass:"icon-swap",attrs:{title:"Priority"}})]),e._v(" "),r("th",{staticClass:"cnt icn"},[r("i",{staticClass:"icon-round-brush",attrs:{title:"Class color"}})]),e._v(" "),r("th",{staticClass:"class-name"},[e._v("\n        Class\n      ")]),e._v(" "),r("th",{staticClass:"area"},[r("i",{staticClass:"icon-pie-chart",attrs:{title:"Area of image"}})]),e._v(" "),r("th",{staticClass:"icn"},[r("i",{staticClass:"icon-link",attrs:{title:"Link with other object"}})]),e._v(" "),r("th",{staticClass:"icn"},[e.filteredSidebarFigures.length?r("el-button",{staticClass:"icon-btn black",attrs:{disabled:!e.$acl({action:e.ACL_ACTIONS.FIGURES.REMOVE,projectId:e.projectId,datasetId:e.id}),type:"text"},on:{click:e.removeAll}},[r("i",{staticClass:"icon-trash",attrs:{title:"Delete all objects"}})]):e._e()],1),e._v(" "),r("th",{staticClass:"icn"},[e.filteredSidebarFigures.length?r("a",{on:{click:e.toggleAllHidden}},[r("el-tooltip",[r("i",{class:e.isAllHidden?"icon-eye-with-line":"icon-eye"}),e._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n              "+e._s(e.isAllHidden?"Show all":"Hide all")+" "),r("i",{staticClass:"icon-keyboard",staticStyle:{padding:"2px 3px 0 8px"}}),e._v(" CTRL + H\n            ")])])],1):e._e()])]),e._v(" "),r("draggable",{staticClass:"list-body",attrs:{element:"table",options:e.draggableOptions},on:{start:function(t){e.isDragging=!0},end:function(t){e.isDragging=!1},change:e.orderFigures},model:{value:e.list,callback:function(t){e.list=t},expression:"list"}},e._l(e.pagedList,function(t){return r("figures-list-row-group",{key:t.id,attrs:{figure:t,"total-area":e.totalArea,"has-at-least-one-children":e.hasAtLeastOneChildren,"is-dragging":e.isDragging},on:{bindFigureToInstance:function(t){return e.$emit("bindFigureToInstance",t)}}})}),1)],2):r("div",{staticClass:"objects-empty"},[r("div",[r("b",[e._v("No objects")])]),e._v("\n    Use left panel to add objects\n  ")]),e._v(" "),e.list.length>0&&e.list.length>e.pagedList.length?r("el-pagination",{attrs:{small:"","current-page":e.page,total:e.total,"page-size":e.pageSize,layout:"prev, pager, next"},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}}):e._e()],1)},[],!1,null,null,null));fi.options.__file="FiguresList.vue";var di,_i=fi.exports;function FiguresFiltervue_type_script_lang_js_typeof(e){return(FiguresFiltervue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FiguresFiltervue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FiguresFiltervue_type_script_lang_js_getPrototypeOf(e){return(FiguresFiltervue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FiguresFiltervue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FiguresFiltervue_type_script_lang_js_setPrototypeOf(e,t){return(FiguresFiltervue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FiguresFiltervue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){FiguresFiltervue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function FiguresFiltervue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yi=Object(u.a)({props:{isScene:Boolean,classes:Array,filter:Object,hasSettings:Boolean},computed:FiguresFiltervue_type_script_lang_js_objectSpread({},Object(y.c)("tags",["orderedTags"])),methods:FiguresFiltervue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/figures",["clearFilters"]))})(di=function(e){function FiguresFilter(){var e,t,r;!function(e,t){if(!(e instanceof FiguresFilter))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=FiguresFiltervue_type_script_lang_js_getPrototypeOf(FiguresFilter)).call.apply(e,[this].concat(o)))||"object"!==FiguresFiltervue_type_script_lang_js_typeof(r)&&"function"!=typeof r?FiguresFiltervue_type_script_lang_js_assertThisInitialized(this):r,FiguresFiltervue_type_script_lang_js_defineProperty(FiguresFiltervue_type_script_lang_js_assertThisInitialized(t),"mimicFilter",!0),FiguresFiltervue_type_script_lang_js_defineProperty(FiguresFiltervue_type_script_lang_js_assertThisInitialized(t),"orderOpts",[]),FiguresFiltervue_type_script_lang_js_defineProperty(FiguresFiltervue_type_script_lang_js_assertThisInitialized(t),"pointsCountFrom",t.filter.pointsCountFrom),FiguresFiltervue_type_script_lang_js_defineProperty(FiguresFiltervue_type_script_lang_js_assertThisInitialized(t),"pointsCountTo",t.filter.pointsCountTo),FiguresFiltervue_type_script_lang_js_defineProperty(FiguresFiltervue_type_script_lang_js_assertThisInitialized(t),"areaFrom",t.filter.areaFrom),FiguresFiltervue_type_script_lang_js_defineProperty(FiguresFiltervue_type_script_lang_js_assertThisInitialized(t),"areaTo",t.filter.areaTo),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FiguresFiltervue_type_script_lang_js_setPrototypeOf(e,t)}(FiguresFilter,s.a),t=FiguresFilter,(r=[{key:"created",value:function(){this.orderOpts=Object.values(Yo.a)}},{key:"isDisabled",get:function(){return this.isScene&&this.mimicFilter}}])&&FiguresFiltervue_type_script_lang_js_defineProperties(t.prototype,r),FiguresFilter}())||di,gi=Object(p.a)(yi,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"row",attrs:{layout:"row center-justify"}},[r("span",{attrs:{self:"center"}},[e._v("Classes")]),e._v(" "),r("div",{attrs:{self:"size-x1"}},[r("el-select",{attrs:{disabled:e.isDisabled,size:"small",value:e.filter.classes,multiple:"",placeholder:"Filter by class..."},on:{input:function(t){return e.$emit("change",{classes:t})}}},e._l(e.classes,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)]),e._v(" "),r("div",{staticClass:"row",attrs:{layout:"row center-justify"}},[r("span",{attrs:{self:"center"}},[e._v("Tags")]),e._v(" "),r("div",{attrs:{self:"size-x1"}},[r("el-select",{attrs:{size:"small",disabled:e.isDisabled,value:e.filter.tags,multiple:"",placeholder:"Filter by tags..."},on:{input:function(t){return e.$emit("change",{tags:t})}}},e._l(e.orderedTags,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1)]),e._v(" "),r("div",{staticClass:"row",attrs:{layout:"row center-justify"}},[r("span",{attrs:{self:"top"}},[e._v("Points count")]),e._v(" "),r("div",{attrs:{self:"size-x1"}},[r("el-radio-group",{attrs:{size:"small",disabled:e.isDisabled,value:e.filter.pointsCount},on:{input:function(t){return e.$emit("change",{pointsCount:t})}}},[r("el-radio",{attrs:{label:"any"}},[e._v("\n          Any\n        ")]),e._v(" "),r("el-radio",{attrs:{label:"some"}},[e._v("\n          Some\n        ")]),e._v(" "),r("el-radio",{attrs:{label:"range"}},[r("span",[e._v("Range")]),e._v("\n           \n          "),r("el-input",{directives:[{name:"numeric-input",rawName:"v-numeric-input"},{name:"throttle",rawName:"v-throttle.numeric",value:{prop:"pointsCountFrom"},expression:"{ prop: 'pointsCountFrom' }",modifiers:{numeric:!0}}],attrs:{disabled:"range"!==e.filter.pointsCount,size:"mini"},model:{value:e.pointsCountFrom,callback:function(t){e.pointsCountFrom=t},expression:"pointsCountFrom"}}),e._v("\n          -\n          "),r("el-input",{directives:[{name:"numeric-input",rawName:"v-numeric-input"},{name:"throttle",rawName:"v-throttle.numeric",value:{prop:"pointsCountTo"},expression:"{ prop: 'pointsCountTo' }",modifiers:{numeric:!0}}],attrs:{disabled:"range"!==e.filter.pointsCount,size:"mini"},model:{value:e.pointsCountTo,callback:function(t){e.pointsCountTo=t},expression:"pointsCountTo"}})],1)],1)],1)]),e._v(" "),r("div",{staticClass:"row",attrs:{layout:"row center-justify"}},[r("span",{attrs:{self:"center"}},[e._v("Area")]),e._v(" "),r("div",{attrs:{self:"size-x1"}},[r("el-radio-group",{attrs:{disabled:e.isDisabled,size:"small",value:e.filter.area},on:{input:function(t){return e.$emit("change",{area:t})}}},[r("el-radio",{attrs:{label:"any"}},[e._v("\n          Any\n        ")]),e._v(" "),r("el-radio",{attrs:{label:"hideArtifacts"}},[e._v("\n          Hide artifacts\n        ")]),e._v(" "),r("el-radio",{attrs:{label:"range"}},[r("span",[e._v("Range")]),e._v("\n           \n          "),r("el-input",{directives:[{name:"numeric-input",rawName:"v-numeric-input"},{name:"throttle",rawName:"v-throttle.numeric",value:{prop:"areaFrom"},expression:"{ prop: 'areaFrom' }",modifiers:{numeric:!0}}],attrs:{disabled:"range"!==e.filter.area,size:"mini"},model:{value:e.areaFrom,callback:function(t){e.areaFrom=t},expression:"areaFrom"}}),e._v("\n          -\n          "),r("el-input",{directives:[{name:"numeric-input",rawName:"v-numeric-input"},{name:"throttle",rawName:"v-throttle.numeric",value:{prop:"areaTo"},expression:"{ prop: 'areaTo' }",modifiers:{numeric:!0}}],attrs:{disabled:"range"!==e.filter.area,size:"mini"},model:{value:e.areaTo,callback:function(t){e.areaTo=t},expression:"areaTo"}})],1)],1)],1)]),e._v(" "),e.isScene?e._e():r("div",{staticClass:"row",attrs:{layout:"row center-justify"}},[r("span",{attrs:{self:"center"}},[e._v("Order by")]),e._v(" "),r("div",{attrs:{self:"size-x1"}},[r("el-select",{attrs:{disabled:e.isDisabled,size:"small",value:e.filter.orderBy,placeholder:"Order by..."},on:{input:function(t){return e.$emit("change",{orderBy:t})}}},e._l(e.orderOpts,function(t,n){return r("el-option",{key:n,attrs:{label:e._f("capitalize")(t),value:t}})}),1)],1)]),e._v(" "),e.isScene?r("div",{staticClass:"row",attrs:{layout:"row center-justify"}},[r("span",{attrs:{self:"center"}},[e._v("Use sidebar filter")]),e._v(" "),r("div",{attrs:{self:"size-x1"}},[r("el-checkbox",{on:{change:function(t){return e.$emit("mimicChange",e.mimicFilter)}},model:{value:e.mimicFilter,callback:function(t){e.mimicFilter=t},expression:"mimicFilter"}})],1)]):e._e(),e._v(" "),e.isScene?e._e():r("center",[r("el-button",{attrs:{size:"small",disabled:!e.hasSettings},on:{click:e.clearFilters}},[e._v("\n      Clear\n    ")])],1)],1)},[],!1,null,null,null);gi.options.__file="FiguresFilter.vue";var hi,bi=gi.exports;function TabFiltervue_type_script_lang_js_typeof(e){return(TabFiltervue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TabFiltervue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TabFiltervue_type_script_lang_js_getPrototypeOf(e){return(TabFiltervue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TabFiltervue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TabFiltervue_type_script_lang_js_setPrototypeOf(e,t){return(TabFiltervue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function TabFiltervue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vi=Object(u.a)({components:{FilterPopup:zn,FiguresFilter:bi},props:["classes","hasSettings"],methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){TabFiltervue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.b)("dataset/figures",["setFilter"]))})(hi=function(e){function TabedFilter(){var e,t,r;!function(e,t){if(!(e instanceof TabedFilter))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=TabFiltervue_type_script_lang_js_getPrototypeOf(TabedFilter)).call.apply(e,[this].concat(o)))||"object"!==TabFiltervue_type_script_lang_js_typeof(r)&&"function"!=typeof r?TabFiltervue_type_script_lang_js_assertThisInitialized(this):r,TabFiltervue_type_script_lang_js_defineProperty(TabFiltervue_type_script_lang_js_assertThisInitialized(t),"activeTab","sidebar"),TabFiltervue_type_script_lang_js_defineProperty(TabFiltervue_type_script_lang_js_assertThisInitialized(t),"isSceneMimic",!0),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TabFiltervue_type_script_lang_js_setPrototypeOf(e,t)}(TabedFilter,s.a),t=TabedFilter,(r=[{key:"onFilterChanged",value:function(e,t){var r=Object.assign({},this["".concat(e,"Filter")],t);this.setFilter({name:e,filter:r}),this.isSceneMimic&&"sidebar"===e&&this.setFilter({name:"scene",filter:r})}},{key:"onMimicChanged",value:function(e){this.isSceneMimic=e,e&&this.setFilter({name:"scene",filter:Object.assign({},this.sceneFilter)})}},{key:"sidebarFilter",get:function(){return this.$store.state.dataset.figures.filters.sidebar}},{key:"sceneFilter",get:function(){return this.$store.state.dataset.figures.filters.scene}}])&&TabFiltervue_type_script_lang_js_defineProperties(t.prototype,r),TabedFilter}())||hi,mi=Object(p.a)(vi,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("filter-popup",{attrs:{"has-settings":e.hasSettings,title:"Filter Objects"}},[r("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("el-tab-pane",{attrs:{label:"Sidebar",name:"sidebar"}},[r("figures-filter",{attrs:{filter:e.sidebarFilter,classes:e.classes,"has-settings":e.hasSettings},on:{change:function(t){return e.onFilterChanged("sidebar",t)}}})],1),e._v(" "),r("el-tab-pane",{attrs:{label:"Scene",name:"scene"}},[r("figures-filter",{attrs:{"is-scene":"",filter:e.sceneFilter,classes:e.classes},on:{change:function(t){return e.onFilterChanged("scene",t)},mimicChange:e.onMimicChanged}})],1)],1)],1)},[],!1,null,null,null);mi.options.__file="TabFilter.vue";var Oi,Pi,Ti,Si,ji=mi.exports;function Figuresvue_type_script_lang_js_typeof(e){return(Figuresvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Figuresvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Figuresvue_type_script_lang_js_getPrototypeOf(e){return(Figuresvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Figuresvue_type_script_lang_js_setPrototypeOf(e,t){return(Figuresvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Figuresvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Figuresvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function Figuresvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wi=(Oi=Object(u.a)({components:{FiguresList:_i,Panel:Xn,TabFilter:ji,FiguresNotification:Uo,BindFigureToInstancePopover:Fo,CloneFiguresFromImage:Bo},computed:Figuresvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/figures",["filteredSidebarFiguresWithoutInstances","orderedFigures","orderedFiguresWithoutHoles"]),Object(y.d)("dataset/figures",{loading:"loading",sidebarFilter:function(e){return e.filters.sidebar},sceneFilter:function(e){return e.filters.scene},currentFigureId:"selected"})),methods:Figuresvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/figures",["setFilter"]))}),Pi=Object(u.b)("orderedFigures"),Oi((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Si=function(e){function Figures(){return function(e,t){if(!(e instanceof Figures))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==Figuresvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Figuresvue_type_script_lang_js_getPrototypeOf(Figures).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Figuresvue_type_script_lang_js_setPrototypeOf(e,t)}(Figures,s.a),t=Figures,(r=[{key:"bindFigureToInstance",value:function(e){this.$refs["instance-selector"].open(e)}},{key:"figuresChanged",value:function(){var e=this;this.$nextTick(function(){e.$refs.panel.updateScrollbar()})}},{key:"storeClasses",get:function(){return this.$store.state.dataset.classes.all}},{key:"classes",get:function(){var e=this;return Object(N.flow)([function(){return e.orderedFigures.map(function(t){return t.classId?e.storeClasses[t.classId].title:null})},N.uniq,N.filter])()}},{key:"hasSettings",get:function(){return"any"!==this.sidebarFilter.pointsCount||0!==this.sidebarFilter.classes.length||0!==this.sidebarFilter.tags.length||"any"!==this.sidebarFilter.area||"any"!==this.sceneFilter.pointsCount||0!==this.sceneFilter.classes.length||0!==this.sceneFilter.tags.length||"any"!==this.sceneFilter.area}}])&&Figuresvue_type_script_lang_js_defineProperties(t.prototype,r),Figures}()).prototype,"figuresChanged",[Pi],Object.getOwnPropertyDescriptor(Si.prototype,"figuresChanged"),Si.prototype),Ti=Si))||Ti),Ii=Object(p.a)(wi,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("panel",{ref:"panel",attrs:{title:"Objects",icon:"icon-layers"}},[r("span",{attrs:{slot:"numbers"},slot:"numbers"},[e._v("\n    "+e._s(e.filteredSidebarFiguresWithoutInstances.length)+"\n    "),e.hasSettings?r("span",[e._v("\n      of  "+e._s(e.filteredSidebarFiguresWithoutInstances.length)+"\n    ")]):e._e(),e._v(" "),r("figures-notification")],1),e._v(" "),r("tab-filter",{attrs:{slot:"right",classes:e.classes,"has-settings":e.hasSettings},slot:"right"}),e._v(" "),r("clone-figures-from-image",{staticClass:"mr-10",attrs:{slot:"right"},slot:"right"}),e._v(" "),r("bind-figure-to-instance-popover",{ref:"instance-selector",attrs:{slot:"right"},slot:"right"}),e._v(" "),r("figures-list",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],on:{bindFigureToInstance:e.bindFigureToInstance}})],1)},[],!1,null,null,null);Ii.options.__file="Figures.vue";var Ei,Ci=Ii.exports;function FiguresSelectionCutvue_type_script_lang_js_typeof(e){return(FiguresSelectionCutvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FiguresSelectionCutvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FiguresSelectionCutvue_type_script_lang_js_getPrototypeOf(e){return(FiguresSelectionCutvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FiguresSelectionCutvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FiguresSelectionCutvue_type_script_lang_js_setPrototypeOf(e,t){return(FiguresSelectionCutvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FiguresSelectionCutvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){FiguresSelectionCutvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function FiguresSelectionCutvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ki=Object(u.a)({components:{FiguresList:_i,Panel:Xn,TableList:no},computed:FiguresSelectionCutvue_type_script_lang_js_objectSpread({},Object(y.c)("tools",["selectionCutFigures"])),methods:FiguresSelectionCutvue_type_script_lang_js_objectSpread({},Object(y.b)("tools",["setToolOptionTarget"]),Object(y.b)("dataset/figures",["setHoveredFigure","setShowHoveredFigure"]))})(Ei=function(e){function FiguresSelectionCut(){var e,t,r;!function(e,t){if(!(e instanceof FiguresSelectionCut))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=FiguresSelectionCutvue_type_script_lang_js_getPrototypeOf(FiguresSelectionCut)).call.apply(e,[this].concat(o)))||"object"!==FiguresSelectionCutvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?FiguresSelectionCutvue_type_script_lang_js_assertThisInitialized(this):r,FiguresSelectionCutvue_type_script_lang_js_defineProperty(FiguresSelectionCutvue_type_script_lang_js_assertThisInitialized(t),"page",1),FiguresSelectionCutvue_type_script_lang_js_defineProperty(FiguresSelectionCutvue_type_script_lang_js_assertThisInitialized(t),"pageSize",20),FiguresSelectionCutvue_type_script_lang_js_defineProperty(FiguresSelectionCutvue_type_script_lang_js_assertThisInitialized(t),"setHoveredFigureDelayed",Object(N.throttle)(t.setHoveredFigure,100)),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FiguresSelectionCutvue_type_script_lang_js_setPrototypeOf(e,t)}(FiguresSelectionCut,s.a),t=FiguresSelectionCut,(r=[{key:"isActive",value:function(e){return this.selection.option&&this.selection.option.target&&this.selection.option.target.figureId===e}},{key:"setTarget",value:function(e){this.setToolOptionTarget({tool:this.selection,value:{figureId:e,classId:null}})}},{key:"onFigureEnter",value:function(e){e.visible&&(this.setShowHoveredFigure(!0),this.setHoveredFigureDelayed(e.id))}},{key:"onFigureLeave",value:function(){this.setHoveredFigure(null)}},{key:"selection",get:function(){return this.$store.state.tools.all.selection}},{key:"classes",get:function(){return this.$store.state.dataset.classes.all}},{key:"pagedList",get:function(){return this.list.slice((this.page-1)*this.pageSize,this.page*this.pageSize)}},{key:"total",get:function(){return this.list.length}},{key:"list",get:function(){return this.selectionCutFigures}}])&&FiguresSelectionCutvue_type_script_lang_js_defineProperties(t.prototype,r),FiguresSelectionCut}())||Ei,Ai=(r("2b8dedd30f7336ab507b"),Object(p.a)(ki,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("panel",{attrs:{title:"Add to existing",icon:"icon-layers"}},[r("div",{staticClass:"figures-list"},[e.list.length?r("table-list",{attrs:{header:!0}},[r("template",{slot:"head"},[r("th",{staticClass:"cnt icn"},[r("i",{staticClass:"icon-round-brush",attrs:{title:"Class color"}})]),e._v(" "),r("th",{staticClass:"class-name"},[e._v("\n          Class\n        ")]),e._v(" "),r("th",{staticClass:"icn"}),e._v(" "),r("th",{staticClass:"icn"}),e._v(" "),r("th",{staticClass:"icn"}),e._v(" "),r("th",{staticClass:"icn"}),e._v(" "),r("th",{staticClass:"icn"})]),e._v(" "),r("table",{staticClass:"table-list"},[r("tbody",e._l(e.pagedList,function(t){return r("tr",{key:t.id,staticClass:"clickable",class:{active:e.isActive(t.id)},on:{click:function(r){return e.setTarget(t.id)},contextmenu:function(e){e.preventDefault()},mouseenter:function(r){return e.onFigureEnter(t)},mouseleave:function(r){return e.onFigureLeave(t)}}},[r("td",{staticClass:"cnt icn"},[r("div",{staticClass:"circle",style:{"background-color":e.classes[t.classId].color}})]),e._v(" "),r("td",{staticClass:"class-name"},[r("span",{attrs:{title:e.classes[t.classId].title}},[e._v("\n                "+e._s(e.classes[t.classId].title)+"\n              ")])])])}),0)])],2):e._e(),e._v(" "),e.list.length>0&&e.list.length>e.pagedList.length?r("el-pagination",{attrs:{small:"","current-page":e.page,total:e.total,"page-size":e.pageSize,layout:"prev, pager, next"},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}}):e._e()],1)])},[],!1,null,"fab6e792",null));Ai.options.__file="FiguresSelectionCut.vue";var Fi,xi=Ai.exports;function ClassesSelectionCutvue_type_script_lang_js_typeof(e){return(ClassesSelectionCutvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ClassesSelectionCutvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ClassesSelectionCutvue_type_script_lang_js_getPrototypeOf(e){return(ClassesSelectionCutvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ClassesSelectionCutvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ClassesSelectionCutvue_type_script_lang_js_setPrototypeOf(e,t){return(ClassesSelectionCutvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ClassesSelectionCutvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ClassesSelectionCutvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ClassesSelectionCutvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ri=Object(u.a)({components:{FiguresList:_i,Panel:Xn,TableList:no},computed:ClassesSelectionCutvue_type_script_lang_js_objectSpread({},Object(y.c)("tools",["selectionCutClasses"])),methods:ClassesSelectionCutvue_type_script_lang_js_objectSpread({},Object(y.b)("tools",["setToolOptionTarget"]))})(Fi=function(e){function ClassesSelectionCut(){var e,t,r;!function(e,t){if(!(e instanceof ClassesSelectionCut))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=ClassesSelectionCutvue_type_script_lang_js_getPrototypeOf(ClassesSelectionCut)).call.apply(e,[this].concat(o)))||"object"!==ClassesSelectionCutvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?ClassesSelectionCutvue_type_script_lang_js_assertThisInitialized(this):r,ClassesSelectionCutvue_type_script_lang_js_defineProperty(ClassesSelectionCutvue_type_script_lang_js_assertThisInitialized(t),"page",1),ClassesSelectionCutvue_type_script_lang_js_defineProperty(ClassesSelectionCutvue_type_script_lang_js_assertThisInitialized(t),"pageSize",20),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ClassesSelectionCutvue_type_script_lang_js_setPrototypeOf(e,t)}(ClassesSelectionCut,s.a),t=ClassesSelectionCut,(r=[{key:"isActive",value:function(e){return this.selection.option&&this.selection.option.target&&this.selection.option.target.classId===e}},{key:"setTarget",value:function(e){this.setToolOptionTarget({tool:this.selection,value:{classId:e,figureId:null}})}},{key:"selection",get:function(){return this.$store.state.tools.all.selection}},{key:"pagedList",get:function(){return this.list.slice((this.page-1)*this.pageSize,this.page*this.pageSize)}},{key:"total",get:function(){return this.list.length}},{key:"list",get:function(){return this.selectionCutClasses}}])&&ClassesSelectionCutvue_type_script_lang_js_defineProperties(t.prototype,r),ClassesSelectionCut}())||Fi,Li=(r("3687b1c204f6dd94bbc0"),Object(p.a)(Ri,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("panel",{attrs:{title:"Create new object",icon:"icon-layers"}},[r("div",{staticClass:"figures-list"},[e.list.length?r("table-list",{attrs:{header:!0}},[r("template",{slot:"head"},[r("th",{staticClass:"cnt icn"},[r("i",{staticClass:"icon-round-brush",attrs:{title:"Class color"}})]),e._v(" "),r("th",{staticClass:"class-name"},[e._v("\n          Class\n        ")]),e._v(" "),r("th",{staticClass:"icn"}),e._v(" "),r("th",{staticClass:"icn"}),e._v(" "),r("th",{staticClass:"icn"}),e._v(" "),r("th",{staticClass:"icn"}),e._v(" "),r("th",{staticClass:"icn"})]),e._v(" "),r("table",{staticClass:"table-list"},[r("tbody",e._l(e.pagedList,function(t){return r("tr",{key:t.id,staticClass:"clickable",class:{active:e.isActive(t.id)},on:{click:function(r){return e.setTarget(t.id)},contextmenu:function(e){e.preventDefault()}}},[r("td",{staticClass:"cnt icn"},[r("div",{staticClass:"circle",style:{"background-color":t.color}})]),e._v(" "),r("td",{staticClass:"class-name"},[r("span",{attrs:{title:t.title}},[e._v("\n                "+e._s(t.title)+"\n              ")])])])}),0)])],2):e._e(),e._v(" "),e.list.length>0&&e.list.length>e.pagedList.length?r("el-pagination",{attrs:{small:"","current-page":e.page,total:e.total,"page-size":e.pageSize,layout:"prev, pager, next"},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t}}}):e._e()],1)])},[],!1,null,"729c3b93",null));Li.options.__file="ClassesSelectionCut.vue";var Di,Gi,Bi=Li.exports;function HistoryListRowvue_type_script_lang_js_typeof(e){return(HistoryListRowvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HistoryListRowvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HistoryListRowvue_type_script_lang_js_getPrototypeOf(e){return(HistoryListRowvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HistoryListRowvue_type_script_lang_js_setPrototypeOf(e,t){return(HistoryListRowvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function HistoryListRowvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){HistoryListRowvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function HistoryListRowvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mi=(HistoryListRowvue_type_script_lang_js_defineProperty(Di={},Ve.a.init,"Initial state"),HistoryListRowvue_type_script_lang_js_defineProperty(Di,Ve.a.smart.value,"Smart annotation"),Di),zi=Object(u.a)({props:["row","id","index"],computed:HistoryListRowvue_type_script_lang_js_objectSpread({},Object(y.d)("dataset/figures",{history:"history",currentState:"currentStateVersion"})),methods:HistoryListRowvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/figures",["setStateFromHistory"]))})(Gi=function(e){function HistoryListRow(){return function(e,t){if(!(e instanceof HistoryListRow))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==HistoryListRowvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,HistoryListRowvue_type_script_lang_js_getPrototypeOf(HistoryListRow).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HistoryListRowvue_type_script_lang_js_setPrototypeOf(e,t)}(HistoryListRow,s.a),t=HistoryListRow,(r=[{key:"title",get:function(){return Mi[this.row.action]||Object(N.capitalize)(this.row.action.split("-").join(" "))}},{key:"isActive",get:function(){return this.id===this.history[this.currentState].id}},{key:"isDisabled",get:function(){return this.index>this.currentState}}])&&HistoryListRowvue_type_script_lang_js_defineProperties(t.prototype,r),HistoryListRow}())||Gi,Ni=(r("ffb296d7192495c92513"),Object(p.a)(zi,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",{staticClass:"history-row",class:{active:e.isActive,overwritten:e.isDisabled},on:{click:function(t){return e.setStateFromHistory(e.id)}}},[r("td",{staticClass:"padding"}),e._v(" "),r("td",{staticClass:"w100"},[r("span",{staticClass:"title"},[e._v("\n      "+e._s(e.title)+"\n    ")])]),e._v(" "),r("td",{staticClass:"padding"})])},[],!1,null,null,null));Ni.options.__file="HistoryListRow.vue";var Ui,Hi=Ni.exports;function HistoryListvue_type_script_lang_js_typeof(e){return(HistoryListvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HistoryListvue_type_script_lang_js_getPrototypeOf(e){return(HistoryListvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HistoryListvue_type_script_lang_js_setPrototypeOf(e,t){return(HistoryListvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vi=Object(u.a)({props:["list"],components:{TableList:no,HistoryListRow:Hi}})(Ui=function(e){function HistoryList(){return function(e,t){if(!(e instanceof HistoryList))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==HistoryListvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,HistoryListvue_type_script_lang_js_getPrototypeOf(HistoryList).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HistoryListvue_type_script_lang_js_setPrototypeOf(e,t)}(HistoryList,s.a),HistoryList}())||Ui,Yi=(r("231e23fa2725f4477d94"),Object(p.a)(Vi,function(){var e=this.$createElement,t=this._self._c||e;return t("table-list",{staticClass:"history-list"},[t("table",[t("tbody",this._l(this.list,function(e){return t("history-list-row",{key:e.id,attrs:{id:e.id,row:e,index:e.index}})}),1)])])},[],!1,null,null,null));Yi.options.__file="HistoryList.vue";var Ji,Wi,qi,Zi,$i=Yi.exports;function Historyvue_type_script_lang_js_typeof(e){return(Historyvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Historyvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Historyvue_type_script_lang_js_getPrototypeOf(e){return(Historyvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Historyvue_type_script_lang_js_setPrototypeOf(e,t){return(Historyvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Historyvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Historyvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function Historyvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qi=(Ji=Object(u.a)({components:{Panel:Xn,HistoryList:$i},computed:Historyvue_type_script_lang_js_objectSpread({},Object(y.d)("dataset/figures",{history:"history",historyVersion:"currentStateVersion"}),Object(y.c)("dataset/figures",{list:"historyList"})),methods:Historyvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/figures",["undoLastChange","redoLastChange"]))}),Wi=Object(u.b)("list"),Ji((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Zi=function(e){function History(){return function(e,t){if(!(e instanceof History))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==Historyvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Historyvue_type_script_lang_js_getPrototypeOf(History).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Historyvue_type_script_lang_js_setPrototypeOf(e,t)}(History,s.a),t=History,(r=[{key:"upgrade",value:function(){h.a.emit("upgrade")}},{key:"listChanged",value:function(){var e=this;this.$nextTick(function(){e.$refs.panel.updateScrollbar()})}}])&&Historyvue_type_script_lang_js_defineProperties(t.prototype,r),History}()).prototype,"listChanged",[Wi],Object.getOwnPropertyDescriptor(Zi.prototype,"listChanged"),Zi.prototype),qi=Zi))||qi),Ki=(r("e1f97d616faf251002cc"),Object(p.a)(Qi,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("panel",{ref:"panel",staticClass:"history",attrs:{title:"History",icon:"icon-back-in-time"}},[r("span",{attrs:{slot:"numbers"},slot:"numbers"},[r("span",[e._v("\n      "+e._s(e.history.length)+"\n    ")])]),e._v(" "),r("span",{staticClass:"btn-group",attrs:{slot:"right"},slot:"right"},[r("button",{staticClass:"btn",attrs:{disabled:0===e.historyVersion},on:{click:e.undoLastChange}},[r("el-tooltip",{attrs:{"open-delay":200}},[r("i",{staticClass:"zmdi zmdi-undo"}),e._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n          Undo last action "),r("i",{staticClass:"icon-keyboard",staticStyle:{padding:"2px 3px 0 8px"}}),e._v(" CTRL + Z\n        ")])])],1),e._v(" "),r("button",{staticClass:"btn",attrs:{disabled:e.historyVersion>=e.history.length-1},on:{click:e.redoLastChange}},[r("el-tooltip",{attrs:{"open-delay":200}},[r("i",{staticClass:"zmdi zmdi-redo"}),e._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n          Redo last action "),r("i",{staticClass:"icon-keyboard",staticStyle:{padding:"2px 3px 0 8px"}}),e._v(" CTRL + SHIFT + Z\n        ")])])],1)]),e._v(" "),r("history-list",{attrs:{list:e.list}})],1)},[],!1,null,"65ee031f",null));Ki.options.__file="History.vue";var Xi,ea,ta,ra,na,oa=Ki.exports;function ProjectTagsTypevue_type_script_lang_js_typeof(e){return(ProjectTagsTypevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ProjectTagsTypevue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ProjectTagsTypevue_type_script_lang_js_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){ProjectTagsTypevue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){ProjectTagsTypevue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function ProjectTagsTypevue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ProjectTagsTypevue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function ProjectTagsTypevue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ProjectTagsTypevue_type_script_lang_js_getPrototypeOf(e){return(ProjectTagsTypevue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ProjectTagsTypevue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ProjectTagsTypevue_type_script_lang_js_setPrototypeOf(e,t){return(ProjectTagsTypevue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ProjectTagsTypevue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ProjectTagsTypevue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var ia=(Xi=Object(u.a)({props:{type:String,values:[Array,Object],options:Object,disabled:Boolean}}),ea=Object(u.b)("values",{immediate:!0}),ta=Object(u.b)("options",{immediate:!0}),Xi((ProjectTagsTypevue_type_script_lang_js_applyDecoratedDescriptor((na=function(e){function ProjectTagsType(){var e,t,r,n;!function(e,t){if(!(e instanceof ProjectTagsType))throw new TypeError("Cannot call a class as a function")}(this);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return this,r=!(n=(e=ProjectTagsTypevue_type_script_lang_js_getPrototypeOf(ProjectTagsType)).call.apply(e,[this].concat(i)))||"object"!==ProjectTagsTypevue_type_script_lang_js_typeof(n)&&"function"!=typeof n?ProjectTagsTypevue_type_script_lang_js_assertThisInitialized(this):n,ProjectTagsTypevue_type_script_lang_js_defineProperty(ProjectTagsTypevue_type_script_lang_js_assertThisInitialized(r),"form",{options:{},values:[]}),ProjectTagsTypevue_type_script_lang_js_defineProperty(ProjectTagsTypevue_type_script_lang_js_assertThisInitialized(r),"errorMessage",""),ProjectTagsTypevue_type_script_lang_js_defineProperty(ProjectTagsTypevue_type_script_lang_js_assertThisInitialized(r),"PROJECT_TAGS_VALUE_TYPE",S.PROJECT_TAGS_VALUE_TYPE),ProjectTagsTypevue_type_script_lang_js_defineProperty(ProjectTagsTypevue_type_script_lang_js_assertThisInitialized(r),"PROJECT_TAGS_VALUE_TYPE_LABELS",(ProjectTagsTypevue_type_script_lang_js_defineProperty(t={},S.PROJECT_TAGS_VALUE_TYPE.NONE,"None"),ProjectTagsTypevue_type_script_lang_js_defineProperty(t,S.PROJECT_TAGS_VALUE_TYPE.ANY_NUMBER,"Number"),ProjectTagsTypevue_type_script_lang_js_defineProperty(t,S.PROJECT_TAGS_VALUE_TYPE.ANY_STRING,"Text"),ProjectTagsTypevue_type_script_lang_js_defineProperty(t,S.PROJECT_TAGS_VALUE_TYPE.ONE_OF_STRING,"One of"),t)),r}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ProjectTagsTypevue_type_script_lang_js_setPrototypeOf(e,t)}(ProjectTagsType,s.a),t=ProjectTagsType,(r=[{key:"isValid",value:function(e){var t=!0;return e||(t=!1),this.form.values.find(function(t){return!t.isEdit&&t.value===e})&&(t=!1,this.errorMessage='Value "'.concat(e,'" already exist')),t&&(this.errorMessage=""),t}},{key:"created",value:function(){this.values||this.$emit("update:values",[])}},{key:"valuesChanged",value:function(e){this.form.values=(e||[]).map(function(e){return{value:"".concat(e),isEdit:!1}})}},{key:"optionsChanged",value:function(e){this.form.options=ProjectTagsTypevue_type_script_lang_js_objectSpread({},this.type?S.PROJECT_TAGS_VALUE_TYPE_OPTIONS[this.type]:{},e)}},{key:"onInputConfirm",value:function(){var e=ProjectTagsTypevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.isValid(this.form.values[e].value)){r.next=2;break}return r.abrupt("return");case 2:this.updateValues(this.form.values.length<=this.values.length&&this.disabled,function(){return t.$emit("update:values",t.form.values.map(function(e){return e.value}))});case 3:case"end":return r.stop()}},_callee,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){this.form.values.push({value:"",isEdit:!0})}},{key:"updateValues",value:function(){var e=ProjectTagsTypevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,r=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=r.length>0&&void 0!==r[0]&&r[0],t=r.length>1?r[1]:void 0,n.prev=2,!e){n.next=6;break}return n.next=6,Ro.a.confirm("You have changed existing values: affected tags will be updated. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"});case 6:t(),e&&this.$emit("force-save"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),this.clearEdit();case 13:case"end":return n.stop()}},_callee2,this,[[2,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"updateOptions",value:function(e){this.$emit("update:options",ProjectTagsTypevue_type_script_lang_js_objectSpread({},this.form.options,e))}},{key:"remove",value:function(){var e=ProjectTagsTypevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:this.updateValues(this.disabled,function(){return t.$emit("update:values",t.form.values.map(function(e){return e.value}).filter(function(t,r){return r!==e}))});case 1:case"end":return r.stop()}},_callee3,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"clearEdit",value:function(){this.valuesChanged(this.values),this.errorMessage=""}},{key:"isEdit",get:function(){return this.form.values.some(function(e){return e.isEdit})}}])&&ProjectTagsTypevue_type_script_lang_js_defineProperties(t.prototype,r),ProjectTagsType}()).prototype,"valuesChanged",[ea],Object.getOwnPropertyDescriptor(na.prototype,"valuesChanged"),na.prototype),ProjectTagsTypevue_type_script_lang_js_applyDecoratedDescriptor(na.prototype,"optionsChanged",[ta],Object.getOwnPropertyDescriptor(na.prototype,"optionsChanged"),na.prototype),ra=na))||ra),aa=(r("56c5b36968b64be34912"),Object(p.a)(ia,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"project-tags-type"},[r("el-radio-group",{attrs:{value:e.type,disabled:e.disabled},on:{input:function(t){return e.$emit("update:type",t)}}},e._l(e.PROJECT_TAGS_VALUE_TYPE,function(t){return r("el-radio",{key:t,attrs:{label:t}},[e._v("\n      "+e._s(e.PROJECT_TAGS_VALUE_TYPE_LABELS[t])+"\n    ")])}),1),e._v(" "),e.type===e.PROJECT_TAGS_VALUE_TYPE.ONE_OF_STRING?r("div",{staticClass:"box-wrapper"},[e.form.values.length>0?r("table",e._l(e.form.values,function(t,n){return r("tr",{key:n},[r("td",[e._v(e._s(n+1))]),e._v(" "),r("td",{attrs:{width:"100%"}},[t.isEdit?r("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{autofocus:!0,size:"mini"},nativeOn:{keydown:function(t){if("keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault(),t.stopPropagation()},keyup:function(t){return"keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),t.stopPropagation(),e.onInputConfirm(n))}},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"tag.value"}}):r("span",[e._v(e._s(t.value))])],1),e._v(" "),r("td",[t.isEdit?[r("el-button",{staticClass:"action-icon-btn",attrs:{size:"small",disabled:!e.isValid(t.value)},on:{click:function(t){return e.onInputConfirm(n)}}},[r("i",{staticClass:"zmdi zmdi-check"})]),e._v(" "),r("el-button",{staticClass:"action-icon-btn",attrs:{size:"small"},on:{click:function(t){return e.clearEdit(n)}}},[r("i",{staticClass:"zmdi zmdi-close"})])]:[r("el-button",{staticClass:"action-icon-btn",attrs:{size:"small",disabled:t.isEdit!==e.isEdit},on:{click:function(e){t.isEdit=!0}}},[r("i",{staticClass:"zmdi zmdi-edit"})]),e._v(" "),r("el-button",{staticClass:"action-icon-btn",attrs:{size:"small",disabled:t.isEdit!==e.isEdit},on:{click:function(t){return e.remove(n)}}},[r("i",{staticClass:"zmdi zmdi-delete"})])]],2)])}),0):r("div",{staticClass:"text-muted"},[e._v("\n      Add at least one value for the tag\n    ")]),e._v(" "),r("div",{staticClass:"mt10"},[e.errorMessage?r("div",{staticClass:"el-form-item__error custom-error"},[e._v("\n        "+e._s(e.errorMessage)+"\n      ")]):e._e(),e._v(" "),r("el-button",{attrs:{size:"small",disabled:e.isEdit},on:{click:e.add}},[r("i",{staticClass:"zmdi zmdi-plus mr5"}),e._v(" Add allowed value\n      ")])],1)]):e.type===e.PROJECT_TAGS_VALUE_TYPE.ANY_NUMBER?r("div",[r("el-checkbox",{attrs:{value:e.form.options.autoIncrement},on:{input:function(t){return e.updateOptions({autoIncrement:t})}}},[e._v("\n      Auto increment\n    ")])],1):e._e()],1)},[],!1,null,null,null));aa.options.__file="ProjectTagsType.vue";var sa,ca,ua,la,pa,fa=aa.exports,da=r("0137df683cb4c701ae49");function EditTagvue_type_script_lang_js_typeof(e){return(EditTagvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EditTagvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EditTagvue_type_script_lang_js_getPrototypeOf(e){return(EditTagvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EditTagvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EditTagvue_type_script_lang_js_setPrototypeOf(e,t){return(EditTagvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function EditTagvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function EditTagvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _a=(sa=Object(u.a)({components:{"color-picker":B.Sketch,JoiForm:Q,ProjectTagsType:fa},props:["value"],computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){EditTagvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.c)("dataset",["projectHotkeys"]),Object(y.c)("dataset/classes",{classesList:"orderedClasses"}))}),ca=Object(u.b)("form.settings.values"),ua=Object(u.b)("form.settings.applicableType"),sa((EditTagvue_type_script_lang_js_applyDecoratedDescriptor((pa=function(e){function EditTag(){var e,t,r;!function(e,t){if(!(e instanceof EditTag))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=EditTagvue_type_script_lang_js_getPrototypeOf(EditTag)).call.apply(e,[this].concat(o)))||"object"!==EditTagvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?EditTagvue_type_script_lang_js_assertThisInitialized(this):r,EditTagvue_type_script_lang_js_defineProperty(EditTagvue_type_script_lang_js_assertThisInitialized(t),"isNew",!1),EditTagvue_type_script_lang_js_defineProperty(EditTagvue_type_script_lang_js_assertThisInitialized(t),"colorPicker",{hex:""}),EditTagvue_type_script_lang_js_defineProperty(EditTagvue_type_script_lang_js_assertThisInitialized(t),"schema",Object.freeze(da.a)),EditTagvue_type_script_lang_js_defineProperty(EditTagvue_type_script_lang_js_assertThisInitialized(t),"form",{}),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EditTagvue_type_script_lang_js_setPrototypeOf(e,t)}(EditTag,s.a),t=EditTag,(r=[{key:"hotkeyChange",value:function(e){this.form.hotkey=e.toUpperCase()}},{key:"updateSettings",value:function(){this.$emit("input",this.form),this.$emit("save",this.form,!0),this.$message.success("Settings updated")}},{key:"colorPickerChanged",value:function(e){this.colorPicker=e,this.form.color=this.colorPicker.hex}},{key:"saveForm",value:function(){this.$emit("input",this.form),this.$emit("save",this.form)}},{key:"valuesChanged",value:function(){this.$refs.form&&this.$refs.form.validateField("settings")}},{key:"applicableTypeChange",value:function(){this.form.settings.applicableType!==S.TAG_APPLICABLE_TYPES.OBJECTS_ONLY&&(this.form.settings.classes=[])}},{key:"created",value:function(){if(this.form=Object(N.clone)(this.value),this.schema=Object.freeze(Object(z.HotkeySchemaModifier)(da.a,this.projectHotkeys)),!this.form.color){this.isNew=!0,this.$set(this.form.settings,"values",[]),this.$set(this.form.settings,"options",{});var e="#".concat(Object(j.e)());this.form.color=e,this.colorPicker.hex=e}this.form.settings.applicableType||this.$set(this.form.settings,"applicableType",S.TAG_APPLICABLE_TYPES.ALL),this.form.settings.classes||this.$set(this.form.settings,"classes",[])}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"canCreate",get:function(){var e=this.dataset,t=e.groupId,r=e.workspaceId,n=e.projectId,o=e.id;return this.$acl({action:S.ACL_ACTIONS.IMAGES.UPDATE,teamId:t,workspaceId:r,projectId:n,datasetId:o})}},{key:"applicableTypeOptions",get:function(){return Object.values(S.TAG_APPLICABLE_TYPES).map(function(e){return{key:e,label:e===S.TAG_APPLICABLE_TYPES.ALL?"Images and objects":Object(N.upperFirst)(Object(N.snakeCase)(e).split("_").join(" "))}})}},{key:"canSelectClasses",get:function(){return this.form.settings.applicableType===S.TAG_APPLICABLE_TYPES.OBJECTS_ONLY}}])&&EditTagvue_type_script_lang_js_defineProperties(t.prototype,r),EditTag}()).prototype,"valuesChanged",[ca],Object.getOwnPropertyDescriptor(pa.prototype,"valuesChanged"),pa.prototype),EditTagvue_type_script_lang_js_applyDecoratedDescriptor(pa.prototype,"applicableTypeChange",[ua],Object.getOwnPropertyDescriptor(pa.prototype,"applicableTypeChange"),pa.prototype),la=pa))||la),ya=(r("78226668d0f593834bf3"),Object(p.a)(_a,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("joi-form",{ref:"form",staticClass:"edit-tag-form",attrs:{schema:e.schema,model:e.form,"label-width":"70px","label-position":"left"},on:{submit:e.saveForm}},[r("el-form-item",{attrs:{prop:"title",label:"Title",required:""}},[r("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{autofocus:!0,size:"small",placeholder:"Tag name"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("el-form-item",{staticClass:"hotkey-input",attrs:{prop:"hotkey",label:"Hotkey"}},[r("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",value:e.form.hotkey},on:{input:e.hotkeyChange}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"color",label:"Color",required:""}},[r("el-popover",{ref:"colorpopover",attrs:{placement:"top",trigger:"click"}},[r("color-picker",{attrs:{value:e.colorPicker},on:{input:e.colorPickerChanged}})],1),e._v(" "),r("div",{staticClass:"color-box"},[r("el-input",{directives:[{name:"popover",rawName:"v-popover:colorpopover",arg:"colorpopover"}],staticClass:"color-input",attrs:{size:"small"},model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}}),e._v(" "),r("div",{staticClass:"color-indicator",style:{"background-color":e.form.color}})],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"settings.applicableType",label:"Applicable to"}},[r("el-select",{model:{value:e.form.settings.applicableType,callback:function(t){e.$set(e.form.settings,"applicableType",t)},expression:"form.settings.applicableType"}},e._l(e.applicableTypeOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.key}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"settings.classes",label:"Classes"}},[r("el-select",{attrs:{multiple:"",placeholder:"Select tag classes",disabled:!e.canSelectClasses},model:{value:e.form.settings.classes,callback:function(t){e.$set(e.form.settings,"classes",t)},expression:"form.settings.classes"}},e._l(e.classesList,function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"settings",label:"Type",required:""}},[r("project-tags-type",{attrs:{type:e.form.settings.type,values:e.form.settings.values,options:e.form.settings.options,disabled:!e.isNew},on:{"update:type":function(t){return e.$set(e.form.settings,"type",t)},"update:values":function(t){return e.$set(e.form.settings,"values",t)},"update:options":function(t){return e.$set(e.form.settings,"options",t)},"force-save":e.updateSettings}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{size:"small",type:"primary","native-type":"submit",disabled:!e.canCreate}},[e._v("\n      Save\n    ")]),e._v(" "),r("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n      Cancel\n    ")])],1)],1)},[],!1,null,null,null));ya.options.__file="EditTag.vue";var ga,ha=ya.exports;function TagsListvue_type_script_lang_js_typeof(e){return(TagsListvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TagsListvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TagsListvue_type_script_lang_js_getPrototypeOf(e){return(TagsListvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TagsListvue_type_script_lang_js_setPrototypeOf(e,t){return(TagsListvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ba=Object(u.a)({props:["tags","filter","showValue","showSingleTag"]})(ga=function(e){function TagsList(){return function(e,t){if(!(e instanceof TagsList))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==TagsListvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,TagsListvue_type_script_lang_js_getPrototypeOf(TagsList).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TagsListvue_type_script_lang_js_setPrototypeOf(e,t)}(TagsList,s.a),t=TagsList,(r=[{key:"isHighlighted",value:function(e){return this.filter===e.title}},{key:"toggle",value:function(e){window.document.activeElement.blur(),this.$emit("switchTag",e)}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"filteredList",get:function(){var e=this;return this.tags.find(function(e){return!e.title})?[]:this.tags.filter(function(t){return t.title.toLowerCase().includes(e.filter.toLowerCase())})}},{key:"total",get:function(){return this.tags.length}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}},{key:"showValueNorm",get:function(){var e=this;return"function"!=typeof this.showValue?function(){return!!e.showValue}:this.showValue}}])&&TagsListvue_type_script_lang_js_defineProperties(t.prototype,r),TagsList}())||ga,va=(r("70a4e2f8e50a91194d59"),Object(p.a)(ba,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("table",[e.showSingleTag?e._e():r("tr",[e._m(0),e._v(" "),r("th"),e._v(" "),r("th",[e._v("Tag")]),e._v(" "),r("th",[e._v("Value")]),e._v(" "),r("th",{staticClass:"hotkey"},[e._v("\n      Hotkey\n    ")])]),e._v(" "),e._l(e.filteredList,function(t){return r("tr",{key:t.id,class:{highlighted:e.isHighlighted(t)&&!e.showSingleTag}},[r("td",[r("el-checkbox",{staticClass:"small",attrs:{checked:t.selected,value:t.selected,disabled:!e.$acl({action:e.ACL_ACTIONS.FIGURES.UPDATE,teamId:e.dataset.groupId,workspaceId:e.dataset.workspaceId,projectId:e.dataset.projectId,datasetId:e.dataset.id})},on:{change:function(r){return e.toggle(t.id)}}})],1),e._v(" "),r("td",[r("span",{staticClass:"circle",style:{backgroundColor:t.color}})]),e._v(" "),r("td",{staticClass:"title"},[r("div",[e._v(e._s(t.title))])]),e._v(" "),r("td",{staticClass:"value"},[t.selected&&e.showValueNorm(t)?r("span",{on:{click:function(r){return e.$emit("tagValue",t)}}},[t.value?r("div",[e._v(e._s(t.value))]):r("div",[e._v("-")]),e._v(" "),r("i",{staticClass:"zmdi zmdi-edit"})]):e._e()]),e._v(" "),r("td",{staticClass:"hotkey"},[t.hotkey?r("span",[e._v(e._s(t.hotkey))]):e._e()])])})],2)},[function(){var e=this.$createElement,t=this._self._c||e;return t("th",{staticStyle:{"text-align":"center"}},[t("i",{staticClass:"zmdi zmdi-power"})])}],!1,null,"7d7dacd3",null));va.options.__file="TagsList.vue";var ma,Oa,Pa,Ta,Sa,ja=va.exports;function EditTagValueFormvue_type_script_lang_js_typeof(e){return(EditTagValueFormvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EditTagValueFormvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EditTagValueFormvue_type_script_lang_js_getPrototypeOf(e){return(EditTagValueFormvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EditTagValueFormvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EditTagValueFormvue_type_script_lang_js_setPrototypeOf(e,t){return(EditTagValueFormvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function EditTagValueFormvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EditTagValueFormvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var wa=new Set([S.PROJECT_TAGS_VALUE_TYPE.ANY_STRING,S.PROJECT_TAGS_VALUE_TYPE.ANY_NUMBER]),Ia=new Set([S.PROJECT_TAGS_VALUE_TYPE.ONE_OF_STRING]),Ea=(ma=Object(u.a)({props:{tagValue:[String,Number],settings:Object,teamId:Number,workspaceId:Number,projectId:Number,datasetId:Number,checkAcl:{type:Boolean,default:!0},btnSize:{type:String,default:"small"}},components:{JoiForm:Q}}),Oa=Object(u.b)("settings",{immediate:!0}),Pa=Object(u.b)("tagValue",{immediate:!0}),ma((EditTagValueFormvue_type_script_lang_js_applyDecoratedDescriptor((Sa=function(e){function EditTagValueForm(){var e,t,r;!function(e,t){if(!(e instanceof EditTagValueForm))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=EditTagValueFormvue_type_script_lang_js_getPrototypeOf(EditTagValueForm)).call.apply(e,[this].concat(o)))||"object"!==EditTagValueFormvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?EditTagValueFormvue_type_script_lang_js_assertThisInitialized(this):r,EditTagValueFormvue_type_script_lang_js_defineProperty(EditTagValueFormvue_type_script_lang_js_assertThisInitialized(t),"schema",Object.freeze({})),EditTagValueFormvue_type_script_lang_js_defineProperty(EditTagValueFormvue_type_script_lang_js_assertThisInitialized(t),"form",{value:""}),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EditTagValueFormvue_type_script_lang_js_setPrototypeOf(e,t)}(EditTagValueForm,s.a),t=EditTagValueForm,(r=[{key:"settingsChanged",value:function(){var e={};this.settings.type===S.PROJECT_TAGS_VALUE_TYPE.ANY_STRING||this.settings.type===S.PROJECT_TAGS_VALUE_TYPE.ONE_OF_STRING?e=U.default.string().required():this.settings.type===S.PROJECT_TAGS_VALUE_TYPE.ANY_NUMBER&&(e=U.default.number().required()),this.schema=Object.freeze({value:e}),this.form.value=this.tagValue}},{key:"tagValueChanged",value:function(){this.form.value!==this.tagValue&&(this.form.value=this.tagValue)}},{key:"PROJECT_TAGS_VALUE_TYPE",get:function(){return S.PROJECT_TAGS_VALUE_TYPE}},{key:"isAny",get:function(){return wa.has(this.settings.type)}},{key:"isOneOf",get:function(){return Ia.has(this.settings.type)}},{key:"canSave",get:function(){var e=this.teamId,t=this.workspaceId,r=this.projectId,n=this.datasetId;return!!this.form.value&&(!this.checkAcl||this.$acl({action:S.ACL_ACTIONS.FIGURES.UPDATE,teamId:e,workspaceId:t,projectId:r,datasetId:n}))}}])&&EditTagValueFormvue_type_script_lang_js_defineProperties(t.prototype,r),EditTagValueForm}()).prototype,"settingsChanged",[Oa],Object.getOwnPropertyDescriptor(Sa.prototype,"settingsChanged"),Sa.prototype),EditTagValueFormvue_type_script_lang_js_applyDecoratedDescriptor(Sa.prototype,"tagValueChanged",[Pa],Object.getOwnPropertyDescriptor(Sa.prototype,"tagValueChanged"),Sa.prototype),Ta=Sa))||Ta),Ca=Object(p.a)(Ea,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("joi-form",{attrs:{"label-position":"top",schema:e.schema,model:e.form},on:{submit:function(t){return e.$emit("submit",e.form.value)}}},[r("div",[r("label",[e._v("Enter a new value for the tag:")])]),e._v(" "),r("el-form-item",{attrs:{prop:"value",required:""}},[e.isAny?r("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{autofocus:!0},nativeOn:{keydown:function(t){return"keyCode"in t&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("close")}},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}}):e.isOneOf?r("el-select",{model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}},e._l(e.settings.values,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}),1):e._e()],1),e._v(" "),r("center",[r("el-button",{attrs:{"native-type":"submit",type:"primary",size:e.btnSize,disabled:!e.canSave}},[e._v("\n      Save\n    ")]),e._v(" "),r("el-button",{attrs:{size:e.btnSize},on:{click:function(t){return e.$emit("close")}}},[e._v("\n      Cancel\n    ")])],1)],1)},[],!1,null,null,null);Ca.options.__file="EditTagValueForm.vue";var ka,Aa,Fa,xa,Ra=Ca.exports;function EditTagValuevue_type_script_lang_js_typeof(e){return(EditTagValuevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EditTagValuevue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EditTagValuevue_type_script_lang_js_getPrototypeOf(e){return(EditTagValuevue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EditTagValuevue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EditTagValuevue_type_script_lang_js_setPrototypeOf(e,t){return(EditTagValuevue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var La=(ka=Object(u.a)({props:{data:[String,Number],settings:Object,formVisible:Boolean},components:{EditTagValueForm:Ra}}),Aa=Object(u.b)("data",{immediate:!0}),ka((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((xa=function(e){function EditTagValue(){var e,t,r,n,o;!function(e,t){if(!(e instanceof EditTagValue))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return this,t=!(r=(e=EditTagValuevue_type_script_lang_js_getPrototypeOf(EditTagValue)).call.apply(e,[this].concat(a)))||"object"!==EditTagValuevue_type_script_lang_js_typeof(r)&&"function"!=typeof r?EditTagValuevue_type_script_lang_js_assertThisInitialized(this):r,"",(o="tagValue")in(n=EditTagValuevue_type_script_lang_js_assertThisInitialized(t))?Object.defineProperty(n,o,{value:"",enumerable:!0,configurable:!0,writable:!0}):n[o]="",t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EditTagValuevue_type_script_lang_js_setPrototypeOf(e,t)}(EditTagValue,s.a),t=EditTagValue,(r=[{key:"dataChanged",value:function(){this.tagValue=this.data}},{key:"dataset",get:function(){return this.$store.state.dataset}}])&&EditTagValuevue_type_script_lang_js_defineProperties(t.prototype,r),EditTagValue}()).prototype,"dataChanged",[Aa],Object.getOwnPropertyDescriptor(xa.prototype,"dataChanged"),xa.prototype),Fa=xa))||Fa),Da=(r("094ff0a978f84b534362"),Object(p.a)(La,function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.formVisible?r("div",[r("edit-tag-value-form",{attrs:{settings:e.settings,"tag-value":e.tagValue,"team-id":e.dataset.groupId,"workspace-id":e.dataset.workspaceId,"project-id":e.dataset.projectId,"dataset-id":e.dataset.id},on:{close:function(t){return e.$emit("close")},submit:function(t){return e.$emit("save",t)}}})],1):e._e()},[],!1,null,null,null));Da.options.__file="EditTagValue.vue";var Ga,Ba,Ma,za,Na,Ua,Ha,Va=Da.exports;function TagsTabvue_type_script_lang_js_typeof(e){return(TagsTabvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TagsTabvue_type_script_lang_js_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function TagsTabvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function TagsTabvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TagsTabvue_type_script_lang_js_getPrototypeOf(e){return(TagsTabvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TagsTabvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TagsTabvue_type_script_lang_js_setPrototypeOf(e,t){return(TagsTabvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function TagsTabvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function TagsTabvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){TagsTabvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function TagsTabvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ya=(Ga=Object(u.a)({props:["isFigure","mode","showFilter","filterTitle","filteredTags"],components:{TagsList:ja,EditTagValue:Va},computed:TagsTabvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",{image:"currentImage"}),Object(y.c)("tags",["orderedTags","selectedTagFigure","imagesTags","figuresTags"]),Object(y.d)("tags",["selected"])),methods:TagsTabvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset",["figures/addTag","figures/updateTag","figures/removeTag","images/addTag","images/updateTag","images/removeTag"]),Object(y.b)("tags",["updateTag","deleteTag","selectTag"]))}),Ba=Object(u.b)("valueDialogVisible"),Ma=Object(u.b)("currentTagId"),za=Object(u.b)("selected",{immediate:!0,deep:!0}),Na=Object(u.b)("orderedTags"),Ga((TagsTabvue_type_script_lang_js_applyDecoratedDescriptor((Ha=function(e){function TagsTab(){var e,t,r;!function(e,t){if(!(e instanceof TagsTab))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=TagsTabvue_type_script_lang_js_getPrototypeOf(TagsTab)).call.apply(e,[this].concat(o)))||"object"!==TagsTabvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?TagsTabvue_type_script_lang_js_assertThisInitialized(this):r,TagsTabvue_type_script_lang_js_defineProperty(TagsTabvue_type_script_lang_js_assertThisInitialized(t),"ACL_ACTIONS",S.ACL_ACTIONS),TagsTabvue_type_script_lang_js_defineProperty(TagsTabvue_type_script_lang_js_assertThisInitialized(t),"filter",""),TagsTabvue_type_script_lang_js_defineProperty(TagsTabvue_type_script_lang_js_assertThisInitialized(t),"currentTagId",null),TagsTabvue_type_script_lang_js_defineProperty(TagsTabvue_type_script_lang_js_assertThisInitialized(t),"valueDialogVisible",!1),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TagsTabvue_type_script_lang_js_setPrototypeOf(e,t)}(TagsTab,s.a),t=TagsTab,(r=[{key:"getStoreNS",value:function(e){return e.figureId?"figures":"images"}},{key:"openValueDialog",value:function(e){this.currentTagId=e.id}},{key:"requireValue",value:function(e){return e.settings.type!==S.PROJECT_TAGS_VALUE_TYPE.NONE&&!(!e.value&&e.settings.type===S.PROJECT_TAGS_VALUE_TYPE.ANY_NUMBER&&e.settings.options.autoIncrement)}},{key:"showValue",value:function(e){return e.settings.type!==S.PROJECT_TAGS_VALUE_TYPE.NONE}},{key:"switchTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={imageId:t.imageId||this.imageId,figureId:t.figureId||this.figureId,tagId:e},n=this.getStoreNS(r);this.currentObject.tags.find(function(t){return t.id===e})?(this["".concat(n,"/removeTag")](r),this.selectPlusTag()):this.addTag(e)}},{key:"addTag",value:function(e){var t=this.tagsById.get(e);t&&(this.requireValue(t)?this.currentTagId=e:(this.upsertTag(e),this.currentTagId=null,this.selectPlusTag()))}},{key:"upsertTag",value:function(e,t){var r={imageId:this.imageId,figureId:this.figureId,tagId:e,value:t},n=this.currentObject.tags.find(function(t){return t.id===e})?"updateTag":"addTag",o=this.getStoreNS(r);this["".concat(o,"/").concat(n)](r)}},{key:"editTag",value:function(e){this.mode="edit",this.form=Object(N.pick)(this.allowedTags.find(function(t){return t.id===e}),["id","title","color","hotkey","settings"])}},{key:"deleteProjectTag",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ro.a.confirm('This action will remove all "'.concat(e.title,'" tags from the project. Continue?'),"Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"});case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return");case 8:return t.next=10,this.deleteTag({tagId:e.id,type:this.tagType});case 10:case"end":return t.stop()}},_callee,this,[[0,5]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){TagsTabvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){TagsTabvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"checkFilteredTags",value:function(){if(this.filter){var e=this.tagsMatchedByFilter;if(1===e.length)return this.switchTag(e[0].id),this.filter="",void this.$emit("update:filter-title","");this.openCreateTag()}}},{key:"openCreateTag",value:function(){this.$emit("openCreateTag")}},{key:"updateTagValue",value:function(e){if(e){var t=this.currentTag;this.upsertTag(t.id,e),this.currentTagId=null,this.selectPlusTag()}}},{key:"closeValueDialog",value:function(){this.selectPlusTag(),this.valueDialogVisible=!1,this.selectPlusTag()}},{key:"selectPlusTag",value:function(){var e,t,r={tag:{imageId:null===(e=this.selected)||void 0===e?void 0:e.imageId,figureId:null===(t=this.selected)||void 0===t?void 0:t.figureId,id:null,isPlus:!0},options:{changeTool:!1}};this.selectTag(r)}},{key:"valueDialogVisibleChanged",value:function(){!this.valueDialogVisible&&this.currentTagId&&(this.currentTagId=null)}},{key:"currentTagIdChanged",value:function(){this.currentTagId?this.valueDialogVisible=!0:this.valueDialogVisible&&(this.valueDialogVisible=!1)}},{key:"selectedChanged",value:function(){var e,t=this;if(this.valueDialogVisible=!1,null===(e=this.selected)||void 0===e?void 0:e.id){var r=this.tagsById.get(this.selected.id);if(!r)return;var n=r.settings.applicableType,o=this.isFigure,i=this.selected;if(!o&&i.figureId&&n!==S.TAG_APPLICABLE_TYPES.IMAGES_ONLY||o&&i.figureId&&n===S.TAG_APPLICABLE_TYPES.IMAGES_ONLY)return;this.currentObject.tags.find(function(e){return e.id===t.selected.id})?r&&(this.showValue(r)?this.$nextTick(function(){t.currentTagId=t.selected.id}):this.selectPlusTag()):this.addTag(this.selected.id)}this.$emit("content-changed")}},{key:"tagsChanged",value:function(){this.$emit("content-changed")}},{key:"figure",get:function(){return this.isFigure?this.selectedTagFigure:null}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"classes",get:function(){return this.dataset.classes}},{key:"figureId",get:function(){var e=null;return this.isFigure&&(this.figure?e=this.figure.id:this.selected&&(e=this.selected.figureId)),e}},{key:"imageId",get:function(){return this.figure?this.figure.imageId:this.image.id}},{key:"currentObject",get:function(){return this.figure||this.image}},{key:"currentTag",get:function(){return this.currentTagId?this.tagsById.get(this.currentTagId):null}},{key:"allowedTags",get:function(){return this.figure?this.figuresTags:this.imagesTags}},{key:"tagsList",get:function(){return this.currentObject?[].concat(TagsTabvue_type_script_lang_js_toConsumableArray(this.currentObject.tags.map(function(e){return TagsTabvue_type_script_lang_js_objectSpread({},e,{selected:!0})})),TagsTabvue_type_script_lang_js_toConsumableArray(this.availableTags.map(function(e){return TagsTabvue_type_script_lang_js_objectSpread({},e,{selected:!1})}))):[]}},{key:"availableTags",get:function(){var e=this;if(!this.figure&&!this.image)return[];var t=new Set(this.currentObject.tags.map(function(e){return e.id}));return this.allowedTags.filter(function(r){var n=r.settings,o=n.classes,i=n.applicableType;return!(t.has(r.id)||null!=o&&o.length&&!(e.figure&&i===S.TAG_APPLICABLE_TYPES.OBJECTS_ONLY&&(null==o?void 0:o.length)&&e.classes.selected&&o.includes(e.classes.selected)))})}},{key:"tagsById",get:function(){return Object(j.l)([].concat(TagsTabvue_type_script_lang_js_toConsumableArray(this.allowedTags),TagsTabvue_type_script_lang_js_toConsumableArray(this.currentObject.tags)),"id")}},{key:"tagsMatchedByFilter",get:function(){var e=this,t=this.allowedTags.filter(function(t){return t.title===e.filter});return this.$emit("update:filteredTags",t),t}}])&&TagsTabvue_type_script_lang_js_defineProperties(t.prototype,r),TagsTab}()).prototype,"valueDialogVisibleChanged",[Ba],Object.getOwnPropertyDescriptor(Ha.prototype,"valueDialogVisibleChanged"),Ha.prototype),TagsTabvue_type_script_lang_js_applyDecoratedDescriptor(Ha.prototype,"currentTagIdChanged",[Ma],Object.getOwnPropertyDescriptor(Ha.prototype,"currentTagIdChanged"),Ha.prototype),TagsTabvue_type_script_lang_js_applyDecoratedDescriptor(Ha.prototype,"selectedChanged",[za],Object.getOwnPropertyDescriptor(Ha.prototype,"selectedChanged"),Ha.prototype),TagsTabvue_type_script_lang_js_applyDecoratedDescriptor(Ha.prototype,"tagsChanged",[Na],Object.getOwnPropertyDescriptor(Ha.prototype,"tagsChanged"),Ha.prototype),Ua=Ha))||Ua),Ja=(r("ca0af2b20d037942e4a2"),Object(p.a)(Ya,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tags-tab"},[e.showFilter?r("div",{staticClass:"actions"},[r("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{autofocus:!0,size:"small",placeholder:"Filter tags...",icon:"search"},on:{change:function(t){return e.$emit("update:filterTitle",t)}},nativeOn:{keyup:function(t){return"keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkFilteredTags(t)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1):e._e(),e._v(" "),r("div",{staticClass:"tags-list",class:{blurry:e.valueDialogVisible}},[r("tags-list",{attrs:{filter:e.filter,"show-value":e.showValue,tags:e.tagsList},on:{switchTag:e.switchTag,editTag:e.editTag,deleteTag:e.deleteProjectTag,tagValue:e.openValueDialog}}),e._v(" "),e.tagsList.length?e._e():r("div",{staticStyle:{"text-align":"center","padding-top":"5px"}},[e._v("\n      No tags defined in Project\n    ")]),e._v(" "),r("div",{staticClass:"text-center mt5"},[r("el-button",{staticClass:"el-button el-button--primary el-button--mini add-tag-btn",attrs:{disabled:!!e.$route.query.jobId||!e.$acl({action:e.ACL_ACTIONS.FIGURES.UPDATE,teamId:e.$team,workspaceId:e.$workspace,projectId:e.dataset.projectId,datasetId:e.dataset.id})},on:{click:e.openCreateTag}},[r("i",{staticClass:"icon-add-to-list"}),e._v("\n         \n        Define a new Tag\n      ")])],1)],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.valueDialogVisible,expression:"valueDialogVisible"}],staticClass:"edit-tag-value-wrapper"},[e.currentTag?r("edit-tag-value",{attrs:{data:e.currentTag.value,"form-visible":e.valueDialogVisible,settings:e.currentTag.settings},on:{save:function(t){return e.updateTagValue(t)},close:e.closeValueDialog}}):e._e()],1)])},[],!1,null,"742fe0dc",null));Ja.options.__file="TagsTab.vue";var Wa,qa,Za,$a,Qa,Ka=Ja.exports;function MetaTabvue_type_script_lang_js_typeof(e){return(MetaTabvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MetaTabvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function MetaTabvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function MetaTabvue_type_script_lang_js_getPrototypeOf(e){return(MetaTabvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MetaTabvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MetaTabvue_type_script_lang_js_setPrototypeOf(e,t){return(MetaTabvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MetaTabvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function MetaTabvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){MetaTabvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function MetaTabvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xa=(Wa=Object(u.a)({props:["isFigure"],computed:MetaTabvue_type_script_lang_js_objectSpread({},Object(y.c)("tags",["selectedTagFigure"]),Object(y.c)("dataset/images",{image:"currentImage"}),Object(y.d)("tags",["selected"])),methods:MetaTabvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset",["figures/updateDescription","images/updateDescription"]),Object(y.b)("tags",["selectTag"]))}),qa=Object(u.b)("selected",{immediate:!0}),Za=Object(u.b)("currentObject"),Wa((MetaTabvue_type_script_lang_js_applyDecoratedDescriptor((Qa=function(e){function MetaTab(){var e,t,r;!function(e,t){if(!(e instanceof MetaTab))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=MetaTabvue_type_script_lang_js_getPrototypeOf(MetaTab)).call.apply(e,[this].concat(o)))||"object"!==MetaTabvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?MetaTabvue_type_script_lang_js_assertThisInitialized(this):r,MetaTabvue_type_script_lang_js_defineProperty(MetaTabvue_type_script_lang_js_assertThisInitialized(t),"description",""),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MetaTabvue_type_script_lang_js_setPrototypeOf(e,t)}(MetaTab,s.a),t=MetaTab,(r=[{key:"selectedChanged",value:function(){this.selected&&this.selected.isDescription&&(this.isFigure&&this.selected.figureId||!this.isFigure&&!this.selected.figureId)&&this.focus()}},{key:"currentObjectChanged",value:function(){this.description=this.currentObject.description}},{key:"focus",value:function(){var e=this;this.$nextTick(function(){e.$refs.metadata.$refs.textarea.focus()})}},{key:"resetDescription",value:function(){this.description=this.currentObject.description}},{key:"mounted",value:function(){this.resetDescription(),this.focus()}},{key:"updateDescription",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this["".concat(this.storeNs,"/updateDescription")]({datasetId:this.currentObject.datasetId,imageId:this.imageId,figureId:this.figureId,description:this.description});case 2:e={tag:{imageId:this.imageId,figureId:this.figureId,id:null,isPlus:!0}},this.selectTag(e);case 4:case"end":return t.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){MetaTabvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){MetaTabvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"storeNs",get:function(){return this.figure?"figures":"images"}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"figure",get:function(){return this.isFigure?this.selectedTagFigure:null}},{key:"figureId",get:function(){return this.figure?this.figure.id:null}},{key:"imageId",get:function(){return this.figure?this.figure.imageId:this.image.id}},{key:"currentObject",get:function(){return this.figure||this.image}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}},{key:"canSubmit",get:function(){return this.description!==this.currentObject.description}},{key:"canUpdateDescription",get:function(){var e=this.dataset,t=e.groupId,r=e.workspaceId,n=e.projectId,o=e.id;return this.$acl({action:S.ACL_ACTIONS.FIGURES.UPDATE,teamId:t,workspaceId:r,projectId:n,datasetId:o})}}])&&MetaTabvue_type_script_lang_js_defineProperties(t.prototype,r),MetaTab}()).prototype,"selectedChanged",[qa],Object.getOwnPropertyDescriptor(Qa.prototype,"selectedChanged"),Qa.prototype),MetaTabvue_type_script_lang_js_applyDecoratedDescriptor(Qa.prototype,"currentObjectChanged",[Za],Object.getOwnPropertyDescriptor(Qa.prototype,"currentObjectChanged"),Qa.prototype),$a=Qa))||$a),es=(r("d16d13c389eb634790dd"),Object(p.a)(Xa,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"meta-tab"},[r("el-input",{ref:"metadata",staticClass:"metadata",attrs:{rows:2,disabled:!e.canUpdateDescription,placeholder:"Raw text, JSON, ...",type:"textarea"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),e._v(" "),r("center",{staticClass:"mt15"},[r("el-button",{attrs:{size:"small",type:"primary",disabled:!e.canUpdateDescription||!e.canSubmit},on:{click:e.updateDescription}},[e._v("\n      Save\n    ")]),e._v(" "),r("el-button",{attrs:{size:"small",disabled:!e.canSubmit},on:{click:e.resetDescription}},[e._v("\n      Cancel\n    ")])],1)],1)},[],!1,null,"0c689b83",null));es.options.__file="MetaTab.vue";var ts,rs=es.exports;function InfoTabvue_type_script_lang_js_typeof(e){return(InfoTabvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function InfoTabvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function InfoTabvue_type_script_lang_js_getPrototypeOf(e){return(InfoTabvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function InfoTabvue_type_script_lang_js_setPrototypeOf(e,t){return(InfoTabvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function InfoTabvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ns=Object(u.a)({props:["isFigure"],computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){InfoTabvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.c)("tags",["selectedTagFigure"]),Object(y.c)("dataset/images",{image:"currentImage"}))})(ts=function(e){function InfoTab(){return function(e,t){if(!(e instanceof InfoTab))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==InfoTabvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,InfoTabvue_type_script_lang_js_getPrototypeOf(InfoTab).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&InfoTabvue_type_script_lang_js_setPrototypeOf(e,t)}(InfoTab,s.a),t=InfoTab,(r=[{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"figure",get:function(){return this.isFigure?this.selectedTagFigure:null}},{key:"currentObject",get:function(){return this.figure||this.image}}])&&InfoTabvue_type_script_lang_js_defineProperties(t.prototype,r),InfoTab}())||ts,os=(r("4d48788afc3b8f12d72f"),Object(p.a)(ns,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"info"},[r("div",[r("b",[e._v("Created:")]),e._v(" "+e._s(e._f("moment")(e.currentObject.createdAt,"DD MMM YYYY HH:mm:ss")))]),e._v(" "),r("div",[r("b",[e._v("Updated:")]),e._v(" "+e._s(e._f("moment")(e.currentObject.updatedAt,"DD MMM YYYY HH:mm:ss")))]),e._v(" "),r("div",[r("b",[e._v("Area:")]),e._v(" "+e._s(e.currentObject.area)+"px")]),e._v(" "),e.figure?e._e():r("div",[r("b",[e._v("Size:")]),e._v(" "+e._s(e._f("filesize")(e.currentObject.meta.size))+"\n  ")]),e._v(" "),e.figure?e._e():r("div",[r("b",[e._v("Resolution:")]),e._v(" "+e._s(e.currentObject.meta.width)+"×"+e._s(e.currentObject.meta.height)+"\n  ")]),e._v(" "),e.figure?r("div",[r("b",[e._v("Created by:")]),e._v(" "+e._s(e.currentObject.userName)+"\n  ")]):e._e()])},[],!1,null,"30fa5a97",null));os.options.__file="InfoTab.vue";var is,as,ss,cs,us,ls,ps,fs=os.exports;function TagsPanelvue_type_script_lang_js_typeof(e){return(TagsPanelvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TagsPanelvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function TagsPanelvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TagsPanelvue_type_script_lang_js_getPrototypeOf(e){return(TagsPanelvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TagsPanelvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TagsPanelvue_type_script_lang_js_setPrototypeOf(e,t){return(TagsPanelvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function TagsPanelvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function TagsPanelvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){TagsPanelvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function TagsPanelvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ds=(is=Object(u.a)({props:["isFigure"],components:{EditTag:ha,Panel:Xn,TagsTab:Ka,MetaTab:rs,InfoTab:fs},computed:TagsPanelvue_type_script_lang_js_objectSpread({},Object(y.c)("tags",["selectedTagFigure","orderedTags"]),Object(y.d)("tags",["selected","highlighted"]),Object(y.c)("dataset/images",{image:"currentImage"})),methods:TagsPanelvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset",["figures/addTag","figures/updateTag","figures/removeTag","images/addTag","images/updateTag","images/removeTag"]),Object(y.b)("tags",["createTag","updateTag","deleteTag"]))}),as=Object(u.b)("tab",{immediate:!0}),ss=Object(u.b)("mode"),cs=Object(u.b)("selected",{immediate:!0}),us=Object(u.b)("highlighted",{immediate:!0,deep:!0}),is((TagsPanelvue_type_script_lang_js_applyDecoratedDescriptor((ps=function(e){function TagsPanel(){var e,t,r;!function(e,t){if(!(e instanceof TagsPanel))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=TagsPanelvue_type_script_lang_js_getPrototypeOf(TagsPanel)).call.apply(e,[this].concat(o)))||"object"!==TagsPanelvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?TagsPanelvue_type_script_lang_js_assertThisInitialized(this):r,TagsPanelvue_type_script_lang_js_defineProperty(TagsPanelvue_type_script_lang_js_assertThisInitialized(t),"mode","list"),TagsPanelvue_type_script_lang_js_defineProperty(TagsPanelvue_type_script_lang_js_assertThisInitialized(t),"filter",""),TagsPanelvue_type_script_lang_js_defineProperty(TagsPanelvue_type_script_lang_js_assertThisInitialized(t),"filteredTags",[]),TagsPanelvue_type_script_lang_js_defineProperty(TagsPanelvue_type_script_lang_js_assertThisInitialized(t),"showFilter",!1),TagsPanelvue_type_script_lang_js_defineProperty(TagsPanelvue_type_script_lang_js_assertThisInitialized(t),"isHiglighted",!1),TagsPanelvue_type_script_lang_js_defineProperty(TagsPanelvue_type_script_lang_js_assertThisInitialized(t),"form",{title:"",color:"",hotkey:"",settings:{type:"",applicableType:"",classes:[]}}),TagsPanelvue_type_script_lang_js_defineProperty(TagsPanelvue_type_script_lang_js_assertThisInitialized(t),"showOnlyDesc",!1),TagsPanelvue_type_script_lang_js_defineProperty(TagsPanelvue_type_script_lang_js_assertThisInitialized(t),"showSingleTag",!1),TagsPanelvue_type_script_lang_js_defineProperty(TagsPanelvue_type_script_lang_js_assertThisInitialized(t),"tab","tags"),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TagsPanelvue_type_script_lang_js_setPrototypeOf(e,t)}(TagsPanel,s.a),t=TagsPanel,(r=[{key:"updatePanel",value:function(){var e=this;this.$nextTick(function(){e.$refs.panel.updateScrollbar()})}},{key:"openCreateTag",value:function(){this.mode="edit",this.form={title:this.filter,color:"",hotkey:"",settings:{type:S.PROJECT_TAGS_VALUE_TYPE.NONE}}}},{key:"upsertTag",value:function(e,t){var r={imageId:this.imageId,figureId:this.figureId,tagId:e,value:t},n=this.currentObject.tags.find(function(t){return t.id===e})?"updateTag":"addTag";this["".concat(this.storeNs,"/").concat(n)](r)}},{key:"upsertProjectTag",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){var t,r,n,o,i=arguments;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=i.length>1&&void 0!==i[1]&&i[1],a.prev=1,r=e.id?"updateTag":"createTag",a.next=5,this[r](TagsPanelvue_type_script_lang_js_objectSpread({},e,{type:this.tagType,forceSave:t}));case 5:this.mode="list",a.next=17;break;case 8:if(a.prev=8,a.t0=a.catch(1),400!==a.t0.response.status){a.next=15;break}return n=a.t0.response.data.error,o="NONUNIQUE"===n?"Tag with such name already exists":"Pick other title or hotkey",this.$message.error(o),a.abrupt("return");case 15:throw this.$message.error("Something went wrong. Please try again later"),a.t0;case 17:case"end":return a.stop()}},_callee,this,[[1,8]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){TagsPanelvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){TagsPanelvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"resetDialog",value:function(){this.mode="list",this.showOnlyDesc=!1,this.showSingleTag=!1,this.form={title:"",color:"",hotkey:""}}},{key:"tabChanged",value:function(){this.updatePanel()}},{key:"modeChanged",value:function(){this.updatePanel()}},{key:"selectedChanged",value:function(){this.isActive&&(this.mode="list",this.tab=this.selected.isDescription?"metadata":"tags")}},{key:"highlightedChanged",value:function(){var e=this;this.isActive&&(this.isHiglighted=!1,this.$nextTick(function(){e.isHiglighted=!0}))}},{key:"figure",get:function(){return this.isFigure?this.selectedTagFigure:null}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"figureId",get:function(){return this.figure?this.figure.id:null}},{key:"imageId",get:function(){return this.figure?this.figure.imageId:this.image.id}},{key:"tagType",get:function(){return this.figure?S.TAG_TYPES.FIGURES:S.TAG_TYPES.IMAGES}},{key:"storeNs",get:function(){return this.figure?"figures":"images"}},{key:"title",get:function(){return this.isFigure?"Object Properties":"Image Properties"}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}},{key:"currentObject",get:function(){return this.figure||this.image}},{key:"tagsById",get:function(){return Object(j.l)(this.orderedTags,"id")}},{key:"isActive",get:function(){var e,t;this.updatePanel();var r=this.tagsById.get(null===(e=this.selected)||void 0===e?void 0:e.id),n=null==r?void 0:null===(t=r.settings)||void 0===t?void 0:t.applicableType;return this.selected&&(this.isFigure&&this.selected.figureId&&n!==S.TAG_APPLICABLE_TYPES.IMAGES_ONLY||!this.isFigure&&!this.selected.figureId&&n!==S.TAG_APPLICABLE_TYPES.OBJECTS_ONLY||!this.isFigure&&this.selected.figureId&&n===S.TAG_APPLICABLE_TYPES.IMAGES_ONLY)}}])&&TagsPanelvue_type_script_lang_js_defineProperties(t.prototype,r),TagsPanel}()).prototype,"tabChanged",[as],Object.getOwnPropertyDescriptor(ps.prototype,"tabChanged"),ps.prototype),TagsPanelvue_type_script_lang_js_applyDecoratedDescriptor(ps.prototype,"modeChanged",[ss],Object.getOwnPropertyDescriptor(ps.prototype,"modeChanged"),ps.prototype),TagsPanelvue_type_script_lang_js_applyDecoratedDescriptor(ps.prototype,"selectedChanged",[cs],Object.getOwnPropertyDescriptor(ps.prototype,"selectedChanged"),ps.prototype),TagsPanelvue_type_script_lang_js_applyDecoratedDescriptor(ps.prototype,"highlightedChanged",[us],Object.getOwnPropertyDescriptor(ps.prototype,"highlightedChanged"),ps.prototype),ls=ps))||ls),_s=(r("f66b8943a1b0cd49a72e"),Object(p.a)(ds,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("panel",{ref:"panel",class:{active:e.isHiglighted},attrs:{title:e.title,icon:"icon-info"}},[r("template",{slot:"tabs"},[r("a",{class:{active:"tags"===e.tab},on:{click:function(t){e.tab="tags"}}},[e._v("Tags")]),e._v(" "),r("a",{class:{active:"metadata"===e.tab},on:{click:function(t){e.tab="metadata"}}},[e._v("Data")]),e._v(" "),r("a",{class:{active:"info"===e.tab},on:{click:function(t){e.tab="info"}}},[e._v("Info")])]),e._v(" "),"tags"===e.tab?r("template",{slot:"right"},[r("a",{staticClass:"btn-panel-filter",on:{click:function(t){e.showFilter=!e.showFilter}}},[r("i",{staticClass:"icon-funnel"})]),e._v(" "),r("el-button",{staticClass:"text-btn",staticStyle:{"margin-right":"8px"},attrs:{type:"text",title:"Create tag",disabled:1===e.filteredTags.length||!e.$acl({action:e.ACL_ACTIONS.IMAGES.REMOVE,teamId:e.$team,workspaceId:e.$workspace,projectId:e.dataset.projectId,datasetId:e.dataset.id})},on:{click:e.openCreateTag}},[r("i",{staticClass:"icon-new-message"})])],1):e._e(),e._v(" "),e.isFigure&&!e.figure?r("div",{staticClass:"select-obj-first"},[e._v("\n    Select object first\n  ")]):e.image?r("div",{staticClass:"figures-tags-dialog"},[r("div",[(e.figure||e.image)&&"tags"===e.tab?r("div",{directives:[{name:"show",rawName:"v-show",value:!e.showOnlyDesc,expression:"!showOnlyDesc"}]},["edit"===e.mode?r("edit-tag",{on:{save:e.upsertProjectTag,cancel:function(t){e.mode="list"}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}):r("tags-tab",{attrs:{"is-figure":e.isFigure,"show-filter":e.showFilter,"filter-title":e.filter,"filtered-tags":e.filteredTags},on:{"update:filterTitle":function(t){e.filter=t},"update:filter-title":function(t){e.filter=t},"update:filteredTags":function(t){e.filteredTags=t},"update:filtered-tags":function(t){e.filteredTags=t},openCreateTag:e.openCreateTag,"content-changed":e.updatePanel}})],1):e._e(),e._v(" "),e.currentObject&&"metadata"===e.tab?r("div",[r("meta-tab",{attrs:{"is-figure":e.isFigure}})],1):e._e(),e._v(" "),"info"===e.tab?r("div",{staticClass:"info"},[r("info-tab",{attrs:{"is-figure":e.isFigure}})],1):e._e()])]):e._e()],2)},[],!1,null,null,null));_s.options.__file="TagsPanel.vue";var ys,gs=_s.exports;function PanelsListvue_type_script_lang_js_typeof(e){return(PanelsListvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PanelsListvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PanelsListvue_type_script_lang_js_getPrototypeOf(e){return(PanelsListvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PanelsListvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PanelsListvue_type_script_lang_js_setPrototypeOf(e,t){return(PanelsListvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hs=Object(u.a)({components:{Split:En,Images:Eo,Figures:Ci,History:oa,TagsPanel:gs,FiguresSelectionCut:xi,ClassesSelectionCut:Bi}})(ys=function(e){function PanelsList(){var e,t,r,n,o,i;!function(e,t){if(!(e instanceof PanelsList))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return this,t=!(r=(e=PanelsListvue_type_script_lang_js_getPrototypeOf(PanelsList)).call.apply(e,[this].concat(s)))||"object"!==PanelsListvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?PanelsListvue_type_script_lang_js_assertThisInitialized(this):r,n=PanelsListvue_type_script_lang_js_assertThisInitialized(t),o="SIDEBAR_PANELS",i=Cn.a,o in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PanelsListvue_type_script_lang_js_setPrototypeOf(e,t)}(PanelsList,s.a),t=PanelsList,(r=[{key:"isShowPanel",value:function(e){return this.settings.sidebarActivePanels.includes(e)}},{key:"settings",get:function(){return this.$store.state.settings}},{key:"sizes",get:function(){var e=Math.floor(100/this.settings.sidebarActivePanels.length);return this.settings.sidebarActivePanels.map(function(){return e})}}])&&PanelsListvue_type_script_lang_js_defineProperties(t.prototype,r),PanelsList}())||ys,bs=(r("8b22c5587e25920da516"),Object(p.a)(hs,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("split",{ref:"split",staticClass:"panels-split",attrs:{direction:"vertical","gutter-size":4,sizes:e.sizes,"snap-offset":30}},[e.isShowPanel(e.SIDEBAR_PANELS.IMAGES)?r("images"):e._e(),e._v(" "),e.isShowPanel(e.SIDEBAR_PANELS.FIGURES)?r("figures"):e._e(),e._v(" "),e.isShowPanel(e.SIDEBAR_PANELS.IMAGE_PROPS)?r("tags-panel",{attrs:{"is-figure":!1}}):e._e(),e._v(" "),e.isShowPanel(e.SIDEBAR_PANELS.FIGURE_PROPS)?r("tags-panel",{attrs:{"is-figure":!0}}):e._e(),e._v(" "),e.isShowPanel(e.SIDEBAR_PANELS.HISTORY)?r("history"):e._e()],1)},[],!1,null,"16b0375c",null));bs.options.__file="PanelsList.vue";var vs,ms=bs.exports,Os=r("2479c85beca8b548b964"),Ps=r.n(Os),Ts={name:"Markdown",props:{source:{type:String,required:!1,default:null},tag:{type:String,required:!1,default:"div"},flavor:{type:String,required:!1,default:"vanilla",validator:function(e){return["original","vanilla","github"].includes(e)}},options:{type:Object,required:!1,default:function(){return Object.create(null)}}},computed:{converter:function(){return new Ps.a.Converter(this.options)},inputMarkdown:function(){return null===this.source?this.$slots.default[0].text:this.source},outputHtml:function(){return this.converter?this.converter.makeHtml(this.inputMarkdown):""}},render:function(e){return e(this.tag,{domProps:{innerHTML:this.outputHtml}})}};function JobInfoDialogvue_type_script_lang_js_typeof(e){return(JobInfoDialogvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JobInfoDialogvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JobInfoDialogvue_type_script_lang_js_getPrototypeOf(e){return(JobInfoDialogvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JobInfoDialogvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JobInfoDialogvue_type_script_lang_js_setPrototypeOf(e,t){return(JobInfoDialogvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ss=Object(u.a)({components:{Markdown:Ts}})(vs=function(e){function JobInfoDialog(){var e,t,r,n,o;!function(e,t){if(!(e instanceof JobInfoDialog))throw new TypeError("Cannot call a class as a function")}(this);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return this,t=!(r=(e=JobInfoDialogvue_type_script_lang_js_getPrototypeOf(JobInfoDialog)).call.apply(e,[this].concat(a)))||"object"!==JobInfoDialogvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?JobInfoDialogvue_type_script_lang_js_assertThisInitialized(this):r,!1,(o="dialogVisible")in(n=JobInfoDialogvue_type_script_lang_js_assertThisInitialized(t))?Object.defineProperty(n,o,{value:!1,enumerable:!0,configurable:!0,writable:!0}):n[o]=!1,t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JobInfoDialogvue_type_script_lang_js_setPrototypeOf(e,t)}(JobInfoDialog,s.a),t=JobInfoDialog,(r=[{key:"open",value:function(){this.dialogVisible=!0}},{key:"job",get:function(){return this.$store.state.app.job}}])&&JobInfoDialogvue_type_script_lang_js_defineProperties(t.prototype,r),JobInfoDialog}())||vs,js=(r("6715a79b0d2347edbd3c"),Object(p.a)(Ss,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"job-info-dialog",attrs:{title:"Job info",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"markdown-wrapper"},[e.job?r("markdown",{staticClass:"markdown-body",attrs:{source:e.job.readme||"No readme",options:{flavor:"github"}}}):e._e()],1)])},[],!1,null,"12942305",null));js.options.__file="JobInfoDialog.vue";var ws,Is=js.exports;function JobPanelvue_type_script_lang_js_typeof(e){return(JobPanelvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JobPanelvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JobPanelvue_type_script_lang_js_getPrototypeOf(e){return(JobPanelvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JobPanelvue_type_script_lang_js_setPrototypeOf(e,t){return(JobPanelvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function JobPanelvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Es=Object(u.a)({components:{Panel:Xn,Markdown:Ts,JobInfoDialog:Is},methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){JobPanelvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.b)("app",["toggleJobInfo"]))})(ws=function(e){function JobPanel(){return function(e,t){if(!(e instanceof JobPanel))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==JobPanelvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,JobPanelvue_type_script_lang_js_getPrototypeOf(JobPanel).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JobPanelvue_type_script_lang_js_setPrototypeOf(e,t)}(JobPanel,s.a),t=JobPanel,(r=[{key:"job",get:function(){return this.$store.state.app.job}}])&&JobPanelvue_type_script_lang_js_defineProperties(t.prototype,r),JobPanel}())||ws,Cs=(r("89932bc54f57210cc410"),Object(p.a)(Es,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"panel job-panel"},[r("panel",{attrs:{title:"Job info",icon:"icon-info"}},[r("div",{attrs:{slot:"right"},slot:"right"},[r("div",{staticClass:"btns-group"},[r("el-button",{staticClass:"text-btn",attrs:{type:"text",title:"Show info"},on:{click:function(t){return e.$refs["job-info-dialog"].open()}}},[r("i",{staticClass:"zmdi zmdi-view-headline"})]),e._v(" "),r("el-button",{staticClass:"text-btn",attrs:{type:"text",title:"Close panel"},on:{click:e.toggleJobInfo}},[r("i",{staticClass:"zmdi zmdi-close"})])],1)]),e._v(" "),r("div",{staticClass:"job-info-wrapper"},[r("div",[r("markdown",{staticClass:"markdown-body",attrs:{source:e.job.readme||"No readme",options:{flavor:"github"}}})],1)])]),e._v(" "),r("job-info-dialog",{ref:"job-info-dialog"})],1)},[],!1,null,null,null));Cs.options.__file="JobPanel.vue";var ks,As,Fs,xs,Rs=Cs.exports;function Sidebarvue_type_script_lang_js_typeof(e){return(Sidebarvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sidebarvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sidebarvue_type_script_lang_js_getPrototypeOf(e){return(Sidebarvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sidebarvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sidebarvue_type_script_lang_js_setPrototypeOf(e,t){return(Sidebarvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sidebarvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Sidebarvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function Sidebarvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ls=(ks=Object(u.a)({components:{Split:En,JobPanel:Rs,PanelsList:ms},computed:Sidebarvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/figures",["orderedFigures"]),Object(y.d)("tags",["selected"])),methods:Sidebarvue_type_script_lang_js_objectSpread({},Object(y.b)("settings",["openSidebarPanel","toggleSidebarPanel"])),props:{isOpen:{type:Boolean,default:!0}}}),As=Object(u.b)("selected"),ks((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((xs=function(e){function Sidebar(){var e,t,r;!function(e,t){if(!(e instanceof Sidebar))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=Sidebarvue_type_script_lang_js_getPrototypeOf(Sidebar)).call.apply(e,[this].concat(o)))||"object"!==Sidebarvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?Sidebarvue_type_script_lang_js_assertThisInitialized(this):r,Sidebarvue_type_script_lang_js_defineProperty(Sidebarvue_type_script_lang_js_assertThisInitialized(t),"SIDEBAR_PANELS",Cn.a),Sidebarvue_type_script_lang_js_defineProperty(Sidebarvue_type_script_lang_js_assertThisInitialized(t),"btns",[{id:Cn.a.IMAGES,icon:"icon-images",label:"Images"},{id:Cn.a.FIGURES,icon:"icon-layers",label:"Objects"},{id:Cn.a.IMAGE_PROPS,icon:"icon-info",label:"Image Properties"},{id:Cn.a.FIGURE_PROPS,icon:"icon-info",label:"Object Properties"},{id:Cn.a.HISTORY,icon:"icon-back-in-time",label:"History"}]),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sidebarvue_type_script_lang_js_setPrototypeOf(e,t)}(Sidebar,s.a),t=Sidebar,(r=[{key:"selectedChanged",value:function(){if(this.selected){var e=this.selected.figureId?Cn.a.FIGURE_PROPS:Cn.a.IMAGE_PROPS;this.openSidebarPanel(e)}}},{key:"isShowPanel",value:function(e){return this.settings.sidebarActivePanels.includes(e)}},{key:"togglePanel",value:function(e){e!==Cn.a.IMAGES&&this.toggleSidebarPanel(e)}},{key:"job",get:function(){return this.$store.state.app.job}},{key:"isJobVisible",get:function(){return this.$store.state.app.showJobInfo}},{key:"sidebarSizes",get:function(){return[this.isJobVisible?30:0,this.isJobVisible?70:100]}},{key:"settings",get:function(){return this.$store.state.settings}}])&&Sidebarvue_type_script_lang_js_defineProperties(t.prototype,r),Sidebar}()).prototype,"selectedChanged",[As],Object.getOwnPropertyDescriptor(xs.prototype,"selectedChanged"),xs.prototype),Fs=xs))||Fs),Ds=(r("a530329f958e1c44e4d2"),Object(p.a)(Ls,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sidebar"},[r("div",{staticClass:"panels",class:{"with-readme":e.job&&e.job.readme}},[e.job&&e.job.readme?r("split",{staticClass:"split",staticStyle:{display:"flex",width:"100%"},attrs:{direction:"horizontal","gutter-size":6,"snap-offset":30,sizes:e.sidebarSizes,"min-size":[0,250]}},[r("job-panel"),e._v(" "),r("panels-list")],1):[r("panels-list")]],2),e._v(" "),r("div",{staticClass:"tabs"},[r("span",{staticClass:"tab-btns"},e._l(e.btns,function(t){return r("button",{key:t.id,class:{active:e.isShowPanel(t.id)},on:{click:function(r){return e.togglePanel(t.id)}}},[r("i",{class:t.icon}),e._v(" "),r("span",[e._v(e._s(t.label))])])}),0),e._v(" "),r("el-button",{staticClass:"collapse-btn",attrs:{type:"text"},on:{click:function(t){return e.$emit("toggle-sidebar")}}},[e.isOpen?r("i",{staticClass:"zmdi zmdi-chevron-right"}):r("i",{staticClass:"zmdi zmdi-chevron-left"})])],1)])},[],!1,null,null,null));Ds.options.__file="Sidebar.vue";var Gs,Bs=Ds.exports,Ms=(r("cc0dee3c24a086419bc5"),r("52cf01d8f4c3baca94b3")),zs=r("7ee98bac1562359c81b0"),Ns=r("aae8da8bbad62743ecea");function Spinnervue_type_script_lang_js_typeof(e){return(Spinnervue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Spinnervue_type_script_lang_js_getPrototypeOf(e){return(Spinnervue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Spinnervue_type_script_lang_js_setPrototypeOf(e,t){return(Spinnervue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Us=Object(u.a)(Gs=function(e){function Spinner(){return function(e,t){if(!(e instanceof Spinner))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==Spinnervue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Spinnervue_type_script_lang_js_getPrototypeOf(Spinner).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Spinnervue_type_script_lang_js_setPrototypeOf(e,t)}(Spinner,s.a),Spinner}())||Gs,Hs=(r("251bedfa0d6cdf7bd49b"),Object(p.a)(Us,function(){return this.$createElement,this._self._c,this._m(0)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"spinner"},[t("div",{staticClass:"bounce1"}),this._v(" "),t("div",{staticClass:"bounce2"}),this._v(" "),t("div",{staticClass:"bounce3"})])}],!1,null,"ddc87854",null));Hs.options.__file="Spinner.vue";var Vs=Hs.exports,Ys=(r("d756fa87f5be9d4c8a3e"),r("22ee624462a7244acc0e"),r("84658aec6798259544f9")),Js=r("5f9e65e24255a01903f6");function getOriginalEvent(e){return e.data.originalEvent}function parseColor(e){return"string"==typeof e?parseInt(e.substring(1),16):e}function inheritFigure(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];Object(Js.a)(e,[{type:t,include:!0,props:[{key:"type",static:!0},{key:"maxPoints",static:!0},{key:"_getArea",static:!0},{key:"graphicsType",static:!0},{key:"isValid",static:!0},{key:"isPointWithin"},{key:"getClosestPoint"},{key:"canAddPoint"},{key:"_normalizePointInsideParent"}]}].concat(n))}var Ws=r("5f60e446fe6f0a2bb415"),qs=r("3e184cdc0af6f0ad3e63"),Zs=(r("b2a4c74ae83bbcfadf79"),r("33f5d04d64e8d312e0e8"));function PointProxy_typeof(e){return(PointProxy_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PointProxy_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PointProxy_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PointProxy_set(e,t,r,n){return(PointProxy_set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,i=_superPropBase(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else PointProxy_defineProperty(n,t,r);return!0})(e,t,r,n)}function _set(e,t,r,n,o){if(!PointProxy_set(e,t,r,n||e)&&o)throw new Error("failed to set property");return r}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PointProxy_getPrototypeOf(e)););return e}function PointProxy_getPrototypeOf(e){return(PointProxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PointProxy_setPrototypeOf(e,t){return(PointProxy_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function PointProxy_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $s=function(e){function PointProxy(){var e,t,r;!function(e,t){if(!(e instanceof PointProxy))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=PointProxy_getPrototypeOf(PointProxy)).call.apply(e,[this].concat(o)))||"object"!==PointProxy_typeof(r)&&"function"!=typeof r?PointProxy_assertThisInitialized(this):r,PointProxy_defineProperty(PointProxy_assertThisInitialized(t),"_color",null),t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PointProxy_setPrototypeOf(e,t)}(PointProxy,Zs.a),t=PointProxy,n=[{key:"_updateFields",get:function(){return[].concat(function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(Zs.a._updateFields),["texture","color"])}}],(r=[{key:"_parseColor",value:function(e){return parseColor(e)}},{key:"init",value:function(e){this._createProxy(e.texture),_get(PointProxy_getPrototypeOf(PointProxy.prototype),"init",this).call(this,e)}},{key:"_destroy",value:function(){this.proxy.destroy(),this.proxy=null,this.texture=null,_get(PointProxy_getPrototypeOf(PointProxy.prototype),"_destroy",this).call(this)}},{key:"_createProxy",value:function(e){var t=this;this.proxy=new Ys.Sprite,this.proxy.transform.ignoreScale=!0,this.proxy.interactive=!0,this.proxy.anchor.set(.5),this.proxy.texture=e,this.proxy.on("pointerdown",function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.onPointerDown.apply(t,[t.proxy,getOriginalEvent.apply(void 0,r)].concat(r))}).on("pointerup",function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.onPointerUp.apply(t,[t.proxy,getOriginalEvent.apply(void 0,r)].concat(r))}).on("pointerupoutside",function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.onPointerUpOutside.apply(t,[t.proxy,getOriginalEvent.apply(void 0,r)].concat(r))}).on("pointerover",function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.onPointerOver.apply(t,[t.proxy,getOriginalEvent.apply(void 0,r)].concat(r))}).on("pointerout",function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.onPointerOut.apply(t,[t.proxy,getOriginalEvent.apply(void 0,r)].concat(r))}).on("pointermove",function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.onPointerMove.apply(t,[t.proxy,getOriginalEvent.apply(void 0,r)].concat(r))})}},{key:"left",get:function(){return _get(PointProxy_getPrototypeOf(PointProxy.prototype),"left",this)},set:function(e){_set(PointProxy_getPrototypeOf(PointProxy.prototype),"left",e,this,!0),this.proxy.x=this.left}},{key:"top",get:function(){return _get(PointProxy_getPrototypeOf(PointProxy.prototype),"top",this)},set:function(e){_set(PointProxy_getPrototypeOf(PointProxy.prototype),"top",e,this,!0),this.proxy.y=this.top}},{key:"depth",get:function(){return _get(PointProxy_getPrototypeOf(PointProxy.prototype),"depth",this)},set:function(e){_set(PointProxy_getPrototypeOf(PointProxy.prototype),"depth",e,this,!0)}},{key:"visible",get:function(){return _get(PointProxy_getPrototypeOf(PointProxy.prototype),"visible",this)},set:function(e){_set(PointProxy_getPrototypeOf(PointProxy.prototype),"visible",e,this,!0),this.proxy.visible=this.visible}},{key:"locked",get:function(){return _get(PointProxy_getPrototypeOf(PointProxy.prototype),"locked",this)},set:function(e){_set(PointProxy_getPrototypeOf(PointProxy.prototype),"locked",e,this,!0),this.proxy.interactive=!this.locked}},{key:"opacity",get:function(){return _get(PointProxy_getPrototypeOf(PointProxy.prototype),"opacity",this)},set:function(e){_set(PointProxy_getPrototypeOf(PointProxy.prototype),"opacity",e,this,!0),this.proxy.alpha=this.opacity}},{key:"color",get:function(){return this._color},set:function(e){this._color=this._parseColor(e)}},{key:"texture",get:function(){return this._texture},set:function(e){this.texture!==e&&(this._texture=e,this.proxy&&(this.proxy.texture=this.texture))}}])&&PointProxy_defineProperties(t.prototype,r),n&&PointProxy_defineProperties(t,n),PointProxy}(),Qs=r("4edf36051f647444455a");function RectProxy_typeof(e){return(RectProxy_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RectProxy_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RectProxy_set(e,t,r,n){return(RectProxy_set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,i=RectProxy_superPropBase(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(n,t,r);return!0})(e,t,r,n)}function helpers_RectProxy_set(e,t,r,n,o){if(!RectProxy_set(e,t,r,n||e)&&o)throw new Error("failed to set property");return r}function RectProxy_get(e,t,r){return(RectProxy_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=RectProxy_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function RectProxy_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RectProxy_getPrototypeOf(e)););return e}function RectProxy_getPrototypeOf(e){return(RectProxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RectProxy_setPrototypeOf(e,t){return(RectProxy_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ks,Xs=function(e){function RectProxy(){return function(e,t){if(!(e instanceof RectProxy))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==RectProxy_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,RectProxy_getPrototypeOf(RectProxy).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RectProxy_setPrototypeOf(e,t)}(RectProxy,Qs.a),t=RectProxy,(r=[{key:"init",value:function(e){this.graphics=new Ys.Graphics,this.setGraphicsDefaults(),RectProxy_get(RectProxy_getPrototypeOf(RectProxy.prototype),"init",this).call(this,e),this.emit("graphics:add",this.graphics)}},{key:"setGraphicsDefaults",value:function(){this.draw()}},{key:"_draw",value:function(){RectProxy_get(RectProxy_getPrototypeOf(RectProxy.prototype),"_draw",this).call(this),this.graphics.clear().beginFill(16777215,.3).lineStyle(this.border,this.color).drawRect(this.left,this.top,this.width,this.height).endFill()}},{key:"_destroy",value:function(){this.emit("graphics:remove",this.graphics),this.graphics.destroy(!0),this.graphics=null,RectProxy_get(RectProxy_getPrototypeOf(RectProxy.prototype),"_destroy",this).call(this)}},{key:"left",get:function(){return RectProxy_get(RectProxy_getPrototypeOf(RectProxy.prototype),"left",this)},set:function(e){helpers_RectProxy_set(RectProxy_getPrototypeOf(RectProxy.prototype),"left",e,this,!0)}},{key:"top",get:function(){return RectProxy_get(RectProxy_getPrototypeOf(RectProxy.prototype),"top",this)},set:function(e){helpers_RectProxy_set(RectProxy_getPrototypeOf(RectProxy.prototype),"top",e,this,!0)}},{key:"right",get:function(){return RectProxy_get(RectProxy_getPrototypeOf(RectProxy.prototype),"right",this)},set:function(e){helpers_RectProxy_set(RectProxy_getPrototypeOf(RectProxy.prototype),"right",e,this,!0)}},{key:"bottom",get:function(){return RectProxy_get(RectProxy_getPrototypeOf(RectProxy.prototype),"bottom",this)},set:function(e){helpers_RectProxy_set(RectProxy_getPrototypeOf(RectProxy.prototype),"bottom",e,this,!0)}},{key:"visible",get:function(){return RectProxy_get(RectProxy_getPrototypeOf(RectProxy.prototype),"visible",this)},set:function(e){helpers_RectProxy_set(RectProxy_getPrototypeOf(RectProxy.prototype),"visible",e,this,!0),this.graphics.visible=this.visible}}])&&RectProxy_defineProperties(t.prototype,r),RectProxy}();function BaseFigureProxy_typeof(e){return(BaseFigureProxy_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BaseFigureProxy_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function BaseFigureProxy_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BaseFigureProxy_set(e,t,r,n){return(BaseFigureProxy_set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,i=BaseFigureProxy_superPropBase(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else BaseFigureProxy_defineProperty(n,t,r);return!0})(e,t,r,n)}function helpers_BaseFigureProxy_set(e,t,r,n,o){if(!BaseFigureProxy_set(e,t,r,n||e)&&o)throw new Error("failed to set property");return r}function BaseFigureProxy_get(e,t,r){return(BaseFigureProxy_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=BaseFigureProxy_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function BaseFigureProxy_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BaseFigureProxy_getPrototypeOf(e)););return e}function BaseFigureProxy_getPrototypeOf(e){return(BaseFigureProxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BaseFigureProxy_setPrototypeOf(e,t){return(BaseFigureProxy_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BaseFigureProxy_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ys.Graphics.prototype._lineTo=Ys.Graphics.prototype.lineTo,Ys.Graphics.prototype.lineTo=function(e,t){return this.lineDash?this._dashLineTo(e,t):this._lineTo(e,t),this},Ys.Graphics.prototype._dashLineTo=function(e,t){for(var r=this.currentPath.shape.points,n=this.lineDash,o=n.dash,i=n.gap,a=r[r.length-2]||0,s=r[r.length-1]||0,c=e-a,u=t-s,l=Math.sqrt(Math.pow(c,2)+Math.pow(u,2)),p=c/l,f=u/l,d=0,_=0,y=0;d<=l;)d+=y,(d+=_>0?_:o)>l?(_=d-l,d=l):_=0,this._lineTo(a+d*p,s+d*f),(d+=i)>l&&0===_?y=d-l:(y=0,this.moveTo(a+d*p,s+d*f));return this};var ec,tc,rc,nc=(function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Ks=function(e){function BaseFigureProxy(){var e,t,r;!function(e,t){if(!(e instanceof BaseFigureProxy))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=BaseFigureProxy_getPrototypeOf(BaseFigureProxy)).call.apply(e,[this].concat(o)))||"object"!==BaseFigureProxy_typeof(r)&&"function"!=typeof r?BaseFigureProxy_assertThisInitialized(this):r,BaseFigureProxy_defineProperty(BaseFigureProxy_assertThisInitialized(t),"_pointTexture",null),BaseFigureProxy_defineProperty(BaseFigureProxy_assertThisInitialized(t),"_hoveredPointTexture",null),BaseFigureProxy_defineProperty(BaseFigureProxy_assertThisInitialized(t),"_tagsContainer",null),BaseFigureProxy_defineProperty(BaseFigureProxy_assertThisInitialized(t),"_borderDash",null),t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BaseFigureProxy_setPrototypeOf(e,t)}(BaseFigureProxy,zs.a),t=BaseFigureProxy,n=[{key:"copyCanvas",value:function(e,t){var r=e.getContext("2d"),n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),t.width=e.width,t.height=e.height;var o=r.getImageData(0,0,e.width,e.height);return n.putImageData(o,0,0),t}},{key:"makeCanvasFromPixelData",value:function(e,t,r){var n=document.createElement("canvas");return n.width=e,n.height=t,n.getContext("2d").putImageData(new ImageData(r,n.width,n.height),0,0),n}},{key:"toBase64",value:function(e){return e.replace("data:image/png;base64,","")}},{key:"Point",get:function(){return $s}},{key:"Rect",get:function(){return Xs}},{key:"_updateFields",get:function(){return[].concat(function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(zs.a._updateFields),["pointTexture","hoveredPointTexture","description","borderDash","rectBorder"])}}],(r=[{key:"supportsTags",value:function(){return!this.isHole}},{key:"addTag",value:function(e,t){return this._tagsContainer?this._tagsContainer.addTag(e,t):null}},{key:"removeTagAt",value:function(e){return this._tagsContainer?this._tagsContainer.removeTagAt(e):null}},{key:"refreshPointsTextures",value:function(){var e=this;this.points.forEach(function(t){e._setPointTexture(t,e.pointTexture)})}},{key:"_afterPointAdd",value:function(){this.refreshPointsTextures()}},{key:"_afterPointRemove",value:function(){this.refreshPointsTextures()}},{key:"init",value:function(e){this.isHole?BaseFigureProxy_get(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"init",this).call(this,e):(this.graphics=this._createGraphics(e),this.graphics.containsPoint=this._graphicsContainsPoint.bind(this),BaseFigureProxy_get(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"init",this).call(this,e),this.graphics&&this.emit("graphics:add",this.graphics))}},{key:"makeCanvasFromPixelData",value:function(){return this.toBitmap().data}},{key:"toBitmap",value:function(){var e=this.graphics.clone();!function(e,t){for(var r=e.graphicsData,n=Object.keys(t),o=0;o<n.length;o++){var i=n[o];e[i]=t[i]}for(var a=0;a<r.length;a++)for(var s=r[a],c=0;c<n.length;c++){var u=n[c];s[u]=t[u]}e.dirty+=1,e.clearDirty+=1}(e,{fillAlpha:1,alpha:1,tint:16777215,lineWidth:0,lineColor:16777215,fillColor:16777215});var t=e.generateCanvasTexture();e=null;var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t.baseTexture.source,0,0),{origin:[this.rect.pixelLeft,this.rect.pixelTop],data:r}}},{key:"_toBase64",value:function(){var e=this.toBitmap(),t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(new ImageData(e.pixelData,t.width,t.height),0,0),t.toDataURL()}},{key:"toBase64",value:function(e){return this.constructor.toBase64(e||this._toBase64())}},{key:"setPointTexture",value:function(e,t){this._setPointTexture(e,t),this.render()}},{key:"_setPointTexture",value:function(e,t){e.texture!==t&&(e.texture=t)}},{key:"_graphicsContainsPoint",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.graphics.constructor.prototype.containsPoint).call.apply(e,[this.graphics].concat(r))}},{key:"_createGraphics",value:function(){var e=this,t=new Ys.Graphics;return t.interactive=!0,t.on("pointerdown",function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.onPointerDown.apply(e,[e,t,getOriginalEvent.apply(void 0,n)].concat(n))}).on("pointerup",function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.onPointerUp.apply(e,[e,t,getOriginalEvent.apply(void 0,n)].concat(n))}).on("pointerupoutside",function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.onPointerUpOutside.apply(e,[e,t,getOriginalEvent.apply(void 0,n)].concat(n))}).on("pointerover",function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.onPointerOver.apply(e,[e,t,getOriginalEvent.apply(void 0,n)].concat(n))}).on("pointerout",function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.onPointerOut.apply(e,[e,t,getOriginalEvent.apply(void 0,n)].concat(n))}).on("pointermove",function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.onPointerMove.apply(e,[e,t,getOriginalEvent.apply(void 0,n)].concat(n))}),t}},{key:"_onPointOver",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[0];this.setPointTexture(o,this.hoveredPointTexture),(e=BaseFigureProxy_get(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"_onPointOver",this)).call.apply(e,[this].concat(r))}},{key:"_onPointOut",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[0];this.setPointTexture(o,this.pointTexture),(e=BaseFigureProxy_get(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"_onPointOut",this)).call.apply(e,[this].concat(r))}},{key:"_parseColor",value:function(e){return parseColor(e)}},{key:"_mapNewPoint",value:function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){BaseFigureProxy_defineProperty(e,t,r[t])})}return e}({},e,{texture:this.pointTexture})}},{key:"_addPointEventArg",value:function(e){return e.proxy}},{key:"_removePointEventArg",value:function(e){return e.proxy}},{key:"_destroy",value:function(){this._tagsContainer&&(this.emit("tags-container:remove",this._tagsContainer.graphics),this._tagsContainer=this._tagsContainer.destroy()),this.graphics&&(this.emit("graphics:remove",this.graphics),this.graphics.destroy(!0),this.graphics=null),this.rect=this.rect.destroy(),this.pointTexture=null,BaseFigureProxy_get(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"_destroy",this).call(this)}},{key:"visible",get:function(){return BaseFigureProxy_get(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"visible",this)},set:function(e){helpers_BaseFigureProxy_set(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"visible",e,this,!0),this.graphics&&(this.graphics.visible=this.visible)}},{key:"color",get:function(){return BaseFigureProxy_get(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"color",this)},set:function(e){helpers_BaseFigureProxy_set(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"color",this._parseColor(e),this,!0),this._tagsContainer&&(this._tagsContainer.color=this.color)}},{key:"borderDash",get:function(){return this._borderDash},set:function(e){this._borderDash=e,this.graphics&&(this.graphics.lineDash=this.borderDash?{dash:this.borderDash.dash,gap:this.borderDash.gap}:null)}},{key:"rectBorder",get:function(){return this.rect?this.rect.border:0},set:function(e){this.rect&&(this.rect.border=e)}},{key:"template",get:function(){return BaseFigureProxy_get(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"template",this)},set:function(e){this.isHole||helpers_BaseFigureProxy_set(BaseFigureProxy_getPrototypeOf(BaseFigureProxy.prototype),"template",e,this,!0)}},{key:"pointTexture",get:function(){return this._pointTexture},set:function(e){this._pointTexture=e}},{key:"hoveredPointTexture",get:function(){return this._hoveredPointTexture},set:function(e){this._hoveredPointTexture=e}},{key:"description",get:function(){return this._tagsContainer?this._tagsContainer.description:""},set:function(e){this._tagsContainer&&(this._tagsContainer.description=e)}},{key:"tags",get:function(){return this._tagsContainer?this._tagsContainer.tags:[]}}])&&BaseFigureProxy_defineProperties(t.prototype,r),n&&BaseFigureProxy_defineProperties(t,n),BaseFigureProxy}()).prototype,"borderDash",[Ws.a,qs.a],Object.getOwnPropertyDescriptor(Ks.prototype,"borderDash"),Ks.prototype),Ks),oc=r("3fae4fbe6eab0047c868");function PointFigureProxy_typeof(e){return(PointFigureProxy_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PointFigureProxy_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function PointFigureProxy_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PointFigureProxy_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PointFigureProxy_get(e,t,r){return(PointFigureProxy_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PointFigureProxy_getPrototypeOf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function PointFigureProxy_getPrototypeOf(e){return(PointFigureProxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PointFigureProxy_setPrototypeOf(e,t){return(PointFigureProxy_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function PointFigureProxy_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ic,ac=(rc=tc=function(e){function PointFigureProxy(){var e,t,r;!function(e,t){if(!(e instanceof PointFigureProxy))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=PointFigureProxy_getPrototypeOf(PointFigureProxy)).call.apply(e,[this].concat(o)))||"object"!==PointFigureProxy_typeof(r)&&"function"!=typeof r?PointFigureProxy_assertThisInitialized(this):r,PointFigureProxy_defineProperty(PointFigureProxy_assertThisInitialized(t),"_pointRadius",12),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PointFigureProxy_setPrototypeOf(e,t)}(PointFigureProxy,nc),t=PointFigureProxy,(r=[{key:"updateBoundingRect",value:function(){var e=PointFigureProxy_slicedToArray(this.points,1)[0],t=Math.max((this.graphics.width||this.pointRadius)/2,1),r=Math.max((this.graphics.height||this.pointRadius)/2,1);this.rect.updateDimensions({left:e.left-t,right:e.left+t,top:e.top-r,bottom:e.top+r})}},{key:"_draw",value:function(){if(PointFigureProxy_get(PointFigureProxy_getPrototypeOf(PointFigureProxy.prototype),"_draw",this).call(this),this.graphics.clear(),!(this.points.length<1)){var e=PointFigureProxy_slicedToArray(this.points,1)[0];this.graphics.beginFill(this.color,this.opacity),this.graphics.lineStyle(this.border,this.color),this.graphics.drawCircle(e.left,e.top,this.pointRadius),this._drawHoles(),this.graphics.endFill(),this.updateBoundingRect()}}},{key:"pointRadius",get:function(){return this._pointRadius},set:function(e){this._pointRadius=e}}])&&PointFigureProxy_defineProperties(t.prototype,r),PointFigureProxy}(),PointFigureProxy_defineProperty(tc,"_updateFields",[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(ic=nc._updateFields)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(ic)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),["pointRadius"])),function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((ec=rc).prototype,"pointRadius",[Ws.a,qs.a],Object.getOwnPropertyDescriptor(ec.prototype,"pointRadius"),ec.prototype),ec);function polygonPointsIterator(e,t,r){var n=t.useLastPoint,o=void 0===n||n,i=e.length;o||(i-=1);for(var a=0;a<i;++a){var s=(a+1)%e.length;if(r(e[a],e[s]))return!0}return!1}inheritFigure(ac,oc.a);var sc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.lineAlignment,n=void 0===r?1:r,o=t.pointsIterator,i=void 0===o?polygonPointsIterator:o,a=t.points,s=void 0===a?this.points:a;if(!s||!s.length)return!1;var c=this.graphics.worldTransform.applyInverse(e);c={left:c.x,top:c.y};var u=this.border/2,l=2*(1-n),p=2*n;return!(c.left<this.rect.left-u||c.left>this.rect.right+u||c.top<this.rect.top-u||c.top>this.rect.bottom+u)&&i(s,t,function(e,t){var r={left:e.left-t.left,top:t.top-e.top},n=Math.sqrt(Math.pow(r.left,2)+Math.pow(r.top,2));r.left=u*(r.left/n),r.top=u*(r.top/n);var o=[{left:e.left-r.top*l,top:e.top-r.left*l},{left:e.left+r.top*p,top:e.top+r.left*p},{left:t.left+r.top*p,top:t.top+r.left*p},{left:t.left-r.top*l,top:t.top-r.left*l}];return Object(Ms.e)(c,o)},c)},cc=r("6f85eb15a67f370c0bde");function LineFigureProxy_typeof(e){return(LineFigureProxy_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LineFigureProxy_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function LineFigureProxy_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LineFigureProxy_set(e,t,r,n){return(LineFigureProxy_set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,i=LineFigureProxy_superPropBase(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else LineFigureProxy_defineProperty(n,t,r);return!0})(e,t,r,n)}function LineFigureProxy_get(e,t,r){return(LineFigureProxy_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=LineFigureProxy_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function LineFigureProxy_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LineFigureProxy_getPrototypeOf(e)););return e}function LineFigureProxy_getPrototypeOf(e){return(LineFigureProxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LineFigureProxy_setPrototypeOf(e,t){return(LineFigureProxy_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LineFigureProxy_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uc=function(e){function LineFigureProxy(){var e,t,r;!function(e,t){if(!(e instanceof LineFigureProxy))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=LineFigureProxy_getPrototypeOf(LineFigureProxy)).call.apply(e,[this].concat(o)))||"object"!==LineFigureProxy_typeof(r)&&"function"!=typeof r?LineFigureProxy_assertThisInitialized(this):r,LineFigureProxy_defineProperty(LineFigureProxy_assertThisInitialized(t),"lastPointTexture",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LineFigureProxy_setPrototypeOf(e,t)}(LineFigureProxy,nc),t=LineFigureProxy,(r=[{key:"_graphicsContainsPoint",value:function(e){return!!this.opacity&&sc.call(this,e,{lineAlignment:.5,useLastPoint:!1})}},{key:"_setPointTexture",value:function(e,t){var r=null;t===this.hoveredPointTexture&&(r=t),r||e===this.points[this.points.length-1]&&(r=this.lastPointTexture),r||(r=t),LineFigureProxy_get(LineFigureProxy_getPrototypeOf(LineFigureProxy.prototype),"_setPointTexture",this).call(this,e,r)}},{key:"_draw",value:function(){if(LineFigureProxy_get(LineFigureProxy_getPrototypeOf(LineFigureProxy.prototype),"_draw",this).call(this),this.graphics.clear(),!(this.points.length<2)){if(this.graphics.alpha=this.opacity,this.graphics.lineStyle(this.border,this.color),this.borderDash)for(var e=1;e<this.points.length;++e){var t=this.points[e-1],r=this.points[e];this.graphics.moveTo(t.left,t.top),this.graphics.lineTo(r.left,r.top)}else{this.graphics.moveTo(this.points[0].left,this.points[0].top);for(var n=1;n<this.points.length;++n){var o=this.points[n];this.graphics.lineTo(o.left,o.top)}}this._drawHoles(),this.graphics.endFill()}}},{key:"border",get:function(){return LineFigureProxy_get(LineFigureProxy_getPrototypeOf(LineFigureProxy.prototype),"border",this)},set:function(e){!function(e,t,r,n,o){if(!LineFigureProxy_set(e,"border",r,n||e))throw new Error("failed to set property")}(LineFigureProxy_getPrototypeOf(LineFigureProxy.prototype),0,Math.max(e,.5),this)}},{key:"lineBorder",set:function(e){this.border=e}}])&&LineFigureProxy_defineProperties(t.prototype,r),LineFigureProxy}();LineFigureProxy_defineProperty(uc,"_updateFields",[].concat(function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(nc._updateFields),["lastPointTexture","lineBorder"])),inheritFigure(uc,cc.a);var lc=r("816e7732949845b05bfd");function PolygonFigureProxy_typeof(e){return(PolygonFigureProxy_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PolygonFigureProxy_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PolygonFigureProxy_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PolygonFigureProxy_get(e,t,r){return(PolygonFigureProxy_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PolygonFigureProxy_getPrototypeOf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function PolygonFigureProxy_getPrototypeOf(e){return(PolygonFigureProxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PolygonFigureProxy_setPrototypeOf(e,t){return(PolygonFigureProxy_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function PolygonFigureProxy_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pc=function(e){function PolygonFigureProxy(){var e,t,r;!function(e,t){if(!(e instanceof PolygonFigureProxy))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=PolygonFigureProxy_getPrototypeOf(PolygonFigureProxy)).call.apply(e,[this].concat(o)))||"object"!==PolygonFigureProxy_typeof(r)&&"function"!=typeof r?PolygonFigureProxy_assertThisInitialized(this):r,PolygonFigureProxy_defineProperty(PolygonFigureProxy_assertThisInitialized(t),"lastPointTexture",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PolygonFigureProxy_setPrototypeOf(e,t)}(PolygonFigureProxy,nc),t=PolygonFigureProxy,(r=[{key:"_setPointTexture",value:function(e,t){var r=null;if(t===this.hoveredPointTexture&&(r=t),!r){var n=this.points[0],o=this.points[this.points.length-1];e!==n&&e!==o||(r=this.lastPointTexture)}r||(r=t),PolygonFigureProxy_get(PolygonFigureProxy_getPrototypeOf(PolygonFigureProxy.prototype),"_setPointTexture",this).call(this,e,r)}},{key:"_draw",value:function(){if(PolygonFigureProxy_get(PolygonFigureProxy_getPrototypeOf(PolygonFigureProxy.prototype),"_draw",this).call(this),this.graphics.clear(),!(this.points.length<3)){if(this.graphics.beginFill(this.color,this.opacity),this.graphics.lineStyle(this.border,this.color,1,this.isClockwise?1:0),this.borderDash)for(var e=0;e<this.points.length;++e){var t=this.points[e],r=this.points[(e+1)%this.points.length];this.graphics.moveTo(t.left,t.top),this.graphics.lineTo(r.left,r.top)}else{this.graphics.moveTo(this.points[0].left,this.points[0].top);for(var n=1;n<=this.points.length;++n){var o=this.points[n%this.points.length];this.graphics.lineTo(o.left,o.top)}}this._drawHoles(),this.graphics.endFill()}}},{key:"_drawHole",value:function(){PolygonFigureProxy_get(PolygonFigureProxy_getPrototypeOf(PolygonFigureProxy.prototype),"_drawHole",this).call(this),this.parent.graphics.drawPolygon(this.points.reduce(function(e,t){return e.push(t.left,t.top),e},[])),this.parent.graphics.addHole()}},{key:"_graphicsContainsPoint",value:function(e){return!!PolygonFigureProxy_get(PolygonFigureProxy_getPrototypeOf(PolygonFigureProxy.prototype),"_graphicsContainsPoint",this).call(this,e)||sc.call(this,e,{lineAlignment:this.isClockwise?1:0})}},{key:"_destroy",value:function(){this.lastPointTexture=null,PolygonFigureProxy_get(PolygonFigureProxy_getPrototypeOf(PolygonFigureProxy.prototype),"_destroy",this).call(this)}}])&&PolygonFigureProxy_defineProperties(t.prototype,r),PolygonFigureProxy}();PolygonFigureProxy_defineProperty(pc,"_updateFields",[].concat(function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(nc._updateFields),["lastPointTexture"])),inheritFigure(pc,lc.a,{type:lc.a,include:!0,props:[{key:"getSegments"},{key:"updateBoundingRect"},{key:"isClockwise"},{key:"updateClockwise"}]});var fc=r("15733e295fc211e6c486");function RectangleFigureProxy_typeof(e){return(RectangleFigureProxy_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RectangleFigureProxy_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RectangleFigureProxy_get(e,t,r){return(RectangleFigureProxy_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RectangleFigureProxy_getPrototypeOf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function RectangleFigureProxy_getPrototypeOf(e){return(RectangleFigureProxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RectangleFigureProxy_setPrototypeOf(e,t){return(RectangleFigureProxy_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dc=function(e){function RectangleFigureProxy(){return function(e,t){if(!(e instanceof RectangleFigureProxy))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==RectangleFigureProxy_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,RectangleFigureProxy_getPrototypeOf(RectangleFigureProxy).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RectangleFigureProxy_setPrototypeOf(e,t)}(RectangleFigureProxy,nc),t=RectangleFigureProxy,(r=[{key:"_draw",value:function(){if(RectangleFigureProxy_get(RectangleFigureProxy_getPrototypeOf(RectangleFigureProxy.prototype),"_draw",this).call(this),this.graphics.clear(),!(this.points.length<2)){this.graphics.beginFill(this.color,this.opacity),this.graphics.lineStyle(this.border,this.color,1,1);var e=this.makePolygonFromTwoPoints(this.points);if(this.borderDash)for(var t=0;t<e.length;++t){var r=e[t],n=e[(t+1)%e.length];this.graphics.moveTo(r.left,r.top),this.graphics.lineTo(n.left,n.top)}else{this.graphics.moveTo(e[0].left,e[0].top);for(var o=1;o<=e.length;++o){var i=e[o%e.length];this.graphics.lineTo(i.left,i.top)}}this._drawHoles(),this.graphics.endFill()}}},{key:"_drawHole",value:function(){RectangleFigureProxy_get(RectangleFigureProxy_getPrototypeOf(RectangleFigureProxy.prototype),"_drawHole",this).call(this),this.parent.graphics.drawPolygon(this.makePolygonFromTwoPoints(this.points).reduce(function(e,t){return e.push(t.left,t.top),e},[])),this.parent.graphics.addHole()}},{key:"_graphicsContainsPoint",value:function(e){return!!RectangleFigureProxy_get(RectangleFigureProxy_getPrototypeOf(RectangleFigureProxy.prototype),"_graphicsContainsPoint",this).call(this,e)||sc.call(this,e,{points:this.makePolygonFromTwoPoints(this.points)})}}])&&RectangleFigureProxy_defineProperties(t.prototype,r),RectangleFigureProxy}();inheritFigure(dc,fc.a,{type:fc.a,include:!0,props:[{key:"makeRectFromTwoPoints"},{key:"makePolygonFromTwoPoints"}]});var _c=r("e8d977ad0016fe5fac79");function BitmapFigureProxy_typeof(e){return(BitmapFigureProxy_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BitmapFigureProxy_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function BitmapFigureProxy_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function BitmapFigureProxy_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function BitmapFigureProxy_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BitmapFigureProxy_set(e,t,r,n){return(BitmapFigureProxy_set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,i=BitmapFigureProxy_superPropBase(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else BitmapFigureProxy_defineProperty(n,t,r);return!0})(e,t,r,n)}function proxies_BitmapFigureProxy_set(e,t,r,n,o){if(!BitmapFigureProxy_set(e,t,r,n||e)&&o)throw new Error("failed to set property");return r}function BitmapFigureProxy_get(e,t,r){return(BitmapFigureProxy_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=BitmapFigureProxy_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function BitmapFigureProxy_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BitmapFigureProxy_getPrototypeOf(e)););return e}function BitmapFigureProxy_getPrototypeOf(e){return(BitmapFigureProxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BitmapFigureProxy_setPrototypeOf(e,t){return(BitmapFigureProxy_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BitmapFigureProxy_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yc={"graphics:add":"graphics:add","graphics:remove":"graphics:remove","pointer:over":"pointer:over","pointer:out":"pointer:out"},gc=function(e){function BitmapFigureProxy(){var e,t,r;!function(e,t){if(!(e instanceof BitmapFigureProxy))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy)).call.apply(e,[this].concat(o)))||"object"!==BitmapFigureProxy_typeof(r)&&"function"!=typeof r?BitmapFigureProxy_assertThisInitialized(this):r,BitmapFigureProxy_defineProperty(BitmapFigureProxy_assertThisInitialized(t),"contour",null),BitmapFigureProxy_defineProperty(BitmapFigureProxy_assertThisInitialized(t),"_pixelData",null),t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BitmapFigureProxy_setPrototypeOf(e,t)}(BitmapFigureProxy,nc),t=BitmapFigureProxy,n=[{key:"mergeBitmaps",value:function(e){var t=e.map(function(e){var t=e.data,r=t.width,n=t.height,o=BitmapFigureProxy_slicedToArray(e.origin,2),i=o[0],a=o[1];return{left:i,top:a,right:i+r,bottom:a+n}}),r=Xs.relativeRects(t,!0),n=r.origin,o=r.layout,i=r.rects,a=document.createElement("canvas");a.width=o.width,a.height=o.height;for(var s=a.getContext("2d"),c=1,u=e.length;c<u;++c){var l=e[c].data,p=i[c-1];s.drawImage(l,p.left,p.top),s.globalCompositeOperation="destination-over"}var f=e[0].data;return s.drawImage(f,n.left,n.top),{data:a,origin:[o.left,o.top]}}},{key:"eraseBitmaps",value:function(e){for(var t=[{left:e[0].origin[0],top:e[0].origin[1],right:e[0].origin[0]+e[0].data.width,bottom:e[0].origin[1]+e[0].data.height}],r=1,n=e.length;r<n;++r){var o=e[r],i=o.data,a=i.width,s=i.height,c=BitmapFigureProxy_slicedToArray(o.origin,2),u=c[0],l=c[1],p=Object(Ms.b)(t[0],{left:u,top:l,right:u+a,bottom:l+s});p&&t.push(p)}if(t.length<=1)return e[0];var f=Xs.relativeRects(t,!0),d=f.origin,_=f.layout,y=f.rects,g=document.createElement("canvas");g.width=_.width,g.height=_.height;var h=g.getContext("2d"),b=e[0].data;h.drawImage(b,d.left,d.top);for(var v=1,m=e.length;v<m;++v){var O=e[v].data,P=y[v-1];h.globalCompositeOperation="destination-out",h.drawImage(O,P.left,P.top)}return{data:g,origin:[_.left,_.top]}}},{key:"drawPointsOnBitmap",value:function(e){var t=e.points,r=e.bitmap,n=e.erase,o=void 0!==n&&n,i=e.limit,a=r?r.origin.slice(0):[0,0],s=r?r.data:null,c={width:i.width,height:i.height};o||r&&s.width===c.width&&s.height===c.height||((s=document.createElement("canvas")).width=c.width,s.height=c.height,a=[0,0]);var u=s.getContext("2d");r&&s!==r.data&&u.drawImage(r.data,r.origin[0],r.origin[1]);var l=u.globalCompositeOperation;return o&&(u.globalCompositeOperation="destination-out"),t.forEach(function(e,r){var n=e.type;if(0===r)"circle"===n&&(u.beginPath(),u.arc(e.left-a[0],e.top-a[1],e.size,0,2*Math.PI,!1),u.fillStyle="white",u.fill());else{var o=t[r-1];"circle"===n&&(u.beginPath(),u.moveTo(o.left-a[0],o.top-a[1]),u.lineTo(e.left-a[0],e.top-a[1]),u.strokeStyle="white",u.lineCap="round",u.lineWidth=2*e.size,u.stroke(),u.closePath())}}),l!==u.globalCompositeOperation&&(u.globalCompositeOperation=l),i&&(a[0]<0&&(a[0]=0),a[0]>i.width&&(a[0]=i.width),a[1]<0&&(a[1]=0),a[1]>i.height&&(a[1]=i.height),(s.width>i.width||s.height>i.height)&&(s=Object(kn.g)(s,{left:0,top:0,width:i.width,height:i.height}))),{data:s,origin:a}}}],(r=[{key:"supportsTags",value:function(e){return!e.skipContour&&BitmapFigureProxy_get(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"supportsTags",this).call(this,e)}},{key:"init",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];if((t=BitmapFigureProxy_get(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"init",this)).call.apply(t,[this,e].concat(n)),!e.skipContour){this.contour=new this.constructor,Object(j.n)(this,this.contour,yc);var i={visible:!!e.border,skipContour:!0};e.bitmap&&(i.bitmap={data:e.bitmap.contour,origin:e.bitmap.origin}),this.contour.init(i)}}},{key:"mergeBitmaps",value:function(e){var t=this.constructor.mergeBitmaps([this.bitmap].concat(BitmapFigureProxy_toConsumableArray(e)));this.constructor.copyCanvas(t.data,this.bitmap.data),this.bitmap=t}},{key:"mergeBitmap",value:function(e){return this.mergeBitmaps([e])}},{key:"eraseBitmaps",value:function(e){var t=this.constructor.eraseBitmaps([this.bitmap].concat(BitmapFigureProxy_toConsumableArray(e)));t!==this.bitmap&&(this.constructor.copyCanvas(t.data,this.bitmap.data),this.bitmap=t)}},{key:"eraseBitmap",value:function(e){return this.eraseBitmaps([e])}},{key:"drawPoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.bitmap=this.constructor.drawPointsOnBitmap({bitmap:this.bitmap,points:e,erase:t,limit:this.limit}),this.bitmap}},{key:"_draw",value:function(){this.graphics.texture.baseTexture.source&&(BitmapFigureProxy_get(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"_draw",this).call(this),this.graphics.alpha=this.opacity,this.graphics.texture.update(),this.contour&&this.contour.draw())}},{key:"removeAll",value:function(){BitmapFigureProxy_get(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"removeAll",this).call(this),this.destroyed||(this.bitmap=null,this.contour&&this.contour.removeAll())}},{key:"toBitmap",value:function(){return this.bitmap}},{key:"updateBoundingRect",value:function(){if(this.rect.updateDimensions({left:this.graphics.x,right:this.graphics.x+this.graphics.width,top:this.graphics.y,bottom:this.graphics.y+this.graphics.height}),this.pixelData){var e=Object(kn.c)(this.pixelData,this.rect.width,this.rect.height);e&&(this.leftTopPoint={left:this.bitmap.origin[0]+e.left,top:this.bitmap.origin[1]+e.top})}}},{key:"updatePixelData",value:function(){var e;this._pixelData=this.bitmap?(e=this.bitmap.data).getContext("2d").getImageData(0,0,e.width,e.height).data:null}},{key:"_graphicsContainsPoint",value:function(e){if(!this.pixelData)return!1;var t=!1;if(this.opacity&&BitmapFigureProxy_get(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"_graphicsContainsPoint",this).call(this,e)){var r=this.graphics.worldTransform.applyInverse(e);r={x:Math.round(r.x+this.graphics.texture.frame.x),y:Math.round(r.y+this.graphics.texture.frame.y)},t=!function(e,t){var r=4*(t.x+t.y*e.width)+3;return 255!==e.data[r]}({width:this.graphics.width,data:this.pixelData},r)}else this.contour&&(t=this.contour._graphicsContainsPoint(e));return t}},{key:"_createGraphics",value:function(e){var t=this,r=e.bitmap;if(!r)return new Ys.Sprite;var n=new Ys.Sprite;n.interactive=!0;var o=BitmapFigureProxy_slicedToArray(r.origin,2);return n.x=o[0],n.y=o[1],n.on("pointerdown",function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.onPointerDown.apply(t,[t,n,getOriginalEvent.apply(void 0,r)].concat(r))}).on("pointerup",function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.onPointerUp.apply(t,[t,n,getOriginalEvent.apply(void 0,r)].concat(r))}).on("pointerupoutside",function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.onPointerUpOutside.apply(t,[t,n,getOriginalEvent.apply(void 0,r)].concat(r))}).on("pointerover",function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.onPointerOver.apply(t,[t,n,getOriginalEvent.apply(void 0,r)].concat(r))}).on("pointerout",function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.onPointerOut.apply(t,[t,n,getOriginalEvent.apply(void 0,r)].concat(r))}).on("pointermove",function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.onPointerMove.apply(t,[t,n,getOriginalEvent.apply(void 0,r)].concat(r))}),n}},{key:"_destroy",value:function(){this._pixelData=null,this.contour&&this.contour.destroy(),BitmapFigureProxy_get(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"_destroy",this).call(this)}},{key:"bitmap",get:function(){return BitmapFigureProxy_get(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"bitmap",this)},set:function(e){if(!e)return proxies_BitmapFigureProxy_set(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"bitmap",e,this,!0),this.contour&&(this.contour.bitmap=e),this.graphics.texture.destroy(!0),this.graphics.texture=Ys.Texture.fromCanvas(document.createElement("canvas")),this.updatePixelData(),void(this.rect&&this.updateBoundingRect());var t=!1;if(this.bitmap&&this.bitmap.data===e.data||!this.graphics?t=!0:(this.graphics.texture.destroy(!0),this.graphics.texture=Ys.Texture.fromCanvas(e.data)),proxies_BitmapFigureProxy_set(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"bitmap",e,this,!0),this.contour&&(this.contour.bitmap={data:this.bitmap.contour,origin:this.bitmap.origin}),this.graphics){var r=BitmapFigureProxy_slicedToArray(this.bitmap.origin,2);this.graphics.x=r[0],this.graphics.y=r[1],t?(this._shouldDraw=!0,this.rect&&this.updateBoundingRect(),this.draw(),this.render()):(this.updatePixelData(),this.rect&&this.updateBoundingRect())}}},{key:"pixelData",get:function(){return this._pixelData}},{key:"color",get:function(){return BitmapFigureProxy_get(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"color",this)},set:function(e){proxies_BitmapFigureProxy_set(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"color",this._parseColor(e),this,!0),this.graphics&&(this.graphics.tint=this.color)}},{key:"border",get:function(){return BitmapFigureProxy_get(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"border",this)},set:function(e){proxies_BitmapFigureProxy_set(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"border",!!e,this,!0),this.contour&&this.bitmap&&this.visible&&(this.contour.visible=e)}},{key:"visible",get:function(){return BitmapFigureProxy_get(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"visible",this)},set:function(e){proxies_BitmapFigureProxy_set(BitmapFigureProxy_getPrototypeOf(BitmapFigureProxy.prototype),"visible",e,this,!0),this.contour&&this.bitmap&&(e?this.border&&(this.contour.visible=e):this.contour.visible=e)}}])&&BitmapFigureProxy_defineProperties(t.prototype,r),n&&BitmapFigureProxy_defineProperties(t,n),BitmapFigureProxy}();inheritFigure(gc,_c.a);var hc=r("05a20e14c5319c4451a2");function GraphFigureProxy_typeof(e){return(GraphFigureProxy_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GraphFigureProxy_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GraphFigureProxy_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GraphFigureProxy_set(e,t,r,n){return(GraphFigureProxy_set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,i=GraphFigureProxy_superPropBase(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else GraphFigureProxy_defineProperty(n,t,r);return!0})(e,t,r,n)}function GraphFigureProxy_get(e,t,r){return(GraphFigureProxy_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=GraphFigureProxy_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function GraphFigureProxy_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GraphFigureProxy_getPrototypeOf(e)););return e}function GraphFigureProxy_getPrototypeOf(e){return(GraphFigureProxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GraphFigureProxy_setPrototypeOf(e,t){return(GraphFigureProxy_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GraphFigureProxy_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bc=function(e){function GraphFigureProxy(){var e,t,r;!function(e,t){if(!(e instanceof GraphFigureProxy))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=GraphFigureProxy_getPrototypeOf(GraphFigureProxy)).call.apply(e,[this].concat(o)))||"object"!==GraphFigureProxy_typeof(r)&&"function"!=typeof r?GraphFigureProxy_assertThisInitialized(this):r,GraphFigureProxy_defineProperty(GraphFigureProxy_assertThisInitialized(t),"pointsOpts",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GraphFigureProxy_setPrototypeOf(e,t)}(GraphFigureProxy,nc),t=GraphFigureProxy,(r=[{key:"_graphicsContainsPoint",value:function(e){var t=this;return!!this.opacity&&sc.call(this,e,{lineAlignment:.5,pointsIterator:function(e,r,n,o){var i=Object(j.l)(e,"label");return!!e.some(function(e){return Object(Ms.f)(o,e,t.pointsOpts.radius)})||t.edges.some(function(e){var t=i.get(e.src);if(!t)return!1;var r=i.get(e.dst);return!!r&&n(t,r)})}})}},{key:"_setPointTexture",value:function(e,t){var r=null;t===this.hoveredPointTexture&&(r=t),!r&&e.color&&(r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.opacity,r=void 0===t?1:t,n=e.color,o=void 0===n?16711680:n,i=e.radius,a=void 0===i?4:i,s=e.strokeOpacity,c=void 0===s?1:s,u=e.strokeColor,l=void 0===u?0:u,p=e.strokeWidth,f=void 0===p?4:p,d=new Ys.Graphics;return d.lineStyle(f,l,c),d.beginFill(o,r),d.drawCircle(0,0,a),d.endFill(),d.generateCanvasTexture()}(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){GraphFigureProxy_defineProperty(e,t,r[t])})}return e}({},this.pointsOpts,{color:e.color,strokeColor:e.color}))),r||(r=t),GraphFigureProxy_get(GraphFigureProxy_getPrototypeOf(GraphFigureProxy.prototype),"_setPointTexture",this).call(this,e,r)}},{key:"_draw",value:function(){if(GraphFigureProxy_get(GraphFigureProxy_getPrototypeOf(GraphFigureProxy.prototype),"_draw",this).call(this),this.graphics.clear(),this.points.length){var e=Object(j.l)(this.points,"label");this.graphics.alpha=this.opacity,this.graphics.lineStyle(this.border,this.color);for(var t=0,r=this.edges.length;t<r;++t){this.graphics.lineStyle(this.border,this.color);var n=this.edges[t],o=e.get(n.src);if(o){var i=e.get(n.dst);i&&(n.color&&this.graphics.lineStyle(this.border,this._parseColor(n.color)),this.graphics.moveTo(o.left,o.top),this.graphics.lineTo(i.left,i.top))}}this.graphics.lineStyle(this.border,this.color),this.graphics.beginFill(this.color);for(var a=0,s=this.points.length;a<s;++a){var c=this.points[a];c.color?(this.graphics.beginFill(c.color),this.graphics.lineStyle(this.border,c.color)):(this.graphics.lineStyle(this.border,this.color),this.graphics.beginFill(this.color)),this.graphics.drawCircle(c.left,c.top,this.border)}this.graphics.endFill()}}},{key:"_destroy",value:function(){this.pointsOpts=null,this.edges=null,GraphFigureProxy_get(GraphFigureProxy_getPrototypeOf(GraphFigureProxy.prototype),"_destroy",this).call(this)}},{key:"border",get:function(){return GraphFigureProxy_get(GraphFigureProxy_getPrototypeOf(GraphFigureProxy.prototype),"border",this)},set:function(e){!function(e,t,r,n,o){if(!GraphFigureProxy_set(e,"border",r,n||e))throw new Error("failed to set property")}(GraphFigureProxy_getPrototypeOf(GraphFigureProxy.prototype),0,Math.max(e,.5),this)}},{key:"lineBorder",set:function(e){this.border=e}}])&&GraphFigureProxy_defineProperties(t.prototype,r),GraphFigureProxy}();function PointsFigureProxy_typeof(e){return(PointsFigureProxy_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PointsFigureProxy_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PointsFigureProxy_getPrototypeOf(e){return(PointsFigureProxy_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PointsFigureProxy_setPrototypeOf(e,t){return(PointsFigureProxy_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}GraphFigureProxy_defineProperty(bc,"_updateFields",[].concat(function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(nc._updateFields),["lineBorder","edges","pointsOpts"])),inheritFigure(bc,hc.a,{type:hc.a,include:!0,props:[{key:"edges"}]});var vc,mc=function(e){function PointsFigureProxy(){return function(e,t){if(!(e instanceof PointsFigureProxy))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==PointsFigureProxy_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,PointsFigureProxy_getPrototypeOf(PointsFigureProxy).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PointsFigureProxy_setPrototypeOf(e,t)}(PointsFigureProxy,pc),t=PointsFigureProxy,(r=[{key:"_draw",value:function(){}},{key:"_drawHole",value:function(){}},{key:"toBitmap",value:function(){var e=this,t=document.createElement("canvas");t.width=Math.max(this.rect.width,1),t.height=Math.max(this.rect.height,1);var r=t.getContext("2d");return r.clearRect(0,0,t.width,t.height),r.fillStyle="white",this.points.forEach(function(t){var n=t.left-e.rect.left,o=t.top-e.rect.top;n=Math.round(Math.max(n-1,0)),o=Math.round(Math.max(o-1,0)),r.fillRect(n,o,1,1)}),{origin:[this.rect.pixelLeft,this.rect.pixelTop],data:t}}}])&&PointsFigureProxy_defineProperties(t.prototype,r),PointsFigureProxy}();function proxies_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oc=(proxies_defineProperty(vc={},ac.type,ac),proxies_defineProperty(vc,uc.type,uc),proxies_defineProperty(vc,pc.type,pc),proxies_defineProperty(vc,dc.type,dc),proxies_defineProperty(vc,gc.type,gc),proxies_defineProperty(vc,bc.type,bc),vc),Pc=r("bd2555d9b4311aab9971");function BaseTool_typeof(e){return(BaseTool_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BaseTool_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function BaseTool_getPrototypeOf(e){return(BaseTool_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BaseTool_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BaseTool_setPrototypeOf(e,t){return(BaseTool_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BaseTool_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tc=function(e){function BaseTool(e){var t,r;return function(e,t){if(!(e instanceof BaseTool))throw new TypeError("Cannot call a class as a function")}(this),this,t=!(r=BaseTool_getPrototypeOf(BaseTool).call(this))||"object"!==BaseTool_typeof(r)&&"function"!=typeof r?BaseTool_assertThisInitialized(this):r,BaseTool_defineProperty(BaseTool_assertThisInitialized(t),"stage",null),BaseTool_defineProperty(BaseTool_assertThisInitialized(t),"_component",null),BaseTool_defineProperty(BaseTool_assertThisInitialized(t),"_figureId",null),BaseTool_defineProperty(BaseTool_assertThisInitialized(t),"_classId",null),BaseTool_defineProperty(BaseTool_assertThisInitialized(t),"_enabled",!1),t._component=e,t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BaseTool_setPrototypeOf(e,t)}(BaseTool,Pc.EventEmitter),t=BaseTool,(r=[{key:"disable",value:function(){this.enabled=!1}},{key:"enable",value:function(){this.enabled=!0}},{key:"_init",value:function(){}},{key:"init",value:function(e,t){this.stage=e;for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];this._init.apply(this,[e,t].concat(n)),t.on("pointerover",this.onMouseOver.bind(this)),t.on("pointerout",this.onMouseOut.bind(this)),t.on("pointerdown",this.onMouseDown.bind(this)),t.on("pointerup",this.onMouseUp.bind(this)),t.on("pointerupoutside",this.onMouseUpOutside.bind(this)),t.on("pointermove",this.onMouseMove.bind(this))}},{key:"swapOptions",value:function(e,t,r){return r&&t.includes(e)?t[0]===e?t[1]:t[1]===e?t[0]:e:e}},{key:"onMouseOver",value:function(){}},{key:"onMouseOut",value:function(){}},{key:"onMouseDown",value:function(){}},{key:"onMouseUp",value:function(){}},{key:"onMouseUpOutside",value:function(){}},{key:"onMouseMove",value:function(){}},{key:"onPointOver",value:function(){}},{key:"onPointOut",value:function(){}},{key:"actionMouseDown",value:function(){}},{key:"actionMouseMove",value:function(){}},{key:"actionMouseUp",value:function(){}},{key:"actionPointClick",value:function(){}},{key:"actionPointMove",value:function(){}},{key:"refreshTextures",value:function(){}},{key:"updatePointsTexture",value:function(){}},{key:"_classChanged",value:function(){}},{key:"classChanged",value:function(e,t){this._classId=t,this._classChanged(e)}},{key:"_figureChanged",value:function(){}},{key:"figureChanged",value:function(e,t){this._figureId=t,this._figureChanged(e)}},{key:"figureContentChanged",value:function(){}},{key:"setLimit",value:function(){}},{key:"removeAll",value:function(){}},{key:"destroy",value:function(){this._component=null,this._classId=null,this._figureId=null}},{key:"render",value:function(){this.emit("render")}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=!!e}},{key:"figure",get:function(){return this.component?(!this._figureId&&this.component.currentFigure&&(this._figureId=this.component.currentFigure.id),this.component.figuresById[this._figureId]):null}},{key:"currentClass",get:function(){return this.component?(!this._classId&&this.component.currentClass&&(this._classId=this.component.currentClass.id),this.component.classes[this._classId]):null}},{key:"component",get:function(){return this._component}}])&&BaseTool_defineProperties(t.prototype,r),BaseTool}();function SmartTool_typeof(e){return(SmartTool_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SmartTool_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){SmartTool_defineProperty(e,t,r[t])})}return e}function SmartTool_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SmartTool_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SmartTool_set(e,t,r,n){return(SmartTool_set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,i=SmartTool_superPropBase(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else SmartTool_defineProperty(n,t,r);return!0})(e,t,r,n)}function SmartTool_get(e,t,r){return(SmartTool_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=SmartTool_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function SmartTool_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SmartTool_getPrototypeOf(e)););return e}function SmartTool_getPrototypeOf(e){return(SmartTool_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SmartTool_setPrototypeOf(e,t){return(SmartTool_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SmartTool_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Sc={"point:add":"point:add","point:remove":"point:remove",render:"render"},jc={polygons:{border:1.5},points:{opacity:1,color:16711680,radius:4,strokeOpacity:.5,strokeColor:7833753,strokeWidth:4}};function SmartTool_makePointTexture(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},jc.points,e),r=new Ys.Graphics;return r.lineStyle(t.strokeWidth,t.strokeColor,t.strokeOpacity),r.beginFill(t.color,t.opacity),r.drawCircle(0,0,t.radius),r.endFill(),r.generateCanvasTexture()}var wc=function(e){function SmartTool(){var e,t,r;!function(e,t){if(!(e instanceof SmartTool))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=SmartTool_getPrototypeOf(SmartTool)).call.apply(e,[this].concat(o)))||"object"!==SmartTool_typeof(r)&&"function"!=typeof r?SmartTool_assertThisInitialized(this):r,SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"_showSelected",!0),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"_opacity",.5),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"_color",16711680),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"_hoveredColor",13041408),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"changed",!1),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"_option",""),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"positiveColor",65280),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"negativeColor",16711680),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"positivePointTexture",null),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"negativePointTexture",null),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"hoveredPointTexture",null),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"selectionPointTexture",null),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"selectionHoveredPointTexture",null),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"selectionBox",null),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"positivePointsContainer",null),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"negativePointsContainer",null),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"positiveBitmap",null),SmartTool_defineProperty(SmartTool_assertThisInitialized(t),"negativeBitmap",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SmartTool_setPrototypeOf(e,t)}(SmartTool,Tc),t=SmartTool,(r=[{key:"getData",value:function(){return{crop:[{left:this.selectionBox.rect.pixelLeft,top:this.selectionBox.rect.pixelTop},{left:this.selectionBox.rect.pixelRight-1,top:this.selectionBox.rect.pixelBottom-1}],positive:this.positivePointsContainer.points.map(function(e){return{left:e.left,top:e.top}}),negative:this.negativePointsContainer.points.map(function(e){return{left:e.left,top:e.top}})}}},{key:"refreshTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jc,t=e.polygons,r=e.points;this.selectionBox.border=Math.max(t.border,1.5);var n={strokeOpacity:1,radius:r.radius,strokeWidth:r.strokeWidth};this.positivePointTexture=SmartTool_makePointTexture(SmartTool_objectSpread({},n,{color:this.positiveColor})),this.negativePointTexture=SmartTool_makePointTexture(SmartTool_objectSpread({},n,{color:this.negativeColor})),this.hoveredPointTexture=SmartTool_makePointTexture(SmartTool_objectSpread({},n,{color:16750592})),this.selectionPointTexture=SmartTool_makePointTexture(SmartTool_objectSpread({},n,{strokeOpacity:.5})),this.selectionHoveredPointTexture=SmartTool_makePointTexture(SmartTool_objectSpread({},n,{color:this.hoveredColor,strokeOpacity:.5}))}},{key:"updatePointsTexture",value:function(){this.selectionBox.pointTexture=this.selectionPointTexture,this.selectionBox.hoveredPointTexture=this.selectionHoveredPointTexture,this.selectionBox.refreshPointsTextures(),this.positivePointsContainer.pointTexture=this.positivePointTexture,this.positivePointsContainer.hoveredPointTexture=this.hoveredPointTexture,this.positivePointsContainer.refreshPointsTextures(),this.negativePointsContainer.pointTexture=this.negativePointTexture,this.negativePointsContainer.hoveredPointTexture=this.hoveredPointTexture,this.negativePointsContainer.refreshPointsTextures()}},{key:"sendReady",value:function(e){this.emit("ready",e)}},{key:"_init",value:function(){var e=this;this.selectionBox=new dc,this.positivePointsContainer=new mc,this.negativePointsContainer=new mc,this.positiveBitmap=new gc,this.negativeBitmap=new gc,this.refreshTextures(),this.selectionBox.init({color:this.color,opacity:0,border:1.5,pointTexture:this.selectionPointTexture,hoveredPointTexture:this.selectionHoveredPointTexture}),this.positivePointsContainer.init({opacity:this.opacity,pointTexture:this.positivePointTexture,hoveredPointTexture:this.hoveredPointTexture,parent:this.selectionBox}),this.negativePointsContainer.init({opacity:this.opacity,pointTexture:this.negativePointTexture,hoveredPointTexture:this.hoveredPointTexture,parent:this.selectionBox}),this.positiveBitmap.init({opacity:this.opacity,color:this.positiveColor,skipContour:!0,parent:this.selectionBox}),this.negativeBitmap.init({opacity:this.opacity,color:this.negativeColor,skipContour:!0,parent:this.selectionBox}),[this.selectionBox,this.positivePointsContainer,this.negativePointsContainer,this.positiveBitmap,this.negativeBitmap].forEach(function(t){var r,n;r=e,n=t,Object(j.n)(r,n,Sc),r.stage.addChild(n.graphics),r.emit("figure:add",n),t.on("changed:coords",function(){e.changed=!0})})}},{key:"addPoint",value:function(e,t){if(this.selectionBox.canAddPoint)this.selectionBox.addPoint(e),this.selectionBox.draw();else{var r=t?this.negativePointsContainer:this.positivePointsContainer;r.addPoint(e),r.draw()}this.render(),this.changed=!0,this.isReady&&this.sendReady(!0)}},{key:"mergeBitmap",value:function(e,t){var r=t?this.negativeBitmap:this.positiveBitmap;r.drawPoints(e),r.draw(),this.render(),this.changed=!0}},{key:"eraseBitmap",value:function(e){var t=!1;this.positiveBitmap.bitmap&&(t=!0,this.positiveBitmap.drawPoints(e,!0),this.positiveBitmap.draw()),this.negativeBitmap.bitmap&&(t=!0,this.negativeBitmap.drawPoints(e,!0),this.negativeBitmap.draw()),t&&(this.render(),this.changed=!0)}},{key:"setLimit",value:function(e,t){[this.selectionBox,this.positiveBitmap,this.negativeBitmap,this.positivePointsContainer,this.negativePointsContainer].forEach(function(r){r.limit.width=e,r.limit.height=t})}},{key:"sendChanged",value:function(){this.changed&&(this.changed=!1,this.emit("change"))}},{key:"onMouseUp",value:function(){this.sendChanged()}},{key:"onMouseOut",value:function(){this.sendChanged()}},{key:"drawOnScene",value:function(e,t){if(e.currentTool.option===e.tools.all.smart.options.brushPositive.id||e.currentTool.option===e.tools.all.smart.options.brushNegative.id||e.currentTool.option===e.tools.all.smart.options.brushEraser.id){var r=[{left:t.left,top:t.top,size:e.currentTool.state.brushSize,type:"circle"}];if(e.drawingState.lastMouse&&r.unshift({left:e.drawingState.lastMouse.left,top:e.drawingState.lastMouse.top,size:e.currentTool.state.brushSize,type:"circle"}),e.currentTool.option===e.tools.all.smart.options.brushEraser.id)this.eraseBitmap(r);else{var n=!1;e.currentTool.option===e.tools.all.smart.options.brushNegative.id&&(n=!0),e.$hotkeys.shift&&(n=!n),this.mergeBitmap(r,n)}}}},{key:"actionPointClick",value:function(e,t){if(e.currentTool.option===e.currentTool.options.pointsEraser.id){var r=this.positivePointsContainer,n=this.positivePointsContainer.points.indexOf(t);if(-1===n&&(n=this.negativePointsContainer.points.indexOf(t),r=this.negativePointsContainer),-1===n)return;r.removePoint(n),r.draw(),this.render(),this.changed=!0}}},{key:"actionMouseDown",value:function(e,t){if(this.isReady&&e.currentTool.option&&e.currentTool.option!==e.currentTool.options.pointPositive.id&&e.currentTool.option!==e.currentTool.options.pointNegative.id)!e.currentTool.option||e.currentTool.option!==e.currentTool.options.brushPositive.id&&e.currentTool.option!==e.currentTool.options.brushNegative.id&&e.currentTool.option!==e.currentTool.options.brushEraser.id||(e.drawingState.isActive=!0,this.drawOnScene(e,t));else{var r=!1;e.currentTool.option===e.tools.all.smart.options.pointNegative.id&&(r=!0),e.$hotkeys.shift&&(r=!r),this.addPoint(t,r)}}},{key:"actionMouseMove",value:function(e,t){this.drawOnScene(e,t)}},{key:"removeAll",value:function(){this.selectionBox.removeAll(),this.positivePointsContainer.removeAll(),this.negativePointsContainer.removeAll(),this.positiveBitmap.removeAll(),this.negativeBitmap.removeAll(),this.draw(),this.render(),this.sendReady(!1)}},{key:"draw",value:function(){this.selectionBox.draw(),this.positivePointsContainer.draw(),this.negativePointsContainer.draw(),this.positiveBitmap.draw(),this.negativeBitmap.draw()}},{key:"destroy",value:function(){SmartTool_get(SmartTool_getPrototypeOf(SmartTool.prototype),"destroy",this).call(this),this.selectionBox.destroy(),this.selectionBox=null}},{key:"enabled",get:function(){return SmartTool_get(SmartTool_getPrototypeOf(SmartTool.prototype),"enabled",this)},set:function(e){!function(e,t,r,n,o){if(!SmartTool_set(e,"enabled",r,n||e))throw new Error("failed to set property")}(SmartTool_getPrototypeOf(SmartTool.prototype),0,e,this),this.enabled||this.removeAll()}},{key:"showSelected",get:function(){return this._showSelected},set:function(e){this._showSelected=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.selectionBox.color=this.color}},{key:"hoveredColor",get:function(){return this._hoveredColor},set:function(e){this._hoveredColor=e}},{key:"option",get:function(){return this._option},set:function(e){this._option=e?e.id:""}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e,this.selectionBox.opacity=this.opacity,this.positivePointsContainer.opacity=this.opacity,this.negativePointsContainer.opacity=this.opacity,this.positiveBitmap.opacity=this.opacity,this.negativeBitmap.opacity=this.opacity}},{key:"isReady",get:function(){return!this.selectionBox.canAddPoint}}])&&SmartTool_defineProperties(t.prototype,r),SmartTool}();function PolygonTool_typeof(e){return(PolygonTool_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PolygonTool_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PolygonTool_getPrototypeOf(e){return(PolygonTool_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PolygonTool_setPrototypeOf(e,t){return(PolygonTool_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ic=function(e){function PolygonTool(){return function(e,t){if(!(e instanceof PolygonTool))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==PolygonTool_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,PolygonTool_getPrototypeOf(PolygonTool).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PolygonTool_setPrototypeOf(e,t)}(PolygonTool,Tc),t=PolygonTool,(r=[{key:"actionPointClick",value:function(e,t,r){e.currentTool.option===e.currentTool.options.pointsEraser.id?e.removePointFromFigure({figureId:r.id,pointId:t.id}):e.currentTool.option===e.currentTool.options.pointsOrder.id&&e.setFirstPointInFigure({figureId:r.id,pointId:t.id})}},{key:"actionMouseDown",value:function(e,t){if(e.currentTool.option===e.currentTool.options.consecutive.id||e.currentTool.option===e.currentTool.options.closestSegment.id)if(e.isCreateMode&&e.currentClass)e.createTmpFigure({imageId:e.currentImage.id,classId:e.currentClass.id,points:[t]});else if(e.isEditMode){var r=this.swapOptions(e.currentTool.option,[e.currentTool.options.consecutive.id,e.currentTool.options.closestSegment.id],e.$hotkeys.shift);if(e.currentFigure&&null==e.hoveredPoint)if(null==e.currentFigure.classId||e.currentClass){if(r===e.currentTool.options.closestSegment.id){var n=Object(Ms.a)(function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(e.currentFigure.points.values()),t);-1!==n.index&&(t.index=n.index)}e.rawObjectsMap.data.get(e.currentFigure.id).normalizePointLocation(t),e.addPointToFigure({figureId:e.currentFigure.id,point:t})}else e.createTmpFigure({imageId:e.currentImage.id,points:[t]})}}}])&&PolygonTool_defineProperties(t.prototype,r),PolygonTool}();function PolylineTool_typeof(e){return(PolylineTool_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PolylineTool_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PolylineTool_getPrototypeOf(e){return(PolylineTool_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PolylineTool_setPrototypeOf(e,t){return(PolylineTool_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ec=function(e){function PolylineTool(){return function(e,t){if(!(e instanceof PolylineTool))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==PolylineTool_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,PolylineTool_getPrototypeOf(PolylineTool).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PolylineTool_setPrototypeOf(e,t)}(PolylineTool,Tc),t=PolylineTool,(r=[{key:"actionPointClick",value:function(e,t,r){e.currentTool.option===e.currentTool.options.pointsEraser.id&&e.removePointFromFigure({figureId:r.id,pointId:t.id})}},{key:"actionMouseDown",value:function(e,t){if(e.currentTool.option===e.currentTool.options.consecutive.id||e.currentTool.option===e.currentTool.options.closestSegment.id)if(e.isCreateMode&&e.currentClass)e.createTmpFigure({imageId:e.currentImage.id,classId:e.currentClass.id,points:[t]});else if(e.isEditMode){var r=this.swapOptions(e.currentTool.option,[e.currentTool.options.consecutive.id,e.currentTool.options.closestSegment.id],e.$hotkeys.shift);if(e.currentFigure&&null==e.hoveredPoint)if(null==e.currentFigure.classId||e.currentClass){if(r===e.currentTool.options.closestSegment.id){var n=Object(Ms.a)(function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(e.currentFigure.points.values()),t);-1!==n.index&&(t.index=n.index)}e.rawObjectsMap.data.get(e.currentFigure.id).normalizePointLocation(t),e.addPointToFigure({figureId:e.currentFigure.id,point:t})}else e.createTmpFigure({imageId:e.currentImage.id,points:[t]})}}}])&&PolylineTool_defineProperties(t.prototype,r),PolylineTool}();function SelectionTool_typeof(e){return(SelectionTool_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SelectionTool_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function SelectionTool_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SelectionTool_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SelectionTool_set(e,t,r,n){return(SelectionTool_set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,i=SelectionTool_superPropBase(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else SelectionTool_defineProperty(n,t,r);return!0})(e,t,r,n)}function SelectionTool_get(e,t,r){return(SelectionTool_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=SelectionTool_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function SelectionTool_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SelectionTool_getPrototypeOf(e)););return e}function SelectionTool_getPrototypeOf(e){return(SelectionTool_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SelectionTool_setPrototypeOf(e,t){return(SelectionTool_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SelectionTool_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("766552cace39611f2850");var Cc={"point:add":"point:add","point:remove":"point:remove",render:"render"};function drawBitmap(e,t){var r=e.width,n=e.height,o=document.createElement("canvas");return o.width=r,o.height=n,t(o.getContext("2d"),o),o}var kc={polygons:{border:1.5},points:{opacity:1,color:7833753,radius:4,strokeOpacity:.5,strokeColor:7833753,strokeWidth:4}};function SelectionTool_makePointTexture(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},kc.points,e),r=new Ys.Graphics;return r.lineStyle(t.strokeWidth,t.strokeColor,t.strokeOpacity),r.beginFill(t.color,t.opacity),r.drawCircle(0,0,t.radius),r.endFill(),r.generateCanvasTexture()}var Ac=function(e){function SelectionTool(){var e,t,r;!function(e,t){if(!(e instanceof SelectionTool))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=SelectionTool_getPrototypeOf(SelectionTool)).call.apply(e,[this].concat(o)))||"object"!==SelectionTool_typeof(r)&&"function"!=typeof r?SelectionTool_assertThisInitialized(this):r,SelectionTool_defineProperty(SelectionTool_assertThisInitialized(t),"_showSelected",!0),SelectionTool_defineProperty(SelectionTool_assertThisInitialized(t),"_opacity",.5),SelectionTool_defineProperty(SelectionTool_assertThisInitialized(t),"_color",870305),SelectionTool_defineProperty(SelectionTool_assertThisInitialized(t),"_hoveredColor",13041408),SelectionTool_defineProperty(SelectionTool_assertThisInitialized(t),"_selectedColor",870305),SelectionTool_defineProperty(SelectionTool_assertThisInitialized(t),"_boxes",null),SelectionTool_defineProperty(SelectionTool_assertThisInitialized(t),"_readySent",!1),SelectionTool_defineProperty(SelectionTool_assertThisInitialized(t),"_option",""),SelectionTool_defineProperty(SelectionTool_assertThisInitialized(t),"pointTexture",null),SelectionTool_defineProperty(SelectionTool_assertThisInitialized(t),"selectionBox",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SelectionTool_setPrototypeOf(e,t)}(SelectionTool,Tc),t=SelectionTool,(r=[{key:"refreshTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kc,t=e.polygons,r=e.points;this.selectionBox.border=Math.max(t.border,1.5);var n={radius:r.radius,strokeWidth:r.strokeWidth};this.pointTexture=SelectionTool_makePointTexture(n),this.hoveredPointTexture=SelectionTool_makePointTexture(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){SelectionTool_defineProperty(e,t,r[t])})}return e}({},n,{color:this.hoveredColor}))}},{key:"updatePointsTexture",value:function(){this.selectionBox.pointTexture=this.pointTexture,this.selectionBox.hoveredPointTexture=this.hoveredPointTexture,this.selectionBox.refreshPointsTextures()}},{key:"_init",value:function(){this._boxes=new WeakMap,this.selectionBox=new pc,this.refreshTextures(),this.selectionBox.init({color:this.color,opacity:this.opacity,pointTexture:this.pointTexture,hoveredPointTexture:this.hoveredPointTexture}),Object(j.n)(this,this.selectionBox,Cc),this.stage.addChild(this.selectionBox.graphics),this.emit("figure:add",this.selectionBox)}},{key:"add",value:function(e){if(this._boxes.has(e))return this.selectionBox.draw(),void this.render();var t=e.getBounds(),r=new Xs;r.init({color:this.selectedColor,points:t}),this.stage.addChild(r.graphics),this._boxes.set(e,r),this.selectionBox.draw(),this.render()}},{key:"addPoint",value:function(e,t){if(t){var r=Object(Ms.a)(this.selectionBox.points,e);-1!==r.index&&(e.index=r.index)}this.selectionBox.addPoint(e),this.isReady&&this.sendReady(!0),this.selectionBox.draw(),this.render()}},{key:"setLimit",value:function(e,t){this.selectionBox.limit.width=e,this.selectionBox.limit.height=t}},{key:"fill",value:function(e){var t=this,r=SelectionTool_slicedToArray(e.origin,2),n=r[0],o=r[1],i={left:n,top:o,right:n+e.data.width,bottom:o+e.data.height},a=Xs.relativeRects([i,this.selectionBox.rect],!0),s=a.origin,c=a.layout,u=SelectionTool_slicedToArray(a.rects,1)[0];return{data:drawBitmap(c,function(r){r.drawImage(t.selectionBox.makeCanvasFromPixelData(),u.left,u.top),r.globalCompositeOperation="destination-over",r.drawImage(e.data,s.left,s.top)}),origin:[c.left,c.top]}}},{key:"crop",value:function(e){var t=this,r=SelectionTool_slicedToArray(e.origin,2),n=r[0],o=r[1],i={left:n,top:o,right:n+e.data.width,bottom:o+e.data.height},a=Xs.relativeRects([i,this.selectionBox.rect],!0),s=a.origin,c=a.layout,u=SelectionTool_slicedToArray(a.rects,1)[0],l=drawBitmap(c,function(r){r.drawImage(e.data,s.left,s.top),r.globalCompositeOperation="destination-out",r.drawImage(t.selectionBox.makeCanvasFromPixelData(),u.left,u.top)}),p=Object(w.f)(l,c),f=p.data,d=p.rect;return f===l?null:{data:f,origin:[c.left+d.left,c.top+d.top]}}},{key:"cut",value:function(e){var t=SelectionTool_slicedToArray(e.origin,2),r=t[0],n=t[1],o={left:r,top:n,right:r+e.data.width,bottom:n+e.data.height},i=Xs.relativeRects([o,this.selectionBox.rect],!0),a=i.origin,s=i.layout,c=SelectionTool_slicedToArray(i.rects,1)[0],u=this.selectionBox.makeCanvasFromPixelData(),l=drawBitmap(s,function(t){t.drawImage(e.data,a.left,a.top),t.globalCompositeOperation="destination-out",t.drawImage(u,c.left,c.top)}),p=drawBitmap(s,function(t){t.drawImage(e.data,a.left,a.top),t.globalCompositeOperation="destination-in",t.drawImage(u,c.left,c.top)}),f=Object(w.f)(l,s),d=f.data,_=f.rect;if(l===d)return null;var y=Object(w.f)(p,s),g=y.data,h=y.rect;return p===g?null:{origin:{data:d,origin:[s.left+_.left,s.top+_.top]},cut:{data:g,origin:[s.left+h.left,s.top+h.top]}}}},{key:"sendReady",value:function(e){this._readySent!==e&&(this.emit("ready",e),this._readySent=e)}},{key:"remove",value:function(e){var t=this._boxes.get(e);t&&(this.stage.removeChild(t.graphics),this._boxes.delete(e),this.selectionBox.draw(),this.render())}},{key:"removeAll",value:function(){this.selectionBox.removeAll(),this.isReady||this.sendReady(!1),this.draw(),this.render()}},{key:"draw",value:function(){this.selectionBox.draw()}},{key:"destroy",value:function(){SelectionTool_get(SelectionTool_getPrototypeOf(SelectionTool.prototype),"destroy",this).call(this),this._boxes=null,this.selectionBox.destroy(),this.selectionBox=null}},{key:"enabled",get:function(){return SelectionTool_get(SelectionTool_getPrototypeOf(SelectionTool.prototype),"enabled",this)},set:function(e){!function(e,t,r,n,o){if(!SelectionTool_set(e,"enabled",r,n||e))throw new Error("failed to set property")}(SelectionTool_getPrototypeOf(SelectionTool.prototype),0,e,this),this.enabled||this.removeAll()}},{key:"showSelected",get:function(){return this._showSelected},set:function(e){this._showSelected=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.selectionBox.color=this.color}},{key:"hoveredColor",get:function(){return this._hoveredColor},set:function(e){this._hoveredColor=e}},{key:"option",get:function(){return this._option},set:function(e){this._option=e?e.id:""}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e,this.selectionBox.opacity=this.opacity}},{key:"selectedColor",get:function(){return this._selectedColor},set:function(e){this._selectedColor=e}},{key:"isReady",get:function(){return this.selectionBox.points.length>=3}}])&&SelectionTool_defineProperties(t.prototype,r),SelectionTool}();function BucketFillTool_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Fc=function(){function BucketFillTool(e){var t;!function(e,t){if(!(e instanceof BucketFillTool))throw new TypeError("Cannot call a class as a function")}(this),(t="colorLayerData")in this?Object.defineProperty(this,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[t]=null,this.mask=e,this.init()}var e,t;return e=BucketFillTool,(t=[{key:"matchStartColor",value:function(e){return 255!==this.colorLayerData.data[e+3]}},{key:"colorPixel",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:255;this.colorLayerData.data[e]=t,this.colorLayerData.data[e+1]=r,this.colorLayerData.data[e+2]=n,this.colorLayerData.data[e+3]=o}},{key:"floodFill",value:function(e,t){for(var r,n,o,i,a,s,c=0+this.mask.width-1,u=0+this.mask.height-1,l=[[e,t]];l.length;){for(n=(r=l.pop())[0],i=4*((o=r[1])*this.mask.width+n);o>=0&&this.matchStartColor(i);)o-=1,i-=4*this.mask.width;for(i+=4*this.mask.width,o+=1,a=!1,s=!1;o<=u&&this.matchStartColor(i);)o+=1,this.colorPixel(i,255,255,255),n>0&&(this.matchStartColor(i-4)?a||(l.push([n-1,o]),a=!0):a&&(a=!1)),n<c&&(this.matchStartColor(i+4)?s||(l.push([n+1,o]),s=!0):s&&(s=!1)),i+=4*this.mask.width}}},{key:"fill",value:function(e){var t=e.x,r=e.y;t=Math.round(t);var n=4*((r=Math.round(r))*this.mask.width+t);return 255===this.colorLayerData.data[n+3]?null:(this.floodFill(t,r),this.colorLayerData)}},{key:"init",value:function(){var e=this.mask.getContext("2d");this.colorLayerData=e.getImageData(0,0,this.mask.width,this.mask.height)}}])&&BucketFillTool_defineProperties(e.prototype,t),BucketFillTool}();function BitmapTool_typeof(e){return(BitmapTool_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BitmapTool_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function BitmapTool_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function BitmapTool_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){BitmapTool_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){BitmapTool_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function BitmapTool_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function BitmapTool_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BitmapTool_set(e,t,r,n){return(BitmapTool_set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,i=BitmapTool_superPropBase(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else BitmapTool_defineProperty(n,t,r);return!0})(e,t,r,n)}function BitmapTool_get(e,t,r){return(BitmapTool_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=BitmapTool_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function BitmapTool_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BitmapTool_getPrototypeOf(e)););return e}function BitmapTool_getPrototypeOf(e){return(BitmapTool_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BitmapTool_setPrototypeOf(e,t){return(BitmapTool_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BitmapTool_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xc={"point:add":"point:add","point:remove":"point:remove",render:"render","figure:add":"figure:add"},Rc=function(e){function BitmapTool(){var e,t,r;!function(e,t){if(!(e instanceof BitmapTool))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=BitmapTool_getPrototypeOf(BitmapTool)).call.apply(e,[this].concat(o)))||"object"!==BitmapTool_typeof(r)&&"function"!=typeof r?BitmapTool_assertThisInitialized(this):r,BitmapTool_defineProperty(BitmapTool_assertThisInitialized(t),"selectionTool",null),BitmapTool_defineProperty(BitmapTool_assertThisInitialized(t),"eraseBitmaps",new Set),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BitmapTool_setPrototypeOf(e,t)}(BitmapTool,Tc),t=BitmapTool,(r=[{key:"_init",value:function(){var e;this.selectionTool=new Ac,Object(j.n)(this,this.selectionTool,xc),(e=this.selectionTool).init.apply(e,arguments)}},{key:"setLimit",value:function(){var e;(e=this.selectionTool).setLimit.apply(e,arguments)}},{key:"updatePointsTexture",value:function(){var e;(e=this.selectionTool).updatePointsTexture.apply(e,arguments)}},{key:"refreshTextures",value:function(){var e;(e=this.selectionTool).refreshTextures.apply(e,arguments)}},{key:"processEraseUnderlyingPixels",value:function(e,t){var r=this;e.currentTool.state.eraseUnderlyingPixels&&Object.values(e.dataset.figures.all).forEach(function(n){var o,i=e.dataset.classes.all[n.classId];if((null==i?void 0:i.shape)===S.SHAPE_TYPES.BITMAP&&n.id!==(null===(o=e.currentFigure)||void 0===o?void 0:o.id)){var a=n.bitmapPreview||n.bitmap;if(Object(Ms.b)(function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e,1)[0].size,r=Qs.a.getDimensions(e);return{left:r.left-t,top:r.top-t,right:r.left+t,bottom:r.top+t}}(t),{left:a.origin[0],top:a.origin[1],right:a.origin[0]+(a.data.width-1),bottom:a.origin[1]+(a.data.height-1)})){var s=gc.drawPointsOnBitmap({bitmap:a,points:t,erase:!0,limit:e.currentImageDimensions});s.shouldTrim=!0,e.updateBitmapPreview({figureId:n.id,preview:s}),r.eraseBitmaps.add(n.id)}}})}},{key:"drawOnScene",value:function(e,t){if(e.currentFigure){var r=[{left:t.left,top:t.top,size:e.currentTool.state.brushSize,type:"circle"}];e.drawingState.lastMouse&&r.unshift({left:e.drawingState.lastMouse.left,top:e.drawingState.lastMouse.top,size:e.currentTool.state.brushSize,type:"circle"});var n=this.swapOptions(e.currentTool.option,[e.currentTool.options.brushCreate.id,e.currentTool.options.brushEraser.id],e.$hotkeys.shift),o=null;n===e.tools.all.bitmap.options.brushCreate.id?((o=gc.drawPointsOnBitmap({bitmap:e.currentFigure.bitmapPreview||e.currentFigure.bitmap,points:r,limit:e.currentImageDimensions})).shouldTrim=!0,this.processEraseUnderlyingPixels(e,r)):n===e.tools.all.bitmap.options.brushEraser.id&&((o=gc.drawPointsOnBitmap({bitmap:e.currentFigure.bitmapPreview||e.currentFigure.bitmap,points:r,erase:!0,limit:e.currentImageDimensions})).shouldTrim=!0),o&&e.updateBitmapPreview({figureId:e.currentFigure.id,preview:o})}}},{key:"actionMouseDown",value:function(){var e=BitmapTool_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r,n,o,i,a,s,c,u;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e.currentClass){l.next=2;break}return l.abrupt("return");case 2:if(!e.isCreateMode){l.next=13;break}if(e.currentTool.option===e.tools.all.bitmap.options.brushCreate.id){l.next=5;break}return l.abrupt("return");case 5:r=[{left:t.left,top:t.top,size:e.currentTool.state.brushSize,type:"circle"}],n=gc.drawPointsOnBitmap({points:r,limit:e.currentImageDimensions}),o=Object(w.f)(n.data),i=o.data,a=o.rect,this.processEraseUnderlyingPixels(e,r),e.createTmpFigure({imageId:e.currentImage.id,classId:e.currentClass.id,bitmap:{data:i,origin:[n.origin[0]+a.left,n.origin[1]+a.top]}}),e.drawingState.isActive=!0,l.next=31;break;case 13:if(!e.isEditMode){l.next=31;break}if(e.currentTool.option!==e.tools.all.bitmap.options.fill.id&&e.currentTool.option!==e.tools.all.bitmap.options.crop.id&&e.currentTool.option!==e.tools.all.bitmap.options.cut.id){l.next=18;break}this.selectionTool.addPoint(t,e.$hotkeys.shift),l.next=31;break;case 18:if(e.currentTool.option!==e.tools.all.bitmap.options.bucketFill.id){l.next=29;break}if(s=e.currentFigure.bitmap,c=new Fc(s.data),u=c.fill({x:t.left-s.origin[0],y:t.top-s.origin[1]})){l.next=24;break}return l.abrupt("return");case 24:return s.data.getContext("2d").putImageData(u,0,0),l.next=27,e.updateBitmapsInFigures([{id:e.currentFigure.id,bitmap:s}]);case 27:l.next=31;break;case 29:e.drawingState.isActive=!0,this.drawOnScene(e,t);case 31:case"end":return l.stop()}},_callee,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"actionMouseMove",value:function(e,t){this.drawOnScene(e,t)}},{key:"actionMouseUp",value:function(){var e=BitmapTool_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=BitmapTool_toConsumableArray(this.eraseBitmaps),this.eraseBitmaps.clear(),r.next=4,e.updateBitmapsInFigures(t.map(function(t){var r=e.dataset.figures.all[t],n=r.bitmapPreview,o=Object(w.f)(n.data),i=o.data,a=o.rect;return n={data:i,origin:[n.origin[0]+a.left,n.origin[1]+a.top]},{id:r.id,bitmap:n,action:null}}));case 4:case"end":return r.stop()}},_callee2,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"enabled",get:function(){return BitmapTool_get(BitmapTool_getPrototypeOf(BitmapTool.prototype),"enabled",this)},set:function(e){!function(e,t,r,n,o){if(!BitmapTool_set(e,"enabled",r,n||e))throw new Error("failed to set property")}(BitmapTool_getPrototypeOf(BitmapTool.prototype),0,e,this),this.selectionTool.enabled=e}}])&&BitmapTool_defineProperties(t.prototype,r),BitmapTool}();function MoveFiguresTool_typeof(e){return(MoveFiguresTool_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MoveFiguresTool_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MoveFiguresTool_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function MoveFiguresTool_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){MoveFiguresTool_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){MoveFiguresTool_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function MoveFiguresTool_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function MoveFiguresTool_getPrototypeOf(e){return(MoveFiguresTool_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MoveFiguresTool_setPrototypeOf(e,t){return(MoveFiguresTool_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MoveFiguresTool_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function normalizeDiff(e,t,r,n){var o=MoveFiguresTool_slicedToArray(t,2),i=o[0],a=o[1],s={left:i+n.left,top:a+n.top};return s.left<0?s.left=-i:s.left>e.width-r.width?s.left=e.width-i-r.width:s.left=n.left,s.top<0?s.top=-a:s.top>e.height-r.height?s.top=e.height-a-r.height:s.top=n.top,0===s.left&&0===s.top?null:s}var Lc=function(e){function MoveFiguresTool(){return function(e,t){if(!(e instanceof MoveFiguresTool))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==MoveFiguresTool_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,MoveFiguresTool_getPrototypeOf(MoveFiguresTool).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MoveFiguresTool_setPrototypeOf(e,t)}(MoveFiguresTool,Tc),t=MoveFiguresTool,(r=[{key:"moveBitmap",value:function(e,t){var r=MoveFiguresTool_slicedToArray(e.movingState.figures,1)[0],n=e.figuresById[r],o=n.bitmapPreview||n.bitmap,i=function(e,t,r){return normalizeDiff(e,t.origin,t.data,r)}(e.currentImageDimensions,o,t);i&&e.updateBitmapPreview({figureId:n.id,preview:{origin:[o.origin[0]+i.left,o.origin[1]+i.top]}})}},{key:"updateBitmap",value:function(){var e=MoveFiguresTool_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.bitmapPreview){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,e.updateBitmapInFigure({figureId:t.id,bitmap:r,action:Ve.a.moveObject});case 5:e.updateBitmapPreview({figureId:t.id,preview:null});case 6:case"end":return n.stop()}},_callee)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"moveVector",value:function(e,t){var r=MoveFiguresTool_slicedToArray(e.movingState.figures,1)[0],n=e.figuresById[r];if(!n.pointsPreview){var o=e.holesMap[n.id];o&&o.forEach(function(t){e.movingState.figures.push(t.id)}),e.setPointsPreviewInFigures(e.movingState.figures.map(function(t){var r=e.figuresById[t];return{figureId:r.id,value:r.points.values().reduce(function(e,t){return e.set(t.id,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){MoveFiguresTool_defineProperty(e,t,r[t])})}return e}({},t)),e},r.points.clone())}}))}var i=function(e,t,r,n){return normalizeDiff(e,[r.rect.left,r.rect.top],r.rect,n)}(e.currentImageDimensions,0,e.rawObjectsMap.data.get(n.id),t);i&&e.updatePointsPreviewInFigures(e.movingState.figures.map(function(t){var r=e.figuresById[t];return{figureId:r.id,points:r.pointsPreview.values().map(function(e){return{id:e.id,left:e.left+i.left,top:e.top+i.top}})}}))}},{key:"updateVector",value:function(){var e=MoveFiguresTool_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t[0].pointsPreview){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,e.updatePointsInFigures({figures:t.map(function(e){return{figureId:e.id,points:e.pointsPreview.values()}}),action:Ve.a.moveObject});case 5:e.setPointsPreviewInFigures(t.map(function(e){return{figureId:e.id,value:null}}));case 6:case"end":return r.stop()}},_callee2)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"actionMouseDown",value:function(e,t,r){if(1===r.which&&null!=e.hoveredFigure){var n=e.figures[e.hoveredFigure];null!=n.classId&&(e.movingState.figures=[n.id],e.movingState.isActive=!0,e.movingState.lastMouse=t,e.setShowHoveredFigure(!1),e.currentCursor=e.cursors.moveCursor)}}},{key:"actionMouseMove",value:function(e,t){var r=MoveFiguresTool_slicedToArray(e.movingState.figures,1)[0],n=e.figuresById[r],o=e.classes[n.classId],i={left:t.left-e.movingState.lastMouse.left,top:t.top-e.movingState.lastMouse.top};o.shape===S.SHAPE_TYPES.BITMAP?this.moveBitmap(e,i):this.moveVector(e,i)}},{key:"actionMouseUp",value:function(){var e=MoveFiguresTool_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.setShowHoveredFigure(!0),e.resetCursor(),e.movingState.isActive){n.next=4;break}return n.abrupt("return");case 4:if(t=e.movingState.figures.map(function(t){return e.figuresById[t]}),r=e.classes[t[0].classId],e.movingState.isActive=!1,e.movingState.figures=null,e.movingState.lastMouse=null,r.shape!==S.SHAPE_TYPES.BITMAP){n.next=14;break}return n.next=12,this.updateBitmap(e,t[0]);case 12:n.next=16;break;case 14:return n.next=16,this.updateVector(e,t);case 16:case"end":return n.stop()}},_callee3,this)}));return function(t){return e.apply(this,arguments)}}()}])&&MoveFiguresTool_defineProperties(t.prototype,r),MoveFiguresTool}();function GraphTool_typeof(e){return(GraphTool_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GraphTool_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function GraphTool_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function GraphTool_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){GraphTool_defineProperty(e,t,r[t])})}return e}function GraphTool_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GraphTool_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GraphTool_set(e,t,r,n){return(GraphTool_set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,i=GraphTool_superPropBase(e,t);if(i){if((o=Object.getOwnPropertyDescriptor(i,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else GraphTool_defineProperty(n,t,r);return!0})(e,t,r,n)}function GraphTool_get(e,t,r){return(GraphTool_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=GraphTool_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function GraphTool_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GraphTool_getPrototypeOf(e)););return e}function GraphTool_getPrototypeOf(e){return(GraphTool_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GraphTool_setPrototypeOf(e,t){return(GraphTool_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GraphTool_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dc={"point:add":"point:add","point:remove":"point:remove",render:"render"},Gc={polygons:{border:1.5},points:{opacity:1,color:16711680,radius:4,strokeOpacity:.5,strokeColor:7833753,strokeWidth:4}};function GraphTool_makePointTexture(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},Gc.points,e),r=new Ys.Graphics;return r.lineStyle(t.strokeWidth,t.strokeColor,t.strokeOpacity),r.beginFill(t.color,t.opacity),r.drawCircle(0,0,t.radius),r.endFill(),r.generateCanvasTexture()}function normalizeRatio(e){return Number.isNaN(e)||!Number.isFinite(e)||0===e?1:e}var Bc=function(e){function GraphTool(){var e,t,r;!function(e,t){if(!(e instanceof GraphTool))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=GraphTool_getPrototypeOf(GraphTool)).call.apply(e,[this].concat(o)))||"object"!==GraphTool_typeof(r)&&"function"!=typeof r?GraphTool_assertThisInitialized(this):r,GraphTool_defineProperty(GraphTool_assertThisInitialized(t),"_showSelected",!0),GraphTool_defineProperty(GraphTool_assertThisInitialized(t),"_opacity",.5),GraphTool_defineProperty(GraphTool_assertThisInitialized(t),"_color",16711680),GraphTool_defineProperty(GraphTool_assertThisInitialized(t),"_hoveredColor",13041408),GraphTool_defineProperty(GraphTool_assertThisInitialized(t),"changed",!1),GraphTool_defineProperty(GraphTool_assertThisInitialized(t),"_option",""),GraphTool_defineProperty(GraphTool_assertThisInitialized(t),"hoveredPointTexture",null),GraphTool_defineProperty(GraphTool_assertThisInitialized(t),"selectionPointTexture",null),GraphTool_defineProperty(GraphTool_assertThisInitialized(t),"selectionHoveredPointTexture",null),GraphTool_defineProperty(GraphTool_assertThisInitialized(t),"selectionBox",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GraphTool_setPrototypeOf(e,t)}(GraphTool,Tc),t=GraphTool,(r=[{key:"getData",value:function(){return{}}},{key:"refreshTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gc,t=e.polygons,r=e.points;this.selectionBox.border=Math.max(t.border,1.5);var n={strokeOpacity:1,radius:r.radius,strokeWidth:r.strokeWidth};this.hoveredPointTexture=GraphTool_makePointTexture(GraphTool_objectSpread({},n,{color:16750592})),this.selectionPointTexture=GraphTool_makePointTexture(GraphTool_objectSpread({},n,{strokeOpacity:.5})),this.selectionHoveredPointTexture=GraphTool_makePointTexture(GraphTool_objectSpread({},n,{color:this.hoveredColor,strokeOpacity:.5}))}},{key:"updatePointsTexture",value:function(){this.selectionBox.pointTexture=this.selectionPointTexture,this.selectionBox.hoveredPointTexture=this.selectionHoveredPointTexture,this.selectionBox.refreshPointsTextures()}},{key:"sendReady",value:function(e){this.emit("ready",e)}},{key:"_init",value:function(){var e=this;this.selectionBox=new dc,this.refreshTextures(),this.selectionBox.init({color:this.color,opacity:0,border:1.5,pointTexture:this.selectionPointTexture,hoveredPointTexture:this.selectionHoveredPointTexture}),[this.selectionBox].forEach(function(t){var r,n;r=e,n=t,Object(j.n)(r,n,Dc),n.graphics.interactive=!1,r.stage.addChild(n.graphics),r.emit("figure:add",n),t.on("changed:coords",function(){e.changed=!0})}),this.selectionBox.on("changed:coords",function(){if(e.isReady&&e.figure){e.figure.pointsPreview||e.component.setPointsPreviewInFigures([{figureId:e.figure.id,value:e.figure.points.values().reduce(function(e,t){return e.set(t.id,GraphTool_objectSpread({},t)),e},e.figure.points.clone())}]);var t=e.fitPointsToBox(GraphTool_toConsumableArray(e.figure.points.values()));e.component.updatePointsPreviewInFigures([{figureId:e.figure.id,points:t}])}})}},{key:"fitPointsToBox",value:function(e){var t=Qs.a.getDimensions(e),r=normalizeRatio(this.selectionBox.rect.width/t.width),n=normalizeRatio(this.selectionBox.rect.height/t.height),o=this.selectionBox.rect.left-t.left*r,i=this.selectionBox.rect.top-t.top*n;return e.map(function(e){return GraphTool_objectSpread({},Object(N.pick)(e,["id","label","color"]),{left:e.left*r+o,top:e.top*n+i})})}},{key:"createFigure",value:function(){var e;if(this.component&&!this.figure&&(null===(e=this.currentClass)||void 0===e?void 0:e.settings)){var t=Qs.a.getDimensions(this.currentClass.settings.nodes),r=this.currentClass.settings.nodes.map(function(e){return{label:e.id,color:e.color,left:e.left-t.left,top:e.top-t.top}}),n=this.fitPointsToBox(r);this.component.createTmpFigure({imageId:this.component.currentImage.id,classId:this.component.currentClass.id,points:n})}}},{key:"addPoint",value:function(e){this.selectionBox.canAddPoint&&(this.selectionBox.addPoint(e),this.selectionBox.draw()),this.render(),this.changed=!0,this.isReady&&(this.createFigure(),this.sendReady(!0))}},{key:"_classChanged",value:function(){this.currentClass&&(this.color=this.currentClass.color)}},{key:"_figureChanged",value:function(e){if(this.figure){var t=GraphTool_toConsumableArray((this.figure.pointsPreview||this.figure.points).values()),r=Qs.a.getDimensions(t),n=e.classes[this.figure.classId],o=2-this.selectionBox.points.length;if(o)for(var i=0;i<o;++i)this.selectionBox.addPoint({left:0,top:0});this.selectionBox.points[0].sendEvents=!1,this.selectionBox.points[0].left=r.left,this.selectionBox.points[0].top=r.top,this.selectionBox.points[0].sendEvents=!0,this.selectionBox.points[1].sendEvents=!1,this.selectionBox.points[1].left=r.right,this.selectionBox.points[1].top=r.bottom,this.selectionBox.points[1].sendEvents=!0,this.selectionBox.updateBoundingRect(),this.color=n.color,this.selectionBox.visible=!!(t.length>2&&r.height&&r.width),this.selectionBox.draw(!0),this.sendReady(!0)}else this.removeAll()}},{key:"figureContentChanged",value:function(e){this._figureChanged(e)}},{key:"setLimit",value:function(e,t){[this.selectionBox].forEach(function(r){r.limit.width=e,r.limit.height=t})}},{key:"sendChanged",value:function(){this.changed&&(this.changed=!1,this.emit("change"))}},{key:"onMouseUp",value:function(){this.sendChanged()}},{key:"onMouseOut",value:function(){this.sendChanged()}},{key:"actionPointClick",value:function(e,t,r){e.currentTool.option===e.currentTool.options.pointsErase.id&&(e.removePointFromFigure({figureId:r.id,pointId:t.id}),this._figureChanged(e))}},{key:"actionPointMove",value:function(e,t,r,n){this.figure&&!n&&(this.figure.pointsPreview||this.component.setPointsPreviewInFigures([{figureId:this.figure.id,value:this.figure.points.values().reduce(function(e,t){return e.set(t.id,GraphTool_objectSpread({},t)),e},this.figure.points.clone())}]),this.component.updatePointsPreviewInFigures([{figureId:this.figure.id,points:GraphTool_toConsumableArray(this.figure.pointsPreview.values()).map(function(e){return e.id===t.id?GraphTool_objectSpread({},e,{left:t.left,top:t.top}):e})}]),this._figureChanged(e))}},{key:"actionMouseDown",value:function(e,t){this.isReady&&e.currentTool.option||this.addPoint(t)}},{key:"actionMouseUp",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.figure&&this.figure.pointsPreview){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.updatePointsInFigures({figures:[{figureId:this.figure.id,points:this.figure.pointsPreview.values()}],action:Ve.a.movePoints});case 4:e.setPointsPreviewInFigures([{figureId:this.figure.id,value:null}]);case 5:case"end":return t.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){GraphTool_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){GraphTool_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"removeAll",value:function(){this.selectionBox.removeAll(),this.draw(),this.render(),this.sendReady(!1)}},{key:"draw",value:function(){this.selectionBox.draw()}},{key:"destroy",value:function(){GraphTool_get(GraphTool_getPrototypeOf(GraphTool.prototype),"destroy",this).call(this),this.selectionBox.destroy(),this.selectionBox=null}},{key:"enabled",get:function(){return GraphTool_get(GraphTool_getPrototypeOf(GraphTool.prototype),"enabled",this)},set:function(e){!function(e,t,r,n,o){if(!GraphTool_set(e,"enabled",r,n||e))throw new Error("failed to set property")}(GraphTool_getPrototypeOf(GraphTool.prototype),0,e,this),this.enabled||this.removeAll()}},{key:"showSelected",get:function(){return this._showSelected},set:function(e){this._showSelected=e}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.selectionBox.color=this.color}},{key:"hoveredColor",get:function(){return this._hoveredColor},set:function(e){this._hoveredColor=e}},{key:"option",get:function(){return this._option},set:function(e){this._option=e?e.id:""}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e,this.selectionBox.opacity=this.opacity}},{key:"isReady",get:function(){return!this.selectionBox.canAddPoint}}])&&GraphTool_defineProperties(t.prototype,r),GraphTool}(),Mc=r("8cdb38b7b2d673f491ab"),zc=r.n(Mc),Nc=r("2e287a5a97a89cab92e9"),Uc=(new s.a).$data.__ob__.constructor;function nonReactive(e){return e.__ob__=new Uc({}),e}var Hc,Vc=r("f6f559428d7ae5cba635"),Yc=(Hc=function(e,t){e.computed[t].cache=!1},Object(Vc.a)(function(e,t,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];var a="function"==typeof e?e:e.constructor;a.__decorators__||(a.__decorators__=[]);var s="number"==typeof r?r:void 0;a.__decorators__.push(function(e){return Hc.apply(void 0,[e,t,s].concat(o))})}));function Axis_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Axis_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function normalizePoint(e,t){return e<0?0:e>t?t:e}var Jc=function(){function Axis(e,t){!function(e,t){if(!(e instanceof Axis))throw new TypeError("Cannot call a class as a function")}(this),Axis_defineProperty(this,"_visible",!1),Axis_defineProperty(this,"_ordinate",!1),Axis_defineProperty(this,"_border",6),Axis_defineProperty(this,"_opacity",1),Axis_defineProperty(this,"_color",16777215),Axis_defineProperty(this,"_limit",{width:0,height:0}),Axis_defineProperty(this,"_position",0),this._ordinate=!!e,this.container=t,this.axis=new Ys.Graphics,this.visible=!1,this.container.addChild(this.axis)}var e,t;return e=Axis,(t=[{key:"setLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.limit.height;this._limit.width=e,this._limit.height=t,this.draw()}},{key:"draw",value:function(){this.axis.clear(),this.axis.alpha=this.opacity,this.axis.lineStyle(this.border,this.color),this.axis.moveTo(0,0),this.isOrdinate?this.axis.lineTo(0,this.limit.height):this.axis.lineTo(this.limit.width,0),this.axis.endFill()}},{key:"destroy",value:function(){this.axis.destroy(!0),this.axis=null,this.container=null}},{key:"isOrdinate",get:function(){return this._ordinate}},{key:"limit",get:function(){return this._limit}},{key:"position",get:function(){return this._position},set:function(e){null!=e&&(this.isOrdinate?this._position=normalizePoint(e.x,this.limit.width):this._position=normalizePoint(e.y,this.limit.height)),this.visible&&(this.isOrdinate?this.axis.x=this.position:this.axis.y=this.position)}},{key:"visible",get:function(){return this._visible},set:function(e){var t=e&&!this._visible;this._visible=e,this.axis.visible=this.visible,t&&(this.position=null)}},{key:"border",get:function(){return this._border},set:function(e){this._border=e,this.draw()}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e,this.draw()}},{key:"color",get:function(){return this._color},set:function(e){this._color=function(e){return"string"==typeof e?parseInt(e.substring(1),16):e}(e),this.draw()}}])&&Axis_defineProperties(e.prototype,t),Axis}();function Axes_typeof(e){return(Axes_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Axes_getPrototypeOf(e){return(Axes_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Axes_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Axes_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Axes_createClass(e,t,r){return t&&Axes_defineProperties(e.prototype,t),r&&Axes_defineProperties(e,r),e}function Axes_setPrototypeOf(e,t){return(Axes_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Axes_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wc,qc,Zc,$c,Qc,Kc,Xc,eu,tu,ru=function(e){function Axes(e){var t,r;return function(e,t){if(!(e instanceof Axes))throw new TypeError("Cannot call a class as a function")}(this),this,t=!(r=Axes_getPrototypeOf(Axes).call(this))||"object"!==Axes_typeof(r)&&"function"!=typeof r?Axes_assertThisInitialized(this):r,Axes_defineProperty(Axes_assertThisInitialized(t),"_visible",!1),Axes_defineProperty(Axes_assertThisInitialized(t),"_border",1),Axes_defineProperty(Axes_assertThisInitialized(t),"_opacity",1),Axes_defineProperty(Axes_assertThisInitialized(t),"_additionalColor",16777215),Axes_defineProperty(Axes_assertThisInitialized(t),"_color",0),Axes_defineProperty(Axes_assertThisInitialized(t),"_limit",{width:0,height:0}),Axes_defineProperty(Axes_assertThisInitialized(t),"_position",{left:0,top:0}),t.container=e,t.horizontal=new Jc(!1,e),t.horizontalAdditional=new Jc(!1,e),t.vertical=new Jc(!0,e),t.verticalAdditional=new Jc(!0,e),t.color=t.color,t.additionalColor=t.additionalColor,t.border=t.border,t.opacity=t.opacity,t.visible=t.visible,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Axes_setPrototypeOf(e,t)}(Axes,Pc.EventEmitter),Axes_createClass(Axes,null,[{key:"_updateFields",get:function(){return["visible","border","opacity","additionalColor","color","limit"]}}]),Axes_createClass(Axes,[{key:"setLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.limit.height;this._limit.width=e,this._limit.height=t,this.horizontal.setLimit(e,t),this.vertical.setLimit(e,t),this.horizontalAdditional.setLimit(e,t),this.verticalAdditional.setLimit(e,t),this.draw()}},{key:"setPosition",value:function(e){e&&(this.horizontal.position=e,this.vertical.position=e,this._position.left=this.vertical.position,this._position.top=this.horizontal.position,this.horizontalAdditional.position={x:this.position.left,y:this.position.top+this.border},this.verticalAdditional.position={x:this.position.left+this.border,y:this.position.top}),this.visible&&this.emit("render")}},{key:"draw",value:function(){this.emit("render")}},{key:"update",value:function(e){Object(j.d)(this,e,this.constructor._updateFields)}},{key:"destroy",value:function(){this.horizontal.destroy(),this.vertical.destroy(),this.horizontalAdditional.destroy(),this.verticalAdditional.destroy(),this.horizontal=null,this.vertical=null,this.horizontalAdditional=null,this.verticalAdditional=null,this.container=null}},{key:"hasAdditional",get:function(){var e=Axes_typeof(this._additionalColor);return"string"===e?!!this._additionalColor:"number"===e&&this._additionalColor>=0&&this._additionalColor<=16777215}},{key:"limit",get:function(){return this._limit}},{key:"position",get:function(){return this._position}},{key:"visible",get:function(){return this._visible},set:function(e){var t=e&&!this._visible;this._visible=e,this.horizontal.visible=this.visible,this.vertical.visible=this.visible,e&&this.hasAdditional?(this.horizontalAdditional.visible=!0,this.verticalAdditional.visible=!0):(this.horizontalAdditional.visible=!1,this.verticalAdditional.visible=!1),t&&this.setPosition()}},{key:"border",get:function(){return this._border},set:function(e){this._border=e,this.horizontal.border=this.border,this.vertical.border=this.border,this.horizontalAdditional.border=this.border,this.verticalAdditional.border=this.border,this.draw()}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e,this.horizontal.opacity=this.opacity,this.vertical.opacity=this.opacity,this.horizontalAdditional.opacity=this.opacity,this.verticalAdditional.opacity=this.opacity,this.draw()}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.horizontal.color=this.color,this.vertical.color=this.color,this.draw()}},{key:"additionalColor",get:function(){return this._additionalColor},set:function(e){this.horizontalAdditional.color=e,this._additionalColor=this.horizontalAdditional.color,this.verticalAdditional.color=this.additionalColor,this.visible&&this.hasAdditional&&(this.horizontalAdditional.visible=!0,this.verticalAdditional.visible=!0),this.draw()}}]),Axes}();function Renderervue_type_script_lang_js_typeof(e){return(Renderervue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Renderervue_type_script_lang_js_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Renderervue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Renderervue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function Renderervue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Renderervue_type_script_lang_js_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){Renderervue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){Renderervue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function Renderervue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Renderervue_type_script_lang_js_getPrototypeOf(e){return(Renderervue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Renderervue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Renderervue_type_script_lang_js_setPrototypeOf(e,t){return(Renderervue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Renderervue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Renderervue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var nu=Object(kn.e)(),ou={panning:!0,zoom:!0,autoScale:!0,autoCenter:!0,axes:{visible:!1,border:1,opacity:1,additionalColor:16777215,color:0},points:{size:3,stroke:1},polygons:{border:{value:1.5},opacity:{value:.5}},zoomMultiplier:1.1,forceImageReload:!1,preserveZoomDifference:!1,forceCanvas:!1,watchIdKey:"id"},iu=["a","b","c","d","tx","ty"];function sortFigures(e){return Object(N.orderBy)(e,[function(e){return e.parent||null==e.priority?"":e.priority}],["desc"])}function compareMatrices(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return!(!e||!t)&&iu.every(function(n){return e[n].toFixed(r)===t[n].toFixed(r)})}function Renderervue_type_script_lang_js_makePointTexture(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.opacity,r=void 0===t?1:t,n=e.color,o=void 0===n?16711680:n,i=e.radius,a=void 0===i?4:i,s=e.strokeOpacity,c=void 0===s?1:s,u=e.strokeColor,l=void 0===u?0:u,p=e.strokeWidth,f=void 0===p?4:p,d=new Ys.Graphics;return d.lineStyle(f,l,c),d.beginFill(o,r),d.drawCircle(0,0,a),d.endFill(),d.generateCanvasTexture()}function fitImageToViewport(e,t,r,n,o,i){var a=Math.min(n,o)/i*.95,s=new Ys.Matrix(a,0,0,a,0,0);return r&&s.translate((e.width-t.width*a)/2,(e.height-t.height*a)/2),s}var au=["version","shape","color"],su=(Wc=Object(u.a)({props:{canvas:HTMLCanvasElement,backgroundImage:HTMLCanvasElement,options:Object,objects:Array,cursor:[String,Object],viewport:Object,tools:Object,rawImage:Image,rawObjects:Object,dimensions:Object}}),qc=Object(u.b)("backgroundImage"),Zc=Object(u.b)("dimensions"),$c=Object(u.b)("objects"),Qc=Object(u.b)("cursor"),Kc=Object(u.b)("viewport"),Xc=Object(u.b)("opts"),Wc((Renderervue_type_script_lang_js_applyDecoratedDescriptor((tu=function(e){function Renderer(){var e,t,r;!function(e,t){if(!(e instanceof Renderer))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=Renderervue_type_script_lang_js_getPrototypeOf(Renderer)).call.apply(e,[this].concat(o)))||"object"!==Renderervue_type_script_lang_js_typeof(r)&&"function"!=typeof r?Renderervue_type_script_lang_js_assertThisInitialized(this):r,Renderervue_type_script_lang_js_defineProperty(Renderervue_type_script_lang_js_assertThisInitialized(t),"_panning",!1),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Renderervue_type_script_lang_js_setPrototypeOf(e,t)}(Renderer,s.a),t=Renderer,(r=[{key:"backgroundImageChanged",value:function(){var e=Renderervue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.fitViewport=null,e){t.next=3;break}return t.abrupt("return");case 3:return this.loadingImage=!0,this.sendLoading(),t.next=7,this.setBackgroundImage();case 7:this.loadingImage=!1,this.opts.autoScale&&this.fitScene(),this.sendLoaded();case 10:case"end":return t.stop()}},_callee,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"dimensionsChanged",value:function(e){var t=this;e&&(this.axes&&this.axes.setLimit(this.dimensions.width,this.dimensions.height),this.containerObjectsMap&&this.containerObjectsMap.forEach(function(e){e.limit.width=t.dimensions.width,e.limit.height=t.dimensions.height}))}},{key:"objectsChanged",value:function(){var e=Renderervue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var r,n,o,i,a,s,c,u,l=this;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return this.loadingObjects=!0,this.sendLoading(),r=sortFigures(e),n=sortFigures(t),o=this.getChanges(r,n),i=o.added,a=o.changed,s=o.removed,c=o.indexMap,u=t.reduce(function(e,t){return e[t[l.opts.watchIdKey]]=t,e},Object.create(null)),s.forEach(function(e){var t=e[l.opts.watchIdKey],r=l.containerObjectsMap.get(t);r&&(r.destroy(),r.parent&&r.parent.draw(),l.containerObjectsMap.delete(t))}),a.forEach(function(e){var t=e[l.opts.watchIdKey],r=l.containerObjectsMap.get(t);if(r){var n=u[t];if(e.priority!==n.priority){var o=c.get(e).after;l.figuresContainer.getChildIndex(r.graphics)!==o&&l.figuresContainer.setChildIndex(r.graphics,o)}var i=l.getChanges(e.points,n.points);i.removed.length||i.added.length||i.changed.length!==n.points.length?i.changed.forEach(function(e){return r.points[i.indexMap.get(e).before].update(e)}):i.changed.some(function(e){var t=i.indexMap.get(e);return t.before!==t.after})?(r.removePoints(r.points),r.addPoints(e.points),r.refreshPointsTextures()):i.changed.forEach(function(e){return r.points[i.indexMap.get(e).before].update(e)}),i.removed.length&&r.removePoints(i.removed.map(function(e){return i.indexMap.get(e).before})),i.added.length&&r.addPoints(i.added),r.type===S.SHAPE_TYPES.RECTANGLE&&Object.assign(r,l.opts.rectangles);var a=Object(kn.f)(n,e,l.opts.polygons);r.update(Renderervue_type_script_lang_js_objectSpread({},a,{rectBorder:l.opts.rectangles.border})),r.type===S.SHAPE_TYPES.RECTANGLE&&Object.assign(r,l.opts.rectangles),r.draw()}}),i.forEach(function(e){var t=nonReactive(new Oc[e.shape]);t.on("render",function(){return l.renderScene(0)}),t.on("rect:add",function(e){return l.rectsContainer.addChild(e)}),t.on("rect:remove",function(e){return l.rectsContainer.removeChild(e)}),t.on("point:add",function(e,t){t.scale.x=1/l.container.stage.scale.x,t.scale.y=1/l.container.stage.scale.y,l.pointsContainer.addChild(t)}),t.on("point:remove",function(e,t){l.pointsContainer.removeChild(t),e.selected&&l.removeSelectedPoint(e)}),t.on("graphics:add",function(e){return l.figuresContainer.addChild(e)}),t.on("graphics:remove",function(e){return l.figuresContainer.removeChild(e)}),t.on("pointer:over",function(){l.isViewportCached()||(l.hoveredFigure=t,l.sendEvent("object-over",t))}),t.on("pointer:out",function(){l.isViewportCached()||(l.hoveredFigure===t&&(l.hoveredFigure=null),l.sendEvent("object-out",t))}),t.on("point:pointer:over",function(e){l.isViewportCached()||l.sendEvent("point-over",e,t)}),t.on("point:pointer:out",function(e){l.isViewportCached()||l.sendEvent("point-out",e,t)}),t.on("point:pointer:down",function(e,r,n,o){n.preventDefault(),n.stopPropagation(),l.addSelectedPoint(e,t),l.isViewportCached()||l.onDragStart(t,e,r,n,o)}),t.on("point:pointer:move",function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];l.onDrag.apply(l,[t,e].concat(n))}),t.on("point:pointer:up",function(e,r,n,o){n.preventDefault(),n.stopPropagation(),l.onDragEnd(t,e,r,n,o)}),t.on("point:pointer:upoutside",function(e,r,n,o){l.onDragEnd(t,e,r,n,o)}),t.on("changed:coords",function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return l.sendEvent.apply(l,["changed",t].concat(r))}),t.on("redundant:points",function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return l.sendEvent.apply(l,["points-redundant",e,t].concat(n))}),t.on("invalid:holes",function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return l.sendEvent.apply(l,["objects-invalid",e,t].concat(n))});var r=Object(N.cloneDeep)(e);l.dimensions&&(r.limit={width:l.dimensions.width,height:l.dimensions.height}),r.parent&&(r.parent=l.containerObjectsMap.get(r.parent[l.opts.watchIdKey]),r.isHole=!0),t.init(Renderervue_type_script_lang_js_objectSpread({},r,{pointsOpts:l.opts.points,pointTexture:l.pointTexture,hoveredPointTexture:l.hoveredPointTexture,lastPointTexture:l.lastPointTexture},l.opts.polygons,{rectBorder:l.opts.rectangles.border})),t.type===S.SHAPE_TYPES.RECTANGLE&&Object.assign(t,l.opts.rectangles),t.draw(),l.containerObjectsMap.set(e[l.opts.watchIdKey],t)}),p.next=11,this.renderScene(0);case 11:this.$emit("update:rawObjects",{data:this.containerObjectsMap}),this.loadingObjects=!1,this.sendLoaded();case 14:case"end":return p.stop()}},_callee2,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"cursorChanged",value:function(e){this.setCursor(e)}},{key:"viewportChanged",value:function(e){e&&(this.container.stage.position.x!==e.offsetX&&(this.container.stage.position.x=e.offsetX),this.container.stage.position.y!==e.offsetY&&(this.container.stage.position.y=e.offsetY),this.zoom!==e.zoom&&this.setZoom(e.zoom))}},{key:"optsChanged",value:function(e,t){if(e){var r=!1;if(e.image.brightness===t.image.brightness&&e.image.contrast===t.image.contrast||(this.updateBackgroundImageFilter(),r=!0),!e.canAutoScale||e.autoScale===t.autoScale&&e.autoCenter===t.autoCenter||(e.autoScale?this.fitScene():this.setTransformationMatrix(new Ys.Matrix),r=!0),e.hoveredFigure!==t.hoveredFigure||e.showHoveredFigure!==t.showHoveredFigure){if(null!=e.hoveredFigure){var n=this.containerObjectsMap.get(e.hoveredFigure);n&&e.showHoveredFigure&&(n.showRect(),r=!0)}if(null!=t.hoveredFigure){var o=this.containerObjectsMap.get(t.hoveredFigure);o&&(o.hideRect(),r=!0)}}var i=!Object(N.isEqual)(e.points,t.points),a=!Object(N.isEqual)(e.polygons,t.polygons),s=!Object(N.isEqual)(e.rectangles,t.rectangles);if((a||i||s)&&(i&&this.refreshTexturesDebounced(),a||s)){var c=Renderervue_type_script_lang_js_objectSpread({},e.polygons,{rectBorder:e.rectangles.border});this.containerObjectsMap.forEach(function(t){t.update(c),t.type===S.SHAPE_TYPES.RECTANGLE&&t.update(e.rectangles),t.draw()}),r=!0}Object(N.isEqual)(e.axes,t.axes)||(this.axes.update(e.axes),e.axes.visible!==t.axes.visible&&(r=!0)),Object(N.isEqual)(e.grid,t.grid)&&e.polygons.lineBorder===t.polygons.lineBorder||(r=!0,this.drawGrid()),r&&this.renderScene()}}},{key:"isSelectAllowed",value:function(e){return this.$hotkeys.ctrl&&1===e.which}},{key:"onSelectStart",value:function(){}},{key:"onSelect",value:function(){}},{key:"onSelectEnd",value:function(){}},{key:"isDragAllowed",value:function(e,t,r,n){var o=n.changedTouches||n.touches;return o?1===o.length:1===n.which}},{key:"getLocalPosition",value:function(e,t,r){return r?r.data.getLocalPosition(e):e.worldTransform.applyInverse({x:t.x-50,y:t.y-50})}},{key:"onDragStart",value:function(e,t,r,n,o,i){this.isDragAllowed(e,t,r,n,o)&&(this.dragPoint=this.getLocalPosition(r.parent,n,o),this.dragPoint.x-=t.left,this.dragPoint.y-=t.top,t.dragging=!0,this.sendEvent("point-drag-start",t,e,i))}},{key:"onDrag",value:function(e,t,r,n,o,i){if(t.dragging){var a=this.getLocalPosition(t.proxy.parent,n,o);t.left=a.x-this.dragPoint.x,t.top=a.y-this.dragPoint.y,this.sendEvent("point-drag",t,e,i),this.renderScene(0)}}},{key:"onDragEnd",value:function(e,t,r,n,o,i){this.isDragAllowed(e,t,r,n,o)&&(this.dragPoint=null,t.dragging=!1,this.sendEvent("point-drag-end",t,e,i))}},{key:"getChanges",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(kn.d)(e,t,this.compareInstances,this.compareChanges,r)}},{key:"compareInstances",value:function(e,t){return e===t||e[this.opts.watchIdKey]===t[this.opts.watchIdKey]}},{key:"compareChanges",value:function(e,t){return au.some(function(r){return e[r]!==t[r]})}},{key:"sendLoading",value:function(){this.loadingSent||!this.loadingImage&&!this.loadingObjects||(this.loadingSent=!0,this.sendEvent("loading"))}},{key:"sendLoaded",value:function(){this.loadingImage||this.loadingObjects||(this.sendEvent("loaded"),this.loadingSent=!1,this.loadingImagePromise=null)}},{key:"calcZoom",value:function(e,t){return Math.sqrt(e*t)}},{key:"sendEvent",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.$emit.apply(this,["scene-".concat(e)].concat(r))}},{key:"updateSceneSize",value:function(){this.setSize(this.$refs.sceneContainer.clientWidth,this.$refs.sceneContainer.clientHeight)}},{key:"getLocalMouse",value:function(e){var t={},r=e.changedTouches||e.touches;if(null==r?void 0:r.length){var n=r.item(0);t.x=n.clientX,t.y=n.clientY}else t.x=e.clientX,t.y=e.clientY;var o=this.container.renderer.view.getBoundingClientRect();return t.x-=o.left,t.y-=o.top,this.container.stage.worldTransform.applyInverse(t)}},{key:"onSceneMouseDown",value:function(e){e.preventDefault(),1===e.which&&(this.$hotkeys.shift||this.removeAllSelectedPoints(),this.$hotkeys.ctrl&&this.onSelectStart(e)),this.panning=!0,this.sendEvent("mousedown",e,this.getLocalMouse(e))}},{key:"onSceneMouseUp",value:function(e){e.preventDefault(),this.panning=!1,this.isSelectAllowed(e)&&this.onSelectEnd(e),this.sendEvent("mouseup",e,this.getLocalMouse(e))}},{key:"onSceneMouseMove",value:function(e){this.opts.panning&&this.panning&&this.moveScene({x:e.movementX,y:e.movementY});var t=this.getLocalMouse(e);this.axes.setPosition(t),this.isSelectAllowed(e,t)&&this.onSelect(e,t),this.sendEvent("mousemove",e,t)}},{key:"onSceneMouseEnter",value:function(e){this.sendEvent("mouseenter",e,this.getLocalMouse(e))}},{key:"onSceneMouseLeave",value:function(e){this.panning=!1,this.sendEvent("mouseleave",e,this.getLocalMouse(e))}},{key:"onSceneMouseWheel",value:function(e){if(this.sendEvent("mousewheel",e,this.getLocalMouse(e)),this.opts.zoom){var t=Math.sign(e.deltaY);if(!t)return;var r={x:e.offsetX,y:e.offsetY};t>0?this.decreaseZoom(r):this.increaseZoom(r)}}},{key:"onSceneResize",value:function(e){this.updateSceneSize(),this.sendEvent("resize",e)}},{key:"onSceneMouseWheelCapture",value:function(e){e.preventDefault()}},{key:"setSize",value:function(e,t){this.container.renderer.resize(e,t),this.renderScene(0)}},{key:"setZoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.center;this.cacheViewport();var r=this.zoom;this.container.stage.scale.x*=e,this.container.stage.scale.y*=e,this.scaleHack(),this.container.stage.x-=(t.x-this.container.stage.x)*(e-1),this.container.stage.y-=(t.y-this.container.stage.y)*(e-1),this.sendViewportChanged(),r!==this.zoom&&this.sendEvent("zoom-changed",this.zoom,r);var n=compareMatrices(this.fitViewport,this.container.stage.worldTransform);n!==this.opts.autoScale&&this.sendOptionsChanged({autoScale:n,canAutoScale:!1}),this.updateZoomDifference(),this.renderScene(0),this.emptyViewportCache()}},{key:"sendViewportChanged",value:function(){this.$emit("update:viewport",{offsetX:this.translateX,offsetY:this.translateY,zoom:this.zoom})}},{key:"sendOptionsChanged",value:function(e){this.$emit("update:options",Renderervue_type_script_lang_js_objectSpread({},this.opts,e))}},{key:"increaseZoom",value:function(e){this.setZoom(this.opts.zoomMultiplier,e)}},{key:"decreaseZoom",value:function(e){this.setZoom(1/this.opts.zoomMultiplier,e)}},{key:"updateZoomDifference",value:function(){this.opts.preserveZoomDifference&&(this.zoomDifference=0===this.scaleX?1:Math.min(this.hRatio,this.vRatio)/this.scaleX)}},{key:"fitScene",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.opts.autoCenter;if(this.backgroundImage){var t={width:this.container.screen.width,height:this.container.screen.height},r={width:this.currentDimensions.width,height:this.currentDimensions.height},n=this.fitViewport;null==this.fitViewport&&(this.fitViewport=fitImageToViewport(t,r,e,this.hRatio,this.vRatio,1),n=fitImageToViewport(t,r,e,this.hRatio,this.vRatio,this.zoomDifference),1!==this.zoomDifference&&this.sendOptionsChanged({autoScale:!1,canAutoScale:!1})),this.setTransformationMatrix(n)}}},{key:"drawGrid",value:function(){if(this.grid.graphicsData.length&&this.grid.clear(),this.opts.grid.visible&&this.backgroundImageTexture){var e=this.currentDimensions,t=e.width,r=e.height;t*=this.container.stage.scale.x,r*=this.container.stage.scale.y;var n=this.opts.grid,o=n.rows,i=n.cols,a=t/i,s=r/o;this.grid.lineStyle(3,16777215,1);for(var c=0;c<i-1;c++){var u=c+1;this.grid.moveTo(u*a,0),this.grid.lineTo(u*a,r)}for(var l=0;l<o-1;l++){var p=l+1;this.grid.moveTo(0,p*s),this.grid.lineTo(t,p*s)}}}},{key:"drawCursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.strokeOpacity,r=void 0===t?1:t,n=e.strokeColor,o=void 0===n?16777215:n,i=e.strokeWidth,a=void 0===i?1:i,s=e.brushSize;this.customCursor.clear(),this.customCursor.lineStyle(a,o,r),this.customCursor.drawCircle(0,0,s),this.customCursor.endFill()}},{key:"setBackgroundImage",value:function(){this.backgroundImageTexture&&(this.backgroundImageTexture.destroy(!0),this.container.stage.removeChild(this.backgroundImageTexture)),this.backgroundImageTexture=new Ys.Sprite(new Ys.Texture(new Ys.BaseTexture(this.backgroundImage))),this.backgroundImageTexture.width=this.currentDimensions.width,this.backgroundImageTexture.height=this.currentDimensions.height,this.container.stage.addChildAt(this.backgroundImageTexture,0);var e=this.opts.image,t=e.brightness,r=e.contrast;return this.backroundImageFilters={adjustment:new Nc.a({brightness:t,contrast:r})},this.backgroundImageTexture.filters=Object.values(this.backroundImageFilters),this.renderScene()}},{key:"updateBackgroundImageFilter",value:function(){var e=this.opts.image,t=e.brightness,r=e.contrast;if(this.isWebGL){var n=this.backroundImageFilters.adjustment;n.brightness=t,n.contrast=r}else this.$refs.scene.style.filter="brightness(".concat(t,") contrast(").concat(r,")")}},{key:"setTransformationMatrix",value:function(e){!function(e,t){e.position.x=t.tx,e.position.y=t.ty,e.scale.x=t.a,e.scale.y=t.d,e.skew.x=t.c,e.skew.y=t.b}(this.container.stage,e),this.scaleHack(),this.sendViewportChanged(),this.updateZoomDifference(),this.renderScene()}},{key:"renderScene",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return new zc.a(function(r,n){try{return requestAnimationFrame(function(){return e.renderHelpers[t](),requestAnimationFrame(function(){return r()})})}catch(e){return n(e)}})}},{key:"_sendSelectedPointsChanged",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.sendEvent.apply(this,["points-selected"].concat(t,[Renderervue_type_script_lang_js_toConsumableArray(this.selectedPoints)]))}},{key:"addSelectedPoint",value:function(){}},{key:"removeSelectedPoint",value:function(){}},{key:"removeAllSelectedPoints",value:function(){}},{key:"isViewportCached",value:function(){return!!this.isWebGL&&this.container.stage.cacheAsBitmap}},{key:"cacheViewport",value:function(){this.isWebGL&&!this.isViewportCached()&&(this.container.stage.cacheAsBitmap=!0)}},{key:"_emptyViewportCache",value:function(){this.isWebGL&&(this.container.stage.cacheAsBitmap=!1,this.renderScene(0))}},{key:"_renderScene",value:function(){if(this.container.render(),this.isWebGL){var e=this.container.renderer.gl.getError();0!==e&&this.$emit("render-error",{code:e,info:nu})}}},{key:"setCursor",value:function(e){var t=e;"string"==typeof e?(t=e,this.customCursor.visible&&(this.customCursor.visible=!1,this.renderScene(0))):(t="none","bitmap"===e.id&&(this.drawCursor(e.options),this.renderScene(0))),this.container.stage.cursor=t}},{key:"refreshTextures",value:function(){var e=this;this.pointTexture&&this.pointTexture.destroy(!0),this.pointTexture=Renderervue_type_script_lang_js_makePointTexture(this.opts.points),this.lastPointTexture&&this.lastPointTexture.destroy(!0),this.lastPointTexture=Renderervue_type_script_lang_js_makePointTexture(Renderervue_type_script_lang_js_objectSpread({},this.opts.points,{color:16776960})),this.hoveredPointTexture&&this.hoveredPointTexture.destroy(!0),this.hoveredPointTexture=Renderervue_type_script_lang_js_makePointTexture(Renderervue_type_script_lang_js_objectSpread({},this.opts.points,{color:this.opts.points.hoveredColor})),Object.values(this.tools).forEach(function(t){return t.refreshTextures(e.opts)})}},{key:"moveScene",value:function(e){var t=e.x,r=e.y;this.cacheViewport(),this.container.stage.position.x+=t,this.container.stage.position.y+=r,this.renderScene(0);var n=compareMatrices(this.fitViewport,this.container.stage.worldTransform);n!==this.opts.autoScale&&this.sendOptionsChanged({autoScale:n,canAutoScale:!1}),this.sendViewportChanged(),this.emptyViewportCache()}},{key:"scaleHack",value:function(){var e=this;[this.pointsContainer,this.toolsPointsContainer,this.gridContainer].forEach(function(t){t.children.forEach(function(t){t.scale.x=1/e.container.stage.scale.x,t.scale.y=1/e.container.stage.scale.y})}),this.drawGrid()}},{key:"created",value:function(){var e,t=this;this.zoomDifference=1,this.loadingImage=!1,this.loadingObjects=!1,this.loadingSent=!1,this.selectedPoints=new Set,this.containerObjectsMap=new Map,this.figuresContainer=new Ys.Container,this.rectsContainer=new Ys.Container,this.pointsContainer=new Ys.Container,this.toolsContainer=new Ys.Container,this.toolsGraphicsContainer=new Ys.Container,this.toolsPointsContainer=new Ys.Container,this.toolsContainer.addChild(this.toolsGraphicsContainer),this.toolsContainer.addChild(this.toolsPointsContainer),this.gridContainer=new Ys.Container,this.grid=new Ys.Graphics,this.customCursor=new Ys.Graphics,this.emptyViewportCache=Object(N.debounce)(this._emptyViewportCache,300),this.refreshTexturesDebounced=Object(N.debounce)(function(){t.refreshTextures(),t.containerObjectsMap.forEach(function(e){e.pointsOpts=t.opts.points,e.pointTexture=t.pointTexture,e.hoveredPointTexture=t.hoveredPointTexture,e.lastPointTexture=t.lastPointTexture,e.refreshPointsTextures()}),Object.values(t.tools).forEach(function(e){return e.updatePointsTexture()}),t.renderScene()},300),this.renderHelpers=(Renderervue_type_script_lang_js_defineProperty(e={},0,this._renderScene),Renderervue_type_script_lang_js_defineProperty(e,1,Object(N.debounce)(this._renderScene,200)),Renderervue_type_script_lang_js_defineProperty(e,2,Object(N.throttle)(this._renderScene,50)),e)}},{key:"mounted",value:function(){var e=this;Ys.settings.SCALE_MODE=Ys.SCALE_MODES.NEAREST,this.container=nonReactive(new Ys.Application({antialias:!1,view:this.$refs.scene,transparent:!0,preserveDrawingBuffer:!0,forceCanvas:this.opts.forceCanvas})),Object.keys(this.container).forEach(function(t){nonReactive(e.container[t])}),this.$emit("update:canvas",this.$refs.scene),this.isWebGL=this.container.renderer instanceof Ys.WebGLRenderer;var t=new Ys.Container;this.container.stop(),this.container.stage.interactive=!0,this.container.renderer.plugins.interaction.moveWhenInside=!1,this.container.stage.addChild(this.figuresContainer),this.container.stage.addChild(this.gridContainer),this.container.stage.addChild(this.pointsContainer),this.container.stage.addChild(this.rectsContainer),this.container.stage.addChild(this.toolsContainer),this.container.stage.addChild(t),this.container.stage.addChild(this.customCursor),this.gridContainer.addChild(this.grid),this.customCursor.visible=!1,this.axes=new ru(t),this.axes.on("render",function(){return e.renderScene(0)}),this.container.stage.on("pointerover",function(){"none"!==e.container.stage.cursor||e.customCursor.visible||(e.customCursor.visible=!0,e.renderScene(0))}),this.container.stage.on("pointerout",function(){e.customCursor.visible&&(e.customCursor.visible=!1,e.renderScene(0))}),this.container.stage.on("pointermove",function(t){if("none"!==e.container.stage.cursor||e.customCursor.visible){if(!e.customCursor.visible)return}else e.customCursor.visible=!0;var r=t.data.getLocalPosition(e.container.stage);e.customCursor.position.x=r.x,e.customCursor.position.y=r.y,e.renderScene(0)}),Object.values(this.tools).forEach(function(t){t.on("figure:add",function(r){r.on("point:pointer:over",function(n){e.isViewportCached()||e.sendEvent("point-over",n,r,t)}),r.on("point:pointer:out",function(n){e.isViewportCached()||e.sendEvent("point-out",n,r,t)}),r.on("point:pointer:down",function(n,o,i,a){i.preventDefault(),i.stopPropagation(),e.isViewportCached()||e.onDragStart(r,n,o,i,a,t)}),r.on("point:pointer:move",function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];e.onDrag.apply(e,[r,n].concat(i,[t]))}),r.on("point:pointer:up",function(n,o,i,a){i.preventDefault(),i.stopPropagation(),e.onDragEnd(r,n,o,i,a,t)}),r.on("point:pointer:upoutside",function(n,o,i,a){e.onDragEnd(r,n,o,i,a,t)})}),t.on("render",function(){return e.renderScene(0)}),t.on("point:add",function(t,r){r.scale.x=1/e.container.stage.scale.x,r.scale.y=1/e.container.stage.scale.y,e.toolsPointsContainer.addChild(r)}),t.on("point:remove",function(t,r){return e.toolsPointsContainer.removeChild(r)}),t.init(e.toolsGraphicsContainer,e.container.renderer.plugins.interaction)}),this.resizeInstance=new Zn.ResizeSensor(this.$refs.sceneContainer,this.onSceneResize),this.updateSceneSize(),this.refreshTextures(),this.domScene.addEventListener("mousedown",this.onSceneMouseDown,{capture:!0}),this.domScene.addEventListener("mouseup",this.onSceneMouseUp,{capture:!0}),this.domScene.addEventListener("mousemove",this.onSceneMouseMove,{passive:!0}),this.domScene.addEventListener("touchstart",this.onSceneMouseDown,{capture:!0}),this.domScene.addEventListener("touchend",this.onSceneMouseUp,{capture:!0}),this.domScene.addEventListener("touchmove",this.onSceneMouseMove,{passive:!0}),this.domScene.addEventListener("mouseenter",this.onSceneMouseEnter,{passive:!0}),this.domScene.addEventListener("mouseleave",this.onSceneMouseLeave,{passive:!0}),this.domScene.addEventListener("wheel",this.onSceneMouseWheelCapture,{capture:!0}),this.domScene.addEventListener("wheel",this.onSceneMouseWheel,{passive:!0})}},{key:"beforeDestroy",value:function(){this.$emit("update:canvas",null),this.domScene.removeEventListener("mousedown",this.onSceneMouseDown,{capture:!0}),this.domScene.removeEventListener("mouseup",this.onSceneMouseUp,{capture:!0}),this.domScene.removeEventListener("mousemove",this.onSceneMouseMove,{passive:!0}),this.domScene.removeEventListener("touchstart",this.onSceneMouseDown,{capture:!0}),this.domScene.removeEventListener("touchend",this.onSceneMouseUp,{capture:!0}),this.domScene.removeEventListener("touchmove",this.onSceneMouseMove,{passive:!0}),this.domScene.removeEventListener("mouseenter",this.onSceneMouseEnter,{passive:!0}),this.domScene.removeEventListener("mouseleave",this.onSceneMouseLeave,{passive:!0}),this.domScene.removeEventListener("wheel",this.onSceneMouseWheelCapture,{capture:!0}),this.domScene.removeEventListener("wheel",this.onSceneMouseWheel,{passive:!0}),Object.values(this.tools).forEach(function(e){e.destroy()}),this.containerObjectsMap.forEach(function(e){e.destroy()}),this.axes.destroy(),this.grid.destroy(!0),this.customCursor.destroy(!0),this.container.destroy(!0),this.pointTexture&&this.pointTexture.destroy(!0),this.hoveredPointTexture&&this.hoveredPointTexture.destroy(!0),this.lastPointTexture&&this.lastPointTexture.destroy(!0),this.resizeInstance&&this.resizeInstance.detach()}},{key:"opts",get:function(){return Object(N.merge)({},ou,this.options)}},{key:"domScene",get:function(){return this.container?this.$refs.sceneContainer:null}},{key:"center",get:function(){return{x:this.container.screen.width/2,y:this.container.screen.height/2}}},{key:"zoom",get:function(){return this.calcZoom(this.container.stage.scale.x,this.container.stage.scale.y)}},{key:"scaleX",get:function(){return this.container.stage.scale.x}},{key:"translateX",get:function(){return this.container.stage.position.x}},{key:"translateY",get:function(){return this.container.stage.position.y}},{key:"hRatio",get:function(){return this.currentDimensions?this.container.screen.width/this.currentDimensions.width:null}},{key:"vRatio",get:function(){return this.currentDimensions?this.container.screen.height/this.currentDimensions.height:null}},{key:"panning",get:function(){return this.$data._panning},set:function(e){var t=this.$data._panning;this.$data._panning=e,this.sendEvent("panning-changed",e,t)}},{key:"currentDimensions",get:function(){return this.dimensions||this.backgroundImage}}])&&Renderervue_type_script_lang_js_defineProperties(t.prototype,r),Renderer}()).prototype,"domScene",[Yc],Object.getOwnPropertyDescriptor(tu.prototype,"domScene"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"center",[Yc],Object.getOwnPropertyDescriptor(tu.prototype,"center"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"zoom",[Yc],Object.getOwnPropertyDescriptor(tu.prototype,"zoom"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"scaleX",[Yc],Object.getOwnPropertyDescriptor(tu.prototype,"scaleX"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"translateX",[Yc],Object.getOwnPropertyDescriptor(tu.prototype,"translateX"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"translateY",[Yc],Object.getOwnPropertyDescriptor(tu.prototype,"translateY"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"hRatio",[Yc],Object.getOwnPropertyDescriptor(tu.prototype,"hRatio"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"vRatio",[Yc],Object.getOwnPropertyDescriptor(tu.prototype,"vRatio"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"backgroundImageChanged",[qc],Object.getOwnPropertyDescriptor(tu.prototype,"backgroundImageChanged"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"dimensionsChanged",[Zc],Object.getOwnPropertyDescriptor(tu.prototype,"dimensionsChanged"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"objectsChanged",[$c],Object.getOwnPropertyDescriptor(tu.prototype,"objectsChanged"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"cursorChanged",[Qc],Object.getOwnPropertyDescriptor(tu.prototype,"cursorChanged"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"viewportChanged",[Kc],Object.getOwnPropertyDescriptor(tu.prototype,"viewportChanged"),tu.prototype),Renderervue_type_script_lang_js_applyDecoratedDescriptor(tu.prototype,"optsChanged",[Xc],Object.getOwnPropertyDescriptor(tu.prototype,"optsChanged"),tu.prototype),eu=tu))||eu),cu=(r("549241adf29c25df0be9"),Object(p.a)(su,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"sceneContainer",staticClass:"fill renderer",attrs:{layout:"row stretch-stretch",oncontextmenu:"return false"}},[t("canvas",{directives:[{name:"show",rawName:"v-show",value:this.backgroundImage,expression:"backgroundImage"}],ref:"scene",staticClass:"scene"}),this._v(" "),this.backgroundImage?this._e():t("div",{staticClass:"no-image"},[this._v("\n    No image\n  ")])])},[],!1,null,null,null));cu.options.__file="Renderer.vue";var uu,lu=cu.exports;function Rulervue_type_script_lang_js_typeof(e){return(Rulervue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rulervue_type_script_lang_js_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Rulervue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rulervue_type_script_lang_js_getPrototypeOf(e){return(Rulervue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rulervue_type_script_lang_js_setPrototypeOf(e,t){return(Rulervue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pu=Object(u.a)({props:["viewport","sizes"]})(uu=function(e){function Ruler(){return function(e,t){if(!(e instanceof Ruler))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==Rulervue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Rulervue_type_script_lang_js_getPrototypeOf(Ruler).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rulervue_type_script_lang_js_setPrototypeOf(e,t)}(Ruler,s.a),t=Ruler,(r=[{key:"steps",get:function(){return 4}},{key:"hStep",get:function(){return Math.floor(this.sizes.width/this.steps)}},{key:"vStep",get:function(){return Math.floor(this.sizes.height/this.steps)}},{key:"hPoints",get:function(){return[].concat(Rulervue_type_script_lang_js_toConsumableArray(Object(N.range)(0,this.sizes.width,this.hStep)),[this.sizes.width])}},{key:"vPoints",get:function(){return[].concat(Rulervue_type_script_lang_js_toConsumableArray(Object(N.range)(0,this.sizes.height,this.vStep)),[this.sizes.height])}}])&&Rulervue_type_script_lang_js_defineProperties(t.prototype,r),Ruler}())||uu,fu=(r("e396bc4a2d4c1b5bdd25"),Object(p.a)(pu,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ruler-container"},[r("div",{staticClass:"ruler ruler-h",style:{"background-position-x":e.viewport.offsetX+"px"}},e._l(e.hPoints,function(t,n){return r("span",{key:t,style:{left:e.viewport.offsetX+n*e.hStep*e.viewport.zoom+"px"}},[e._v("\n      "+e._s(t)+"\n    ")])}),0),e._v(" "),r("div",{staticClass:"ruler ruler-v",style:{"background-position-y":e.viewport.offsetY+"px"}},e._l(e.vPoints,function(t,n){return r("span",{key:t,style:{top:e.viewport.offsetY+n*e.vStep*e.viewport.zoom+"px"}},[e._v("\n      "+e._s(t)+"\n    ")])}),0),e._v(" "),r("div",{staticClass:"ruler-point"})])},[],!1,null,"75d8f4e0",null));fu.options.__file="Ruler.vue";var du,_u=fu.exports;function SceneOptionsvue_type_script_lang_js_typeof(e){return(SceneOptionsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SceneOptionsvue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function SceneOptionsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SceneOptionsvue_type_script_lang_js_getPrototypeOf(e){return(SceneOptionsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SceneOptionsvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SceneOptionsvue_type_script_lang_js_setPrototypeOf(e,t){return(SceneOptionsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SceneOptionsvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){SceneOptionsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function SceneOptionsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yu=Object(u.a)({props:["options"],computed:SceneOptionsvue_type_script_lang_js_objectSpread({},Object(y.c)("tools",["currentTool","isCreateTool","isEditTool"])),methods:SceneOptionsvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset",["updateDefaultSettings"]))})(du=function(e){function SceneOptions(){var e,t,r;!function(e,t){if(!(e instanceof SceneOptions))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=SceneOptionsvue_type_script_lang_js_getPrototypeOf(SceneOptions)).call.apply(e,[this].concat(o)))||"object"!==SceneOptionsvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?SceneOptionsvue_type_script_lang_js_assertThisInitialized(this):r,SceneOptionsvue_type_script_lang_js_defineProperty(SceneOptionsvue_type_script_lang_js_assertThisInitialized(t),"isOpen",!1),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SceneOptionsvue_type_script_lang_js_setPrototypeOf(e,t)}(SceneOptions,s.a),t=SceneOptions,(r=[{key:"updateTagsMode",value:function(e){this.updateDefaultSettings(SceneOptionsvue_type_script_lang_js_objectSpread({},this.defaultSettings,{showTagsMode:e}))}},{key:"updateGraphLabelsMode",value:function(e){this.updateDefaultSettings(SceneOptionsvue_type_script_lang_js_objectSpread({},this.defaultSettings,{showGraphLabelsMode:e}))}},{key:"updateContoursMode",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateDefaultSettings(SceneOptionsvue_type_script_lang_js_objectSpread({},this.defaultSettings,{showContours:e}));case 2:window.location.reload();case 3:case"end":return t.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){SceneOptionsvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){SceneOptionsvue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"mounted",value:function(){var e=this;!localStorage.getItem("firstEncounter")&&(setTimeout(function(){e.isOpen=!0},1e3),localStorage.setItem("firstEncounter",!0))}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"isSpecialMode",get:function(){return this.currentTool&&(this.isCreateTool(this.currentTool.id)||this.isEditTool(this.currentTool.id))}},{key:"defaultSettings",get:function(){return this.$store.state.dataset.settings}},{key:"tagsMode",get:function(){return Object.values(S.PROJECT_SHOW_TAGS_MODE).map(function(e){return{title:Object(N.startCase)(e.replace(/-/g," ").toLowerCase()),value:e}})}},{key:"graphLabelsMode",get:function(){return Object.values(S.PROJECT_SHOW_GRAPH_LABELS_MODE).map(function(e){return{title:Object(N.startCase)(e.replace(/-/g," ").toLowerCase()),value:e}})}}])&&SceneOptionsvue_type_script_lang_js_defineProperties(t.prototype,r),SceneOptions}())||du,gu=(r("53566519489ea25c5a81"),Object(p.a)(yu,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-popover",{attrs:{placement:"left",width:"320",value:e.isOpen,trigger:"click"}},[r("a",{staticClass:"btn-round mt btn-options",attrs:{slot:"reference"},slot:"reference"},[r("i",{staticClass:"icon-sound-mix"})]),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("el-col",{attrs:{span:9}},[r("b",[e._v("Opacity")])]),e._v(" "),r("el-col",{attrs:{span:15}},[r("el-slider",{attrs:{min:e.options.polygons.opacityOptions.min,max:e.options.polygons.opacityOptions.max,step:e.options.polygons.opacityOptions.step,"show-stops":!0,value:e.options.polygons.opacity},on:{input:function(t){return e.$emit("change","polygons.opacity",t)}}})],1)],1),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("el-col",{attrs:{span:9}},[r("b",[e._v("Border size")])]),e._v(" "),r("el-col",{attrs:{span:15}},[r("el-slider",{attrs:{min:e.options.polygons.borderOptions.min,max:e.options.polygons.borderOptions.max,step:e.options.polygons.borderOptions.step,"show-stops":!0,value:e.options.polygons.border},on:{input:function(t){return e.$emit("change",["polygons.border","polygons.lineBorder"],t)}}})],1)],1),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("el-col",{attrs:{span:9}},[r("b",[e._v("Brightness")])]),e._v(" "),r("el-col",{attrs:{span:15}},[r("el-slider",{attrs:{min:e.options.image.brightnessOptions.min,max:e.options.image.brightnessOptions.max,step:e.options.image.brightnessOptions.step,value:e.options.image.brightness},on:{input:function(t){return e.$emit("change","image.brightness",t)}}})],1)],1),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("el-col",{attrs:{span:9}},[r("b",[e._v("Contrast")])]),e._v(" "),r("el-col",{attrs:{span:15}},[r("el-slider",{attrs:{min:e.options.image.contrastOptions.min,max:e.options.image.contrastOptions.max,step:e.options.image.contrastOptions.step,value:e.options.image.contrast},on:{input:function(t){return e.$emit("change","image.contrast",t)}}})],1)],1),e._v(" "),e.isSpecialMode?r("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("el-col",{attrs:{span:9}},[r("b",[e._v("Points Size")])]),e._v(" "),r("el-col",{attrs:{span:15}},[r("el-slider",{attrs:{min:e.options.points.size.min,max:e.options.points.size.max,step:e.options.points.size.step,value:e.options.points.radius},on:{input:function(t){return e.$emit("change",["points.radius","points.strokeWidth"],t)}}})],1)],1):e._e(),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("el-col",{attrs:{span:9}},[r("b",[e._v("Show tags")])]),e._v(" "),r("el-col",{attrs:{span:15}},[r("el-select",{attrs:{value:e.defaultSettings.showTagsMode,size:"mini"},on:{input:e.updateTagsMode}},e._l(e.tagsMode,function(e){return r("el-option",{key:e.value,attrs:{label:e.title,value:e.value}})}),1)],1)],1),e._v(" "),r("el-row",{staticClass:"mt5",attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("el-col",{attrs:{span:9}},[r("b",[e._v("Show keypoints labels")])]),e._v(" "),r("el-col",{attrs:{span:15}},[r("el-select",{attrs:{value:e.defaultSettings.showGraphLabelsMode,size:"mini"},on:{input:e.updateGraphLabelsMode}},e._l(e.graphLabelsMode,function(e){return r("el-option",{key:e.value,attrs:{label:e.title,value:e.value}})}),1)],1)],1),e._v(" "),r("el-row",{staticClass:"mt5",attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("el-col",{attrs:{span:9}},[r("el-checkbox",{attrs:{value:e.options.grid.visible},on:{change:function(t){return e.$emit("change","grid.visible",t.target.checked)}}}),e._v(" "),r("b",[e._v("Show grid")])],1),e._v(" "),r("el-col",{staticClass:"grid-controls",attrs:{span:15}},[r("el-input-number",{directives:[{name:"show",rawName:"v-show",value:e.options.grid.visible,expression:"options.grid.visible"}],staticClass:"mini",attrs:{size:"small",min:2},on:{input:function(t){return e.$emit("change","grid.rows",t)}},model:{value:e.options.grid.rows,callback:function(t){e.$set(e.options.grid,"rows",t)},expression:"options.grid.rows"}}),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.options.grid.visible,expression:"options.grid.visible"}],staticClass:"x"},[e._v("✕")]),e._v(" "),r("el-input-number",{directives:[{name:"show",rawName:"v-show",value:e.options.grid.visible,expression:"options.grid.visible"}],staticClass:"mini",attrs:{size:"small",min:2},on:{input:function(t){return e.$emit("change","grid.cols",t)}},model:{value:e.options.grid.cols,callback:function(t){e.$set(e.options.grid,"cols",t)},expression:"options.grid.cols"}})],1)],1),e._v(" "),r("el-row",[r("el-checkbox",{attrs:{value:e.options.autoBorderSize},on:{change:function(t){return e.$emit("change","autoBorderSize",t.target.checked)}}}),e._v(" "),r("b",[e._v("Auto border")])],1),e._v(" "),r("el-row",{staticClass:"mt5"},[r("el-checkbox",{attrs:{value:e.defaultSettings.showContours},on:{change:function(t){return e.updateContoursMode(t.target.checked)}}}),e._v(" "),r("b",[e._v("Show bitmap contours")])],1)],1)},[],!1,null,null,null));gu.options.__file="SceneOptions.vue";var hu,bu=gu.exports;function SceneControlsvue_type_script_lang_js_typeof(e){return(SceneControlsvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SceneControlsvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SceneControlsvue_type_script_lang_js_getPrototypeOf(e){return(SceneControlsvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SceneControlsvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SceneControlsvue_type_script_lang_js_setPrototypeOf(e,t){return(SceneControlsvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SceneControlsvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){SceneControlsvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function SceneControlsvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vu=Object(u.a)({components:{SceneOptions:bu},computed:SceneControlsvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["currentImage"])),methods:SceneControlsvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/images",["rotateImage"])),props:["viewport","options"]})(hu=function(e){function SceneControls(){var e,t,r;!function(e,t){if(!(e instanceof SceneControls))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=SceneControlsvue_type_script_lang_js_getPrototypeOf(SceneControls)).call.apply(e,[this].concat(o)))||"object"!==SceneControlsvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?SceneControlsvue_type_script_lang_js_assertThisInitialized(this):r,SceneControlsvue_type_script_lang_js_defineProperty(SceneControlsvue_type_script_lang_js_assertThisInitialized(t),"zoomMultiplier",1.3),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SceneControlsvue_type_script_lang_js_setPrototypeOf(e,t)}(SceneControls,s.a),t=SceneControls,(r=[{key:"toggleAutoScale",value:function(){this.$emit("update:options",SceneControlsvue_type_script_lang_js_objectSpread({},this.options,{autoScale:!this.options.autoScale,canAutoScale:!0}))}},{key:"onOptionsChange",value:function(e,t){var r=Object.assign({},this.options);Array.isArray(e)?e.forEach(function(e){return Object(N.set)(r,e,t)}):Object(N.set)(r,e,t),this.$emit("update:options",r)}},{key:"zoomIn",value:function(){this.$emit("update:viewport",SceneControlsvue_type_script_lang_js_objectSpread({},this.viewport,{zoom:this.zoomMultiplier}))}},{key:"zoomOut",value:function(){this.$emit("update:viewport",SceneControlsvue_type_script_lang_js_objectSpread({},this.viewport,{zoom:1/this.zoomMultiplier}))}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"autoScale",get:function(){return this.options.autoScale}}])&&SceneControlsvue_type_script_lang_js_defineProperties(t.prototype,r),SceneControls}())||hu,mu=(r("ef7305fbd1b6ce8c144d"),Object(p.a)(vu,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scene-controls"},[r("a",{staticClass:"btn-round mt",on:{click:e.toggleAutoScale}},[r("i",{staticClass:"text"},[e._v(e._s(e.autoScale?"1:1":"Fit"))])]),e._v(" "),r("a",{staticClass:"btn-round",on:{click:e.zoomIn}},[r("i",{staticClass:"icon-plus"})]),e._v(" "),r("a",{staticClass:"btn-round",on:{click:e.zoomOut}},[r("i",{staticClass:"icon-minus"})]),e._v(" "),r("scene-options",{attrs:{options:e.options},on:{change:e.onOptionsChange}})],1)},[],!1,null,null,null));mu.options.__file="SceneControls.vue";var Ou,Pu=mu.exports;function GraphShapeLabelvue_type_script_lang_js_typeof(e){return(GraphShapeLabelvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GraphShapeLabelvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GraphShapeLabelvue_type_script_lang_js_getPrototypeOf(e){return(GraphShapeLabelvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GraphShapeLabelvue_type_script_lang_js_setPrototypeOf(e,t){return(GraphShapeLabelvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GraphShapeLabelvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tu={node:"zmdi-dot-circle",edge:"zmdi-minus-circle-outline"},Su=Object(u.a)({props:{label:Object},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){GraphShapeLabelvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.d)("tags",["selected"]))})(Ou=function(e){function GraphShpeLabel(){return function(e,t){if(!(e instanceof GraphShpeLabel))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==GraphShapeLabelvue_type_script_lang_js_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,GraphShapeLabelvue_type_script_lang_js_getPrototypeOf(GraphShpeLabel).apply(this,arguments))}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GraphShapeLabelvue_type_script_lang_js_setPrototypeOf(e,t)}(GraphShpeLabel,s.a),t=GraphShpeLabel,(r=[{key:"icon",get:function(){return Tu[this.label.type]}}])&&GraphShapeLabelvue_type_script_lang_js_defineProperties(t.prototype,r),GraphShpeLabel}())||Ou,ju=(r("06d82cacb0ed7b3f5223"),Object(p.a)(Su,function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"graph-label",style:{color:e.label.color||"black"},on:{click:function(t){return e.$emit("selectFigure")}}},[e._v("\n  "+e._s(e.label.title)+"\n")])},[],!1,null,null,null));ju.options.__file="GraphShapeLabel.vue";var wu,Iu=ju.exports;function FigureOverlayvue_type_script_lang_js_typeof(e){return(FigureOverlayvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FigureOverlayvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FigureOverlayvue_type_script_lang_js_getPrototypeOf(e){return(FigureOverlayvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FigureOverlayvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FigureOverlayvue_type_script_lang_js_setPrototypeOf(e,t){return(FigureOverlayvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FigureOverlayvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){FigureOverlayvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function FigureOverlayvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Eu="node",Cu=Object(u.a)({props:{figure:Object,viewport:Object,imageRectApplied:Object,cursor:[String,Object]},components:{Tags:Xo,GraphShapeLabel:Iu},computed:FigureOverlayvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["currentImage"]),Object(y.c)("tools",["isCreateMode","isEditMode"]),Object(y.c)("tags",["selectedTagFigure"]),Object(y.d)("tags",{selectedTag:"selected"}),Object(y.d)("dataset/classes",{classesById:"all"})),methods:FigureOverlayvue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/figures",["addTag","removeTag","scheduleRemoveFromRecentHovered","unscheduleRemoveFromRecentHovered","setSelectedFigure"]),Object(y.b)("tools",["setTool"]),Object(y.b)("tags",["selectTag","highlightTagPanel"]))})(wu=function(e){function FigureOverlay(){var e,t,r;!function(e,t){if(!(e instanceof FigureOverlay))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=FigureOverlayvue_type_script_lang_js_getPrototypeOf(FigureOverlay)).call.apply(e,[this].concat(o)))||"object"!==FigureOverlayvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?FigureOverlayvue_type_script_lang_js_assertThisInitialized(this):r,FigureOverlayvue_type_script_lang_js_defineProperty(FigureOverlayvue_type_script_lang_js_assertThisInitialized(t),"TAG_TYPES",S.TAG_TYPES),FigureOverlayvue_type_script_lang_js_defineProperty(FigureOverlayvue_type_script_lang_js_assertThisInitialized(t),"dialogVisible",!1),FigureOverlayvue_type_script_lang_js_defineProperty(FigureOverlayvue_type_script_lang_js_assertThisInitialized(t),"overlayStyle",{}),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FigureOverlayvue_type_script_lang_js_setPrototypeOf(e,t)}(FigureOverlay,s.a),t=FigureOverlay,(r=[{key:"removeCurTag",value:function(e){this.removeTag({datasetId:this.currentImage.datasetId,imageId:this.currentImage.id,figureId:this.figure.id,tagId:e});var t={tag:{id:null,figureId:this.figure.id,isPlus:!0}};this.selectTag(t),this.highlightTagPanel({figureId:this.figure.id})}},{key:"selectFigure",value:function(){this.setSelectedFigure(this.figure.id)}},{key:"openTagsDialog",value:function(e,t){this.tools.selected!==this.tools.all.tagFigures.id&&this.setTool({toolId:this.tools.all.tagFigures.id});var r={tag:FigureOverlayvue_type_script_lang_js_objectSpread({id:e,figureId:this.figure.id},t)};this.selectTag(r),this.highlightTagPanel({figureId:this.figure.id})}},{key:"mouseOver",value:function(){this.overlayStyle={"z-index":1e4},this.dataset.settings.showTagsMode===S.PROJECT_SHOW_TAGS_MODE.ON_HOVER&&this.unscheduleRemoveFromRecentHovered(this.figure.id)}},{key:"mouseOut",value:function(){this.overlayStyle={},this.dataset.settings.showTagsMode===S.PROJECT_SHOW_TAGS_MODE.ON_HOVER&&this.scheduleRemoveFromRecentHovered(this.figure.id)}},{key:"onLabelMouseOver",value:function(e){e.type===Eu&&e.raw.onPointerOver(e.raw.proxy)}},{key:"onLabelMouseOut",value:function(e){e.type===Eu&&e.raw.onPointerOut(e.raw.proxy)}},{key:"onLabelMouseDown",value:function(e,t){e.type===Eu&&(window.addEventListener("mouseup",function(t){e.raw.onPointerUp(e.raw.proxy,t)},{once:!0}),e.raw.onPointerDown(e.raw.proxy,t))}},{key:"beforeUpdate",value:function(){if(this.$refs.figureOverlay&&this.imageRectApplied){var e=this.$refs.figureOverlay,t=e.parentElement.parentElement.getBoundingClientRect().right,r=e.getBoundingClientRect().right-t,n=this.imageRectApplied.right+50;r>0&&n<=t&&(this.figure.style.left="".concat(this.figure.tagsPosition.left-r,"px"))}}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"classes",get:function(){return this.dataset.classes}},{key:"figures",get:function(){return this.dataset.figures}},{key:"recentHovered",get:function(){return this.figures.recentHovered}},{key:"tools",get:function(){return this.$store.state.tools}},{key:"showRemoveBtn",get:function(){return this.tools.selected===this.tools.all.tagFigures.id}},{key:"showTags",get:function(){var e=Object.keys(this.recentHovered).map(function(e){return parseInt(e,10)});return this.tools.selected===this.tools.all.tagFigures.id?!!this.currentImage:!(this.tools.selected!==this.tools.all.moveScene.id||this.dataset.settings.showTagsMode===S.PROJECT_SHOW_TAGS_MODE.NEVER||this.dataset.settings.showTagsMode===S.PROJECT_SHOW_TAGS_MODE.ON_HOVER&&!e.includes(this.figure.id)||!this.currentImage)}},{key:"figureTags",get:function(){var e=[],t=this.classes.all[this.figure.classId];if(this.dataset.settings.showUsersMode&&this.figure.userName&&e.push({title:this.figure.userName,type:"user"}),this.dataset.settings.showObjectSizeMode){var r="".concat(this.figure.area,"px");if(this.isRect){var n=this.figure.rect,o=n.width,i=n.height;r="".concat(o,"×").concat(i," ").concat(r)}e.push({title:r,type:"size"})}return this.dataset.settings.showClassesMode&&e.push(FigureOverlayvue_type_script_lang_js_objectSpread({},t,{type:"class"})),this.figure.description&&e.push({title:this.figure.description,type:"description"}),Object(N.orderBy)(this.figure.tags,["title"]).forEach(function(t){e.push(FigureOverlayvue_type_script_lang_js_objectSpread({},t,{type:"tag"}))}),e}},{key:"graphLabels",get:function(){var e=this,t=[],r=this.classes.all[this.figure.classId],n=this.dataset.settings.showGraphLabelsMode;if(r.shape===S.SHAPE_TYPES.GRAPH&&r.settings&&n===S.PROJECT_SHOW_GRAPH_LABELS_MODE.ALWAYS){var o=new Map,i=Object(j.l)(r.settings.nodes,"id"),a=this.isEditMode&&"string"==typeof this.cursor?this.cursor:"pointer";(this.figure.pointsPreview||this.figure.points).forEach(function(r,n){var s=Object(j.l)(e.figure.raw.points,"id"),c=(r.left-e.figure.rect.left)*e.viewport.zoom,u=(r.top-e.figure.rect.top)*e.viewport.zoom-10;o.set(r.label,{id:r.label,left:c,top:u});var l={id:n,raw:s.get(n),title:i.get(r.label).label,type:Eu,style:{position:"absolute",left:"".concat(c,"px"),top:"".concat(u,"px")}};a&&(l.style.cursor=a),t.push(l)}),r.settings.edges.forEach(function(e){if(e.label){var r=o.get(e.src),n=o.get(e.dst),i=(r.top+n.top)/2,a=(r.left+n.left)/2;t.push({id:"".concat(r.id,"-").concat(n.id),title:e.label,type:"edge",style:{position:"absolute",left:"".concat(a,"px"),top:"".concat(i,"px")}})}})}return t}},{key:"tagsPosition",get:function(){var e={left:0,top:0};return this.figure.leftTopPoint&&this.dataset.settings.tagsLocationMode===S.PROJECT_TAGS_SCENE_LOCATION_MODE.TOP_POINT&&(e.left=(this.figure.leftTopPoint.left-this.figure.rect.left)*this.viewport.zoom,e.top=(this.figure.leftTopPoint.top-this.figure.rect.top)*this.viewport.zoom),{position:"absolute",left:"".concat(e.left,"px"),top:"".concat(e.top,"px")}}},{key:"selected",get:function(){var e;return(null===(e=this.selectedTagFigure)||void 0===e?void 0:e.id)===this.figure.id}},{key:"highlightGroup",get:function(){return this.selected&&(!this.selectedTag||!this.selectedTag.id)}},{key:"isRect",get:function(){return this.classesById[this.figure.classId].shape===S.SHAPE_TYPES.RECTANGLE}}])&&FigureOverlayvue_type_script_lang_js_defineProperties(t.prototype,r),FigureOverlay}())||wu,ku=(r("fbff1fa6dce1ee0c548a"),Object(p.a)(Cu,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"figureOverlay",staticClass:"figure-overlay",class:{wrap:e.figureTags.length>3,dialogVisible:e.dialogVisible},style:e.overlayStyle,on:{mouseover:e.mouseOver,mouseout:e.mouseOut}},[e.showTags?r("div",{style:e.tagsPosition},[r("tags",{staticClass:"tags",class:{selected:e.selected,"group-selected":e.highlightGroup},attrs:{tags:e.figureTags,"is-open":e.dialogVisible,"show-open":!0,"show-remove":e.showRemoveBtn},on:{"update:isOpen":function(t){e.dialogVisible=t},"update:is-open":function(t){e.dialogVisible=t},openTag:e.openTagsDialog,removeTag:e.removeCurTag}})],1):e._e(),e._v(" "),r("div",e._l(e.graphLabels,function(t){return r("graph-shape-label",{key:t.id,staticClass:"graph-labels-list",style:t.style,attrs:{label:t},on:{selectFigure:e.selectFigure},nativeOn:{mouseover:function(r){return e.onLabelMouseOver(t,r)},mouseout:function(r){return e.onLabelMouseOut(t,r)},mousedown:function(r){return e.onLabelMouseDown(t,r)}}})}),1)])},[],!1,null,null,null));ku.options.__file="FigureOverlay.vue";var Au,Fu,xu,Ru,Lu,Du,Gu,Bu=ku.exports;function SceneOverlayvue_type_script_lang_js_typeof(e){return(SceneOverlayvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SceneOverlayvue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SceneOverlayvue_type_script_lang_js_getPrototypeOf(e){return(SceneOverlayvue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SceneOverlayvue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SceneOverlayvue_type_script_lang_js_setPrototypeOf(e,t){return(SceneOverlayvue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SceneOverlayvue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function SceneOverlayvue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){SceneOverlayvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function SceneOverlayvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function applyViewport(e,t){return e*t.zoom}var Mu=(Au=Object(u.a)({props:{viewport:Object,figuresMap:Object,panning:Boolean,dimensions:Object,cursor:[String,Object]},components:{FigureOverlay:Bu},computed:SceneOverlayvue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/images",["currentImage"]),Object(y.c)("dataset/figures",["filteredSceneFigures"]))}),Fu=Object(u.b)("selectedFigureTags"),xu=Object(u.b)("viewport"),Ru=Object(u.b)("figuresMap"),Lu=Object(u.b)("dataset.settings.tagsLocationMode"),Au((SceneOverlayvue_type_script_lang_js_applyDecoratedDescriptor((Gu=function(e){function SceneOverlay(){var e,t,r;!function(e,t){if(!(e instanceof SceneOverlay))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=SceneOverlayvue_type_script_lang_js_getPrototypeOf(SceneOverlay)).call.apply(e,[this].concat(o)))||"object"!==SceneOverlayvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?SceneOverlayvue_type_script_lang_js_assertThisInitialized(this):r,SceneOverlayvue_type_script_lang_js_defineProperty(SceneOverlayvue_type_script_lang_js_assertThisInitialized(t),"overlayStyle",{}),SceneOverlayvue_type_script_lang_js_defineProperty(SceneOverlayvue_type_script_lang_js_assertThisInitialized(t),"sceneFigures",[]),SceneOverlayvue_type_script_lang_js_defineProperty(SceneOverlayvue_type_script_lang_js_assertThisInitialized(t),"currentFigure",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SceneOverlayvue_type_script_lang_js_setPrototypeOf(e,t)}(SceneOverlay,s.a),t=SceneOverlay,(r=[{key:"selectedFigureTagsChanged",value:function(){this.updateSceneFigures()}},{key:"viewportChanged",value:function(){this.overlayStyle={left:"".concat(this.viewport.offsetX,"px"),top:"".concat(this.viewport.offsetY,"px")},this.updateSceneFigures()}},{key:"figuresMapChanged",value:function(){this.updateSceneFigures()}},{key:"settingsTagsLocationModeChanged",value:function(){this.updateSceneFigures()}},{key:"updateSceneFigures",value:function(){var e=this;this.sceneFigures=this.filteredSceneFigures.filter(function(t){var r;return null!=t.classId&&t.visible&&e.figuresMap.data.has(t.id)&&(null===(r=e.selectedFigureTags)||void 0===r||!r.figureId||t.id===e.selectedFigureTags.figureId)}).map(function(t){var r=e.figuresMap.data.get(t.id),n={left:applyViewport(r.rect.left,e.viewport),top:applyViewport(r.rect.top,e.viewport)},o=SceneOverlayvue_type_script_lang_js_objectSpread({},t,{raw:r,leftTopPoint:r.leftTopPoint,rect:r.rect,style:{left:"".concat(n.left,"px"),top:"".concat(n.top,"px")}});return e.currentFigure&&e.currentFigure.id===o.id&&(e.currentFigure=o),o})}},{key:"onMouseDown",value:function(e){3===e.which&&(e.preventDefault(),this.$emit("scene-mousedown",e))}},{key:"onMouseUp",value:function(e){3===e.which&&(e.preventDefault(),this.$emit("scene-mouseup",e))}},{key:"onMouseWheel",value:function(e){this.$emit("scene-mousewheel",e)}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"imageRectApplied",get:function(){var e=0,t=0;this.dimensions&&(e=applyViewport(this.dimensions.width,this.viewport),t=applyViewport(this.dimensions.height,this.viewport));var r=this.viewport,n=r.offsetX,o=r.offsetY;return{left:n,top:o,right:n+e,bottom:o+t,width:e,height:t}}},{key:"selectedFigureTags",get:function(){return this.$store.state.tags.selected}}])&&SceneOverlayvue_type_script_lang_js_defineProperties(t.prototype,r),SceneOverlay}()).prototype,"selectedFigureTagsChanged",[Fu],Object.getOwnPropertyDescriptor(Gu.prototype,"selectedFigureTagsChanged"),Gu.prototype),SceneOverlayvue_type_script_lang_js_applyDecoratedDescriptor(Gu.prototype,"viewportChanged",[xu],Object.getOwnPropertyDescriptor(Gu.prototype,"viewportChanged"),Gu.prototype),SceneOverlayvue_type_script_lang_js_applyDecoratedDescriptor(Gu.prototype,"figuresMapChanged",[Ru],Object.getOwnPropertyDescriptor(Gu.prototype,"figuresMapChanged"),Gu.prototype),SceneOverlayvue_type_script_lang_js_applyDecoratedDescriptor(Gu.prototype,"settingsTagsLocationModeChanged",[Lu],Object.getOwnPropertyDescriptor(Gu.prototype,"settingsTagsLocationModeChanged"),Gu.prototype),Du=Gu))||Du),zu=(r("9654618d8367de065382"),Object(p.a)(Mu,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"scene-overlay",class:{panning:e.panning},style:e.overlayStyle,on:{mousewheel:e.onMouseWheel,mousedown:e.onMouseDown,mouseup:e.onMouseUp,contextmenu:function(e){e.preventDefault()}}},e._l(e.sceneFigures,function(t){return r("figure-overlay",{key:t.id,staticClass:"figure",style:t.style,attrs:{figure:t,viewport:e.viewport,"image-rect-applied":e.imageRectApplied,cursor:e.cursor}})}),1)},[],!1,null,"9885e47c",null));zu.options.__file="SceneOverlay.vue";var Nu,Uu,Hu,Vu,Yu,Ju,Wu,qu,Zu,$u,Qu,Ku,Xu,el,tl,rl,nl,ol,il,al,sl,cl,ul=zu.exports;function Scenevue_type_script_lang_js_typeof(e){return(Scenevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Scenevue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Scenevue_type_script_lang_js_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){Scenevue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){Scenevue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function Scenevue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Scenevue_type_script_lang_js_getPrototypeOf(e){return(Scenevue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Scenevue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Scenevue_type_script_lang_js_setPrototypeOf(e,t){return(Scenevue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Scenevue_type_script_lang_js_applyDecoratedDescriptor(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function Scenevue_type_script_lang_js_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Scenevue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}function Scenevue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Scenevue_type_script_lang_js_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function mapSelectedPoints(e){return Object.values(e.reduce(function(e,t){return e[t.figure.id]=e[t.figure.id]||{id:t.figure.id,points:[]},e[t.figure.id].points.push({id:t.point.id,selected:t.point.selected}),e},Object.create(null)))}var ll=(Nu=Object(u.a)({components:{Renderer:lu,Ruler:_u,SceneControls:Pu,SceneOverlay:ul,Spinner:Vs,Tags:Xo},computed:Scenevue_type_script_lang_js_objectSpread({},Object(y.c)("dataset/classes",["currentClass","orderedClasses"]),Object(y.c)("dataset/images",["currentImage","list"]),Object(y.c)("dataset/figures",["currentFigure","holesMap","filteredSceneFigures","canAddPoint","figuresById","isFigureCreated"]),Object(y.c)("tools",["currentTool","isCreateMode","isEditMode","isToolDisabled","defaultToolByShape","orderedToolsMapByShape"]),Object(y.c)("settings",["currentModel"]),Object(y.c)("tags",["tagsHotkeys"]),Object(y.d)("tags",{selectedTag:"selected"}),Object(y.d)("dataset",["projectId","id"]),Object(y.d)("dataset/figures",{figures:"all",versions:function(e){return{figures:e.versions,points:e.pointsVersions}},hoveredFigure:"hovered",hoveredPoint:"hoveredPoint",showHoveredFigure:"showHovered"}),Object(y.d)("scene",{currentCanvas:"canvas"})),methods:Scenevue_type_script_lang_js_objectSpread({},Object(y.b)("dataset/classes",["setClass"]),Object(y.b)("tools",["setTool","setNewMode","enableTool","disableTool","setToolReady","setToolOption","setToolResult","setToolOptionReady","updateTool","updateToolState","resetToolState"]),Object(y.b)("dataset/images",["removeTag"]),Object(y.b)("dataset/figures",["updatePointInFigure","updatePointsInFigures","setPointsPreviewInFigures","updatePointsPreviewInFigures","createTmpFigure","createFigure","addPointToFigure","setHoveredFigure","setHoveredPoint","setShowHoveredFigure","hideSidebarFiguresVisibleExceptCurrent","toggleSidebarFiguresVisibleExceptCurrent","toggleSelectedFigureVisibility","showSidebarFiguresVisible","setSelectedFigure","removePointFromFigure","removePointsFromFigure","removeFigures","removeFigure","setFiguresPointsSelected","updateBitmapPreview","updateBitmapInFigure","updateBitmapsInFigures","updateBitmapWithSmartAnnotation","setHistoryGroup","createHistoryGroup","setFirstPointInFigure","scheduleRemoveFromRecentHovered","undoLastChange","redoLastChange","copyVisibleFiguresToClipboard","addFiguresFromClipboard"]),Object(y.b)("scene",["setCanvas"]),Object(y.b)("tags",["selectTag","highlightTagPanel","updateDashedTags"]))}),Uu=Object(u.b)("currentClass.id"),Hu=Object(u.b)("currentFigure.id"),Vu=Object(u.b)("currentFigure",{deep:!0}),Yu=Object(u.b)("currentImage.id"),Ju=Object(u.b)("currentImageDimensions"),Wu=Object(u.b)("hoveredFigure"),qu=Object(u.b)("showHoveredFigure"),Zu=Object(u.b)("classesHotkeys"),$u=Object(u.b)("tagsHotkeysBindings"),Qu=Object(u.b)("currentTool"),Ku=Object(u.b)("currentTool.state.brushSize"),Xu=Object(u.b)("currentTool.option"),el=Object(u.b)("currentFigure.pointsCount"),tl=Object(u.b)("dataset.figures.loading"),rl=Object(u.b)("dataset.settings"),nl=Object(u.b)("viewport.zoom"),ol=Object(u.b)("options.autoBorderSize"),il=Object(u.b)("options.polygons.border"),al=Object(u.b)("settings.hotkeys"),Nu((Scenevue_type_script_lang_js_applyDecoratedDescriptor((cl=function(e){function Scene(){var e,t,r;!function(e,t){if(!(e instanceof Scene))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=Scenevue_type_script_lang_js_getPrototypeOf(Scene)).call.apply(e,[this].concat(o)))||"object"!==Scenevue_type_script_lang_js_typeof(r)&&"function"!=typeof r?Scenevue_type_script_lang_js_assertThisInitialized(this):r,Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"setHoveredFigureDelayed",Object(N.throttle)(t.setHoveredFigure,100)),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"TAG_TYPES",S.TAG_TYPES),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"ready",!1),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"rawObjectsMap",{data:new Map}),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"options",{panning:!1,zoom:!1,autoScale:!0,canAutoScale:!1,autoCenter:!0,forceCanvas:!1,image:{brightness:1,brightnessOptions:{min:0,step:.05,max:3},contrast:1,contrastOptions:{min:0,step:.05,max:3}},axes:{visible:!1,border:1,opacity:1,additionalColor:16777215,color:0},autoBorderSize:!0,hoveredFigure:null,showHoveredFigure:null,zoomMultiplier:1.1,points:{opacity:1,color:16711680,hoveredColor:65280,size:{min:.8,step:.2,max:16},radius:4,strokeOpacity:1,strokeColor:0,strokeWidth:4},polygons:{opacity:.5,opacityOptions:{min:0,step:.05,max:1},pointRadius:12,border:0,lineBorder:0,borderOptions:{min:0,step:.5,max:10}},rectangles:{opacity:0,border:5},grid:{visible:!0,cols:3,rows:3}}),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"currentCursor",""),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"cursors",{move:"move",create:"crosshair",default:"default",select:"pointer",loading:"progress",moveCursor:"-webkit-grabbing",hoverCursor:"-webkit-grab"}),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"viewport",{offsetX:0,offsetY:0,zoom:1}),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"currentPoint",null),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"selectedPoints",[]),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"drawingState",{lastMouse:null,isActive:!1,reset:function(){this.lastMouse=null,this.isActive=!1}}),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"movingState",{figures:null,lastMouse:null,isActive:!1,reset:function(){this.lastMouse=null,this.isActive=!1}}),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"drawTools",null),Scenevue_type_script_lang_js_defineProperty(Scenevue_type_script_lang_js_assertThisInitialized(t),"figuresRandomColors",null),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Scenevue_type_script_lang_js_setPrototypeOf(e,t)}(Scene,s.a),t=Scene,(r=[{key:"currentClassChanged",value:function(e,t){if(this.currentTool){var r=this.drawTools[this.currentTool.id];r&&r.classChanged(this,e,t)}}},{key:"currentFigureChanged",value:function(){var e=Scenevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.resetCursor(),r=this.figuresById[e],(n=this.figuresById[t])&&null!=n.classId&&((o=this.classes[n.classId]).shape===S.SHAPE_TYPES.POLYGON?r||this.dataset.settings.polygonEditFill||(this.options.polygons.opacity=this.dataset.settings.defaultOpacity,this.options.autoBorderSize?(this.options.polygons.border=1,this.zoomChanged(this.viewport.zoom)):"auto"!==this.dataset.settings.borderSize&&(this.options.polygons.border=this.dataset.settings.borderSize,this.options.polygons.lineBorder=this.dataset.settings.borderSize)):o.shape===S.SHAPE_TYPES.RECTANGLE?r&&this.dataset.settings.enableAxesOnRect&&(this.options.axes.visible=!1):o.shape===S.SHAPE_TYPES.GRAPH?r&&this.dataset.settings.enableAxesOnGraph&&(this.options.axes.visible=!1):!r&&this.currentTool&&this.currentTool.id===S.FIGURES_TOOLS.SMART&&o.shape===S.SHAPE_TYPES.BITMAP&&this.disableSmartToolMode()),this.currentTool&&(this.currentTool.id===S.FIGURES_TOOLS.POLYGON&&r&&null!=r.classId?this.dataset.settings.polygonEditFill||(this.options.polygons.opacity=0,this.options.autoBorderSize&&(this.options.polygons.border=1,this.zoomChanged(this.viewport.zoom))):this.currentTool.id===S.FIGURES_TOOLS.RECTANGLE?!this.dataset.settings.enableAxesOnRect||r&&!this.canAddPoint(r.id)||(this.options.axes.visible=!0):this.currentTool.id===S.FIGURES_TOOLS.SMART?this.dataset.settings.enableAxesOnSmartRect&&!r&&(this.options.axes.visible=!0):this.currentTool.id===S.FIGURES_TOOLS.GRAPH&&(this.dataset.settings.enableAxesOnGraph&&!r?this.options.axes.visible=!0:this.options.axes.visible=!1),(i=this.drawTools[this.currentTool.id])&&i.figureChanged(this,e,t));case 5:case"end":return a.stop()}},_callee,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"currentFigureContentChanged",value:function(e,t){var r=this,n=this.drawTools[this.currentTool.id];n&&setTimeout(function(){n.figureContentChanged(r,e,t)},0)}},{key:"currentImageChanged",value:function(){this.options.autoScale=!0,this.ready=!1}},{key:"currentImageDimensionsChanged",value:function(e){if(e){Object.values(this.drawTools).forEach(function(t){t.setLimit(e.width,e.height)});var t=Math.max(e.width,e.height),r=Math.max(Math.round(10*t/100),10);this.options.polygons.borderOptions.max=r,this.options.points.size.max=r,this.options.polygons.borderOptions.step=parseFloat((this.options.polygons.borderOptions.max/100).toFixed(2)),this.options.points.size.step=parseFloat((this.options.points.size.max/100).toFixed(2))}}},{key:"hoveredFigureChanged",value:function(e){this.options.hoveredFigure=e}},{key:"showHoveredFigureChanged",value:function(e){this.options.showHoveredFigure=e}},{key:"classesHotkeysChanged",value:function(e,t){var r;t&&this.keyMap.delete(t.hotkeys),(null==e?void 0:null===(r=e.hotkeys)||void 0===r?void 0:r.length)&&this.keyMap.set(e.hotkeys,this.onClassHotkey),this.$el&&this.$el._updateKeyMap()}},{key:"tagsHotkeysChanged",value:function(e,t){var r;t&&this.keyMap.delete(t.hotkeys),(null==e?void 0:null===(r=e.hotkeys)||void 0===r?void 0:r.length)&&this.keyMap.set(e.hotkeys,this.setTag),this.$el&&this.$el._updateKeyMap()}},{key:"currentToolChanged",value:function(e,t){if(this.resetCursor(),t){var r=this.drawTools[t.id];r&&r.removeAll(),t.id===S.FIGURES_TOOLS.SMART&&this.disableSmartToolMode()}e&&(e.id!==S.FIGURES_TOOLS.RECTANGLE&&e.id!==S.FIGURES_TOOLS.SMART&&e.id!==S.FIGURES_TOOLS.GRAPH?this.options.axes.visible=!1:(this.dataset.settings.enableAxesOnRect&&e.id===S.FIGURES_TOOLS.RECTANGLE&&(!this.currentFigure||this.canAddPoint(this.currentFigure.id)?this.options.axes.visible=!0:this.options.axes.visible=!1),this.dataset.settings.enableAxesOnGraph&&e.id===S.FIGURES_TOOLS.GRAPH&&(this.currentFigure?this.options.axes.visible=!1:this.options.axes.visible=!0),this.dataset.settings.enableAxesOnSmartRect&&e.id===S.FIGURES_TOOLS.SMART&&(this.options.axes.visible=!0)))}},{key:"bitmapBrushSizeChanged",value:function(){this.resetCursor()}},{key:"toolOptionChanged",value:function(){this.resetCursor()}},{key:"currentFigurePointsCountChanged",value:function(){this.dataset.settings.enableAxesOnRect&&this.currentFigure&&null!=this.currentFigure.classId&&(this.classes[this.currentFigure.classId].shape!==S.SHAPE_TYPES.RECTANGLE||this.canAddPoint(this.currentFigure.id)||(this.options.axes.visible=!1))}},{key:"figuresLoadingChanged",value:function(e){e?this.currentCursor=this.cursors.loading:this.resetCursor()}},{key:"datasetSettingsChanged",value:function(e){"auto"===e.borderSize?this.options.autoBorderSize=!0:(this.options.autoBorderSize=!1,this.options.polygons.border=e.borderSize,this.options.polygons.lineBorder=e.borderSize),this.options.zoomMultiplier=e.zoomMultiplier,this.options.points.radius=e.pointsSize,this.options.points.strokeWidth=e.pointsSize,this.options.polygons.opacity=e.defaultOpacity,this.options.polygons.pointRadius=e.pointShapeRadius,this.options.axes.opacity=e.axesOpacity,this.options.axes.border=e.axesBorderSize,this.options.axes.color=e.axesMainColor,this.options.axes.additionalColor=e.axesAdditionalColor,this.options.rectangles.opacity=e.rectangleOpacity,this.options.rectangles.border=e.rectangleBorderSize,this.options.grid.visible=e.showGrid,this.options.grid.rows=e.gridRowsCount,this.options.grid.cols=e.gridColsCount,this.updateTool({toolId:this.tools.all[S.FIGURES_TOOLS.POLYGON].id,value:Scenevue_type_script_lang_js_objectSpread({},this.tools.all[S.FIGURES_TOOLS.POLYGON],{defaultOption:e.defaultPolygonToolOption,defaultState:Scenevue_type_script_lang_js_objectSpread({},this.tools.all[S.FIGURES_TOOLS.POLYGON].defaultState,{defaultOption:e.defaultPolygonToolOption})})}),this.updateToolState({toolId:this.tools.all[S.FIGURES_TOOLS.BITMAP].id,value:Scenevue_type_script_lang_js_objectSpread({},this.tools.all[S.FIGURES_TOOLS.BITMAP].state,{eraseUnderlyingPixels:e.bitmapToolErazeUnderlayingPixels})}),this.updateDashedTags(e.objectTagsDashedBorders)}},{key:"zoomChanged",value:function(e){if(this.currentImageDimensions&&this.options.autoBorderSize){var t=Math.max(this.currentImageDimensions.width,this.currentImageDimensions.height,2048),r=Math.round(7*t/100);r=Math.round(7*r/100);var n=Math.max(Math.round(r/Math.max(2*e,1)),.5);this.options.autoBorderSize&&(this.options.polygons.lineBorder=n,this.options.polygons.border&&(this.options.polygons.border=n))}}},{key:"autoBorderSizeChanged",value:function(e){e?this.zoomChanged(this.viewport.zoom):this.options.polygons.lineBorder=this.options.polygons.border}},{key:"borderSizeChanged",value:function(e){!e&&this.options.autoBorderSize&&this.zoomChanged(this.viewport.zoom)}},{key:"hotkeysChanged",value:function(){var e=this;this.keyMap=new Map([[hotkeysToMouseTrap(this.settings.hotkeys.complete),{handler:function(){var t;if(!e.currentTool||e.currentTool.id!==e.tools.all.bitmap.id||e.currentTool.option!==e.tools.all.bitmap.options.fill.id&&e.currentTool.option!==e.tools.all.bitmap.options.crop.id&&e.currentTool.option!==e.tools.all.bitmap.options.cut.id){if(e.currentTool&&e.currentTool.id===e.tools.all.polygon.id&&null!==(null===(t=e.currentFigure)||void 0===t?void 0:t.classId)&&!e.currentClass){var r=e.currentFigure,n=r.id,o=r.classId,i=r.instanceId,a=n;return!o&&i&&(a=i),void e.setSelectedFigure(a)}e.setNewMode()}else e.updateToolState({toolId:e.currentTool.id,value:Scenevue_type_script_lang_js_objectSpread({},e.currentTool.state,{accepted:!0})})}}],[["del"],{handler:function(){null!=e.hoveredPoint&&(e.removePointFromFigure({figureId:e.hoveredPoint.figureId,pointId:e.hoveredPoint.id}),e.resetCursor())}}],[["alt+b"],{handler:function(){0===e.options.polygons.opacity&&(e.options.polygons.opacity=.1),e.options.polygons.border=0}}],[["shift+h"],{handler:function(){e.figuresRandomColors?e.figuresRandomColors=null:e.figuresRandomColors={}}}],[hotkeysToMouseTrap(this.settings.hotkeys.removeCurrentObject),{handler:function(){var t=Scenevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e.currentFigure){o.next=2;break}return o.abrupt("return");case 2:if(t=e.dataset,r=t.id,n=t.projectId,e.$acl([{action:S.ACL_ACTIONS.FIGURES.REMOVE_ALL,teamId:e.$team,workspaceId:e.$workspace,projectId:n,datasetId:r},{action:S.ACL_ACTIONS.FIGURES.REMOVE,teamId:e.$team,workspaceId:e.$workspace,projectId:n,datasetId:r,check:function(){return!e.$job||e.$job.userId!==e.user.id||e.$job.meta.figuresVisibilityMode===S.JOB_FIGURES_VISIBILITY_MODE.ALL||e.currentFigure.createdBy===e.user.id}}])){o.next=6;break}return e.$message.error({message:"You don't have permissions to create a class. Please, contact administrator."}),o.abrupt("return");case 6:return o.next=8,e.removeFigure(e.currentFigure.id);case 8:case"end":return o.stop()}},_callee2)}));return function(){return t.apply(this,arguments)}}()}],[["esc"],{handler:function(){if(e.currentTool&&e.currentTool.id===e.tools.all.bitmap.id&&(e.currentTool.option===e.tools.all.bitmap.options.fill.id||e.currentTool.option===e.tools.all.bitmap.options.crop.id||e.currentTool.option===e.tools.all.bitmap.options.cut.id)){var t,r,n,o,i=null===(t=e.currentTool.state.drawTool)||void 0===t?void 0:null===(r=t.selectionTool)||void 0===r?void 0:null===(n=r.selectionBox)||void 0===n?void 0:null===(o=n.points)||void 0===o?void 0:o.length;if(e.updateToolState({toolId:e.currentTool.id,value:Scenevue_type_script_lang_js_objectSpread({},e.currentTool.state,{accepted:!1})}),i)return}if(e.currentTool&&e.currentTool.id===e.tools.all.polygon.id&&!e.currentClass){var a=e.currentFigure,s=a.id,c=a.classId,u=a.instanceId,l=s;return!c&&u&&(l=u),void e.setSelectedFigure(l)}if(e.currentTool&&e.currentTool.id===e.tools.all.tagFigures.id){var p=e.$store.state.tags.selected;if(p&&p.figureId)return void e.setTool({toolId:e.tools.all.tagFigures.id})}e.currentTool&&e.resetToolState(e.currentTool.id),e.currentFigure||e.setTool({toolId:e.tools.all.moveScene.id}),e.setSelectedFigure(null)}}],[["ctrl+c"],{pressOnce:function(){e.copyVisibleFiguresToClipboard(),He.a.info({title:"Figures",message:"".concat(e.dataset.figures.clipboardFigures.length," figures copied to the clipboard")})}}],[["ctrl+v"],{pressOnce:function(){var t=Scenevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addFiguresFromClipboard();case 2:case"end":return t.stop()}},_callee3)}));return function(){return t.apply(this,arguments)}}()}],[["alt+-","alt+_"],{handler:function(){e.changePointsSizeBy(-e.options.points.size.step)}}],[["alt++","alt+="],{handler:function(){e.changePointsSizeBy(e.options.points.size.step)}}],[["shift+-","shift+_"],{handler:function(){e.changeOpacityBy(-.1)}}],[["shift++","shift+="],{handler:function(){e.changeOpacityBy(.1)}}],[hotkeysToMouseTrap(this.settings.hotkeys.toggleFiguresVisibility),{handler:function(){e.toggleSidebarFiguresVisibleExceptCurrent()}}],[hotkeysToMouseTrap(this.settings.hotkeys.toggleSelectedFigureVisibility),{handler:function(){e.toggleSelectedFigureVisibility()}}],[hotkeysToMouseTrap(this.settings.hotkeys.undo),{handler:function(){e.undoLastChange()}}],[hotkeysToMouseTrap(this.settings.hotkeys.redo),{handler:function(){e.redoLastChange()}}]]),Object.keys(this.settings.hotkeys.tools).forEach(function(t){e.keyMap.set(hotkeysToMouseTrap(e.settings.hotkeys.tools[t]),{throttle:500,handler:function(){e.isToolDisabled(t)?He.a.warning({title:"Notice",message:'"'.concat(e.tools.all[t].title,'" tool is unavailable')}):e.setTool({toolId:t})}})}),this.classesHotkeysChanged(this.classesHotkeys),this.tagsHotkeysChanged(this.tagsHotkeysBindings),this.$el&&this.$el._updateKeyMap()}},{key:"changePointsSizeBy",value:function(e){var t=parseFloat((this.options.points.radius+e).toFixed(2));t<this.options.points.size.min||t>this.options.points.size.max||(this.options.points.radius=t,this.options.points.strokeWidth=t)}},{key:"changeOpacityBy",value:function(e){var t=parseFloat((this.options.polygons.opacity+e).toFixed(2));t<this.options.polygons.opacityOptions.min||t>this.options.polygons.opacityOptions.max||(this.options.polygons.opacity=t)}},{key:"onClassHotkey",value:function(e,t){var r=this.classesHotkeys.classes[t];if(r){this.currentClass&&this.currentClass.id===r.id||h.a.emit("clicker-notification",'class "'.concat(r.title,'" selected'));var n=this.classes[r.id],o=this.defaultToolByShape[n.shape];this.orderedToolsMapByShape.get(n.shape).includes(this.currentTool.id)&&(o=this.currentTool.id),this.currentFigure&&this.setSelectedFigure(null),this.setTool({toolId:o}),this.setClass(r.id)}}},{key:"isPanningAllowed",value:function(){if(!this.currentTool)return!1;if(this.$hotkeys.mouseRight)return!0;if(this.$hotkeys.mouseLeft){if(this.currentTool.id===this.tools.all.moveScene.id)return!0;if(this.currentTool.id===this.tools.all.select.id)return null==this.hoveredPoint&&(null==this.hoveredFigure&&!this.currentFigure||this.currentFigure&&(!this.currentFigure.editable||this.currentFigure.locked||!this.canAddPoint(this.currentFigure.id)))}return!1}},{key:"enablePanning",value:function(){!this.options.panning&&this.isPanningAllowed()&&(this.options.panning=!0)}},{key:"disablePanning",value:function(){this.options.panning&&!this.isPanningAllowed()&&(this.options.panning=!1)}},{key:"resetCursor",value:function(){this.currentTool&&this.currentTool.id===S.FIGURES_TOOLS.BITMAP?[this.tools.all.bitmap.options.fill.id,this.tools.all.bitmap.options.crop.id,this.tools.all.bitmap.options.cut.id,this.tools.all.bitmap.options.bucketFill.id].includes(this.currentTool.option)?this.currentCursor=this.cursors.create:[this.tools.all.bitmap.options.brushCreate.id,this.tools.all.bitmap.options.brushEraser.id].includes(this.currentTool.option)&&(this.currentCursor={id:"bitmap",options:{brushSize:this.currentTool.state.brushSize}}):this.currentFigure?this.currentCursor=this.currentFigure.editable&&this.canAddPoint(this.currentFigure.id)||this.isCreateMode||this.isEditMode?this.cursors.create:this.cursors.move:this.currentTool&&this.currentTool.id===this.tools.all.moveScene.id?this.currentCursor=this.cursors.move:this.currentTool&&this.currentTool.id===this.tools.all.moveFigures.id?this.currentCursor=this.cursors.hoverCursor:this.isCreateMode||this.isEditMode?this.currentCursor=this.cursors.create:this.currentCursor=this.cursors.default}},{key:"onScenePanningChange",value:function(e){e?this.enablePanning():this.disablePanning()}},{key:"onSceneLoaded",value:function(){this.ready=!0}},{key:"onSceneMouseWheel",value:function(e){var t=Math.sign(e.deltaY||e.deltaX);if(t){if(t>0){if(this.$hotkeys.alt)return this.changePointsSizeBy(-this.options.points.size.step),void(this.options.zoom=!1);if(this.$hotkeys.shift)return this.changeOpacityBy(-.025),void(this.options.zoom=!1)}else{if(this.$hotkeys.alt)return this.changePointsSizeBy(this.options.points.size.step),void(this.options.zoom=!1);if(this.$hotkeys.shift)return this.changeOpacityBy(.025),void(this.options.zoom=!1)}this.options.zoom=!0}}},{key:"onSceneMouseDown",value:function(){var e=Scenevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(this.setHoveredPoint(null),this.currentTool&&!this.dataset.figures.loading){a.next=3;break}return a.abrupt("return");case 3:if(this.currentTool.id!==this.tools.all.select.id){a.next=6;break}return null!=this.hoveredFigure&&(this.setSelectedFigure(this.hoveredFigure),this.setShowHoveredFigure(!1)),a.abrupt("return");case 6:if(r=e.changedTouches||e.touches,!this.isPanningAllowed()&&(1===e.which||r&&1===r.length)&&(this.isCreateMode||this.isEditMode)||this.currentTool.id===this.tools.all.moveFigures.id){a.next=9;break}return a.abrupt("return");case 9:if(n={left:t.x,top:t.y,index:null},this.currentImageDimensions&&![S.FIGURES_TOOLS.BITMAP,S.FIGURES_TOOLS.SMART].includes(this.currentTool.id)&&zs.a.normalizePointLocation(n,this.currentImageDimensions),this.drawingState.lastMouse=n,this.movingState.lastMouse=n,!(o=this.drawTools[this.currentTool.id])){a.next=17;break}return o.actionMouseDown(this,n,e),a.abrupt("return");case 17:this.isCreateMode&&this.currentClass?this.createTmpFigure({imageId:this.currentImage.id,classId:this.currentClass.id,points:[n]}):this.isEditMode&&this.currentFigure&&null==this.hoveredPoint&&(null==this.currentFigure.classId||this.currentClass?(this.$hotkeys.shift&&-1!==(i=Object(Ms.a)(Scenevue_type_script_lang_js_toConsumableArray(this.currentFigure.points.values()),n)).index&&(n.index=i.index),this.rawObjectsMap.data.get(this.currentFigure.id).normalizePointLocation(n),this.addPointToFigure({figureId:this.currentFigure.id,point:n})):this.createTmpFigure({imageId:this.currentImage.id,points:[n]}));case 18:case"end":return a.stop()}},_callee4,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"onSceneMouseMove",value:function(e,t){if(this.drawingState.isActive||this.movingState.isActive){var r={left:t.x,top:t.y};if(this.currentTool){var n=this.drawTools[this.currentTool.id];n&&n.actionMouseMove(this,r,e)}this.drawingState.isActive&&(this.drawingState.lastMouse=r),this.movingState.isActive&&(this.movingState.lastMouse=r)}}},{key:"onSceneMouseUp",value:function(){var e=Scenevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee5(e,t){var r,n,o,i,a,s;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r={left:t.x,top:t.y},!this.currentTool){c.next=6;break}if(!(n=this.drawTools[this.currentTool.id])){c.next=6;break}return c.next=6,n.actionMouseUp(this,r,e);case 6:if(this.drawingState.reset(),!this.currentFigure||!this.currentFigure.bitmapPreview){c.next=13;break}return(o=this.currentFigure.bitmapPreview).shouldTrim&&(i=Object(w.f)(this.currentFigure.bitmapPreview.data),a=i.data,s=i.rect,o={data:a,origin:[o.origin[0]+s.left,o.origin[1]+s.top]}),c.next=12,this.updateBitmapInFigure({figureId:this.currentFigure.id,bitmap:o,action:o.action});case 12:this.updateBitmapPreview({figureId:this.currentFigure.id,preview:null});case 13:if(!this.currentFigure||this.currentFigure.status!==Yo.b.LOCAL||!this.isFigureValid(this.currentFigure.id)){c.next=16;break}return c.next=16,this.createFigure({figureId:this.currentFigure.id});case 16:case"end":return c.stop()}},_callee5,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"isFigureValid",value:function(e){var t,r=this.drawFigures.find(function(t){return t.id===e});return!(!r||!Ns.a[r.shape].isValid(r)||null!==(t=r.bitmap)&&void 0!==t&&t.data&&1===r.bitmap.data.width&&1===r.bitmap.data.height)}},{key:"onSceneMouseLeave",value:function(){this.drawingState.isActive=!1,this.movingState.isActive=!1}},{key:"onSceneObjectsInvalid",value:function(e){this.removeFigures({imageId:this.currentImage.id,figuresIds:e.map(function(e){return e.id})})}},{key:"onSceneObjectOver",value:function(e){this.setHoveredFigureDelayed(e.id),this.setShowHoveredFigure(this.isHoveredAllowed),this.isHoveredAllowed&&(this.currentTool.id===this.tools.all.select.id?this.currentCursor=this.cursors.select:this.currentTool.id===this.tools.all.moveFigures.id&&(this.currentCursor=this.cursors.hoverCursor))}},{key:"onSceneObjectOut",value:function(e){this.scheduleRemoveFromRecentHovered(e.id),e.id===this.hoveredFigure&&(this.setHoveredFigure(null),this.resetCursor())}},{key:"onScenePointsRedundant",value:function(){}},{key:"onScenePointsSelected",value:function(e,t){var r=mapSelectedPoints(e);this.selectedPoints=mapSelectedPoints(t),this.setFiguresPointsSelected(r)}},{key:"onScenePointOver",value:function(e,t,r){r||this.setHoveredPoint({figureId:t.id,pointId:e.id}),this.currentTool&&this.currentTool.id===this.tools.all.graph.id&&"pointsErase"===this.currentTool.option?this.currentCursor=this.cursors.select:this.currentCursor=this.cursors.hoverCursor}},{key:"onScenePointOut",value:function(){this.setHoveredPoint(null),this.resetCursor()}},{key:"onScenePointDragStart",value:function(e,t){if(this.currentCursor=this.cursors.moveCursor,this.currentTool){var r=this.drawTools[this.currentTool.id];r&&r.actionPointClick(this,e,t)}else this.currentPoint=e}},{key:"onScenePointDrag",value:function(e,t,r){if(this.currentCursor=this.cursors.moveCursor,this.currentTool){var n=this.drawTools[this.currentTool.id];n&&n.actionPointMove(this,e,t,r)}}},{key:"onScenePointDragEnd",value:function(){var e=Scenevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee6(e,t,r){var n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.currentPoint=null,this.currentCursor=this.cursors.hoverCursor,!r){i.next=6;break}return i.next=5,r.actionMouseUp(this,e);case 5:return i.abrupt("return");case 6:if(n=this.figures[t.id]){i.next=9;break}return i.abrupt("return");case 9:if(o=n.points.get(e.id)){i.next=12;break}return i.abrupt("return");case 12:if(!n.pointsPreview){i.next=15;break}return i.next=15,this.setPointsPreviewInFigures([{figureId:n.id,value:null}]);case 15:if(o.left!==e.left||o.top!==e.top){i.next=17;break}return i.abrupt("return");case 17:return i.next=19,this.updatePointInFigure({figureId:n.id,point:{id:e.id,left:e.left,top:e.top,depth:e.depth}});case 19:case"end":return i.stop()}},_callee6,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"onOverlayMouseWheel",value:function(e){this.$refs.renderer&&this.$refs.renderer.onSceneMouseWheel({deltaY:e.deltaY,offsetX:e.x-50,offsetY:e.y-50,x:e.x,y:e.y})}},{key:"onOverlayMouseDown",value:function(e){this.$refs.renderer&&this.$refs.renderer.onSceneMouseDown(e)}},{key:"onOverlayMouseUp",value:function(e){this.$refs.renderer&&this.$refs.renderer.onSceneMouseUp(e)}},{key:"showDialog",value:function(){var e=Scenevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee7(e){var t,r,n,o,i,a,s,c,u,l;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this._dialogVisible){p.next=2;break}return p.abrupt("return");case 2:return p.prev=2,this._dialogVisible=!0,t=e.type,r=void 0===t?"confirm":t,n=e.logType,o=void 0===n?"warning":n,i=e.message,a=e.confirmAction,s=e.cancelAction,c=e.action,u=e.confirmButtonText,l=e.cancelButtonText,p.prev=5,p.next=8,Ro.a[r](i,Object(N.capitalize)(o),{confirmButtonText:u,cancelButtonText:l,type:o,closeOnClickModal:!1,closeOnPressEscape:!1});case 8:p.next=19;break;case 10:if(p.prev=10,p.t0=p.catch(5),!s){p.next=15;break}return p.next=15,s();case 15:if(!c){p.next=18;break}return p.next=18,c();case 18:return p.abrupt("return");case 19:if(!a){p.next=22;break}return p.next=22,a();case 22:if(!c){p.next=25;break}return p.next=25,c();case 25:return p.prev=25,this._dialogVisible=!1,p.finish(25);case 28:case"end":return p.stop()}},_callee7,this,[[2,,25,28],[5,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"showNotification",value:function(e){var t={message:null};"string"==typeof e?t.message=e:Object.assign(t,e);var r=t.type,n=void 0===r?"info":r,o=t.title,i=void 0===o?Object(N.capitalize)(n):o,a=t.duration,s=void 0===a?3e3:a,c=t.message;He()({type:n,title:i,duration:s,message:c})}},{key:"enableSmartToolMode",value:function(){this.options.polygons.opacity=0,this.options.polygons.border=1,this.hideSidebarFiguresVisibleExceptCurrent(),this.dataset.settings.enableAxesOnSmartRect&&(this.options.axes.visible=!1)}},{key:"disableSmartToolMode",value:function(){this.options.polygons.opacity=this.dataset.settings.defaultOpacity,this.options.polygons.border=0,this.showSidebarFiguresVisible()}},{key:"onRenderError",value:function(){var e=Scenevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee8(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.info,n.prev=1,r="\n      There was an error during rendering.\n      Some features might be unsupported on your GPU (".concat(t.renderer,").\n\n      Max image dimension supported on your GPU is ").concat(t.maxDimension,"px\n      ").trim(),n.next=5,Ro.a.confirm("".concat(r,". Do you want to retry on the slower engine?"),"Render Error",{confirmButtonText:"Retry",cancelButtonText:"Cancel",type:"error"});case 5:this.$router.push({query:Scenevue_type_script_lang_js_objectSpread({},this.$route.query,{canvas:!0})}),window.location.reload(),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(1);case 11:case"end":return n.stop()}},_callee8,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"created",value:function(){var e=this;this.options.forceCanvas=!!this.$route.query.canvas,this.hotkeysChanged(this.settings.hotkeys),this.drawTools={},Object.keys(o).forEach(function(t){e.drawTools[t]=new o[t](e);var r=e.drawTools[t];e.updateToolState({toolId:t,value:{drawTool:r}}),r.on("ready",function(r){e.setToolReady({toolId:t,value:r})})}),this.drawTools.smart.on("ready",function(t){t&&e.enableSmartToolMode()}),this.drawTools.smart.on("change",Scenevue_type_script_lang_js_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.updateToolState({toolId:e.tools.all[S.FIGURES_TOOLS.SMART].id,value:{drawTool:e.drawTools.smart}}),e.drawTools.smart.isReady){t.next=3;break}return t.abrupt("return");case 3:e.updateBitmapWithSmartAnnotation(Scenevue_type_script_lang_js_objectSpread({figureId:e.currentFigure?e.currentFigure.id:null,modelId:e.currentModel?e.currentModel.id:null},e.drawTools.smart.getData()));case 4:case"end":return t.stop()}},_callee9)}))),this.$store.subscribeAction(function(t){"app/showDialog"===t.type?e.showDialog(t.payload):"app/showNotification"===t.type&&e.showNotification(t.payload)})}},{key:"setTag",value:function(e,t){var r,n=this.tagsHotkeys[t.toUpperCase()];if(n){var o=null;this.currentFigure?o=this.currentFigure.id:this.hoveredFigure?o=this.hoveredFigure:(null===(r=this.selectedTag)||void 0===r?void 0:r.figureId)&&(o=this.selectedTag.figureId);var i={tag:{id:n.id,imageId:this.currentImage.id,figureId:o},options:{changeTool:!1}},a={imageId:this.currentImage.id};o&&(a={figureId:o}),this.selectTag(i),this.highlightTagPanel(a)}}},{key:"openTag",value:function(e,t){var r={tag:Scenevue_type_script_lang_js_objectSpread({id:e,figureId:null},t)};this.selectTag(r),this.highlightTagPanel({imageId:t.imageId})}},{key:"dataset",get:function(){return this.$store.state.dataset}},{key:"tools",get:function(){return this.$store.state.tools}},{key:"classes",get:function(){return this.dataset.classes.all}},{key:"settings",get:function(){return this.$store.state.settings}},{key:"user",get:function(){return this.$store.state.user}},{key:"ACL_ACTIONS",get:function(){return S.ACL_ACTIONS}},{key:"currentImageSource",get:function(){return this.currentImage?this.currentImage.source?this.currentImage.source:this.currentImage.previewSource:null}},{key:"currentImageDimensions",get:function(){return this.currentImage?{width:this.currentImage.meta.width,height:this.currentImage.meta.height}:null}},{key:"isOriginalImageReady",get:function(){return this.currentImage&&this.currentImage.source}},{key:"isFiguresReady",get:function(){return!this.dataset.figures.loading||this.isOriginalImageReady||!this.dataset.images.loading&&!this.list.length}},{key:"isImageReady",get:function(){return this.ready&&this.currentImage&&!this.dataset.images.loading||!this.list.length&&!this.dataset.images.loading}},{key:"imageSize",get:function(){return{width:this.currentImageDimensions?this.currentImageDimensions.width:0,height:this.currentImageDimensions?this.currentImageDimensions.height:0}}},{key:"drawFigures",get:function(){var e=this,t=Object.create(null);return this.filteredSceneFigures.forEach(function(r){var n=e.classes[r.classId],o=null;if(null==r.classId){if(!(o=t[r.instanceId]))return}else if(e.figuresRandomColors){var i=e.figuresRandomColors[r.id];i||(i="#".concat(Object(j.e)()),e.figuresRandomColors[r.id]=i),n=Scenevue_type_script_lang_js_objectSpread({},n,{color:i})}var a,s,c,u,l,p=(a=e.versions,s=r,c=n,l={color:"transparent",opacity:1,shape:S.SHAPE_TYPES.POLYGON,isHole:!c,version:a.figures[s.id],points:Scenevue_type_script_lang_js_toConsumableArray((s.pointsPreview||s.points).values()).map(function(e,t){return Scenevue_type_script_lang_js_objectSpread({},e,{index:t,version:a.points[e.id]})}),bitmap:s.bitmapPreview||s.bitmap},c&&(l.opacity=.5,l.color=c.color,l.shape=c.shape,c.shape===S.SHAPE_TYPES.GRAPH&&(null===(u=c.settings)||void 0===u?void 0:u.edges)&&(l.edges=c.settings.edges,l.points=l.points.map(function(e,t){return Scenevue_type_script_lang_js_objectSpread({},e,{label:e.label||"".concat(t+1)})}))),Scenevue_type_script_lang_js_objectSpread({},Object(N.pick)(s,["id","priority","rectVisible","visible"]),l,{borderDash:s.tags.some(function(e){return e.dashed})?{dash:8,gap:8}:null}));p.parent=o,t[r.id]=p}),Object.values(t)}},{key:"isHoveredAllowed",get:function(){return!this.currentPoint&&this.currentTool&&(this.currentTool.id===this.tools.all.select.id||this.currentTool.id===this.tools.all.moveFigures.id&&!this.movingState.isActive)}},{key:"classesHotkeys",get:function(){var e=Object.create(null);return this.orderedClasses.forEach(function(t){t.hotkey&&(e[t.hotkey.toUpperCase()]=t,e[t.hotkey.toLowerCase()]=t)}),{hotkeys:Object.keys(e),classes:e}}},{key:"tagsHotkeysBindings",get:function(){var e=this,t=Object.create(null);return this.tagsHotkeys&&Object.keys(this.tagsHotkeys).forEach(function(r){var n=e.tagsHotkeys[r];t[n.hotkey.toUpperCase()]=n,t[n.hotkey.toLowerCase()]=n}),{hotkeys:Object.keys(t),tags:t}}},{key:"currentImageTags",get:function(){if(!this.currentImage)return[];var e=Object(N.orderBy)(this.currentImage.tags.map(function(e){return Scenevue_type_script_lang_js_objectSpread({},e,{type:"tag"})}),["title"]);return this.currentImage.description&&e.unshift({title:this.currentImage.description,type:"description"}),e}},{key:"showRemoveTagBtn",get:function(){return this.tools.selected===this.tools.all.tagFigures.id}}])&&Scenevue_type_script_lang_js_defineProperties(t.prototype,r),Scene}()).prototype,"currentClassChanged",[Uu],Object.getOwnPropertyDescriptor(cl.prototype,"currentClassChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"currentFigureChanged",[Hu],Object.getOwnPropertyDescriptor(cl.prototype,"currentFigureChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"currentFigureContentChanged",[Vu],Object.getOwnPropertyDescriptor(cl.prototype,"currentFigureContentChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"currentImageChanged",[Yu],Object.getOwnPropertyDescriptor(cl.prototype,"currentImageChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"currentImageDimensionsChanged",[Ju],Object.getOwnPropertyDescriptor(cl.prototype,"currentImageDimensionsChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"hoveredFigureChanged",[Wu],Object.getOwnPropertyDescriptor(cl.prototype,"hoveredFigureChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"showHoveredFigureChanged",[qu],Object.getOwnPropertyDescriptor(cl.prototype,"showHoveredFigureChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"classesHotkeysChanged",[Zu],Object.getOwnPropertyDescriptor(cl.prototype,"classesHotkeysChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"tagsHotkeysChanged",[$u],Object.getOwnPropertyDescriptor(cl.prototype,"tagsHotkeysChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"currentToolChanged",[Qu],Object.getOwnPropertyDescriptor(cl.prototype,"currentToolChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"bitmapBrushSizeChanged",[Ku],Object.getOwnPropertyDescriptor(cl.prototype,"bitmapBrushSizeChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"toolOptionChanged",[Xu],Object.getOwnPropertyDescriptor(cl.prototype,"toolOptionChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"currentFigurePointsCountChanged",[el],Object.getOwnPropertyDescriptor(cl.prototype,"currentFigurePointsCountChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"figuresLoadingChanged",[tl],Object.getOwnPropertyDescriptor(cl.prototype,"figuresLoadingChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"datasetSettingsChanged",[rl],Object.getOwnPropertyDescriptor(cl.prototype,"datasetSettingsChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"zoomChanged",[nl],Object.getOwnPropertyDescriptor(cl.prototype,"zoomChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"autoBorderSizeChanged",[ol],Object.getOwnPropertyDescriptor(cl.prototype,"autoBorderSizeChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"borderSizeChanged",[il],Object.getOwnPropertyDescriptor(cl.prototype,"borderSizeChanged"),cl.prototype),Scenevue_type_script_lang_js_applyDecoratedDescriptor(cl.prototype,"hotkeysChanged",[al],Object.getOwnPropertyDescriptor(cl.prototype,"hotkeysChanged"),cl.prototype),sl=cl))||sl),pl=(r("595dd40ad0fad65eb3ea"),Object(p.a)(ll,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"hotkeys",rawName:"v-hotkeys",value:e.keyMap,expression:"keyMap"}],staticClass:"scene"},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.isImageReady,expression:"!isImageReady"}],staticClass:"fill"},[r("span",[e.currentImage?r("div",{staticClass:"image-tags"},[r("tags",{attrs:{tags:e.currentImageTags,"show-open":!0,"show-remove":e.showRemoveTagBtn},on:{openTag:e.openTag,removeTag:function(t){return e.removeTag({datasetId:e.currentImage.datasetId,imageId:e.currentImage.id,tagId:t})}}})],1):e._e(),e._v(" "),e.currentImage?r("span",{staticClass:"image-size"},[e._v("\n        "+e._s(e.currentImageDimensions.width)+"×"+e._s(e.currentImageDimensions.height)+"\n      ")]):e._e(),e._v(" "),e.isFiguresReady?e._e():r("spinner",{staticClass:"spinner"})],1),e._v(" "),r("ruler",{attrs:{viewport:e.viewport,sizes:e.imageSize}}),e._v(" "),r("scene-controls",{attrs:{viewport:e.viewport,options:e.options},on:{"update:viewport":function(t){e.viewport=t},"update:options":function(t){e.options=t}}}),e._v(" "),r("scene-overlay",{attrs:{viewport:e.viewport,"figures-map":e.rawObjectsMap,panning:e.options.panning,loading:e.ready,cursor:e.currentCursor,dimensions:e.currentImageDimensions},on:{"scene-mousewheel":e.onOverlayMouseWheel,"scene-mousedown":e.onOverlayMouseDown,"scene-mouseup":e.onOverlayMouseUp}}),e._v(" "),r("renderer",{ref:"renderer",attrs:{canvas:e.currentCanvas,"background-image":e.currentImageSource,objects:e.drawFigures,"raw-objects":e.rawObjectsMap,options:e.options,cursor:e.currentCursor,viewport:e.viewport,tools:e.drawTools,dimensions:e.currentImageDimensions},on:{"update:rawObjects":function(t){e.rawObjectsMap=t},"update:raw-objects":function(t){e.rawObjectsMap=t},"update:options":function(t){e.options=t},"update:viewport":function(t){e.viewport=t},"update:tools":function(t){e.drawTools=t},"scene-panning-changed":e.onScenePanningChange,"scene-loaded":e.onSceneLoaded,"scene-mousewheel":e.onSceneMouseWheel,"scene-mousedown":e.onSceneMouseDown,"scene-mousemove":e.onSceneMouseMove,"scene-mouseup":e.onSceneMouseUp,"scene-mouseleave":e.onSceneMouseLeave,"scene-objects-invalid":e.onSceneObjectsInvalid,"scene-object-over":e.onSceneObjectOver,"scene-object-out":e.onSceneObjectOut,"scene-points-redundant":e.onScenePointsRedundant,"scene-points-selected":e.onScenePointsSelected,"scene-point-over":e.onScenePointOver,"scene-point-out":e.onScenePointOut,"scene-point-drag-start":e.onScenePointDragStart,"scene-point-drag":e.onScenePointDrag,"scene-point-drag-end":e.onScenePointDragEnd,"update:canvas":e.setCanvas,"render-error":e.onRenderError}})],1)])},[],!1,null,null,null));pl.options.__file="Scene.vue";var fl,dl,_l,yl,gl=pl.exports;function MainPagevue_type_script_lang_js_typeof(e){return(MainPagevue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MainPagevue_type_script_lang_js_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function MainPagevue_type_script_lang_js_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function MainPagevue_type_script_lang_js_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function MainPagevue_type_script_lang_js_getPrototypeOf(e){return(MainPagevue_type_script_lang_js_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MainPagevue_type_script_lang_js_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MainPagevue_type_script_lang_js_setPrototypeOf(e,t){return(MainPagevue_type_script_lang_js_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MainPagevue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hl=(fl=Object(u.a)({methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){MainPagevue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(y.b)("dataset",["getDataset"])),components:{Headbar:sn,Toolbar:Pn,Split:En,Sidebar:Bs,Scene:gl,Notifications:O}}),dl=Object(u.b)("dataset.title"),fl((function(e,t,r,n,o){var i={};Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((yl=function(e){function MainPage(){var e,t,r;!function(e,t){if(!(e instanceof MainPage))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=MainPagevue_type_script_lang_js_getPrototypeOf(MainPage)).call.apply(e,[this].concat(o)))||"object"!==MainPagevue_type_script_lang_js_typeof(r)&&"function"!=typeof r?MainPagevue_type_script_lang_js_assertThisInitialized(this):r,MainPagevue_type_script_lang_js_defineProperty(MainPagevue_type_script_lang_js_assertThisInitialized(t),"gutterSize",6),MainPagevue_type_script_lang_js_defineProperty(MainPagevue_type_script_lang_js_assertThisInitialized(t),"sizes",[75,25]),MainPagevue_type_script_lang_js_defineProperty(MainPagevue_type_script_lang_js_assertThisInitialized(t),"tabsWidth",25),MainPagevue_type_script_lang_js_defineProperty(MainPagevue_type_script_lang_js_assertThisInitialized(t),"isSidebarOpen",!0),MainPagevue_type_script_lang_js_defineProperty(MainPagevue_type_script_lang_js_assertThisInitialized(t),"panelsSizes",{scene:null,sidebar:null}),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MainPagevue_type_script_lang_js_setPrototypeOf(e,t)}(MainPage,s.a),t=MainPage,(r=[{key:"titleChanged",value:function(){if(this.dataset.title){var e=this.dataset,t=e.projectTitle,r=e.title;document.title="".concat(t,"/").concat(r," - Supervisely")}}},{key:"created",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){var e,t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=MainPagevue_type_script_lang_js_slicedToArray(this.sizes,2),t=e[0],r=e[1],n=this.gutterSize/2,this.panelsSizes={scene:"calc(".concat(t,"% - ").concat(n,"px)"),sidebar:"calc(".concat(r,"% - ").concat(n,"px)")},g.c.defaults.baseURL="".concat(g.c.defaults.baseURL).concat(this.$route.params.projectId,"/"),this.getDataset(this.$route.params.datasetId);case 5:case"end":return o.stop()}},_callee,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){MainPagevue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){MainPagevue_type_script_lang_js_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"beforeCreate",value:function(){if(null==this.$route.params.datasetId){var e=new URL(window.location.href);e.searchParams.append("clicker_source",window.location.href),window.location.href="/".concat(e.search)}}},{key:"toggleSidebar",value:function(){var e=this.$refs,t=e.scene,r=e.sidebar;if(this.isSidebarOpen)this.panelsSizes={scene:t.$el.style.width,sidebar:r.$el.style.width},r.$el.style.width="".concat(this.tabsWidth,"px"),t.$el.style.width="calc(100% - ".concat(this.tabsWidth+this.gutterSize,"px)");else{var n=this.panelsSizes,o=n.scene,i=n.sidebar;t.$el.style.width=o,r.$el.style.width=i}this.isSidebarOpen=!this.isSidebarOpen}},{key:"user",get:function(){return this.$store.state.user}},{key:"dataset",get:function(){return this.$store.state.dataset}}])&&MainPagevue_type_script_lang_js_defineProperties(t.prototype,r),MainPage}()).prototype,"titleChanged",[dl],Object.getOwnPropertyDescriptor(yl.prototype,"titleChanged"),yl.prototype),_l=yl))||_l),bl=(r("6aa168588514092b880e"),Object(p.a)(hl,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mainpage fill front"},[r("notifications"),e._v(" "),r("headbar"),e._v(" "),r("el-row",{staticClass:"workspace",attrs:{type:"flex"}},[r("el-col",{staticStyle:{width:"inherit"}},[r("toolbar")],1),e._v(" "),r("el-col",[r("split",{attrs:{direction:"horizontal","min-size":290,"snap-offset":0,"gutter-size":e.gutterSize,sizes:e.sizes}},[r("scene",{ref:"scene"}),e._v(" "),r("sidebar",{ref:"sidebar",attrs:{"is-open":e.isSidebarOpen},on:{"toggle-sidebar":e.toggleSidebar}})],1)],1)],1)],1)},[],!1,null,null,null));bl.options.__file="MainPage.vue";var vl={path:"/app/:teamId/:workspaceId/:projectId/:datasetId",name:"main",component:bl.exports};s.a.use(c.a);var ml=new c.a({mode:"history",routes:[vl,{path:"*",component:_}]});t.a=ml},a633a5ade98d3c5686c8:function(e,t,r){"use strict";r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("47e89aed260415009385"),r("364b250cfb7cb23af2d1"),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("92a1c426d3e09d462222"),r("132a80cfdf396f588204");var n=r("6d8089820eedc734c4ea"),o=r("9e0829ebb5f4d9754370");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function getAllowed(e,t,r,n){var o,i=r[n];return!!(null==i?void 0:null===(o=i.actionsList)||void 0===o?void 0:o.length)&&!!i.actionsList.includes(e)&&(!t.check||t.check(n,r))}function checkDefault(e,t,r,n){return!!t&&getAllowed(e,n,r,t.default.guest||t.default[n.teamId])}function checkGeneral(e,t,r,n){var o;if(!t)return!1;var i=null===(o=t.general[n.teamId])||void 0===o?void 0:o[e];return null!==i&&(i?getAllowed(e,n,r,i):checkDefault(e,t,r,n))}function checkProjects(e,t,r,n){if(!t)return!1;var o=t.projects[n.projectId];return null!==o&&(o?getAllowed(e,n,r,o):checkDefault(e,t,r,n))}function checkHelper(e,t,r){return function(n,o,i){if(!n)return!1;var a=t(n,i);return null!==a&&(a?getAllowed(e,i,o,a):"function"==typeof r&&r(e,n,o,i))}}var i=function(e){return checkDefault.bind(null,e)},a=function(e){return checkHelper(e,function(e,t){return e.datasets[t.datasetId]},function(e,t,r,n){return checkProjects(e,t,r,n)})},s=function(e){return checkHelper(e,function(e,t){return e.classes[t.classId]},function(e,t,r,n){return checkProjects(e,t,r,n)})},c=function(e){return checkHelper(e,function(e){return e.general[o.ACL_ACTIONS.GENERAL.NODES]},function(e,t,r,n){return checkDefault(e,t,r,n)})},u=[o.ACL_SECTIONS.MEMBERS,o.ACL_SECTIONS.TEAMS,o.ACL_SECTIONS.WORKSPACES,o.ACL_SECTIONS.JOBS,o.ACL_SECTIONS.TASKS,o.ACL_SECTIONS.PLUGINS,o.ACL_SECTIONS.PYTHON_NOTEBOOKS],l=[];u.forEach(function(e){return l.push.apply(l,function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(Object(n.map)(o.ACL_ACTIONS[e],function(e){return[e,i(e)]})))});var p=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},Object(n.fromPairs)(Object(n.map)(o.ACL_ACTIONS.GENERAL,function(e){return[e,checkGeneral.bind(null,e)]})),Object(n.fromPairs)(Object(n.map)(o.ACL_ACTIONS.PROJECTS,function(e){return[e,checkProjects.bind(null,e)]})),Object(n.fromPairs)(Object(n.map)(o.ACL_ACTIONS.DATASETS,function(e){return[e,a(e)]})),Object(n.fromPairs)(Object(n.map)(o.ACL_ACTIONS.CLASSES,function(e){return[e,s(e)]})),Object(n.fromPairs)(Object(n.map)(o.ACL_ACTIONS.PROJECTS_TAGS,function(e){return[e,checkProjects.bind(null,e)]})),Object(n.fromPairs)(Object(n.map)(o.ACL_ACTIONS.IMAGES,function(e){return[e,a(e)]})),Object(n.fromPairs)(Object(n.map)(o.ACL_ACTIONS.FIGURES,function(e){return[e,a(e)]})),Object(n.fromPairs)(Object(n.map)(o.ACL_ACTIONS.NODES,function(e){return[e,c(e)]})),Object(n.fromPairs)(l)),f=r("01d16a391b82cbd5b98a");function acl_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!0===e.default)return!0;var n=r.value,o=_objectWithoutProperties(r,["value"]);return Array.isArray(n)||(n=[n]),n.some(function(r){var n,i={};if("string"==typeof r)n=r;else if(Array.isArray(r)){var a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(r,2);n=a[0],i.check=a[1]}else{var s=r;n=s.action,i=_objectWithoutProperties(s,["action"])}var c=p[n];if(!c){if(f.g)throw new Error('Acl handler for route "'.concat(n,'" not found'));return!1}return c(e,t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){acl_defineProperty(e,t,r[t])})}return e}({},o,i))})}},a6d42c7358271b4bb97c:function(e,t,r){"use strict";var n=r("c90887849e6e38ab5d76"),o=n.default.array().items([n.default.number().round().min(0),n.default.string().allow("",null),n.default.boolean()]).min(2).max(4),i=(r("47e89aed260415009385"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("4e997ff4fa36eb673213"),r("9e0829ebb5f4d9754370")),a=n.default.string(),s=r("fa4339c8926dcb397641"),c={classId:s.idSchema.allow(null),priority:n.default.number().when("classId",{is:null,then:n.default.valid(null),otherwise:n.default.required()}),instanceId:s.idSchema.when("classId",{is:null,then:n.default.required(),otherwise:n.default.allow(null)}),tags:n.default.array().items(a).unique(),bitmap:n.default.object().keys({data:n.default.string().base64(),origin:n.default.array().items(n.default.number()).length(2)}),points:n.default.array().items(o)};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},c,{bitmap:c.bitmap.empty(),points:c.points.empty(),tool:n.default.string().valid(Object.values(i.FIGURES_TOOLS)).required()}),l=(n.default.object().keys(u).or("bitmap","points"),r("6d8089820eedc734c4ea"));function UpdateFigureSchema_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){UpdateFigureSchema_defineProperty(e,t,r[t])})}return e}({},Object(l.omit)(c,["tags"]),{bitmap:c.bitmap.empty(),points:c.points.empty()}),f=(n.default.object().keys(p).or("bitmap","points"),c.tags,n.default.string().allow(""),n.default.object({id:s.idSchema.required(),priority:n.default.number().required()}));n.default.array().items(f).min(1)},a70790f4aa1651a8466c:function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("4e997ff4fa36eb673213");var n=r("c90887849e6e38ab5d76"),o=r("fa4339c8926dcb397641"),i=r("9e0829ebb5f4d9754370"),a=o.colorHexSchema.description("Class color"),s={edges:n.default.array().required(),nodes:n.default.array().min(1).required()},c={title:o.titleSchema.required().description("Class title"),description:o.descriptionSchema.allow("").description("Class description"),shape:n.default.string().trim().description("Class shape").valid(Object.values(i.SHAPE_TYPES)).lowercase().required(),hotkey:n.default.string().trim().description("Class hotkey").uppercase().allow("").length(1),color:a.required(),settings:n.default.object().default({}).when("shape",{is:i.SHAPE_TYPES.GRAPH,then:n.default.object(s)})};n.default.object().keys(c)},a8850f1150a4666583fd:function(e,t){},aae8da8bbad62743ecea:function(e,t,r){"use strict";var n,o=r("3fae4fbe6eab0047c868"),i=r("6f85eb15a67f370c0bde"),a=r("816e7732949845b05bfd"),s=r("15733e295fc211e6c486"),c=r("e8d977ad0016fe5fac79"),u=r("05a20e14c5319c4451a2");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a=(_defineProperty(n={},o.a.type,o.a),_defineProperty(n,i.a.type,i.a),_defineProperty(n,a.a.type,a.a),_defineProperty(n,s.a.type,s.a),_defineProperty(n,c.a.type,c.a),_defineProperty(n,u.a.type,u.a),n)},ab2336566bc27a276095:function(e,t,r){},abcc263760d064125765:function(e,t){},ad7786354ed0e053124a:function(e,t,r){"use strict";var n=r("f33d249e4f7eb13e1bfc");r.n(n).a},aeebf6797391ce13e889:function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return i}),r.d(t,"c",function(){return a}),r.d(t,"f",function(){return mergeProjectSettings}),r.d(t,"d",function(){return l}),r.d(t,"e",function(){return p}),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("4e997ff4fa36eb673213"),r("87997867a0dfb75f73e8"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("47e89aed260415009385");var n=r("1b726e7ce4061546ecfc");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={ALWAYS:"always",ON_HOVER:"on-hover",NEVER:"never"},i={ALWAYS:"always",NEVER:"never"},a={BBOX:"object_bbox",TOP_POINT:"top_point"},s={pointsSize:"auto"},c={polygonEditFill:!0,borderSize:"auto",pointsSize:5,pointShapeRadius:12,axesOpacity:1,axesBorderSize:1,axesMainColor:"#FFFFFF",axesAdditionalColor:"#000000",enableAxesOnRect:!0,enableAxesOnSmartRect:!0,enableAxesOnGraph:!0,rectangleOpacity:0,rectangleBorderSize:5,defaultOpacity:.5,showTagsMode:o.ON_HOVER,showGraphLabelsMode:i.ALWAYS,tagsLocationMode:a.TOP_POINT,showClassesMode:!1,showUsersMode:!1,showObjectSizeMode:!1,showGrid:!1,showContours:!1,gridRowsCount:3,gridColsCount:3,zoomMultiplier:1.1,defaultPolygonToolOption:n.e.CONSECUTIVE,bitmapToolErazeUnderlayingPixels:!1,objectTagsDashedBorders:["confidence"]},u=Object.keys(c);function mergeProjectSettings(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return u.reduce(function(e,r){return e[r]=c[r],t.forEach(function(t){t&&r in t&&s[r]!==t[r]&&function(e,t,r){var n=e[r],o=t[r];"object"!==_typeof(n)||null==n||Array.isArray(n)?e[r]=o:Object.assign(n,o)}(e,t,r)}),e},{})}var l={NONE:"none",ANY_STRING:"any_string",ANY_NUMBER:"any_number",ONE_OF_STRING:"oneof_string"},p=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({},Object.values(l).reduce(function(e,t){return e[t]={},e},{}),_defineProperty({},l.ANY_NUMBER,{autoIncrement:!1}))},afc488314e559ce7f3ac:function(e,t,r){"use strict";var n=r("5a29062da289a39f1395");r.n(n).a},b10e58d504f41f88a603:function(e,t,r){},b1350e9811574a6393e6:function(e,t,r){"use strict";var n=r("4b6b8f6f6f4cfe8a8e42");r.n(n).a},b21f11a2ab1d53075e92:function(e,t,r){"use strict";r("0ed696ba8380d46a2924");var n=r("eb07177a17d22f84b632"),o=r.n(n),i=r("09461657d5abd9aa9de1");function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function Account(){!function(e,t){if(!(e instanceof Account))throw new TypeError("Cannot call a class as a function")}(this)}var e,t;return e=Account,(t=[{key:"getTokenHeader",value:function(){var e=this.getToken();return e?"Bearer ".concat(e):""}},{key:"getToken",value:function(){return o.a.get("token")}},{key:"setToken",value:function(e){o.a.set("token",e),this.setHeaders(e)}},{key:"removeToken",value:function(){o.a.remove("token")}},{key:"setHeaders",value:function(e){var t=e.teamId,n=e.workspaceId,o=e.jobId,a=this.getTokenHeader();[i.c,i.a].forEach(function(e){var r=e.defaults.headers.common;r.Authorization=a,o&&(r["x-job-id"]=o),r["x-team-id"]=t,r["x-workspace-id"]=n});var s=r("3b0cdb29684a8d367787").default;i.d.defaults.baseURL="/public/api/v3/",i.d.defaults.headers["x-api-key"]=s.state.user.apiToken}}])&&_defineProperties(e.prototype,t),Account}();t.a=new a},b3315b5da9c92a3db2ae:function(e,t){},b39c9bc5fb6c910e052a:function(e,t,r){"use strict";r.r(t);var n=r("8cdb38b7b2d673f491ab"),o=r.n(n),i=r("57b485d6257d13d8a174"),a=r.n(i),s=r("79afc0746e9f8c22945e"),c=r("01d16a391b82cbd5b98a");Object.defineProperties(a.a.prototype,{$env:{get:function(){return window.config}},$isProd:{get:function(){return c.i}},$isDev:{get:function(){return c.g}},$isTest:{get:function(){return c.k}},$isStaging:{get:function(){return window.config.STAGING}},$isEnterprise:{get:function(){return!!c.h}},$isCommunity:{get:function(){return window.config.COMMUNITY}}}),r("92a1c426d3e09d462222"),r("132a80cfdf396f588204"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("aa7b434460007d4b1170"),r("3472e16a03943e6faffa");var u=r("6d8089820eedc734c4ea");a.a.filter("capitalize",function(e){return e&&"string"==typeof e?e.charAt(0).toUpperCase()+e.substring(1):""}),a.a.filter("snakeToSentence",function(e){return e?e.replace(/_/g," "):""});var l=new Map([["s","es"],["x","es"],["z","es"],["sh","es"],["ch","es"]]);function formatFileSize(e,t,r,n){var o=(r/Math.pow(t,n)).toFixed(2);return"".concat(o," ").concat(e[n])}a.a.filter("pluralize",function(e,t,r,n){if(e%10==1&&e%100!=11)return t;var o="".concat(t,"s"),i=t.slice(-2),a=i.slice(-1),s=l.get(a);return s||(s=l.get(i)),s&&(o="".concat(t).concat(s)),e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?r||o:n||o}),a.a.filter("filesize",function(e){for(var t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=parseFloat(e,10),n=0,o=t.length;n<o;n+=1)if(r<Math.pow(1024,n))return t[n-1]?formatFileSize(t,1024,r,n-1):r+t[n];return formatFileSize(r,0)}),a.a.filter("truncate",function(e,t){for(var r="number"==typeof t?{length:t}:t,n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];return u.truncate.apply(void 0,[e,r].concat(o))}),a.a.filter("extension",function(e,t){if(!t)return e;var r=t.includes(".")?t.substring(t.lastIndexOf(".")+1):t;return"".concat(e,".").concat(r)});var p=r("b21f11a2ab1d53075e92"),f=(r("1afad0614fe3f94846c0"),r("144e366c8b9457689b18"),r("96ca42dd30e576870f68")),d=r.n(f),_=(r("e22e606178dee4da7044"),r("985a6ac0d62c56a3580e")),y=r.n(_),g=(r("ac591d4bd8321f934323"),r("f8236361951fc5f27905")),h=r.n(g),b=(r("aaad111e5469d387daad"),r("6472f451f3e8df72da18")),v=r.n(b),m=(r("d740bcba68a1f76f35e0"),r("79b0983585298d5cb562")),O=r.n(m),P=(r("718127acdfada7bcc77c"),r("7dbfe80ad36ffe616f02")),T=r.n(P),S=(r("aef8c9a9f74e6539c416"),r("55ce3bddc47ea6ac4dde")),j=r.n(S),w=(r("46bd4fcc93050718f512"),r("6cd4d6f933b263803e93")),I=r.n(w),E=(r("331acdbc1af772c2a399"),r("e5436fcc5ffbf65c1d83")),C=r.n(E),k=(r("d774c764911f375c7ab7"),r("50a3047f53bac2fd9c58")),A=r.n(k),F=(r("dfb41a13ad8a8a880c8b"),r("563b28cc76c1be73cd06")),x=r.n(F),R=(r("b16362db5180c7e50bbb"),r("457182120577902f8a25")),L=r.n(R),D=(r("2dad3a8a0bc645636ea7"),r("496d6730949d9418c2da")),G=r.n(D),B=(r("e45e1786543e3cae4871"),r("e140321cc50a507666f3")),M=r.n(B),z=(r("8b810dbbb4edc2c52776"),r("902b5a04f8f0c09632e8")),N=r.n(z),U=(r("031e1c17f12ba425d510"),r("47bbf75df4b9d3eef842")),H=r.n(U),V=(r("c86b246a5521383aaefd"),r("08f14b570020741df3f9")),Y=r.n(V),J=(r("a53d4c4595db9ae91064"),r("bef94f3cc439db5b7edd")),W=r.n(J),q=(r("557c9b924aa5b7e287dc"),r("42edee71e1d8b67a9bd7")),Z=r.n(q),$=(r("ce758e863348d5bd6b1d"),r("a6733d00be46af1069c0")),Q=r.n($),K=(r("d3816c18eb3f3740c532"),r("5f261512ea84b969b100")),X=r.n(K),ee=(r("7679f437173b26d095c1"),r("ec4a310c75ee3e44c908")),te=r.n(ee),re=(r("195d620839973813a6c5"),r("494ee8fa1e114895d975")),ne=r.n(re),oe=(r("b697ded54aafe883d0ac"),r("ecc828878ffeaa7e8b7f")),ie=r.n(oe),ae=(r("98dd696bcd049f1938c1"),r("61b4d55d59238ac0dfc3")),se=r.n(ae),ce=(r("135afcea530c877a1403"),r("e60e89fd2b0ae38c9e82")),ue=r.n(ce),le=(r("a8c1ef0f46ac11ab4776"),r("2fd21863ba15c4a08573")),pe=r.n(le),fe=(r("7d7b462b5700d5eb7bb2"),r("f0298380d32703d935e4")),de=r.n(fe),_e=(r("8c640e7ee33e3f0ddf68"),r("339d090b4044a9d8c670")),ye=r.n(_e),ge=(r("ba126adb2292a56468e2"),r("5395631d607bf21e31f8")),he=r.n(ge),be=r("f336dec9dd09439b9dee");r.n(be).a.use(he.a),a.a.use(ye.a),a.a.use(de.a),a.a.use(pe.a),a.a.use(ue.a),a.a.use(se.a),a.a.use(ie.a),a.a.use(ne.a),a.a.use(te.a),a.a.use(X.a),a.a.use(Q.a),a.a.use(Z.a),a.a.use(W.a),a.a.use(Y.a),a.a.use(H.a),a.a.use(N.a),a.a.use(M.a),a.a.use(G.a),a.a.use(L.a),a.a.use(x.a),a.a.use(A.a),a.a.use(C.a),a.a.use(I.a),a.a.use(j.a),a.a.use(T.a),a.a.use(O.a),a.a.use(v.a),a.a.use(h.a.directive),a.a.prototype.$loading=h.a.service,a.a.prototype.$message=y.a,a.a.prototype.$notify=d.a;var ve=r("54380e0b78af13922d71"),me=r.n(ve);function numericInputHandler(e){/[0-9]/.test(e.key)||["Backspace","Tab","Enter","Escape","ArrowRight","ArrowLeft"].includes(e.key)||e.preventDefault()}a.a.directive("numeric-input",{bind:function(e){e.addEventListener("keydown",numericInputHandler)},unbind:function(e){e.removeEventListener("keydown",numericInputHandler)}}),a.a.directive("throttle",{bind:function(e,t,r){var n=t.value,o=n.event,i=void 0===o?"change":o,a=n.prop,s=void 0===a?"":a,c=n.delay,u=void 0===c?800:c,l=t.modifiers.numeric,p=null;e.vThrottleHandler=function(e){var t=l?parseInt(e.target.value,10):e.target.value;p&&clearTimeout(p),p=setTimeout(function(){r.context.$emit(i,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},s,t))},u)},e.addEventListener("input",e.vThrottleHandler)},unbind:function(e){e.removeEventListener("input",e.vThrottleHandler)}}),a.a.directive("focus",{inserted:function(e){(e.querySelector("input")||e).focus()}}),a.a.use(me.a);var Oe=r("0a395cb287c146ab40c8"),Pe=r.n(Oe);a.a.use(Pe.a,{attempt:1}),r("8ce7ab3f045019d3e451"),r("54b089b6f5db3df8074d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("14471fdfe1a633789f19"),r("4e997ff4fa36eb673213"),r("d366eac6ddb92c017a0d"),r("47e89aed260415009385"),r("afab45c263329fc2e21e");var Te=r("944655c5d9ef5676eb1e"),Se=r.n(Te);function hotkeys_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var je=!0;function makeHandler(e,t){var r=_typeof(e);if("function"!==r)throw new TypeError("Expected function, but got ".concat(r));var n=e;return Object(u.isFinite)(t.options.throttle)&&t.options.throttle>=0&&(n=Object(u.throttle)(n,t.options.throttle)),t.handler=function(){t.pending||(t.pending=!0,Promise.resolve(n.apply(void 0,arguments)).then(function(){t.pending=!1}).catch(function(e){throw t.pending=!1,e}))},t.handler}var we={up:"keyup",down:"keydown",press:"keypress"},Ie={auto:function(e){return{handler:makeHandler(e.handler,e._state)}},pressed:function(e){var t=e._state,r=e.handler;return[{event:we.down,handler:function(){t.pressed=!0}},{event:we.up,handler:makeHandler(function(){t.pressed&&(t.pressed=!1,r.apply(void 0,arguments))},t)}]},pressOnce:function(e){var t=e._state,r=e.handler;return[{event:we.down,handler:function(){t.pressed||(t.pressed=!0,r.apply(void 0,arguments))}},{event:we.up,handler:makeHandler(function(){t.pressed=!1},t)}]}},Ee={prevent:!0,once:!1},Ce=[].concat(_toConsumableArray(Object.keys(Ee)),["throttle"]);function initDirective(e,t){if(!(t.value&&t.value instanceof Map))throw new TypeError("Expected keyMap to be Map, but got ".concat(_typeof(t.value)));t.value.size&&(e._keyMap=t.value,e._keyEventHandlers=new Map,e._mouseTrapInstance=function(e,t){return!0===t.modifiers.local?Se()(e):Se.a}(e,t),e._keyMap.forEach(function(t,r){var n=function(e){var t=_typeof(e),r=[];if("object"!==t)throw new TypeError("Expected object, but got ".concat(t));var n=Object.keys(e);return n.includes("handler")&&(n=["auto"],e.auto=Object(u.merge)({handler:e.handler},Ee,Object(u.pick)(e,Ce))),n.forEach(function(t){var n=we[t],o=Ie[t],i=e[t];"function"==typeof i&&(e[t]={handler:i,_state:null},i=e[t]),i._state={pressed:!1,pending:!1,options:Object(u.merge)({},Ee,Object(u.pick)(i,Ce))};var a={handler:null};if(n)a.event=n,a.handler=makeHandler(i.handler,i._state),r.push({eventObject:a,state:i._state});else if(o){var s=o(i);s&&(Array.isArray(s)&&s.length?s.forEach(function(e){r.push({eventObject:e,state:i._state})}):r.push({eventObject:s,state:i._state}))}}),r.map(function(e){var t=e.eventObject,r=e.state,n=t.handler;return t.handler=function(){if(!je)return null;for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];var a=o[0];return a&&r.options.prevent&&a.preventDefault(),n.call.apply(n,[t].concat(o))},t})}("function"==typeof t?{auto:t}:t);e._keyEventHandlers.set(r,n),n.forEach(function(t){e._mouseTrapInstance.bind(r,t.handler,t.event)})}))}function destroyDirective(e){e._mouseTrapInstance&&e._keyEventHandlers.forEach(function(t,r){t.forEach(function(t){e._mouseTrapInstance.unbind(r,t.event)})})}var ke={install:function(e){e.directive("hotkeys",{bind:function(e,t){return e._updateKeyMap=function(){return destroyDirective(e),initDirective(e,t)},initDirective(e,t)},update:function(e,t){return destroyDirective(e),initDirective(e,t)},unbind:function(e){return destroyDirective(e)}})}};a.a.use(ke);var Ae=Array.from("abcdefghijklmnopqrstuvwxyz");function codesFromRange(e,t,r){return function(e,t){return Array.from(new Array(t-e+1),function(t,r){return r+e})}(e,t).reduce(function(e,t,n){for(var o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];return e[t]=r.apply(void 0,[t,n,e].concat(i)),e},Object.create(null))}var Fe=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){hotkeys_defineProperty(e,t,r[t])})}return e}({1:"mouseLeft",2:"mouseMiddle",3:"mouseRight",8:"backspace",9:"tab",13:"enter",16:"shift",17:["ctrl","control"],18:"alt",19:["pause","break"],20:"capslock",27:["esc","escape"],32:"space",33:"pageUp",34:"pageDown",35:"end",36:"home",37:["left","arrowLeft"],38:["up","arrowUp"],39:["right","arrowRight"],40:["down","arrowDown"],44:"printScreen",45:["ins","insert"],46:["del","delete"]},codesFromRange(48,57,function(e,t){return t}),codesFromRange(65,90,function(e,t){return[Ae[t].toUpperCase(),Ae[t].toLowerCase()]}),{91:["start","winKey"],93:"winMenu"},codesFromRange(112,123,function(e,t){return["F".concat(t+1),"f".concat(t+1)]}),{144:"numLock",145:"scrollLock",188:[",","<","comma","smallerThan"],190:[".",">","point","biggerThan"],191:["/","?","slash","questionMark","question"],192:["`","~","backQuote","tilda"],219:["[","{"],220:["\\","|","backSlash","verticalSlash"],221:["]","}"],222:["'",'"',"singleQuote","doubleQuote"]}),xe=_toConsumableArray(Object.values(Fe)).reduce(function(e,t){return Array.isArray(t)?t.forEach(function(t){e[t]=!1}):e[t]=!1,e},{});function updateMap(e,t){xe[e]=t}function resetGlobalHotKeysState(){Object.keys(xe).forEach(function(e){xe[e]=!1})}function onWindowLoseFocus(){resetGlobalHotKeysState()}[{name:"mousedown",value:!0},{name:"mouseup",value:!1},{name:"keydown",value:!0},{name:"keyup",value:!1}].forEach(function(e){document.addEventListener(e.name,function(t){if(je){var r=Fe[t.which];Array.isArray(r)?r.forEach(function(t){return updateMap(t,e.value)}):updateMap(r,e.value)}},{capture:!0})}),Object.defineProperty(a.a.prototype,"$hotkeys",{get:function(){return xe}}),Object.defineProperty(xe,"enabled",{get:function(){return je},set:function(e){var t=!!e;je!==t&&((je=t)||resetGlobalHotKeysState())}}),"hidden"in document?document.addEventListener("visibilitychange",onWindowLoseFocus):"mozHidden"in document?document.addEventListener("mozvisibilitychange",onWindowLoseFocus):"webkitHidden"in document?document.addEventListener("webkitvisibilitychange",onWindowLoseFocus):"msHidden"in document?document.addEventListener("msvisibilitychange",onWindowLoseFocus):"onfocusin"in document&&(document.onfocusin=document.onfocusout=onWindowLoseFocus),window.onpageshow=window.onpagehide=window.onfocus=window.onblur=onWindowLoseFocus;var Re=r("a53baa878501528dfe5d");!c.i||c.j||c.h||(r("7b301b455e0195dcc854"),r("7312fa4ae9207c1dc6c3"));var Le,De,Ge,Be,Me=r("3b0cdb29684a8d367787"),ze=(r("b42383ffd481a2f01f84"),r("8a50176570bf0fca6631"),r("2810e53ad7174f3c046d"),r("8f8e69c55f4350e79324")),Ne=r("999c55cff43a633f7a5f"),Ue=r("9e0829ebb5f4d9754370"),He=r("09461657d5abd9aa9de1"),Ve=r("a633a5ade98d3c5686c8");function directives_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){directives_defineProperty(e,t,r[t])})}return e}function directives_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lib_vue_loader_options_Appvue_type_script_lang_js_typeof(e){return(lib_vue_loader_options_Appvue_type_script_lang_js_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lib_vue_loader_options_Appvue_type_script_lang_js_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}a.a.mixin({methods:{$acl:function(e){var t,r=a.a.prototype,n=r.$user,o=r.$roles,i=r.$team,s=r.$workspace;if(t=Array.isArray(e)?e.map(function(e){return directives_objectSpread({teamId:i,workspaceId:s},e)}):directives_objectSpread({teamId:i,workspaceId:s},e),!n)return!1;var c=n.acl;return Object(Ve.a)(c,o,{value:t})}}});var Ye,Je,We,qe,Ze,$e,Qe=(Le=Object(ze.a)({methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){lib_vue_loader_options_Appvue_type_script_lang_js_defineProperty(e,t,r[t])})}return e}({},Object(Ne.b)("user",["setUser","setAcl"]),Object(Ne.b)("license",["getLicense"]),Object(Ne.b)("settings",["loadSettings"]),Object(Ne.b)("app",["updateJobDuration","setJobStarted","setJob"]))}),De=Object(ze.b)("theme",{immediate:!0}),Le((Ye=(Be=function(e){function App(){var e,t,r;!function(e,t){if(!(e instanceof App))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return this,t=!(r=(e=_getPrototypeOf(App)).call.apply(e,[this].concat(o)))||"object"!==lib_vue_loader_options_Appvue_type_script_lang_js_typeof(r)&&"function"!=typeof r?_assertThisInitialized(this):r,lib_vue_loader_options_Appvue_type_script_lang_js_defineProperty(_assertThisInitialized(t),"loading",!0),t}var t,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(App,a.a),t=App,(r=[{key:"setThemeClass",value:function(e){document.getElementsByTagName("body")[0].className="".concat(e,"-theme")}},{key:"created",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(){var e,t,r,n,o,i=this;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e=new URL(window.location.href),s.prev=1,e.searchParams.has("loginToken")&&(e.searchParams.append("clicker_source",window.location.href),window.location.href="/".concat(e.search)),!c.h){s.next=6;break}return s.next=6,this.getLicense();case 6:this.setUser(),s.next=14;break;case 9:return s.prev=9,s.t0=s.catch(1),e.searchParams.append("clicker_source",window.location.href),window.location.href="/".concat(e.search),s.abrupt("return");case 14:return t="".concat(this.$store.state.user.id," / ").concat(this.$store.state.user.email),this.$metrika&&this.$metrika.setUserID(t),this.$ga&&this.$ga.set("userId",t),r=Object(u.pick)(this.$route.params,["teamId","workspaceId"]),this.$route.query.jobId&&(r.jobId=this.$route.query.jobId),Object.keys(r).forEach(function(e){r[e]=parseInt(r[e],10)}),p.a.setHeaders(r),s.next=23,this.loadSettings();case 23:return s.next=25,this.setAcl(r);case 25:if(!r.jobId){s.next=39;break}return s.next=28,l=r.jobId,He.a.get("/jobs/".concat(l)).then(function(e){return e.data});case 28:if(n=s.sent,o=!this.$acl({action:Ue.ACL_ACTIONS.JOBS.CREATE,teamId:this.$team,workspaceId:this.$workspace,jobId:r.jobId}),n.status===Ue.JOB_STATUS.IN_PROGRESS||!o||n.reviewerId===this.user.id){s.next=33;break}throw this.$message.error("This job has been stopped or marked as completed"),new Error("403");case 33:if(this.setJob(n),!n||n.userId!==this.user.id){s.next=38;break}return s.next=37,this.setJobStarted(new Date);case 37:setInterval(function(){i.updateJobDuration(n.id)},6e4);case 38:a.a.prototype.$job=n;case 39:this.loading=!1;case 40:case"end":return s.stop()}var l},_callee,this,[[1,9]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"theme",get:function(){return this.$store.state.settings.theme}},{key:"user",get:function(){return this.$store.state.user}}])&&_defineProperties(t.prototype,r),App}()).prototype,Je="setThemeClass",We=[De],qe=Object.getOwnPropertyDescriptor(Be.prototype,"setThemeClass"),Ze=Be.prototype,$e={},Object.keys(qe).forEach(function(e){$e[e]=qe[e]}),$e.enumerable=!!$e.enumerable,$e.configurable=!!$e.configurable,("value"in $e||$e.initializer)&&($e.writable=!0),$e=We.slice().reverse().reduce(function(e,t){return t(Ye,Je,e)||e},$e),Ze&&void 0!==$e.initializer&&($e.value=$e.initializer?$e.initializer.call(Ze):void 0,$e.initializer=void 0),void 0===$e.initializer&&(Object.defineProperty(Ye,Je,$e),$e=null),Ge=Be))||Ge),Ke=(r("681a6d9c7e25c39f953e"),r("0faaf8224a56e452295d")),Xe=Object(Ke.a)(Qe,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.loading?this._e():t("router-view")],1)},[],!1,null,null,null);Xe.options.__file="App.vue";var et=Xe.exports;c.g&&o.a.config({warnings:{wForgottenReturn:!1},longStackTraces:!0}),Object(s.sync)(Me.default,Re.a),t.default=new a.a({el:"#app",store:Me.default,router:Re.a,components:{App:et},template:"<App/>"})},b3a0fa91d70a9f541f63:function(e,t,r){},b4db3e952aacccdb214d:function(e,t,r){"use strict";var n=r("cd2a9666e0b01bae8054");r.n(n).a},b56448d29c5ebe42c89c:function(e,t,r){"use strict";r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n=r("c90887849e6e38ab5d76"),o={title:r("fa4339c8926dcb397641").basenameSchema.required()};n.default.object().keys(o)},b7ab9ce0f8ae55fd5abe:function(e,t,r){},b90dff19166e79e98e15:function(e,t){},b96a318fd1aa3a7bbfdf:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="32" height="32" viewBox="0 0 24 24" fill=""><path d="M7.5,5.6L5,7L6.4,4.5L5,2L7.5,3.4L10,2L8.6,4.5L10,7L7.5,5.6M19.5,15.4L22,14L20.6,16.5L22,19L19.5,17.6L17,19L18.4,16.5L17,14L19.5,15.4M22,2L20.6,4.5L22,7L19.5,5.6L17,7L18.4,4.5L17,2L19.5,3.4L22,2M13.34,12.78L15.78,10.34L13.66,8.22L11.22,10.66L13.34,12.78M14.37,7.29L16.71,9.63C17.1,10 17.1,10.65 16.71,11.04L5.04,22.71C4.65,23.1 4,23.1 3.63,22.71L1.29,20.37C0.9,20 0.9,19.35 1.29,18.96L12.96,7.29C13.35,6.9 14,6.9 14.37,7.29Z"/></svg>'},b9eb131367e97ba69b9f:function(e,t,r){"use strict";var n={};function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(n),r.d(n,"setLoading",function(){return setLoading}),r.d(n,"setHistoryGroup",function(){return setHistoryGroup}),r.d(n,"createHistoryGroup",function(){return createHistoryGroup}),r.d(n,"saveStateToHistory",function(){return saveStateToHistory}),r.d(n,"resetHistory",function(){return resetHistory}),r.d(n,"updateFigures",function(){return updateFigures}),r.d(n,"setFiguresPointsVisible",function(){return setFiguresPointsVisible}),r.d(n,"showFiguresPoints",function(){return showFiguresPoints}),r.d(n,"showFigurePoints",function(){return showFigurePoints}),r.d(n,"hideFiguresPoints",function(){return hideFiguresPoints}),r.d(n,"hideFigurePoints",function(){return hideFigurePoints}),r.d(n,"setFiguresPointsSelected",function(){return setFiguresPointsSelected}),r.d(n,"setFigurePointsSelected",function(){return setFigurePointsSelected}),r.d(n,"setFigurePointSelected",function(){return setFigurePointSelected}),r.d(n,"setFiguresRectsVisible",function(){return setFiguresRectsVisible}),r.d(n,"setFigureRectVisible",function(){return setFigureRectVisible}),r.d(n,"setFiguresVisible",function(){return setFiguresVisible}),r.d(n,"setFigureVisible",function(){return setFigureVisible}),r.d(n,"setPrevVisibleFigures",function(){return setPrevVisibleFigures}),r.d(n,"toggleFigureVisible",function(){return toggleFigureVisible}),r.d(n,"showSidebarFiguresVisible",function(){return showSidebarFiguresVisible}),r.d(n,"hideSidebarFiguresVisibleExceptCurrent",function(){return hideSidebarFiguresVisibleExceptCurrent}),r.d(n,"toggleSidebarFiguresVisibleExceptCurrent",function(){return toggleSidebarFiguresVisibleExceptCurrent}),r.d(n,"toggleSelectedFigureVisibility",function(){return toggleSelectedFigureVisibility}),r.d(n,"setSelectedFigure",function(){return setSelectedFigure}),r.d(n,"toggleFigure",function(){return toggleFigure}),r.d(n,"setFiguresPriorities",function(){return setFiguresPriorities}),r.d(n,"setFiguresClasses",function(){return setFiguresClasses}),r.d(n,"setFigureClass",function(){return setFigureClass}),r.d(n,"reorderFigures",function(){return reorderFigures}),r.d(n,"updateArea",function(){return updateArea}),r.d(n,"updateFiguresStats",function(){return updateFiguresStats}),r.d(n,"updateFigureStats",function(){return updateFigureStats}),r.d(n,"updatePointsInFigures",function(){return updatePointsInFigures}),r.d(n,"updatePointsInFigure",function(){return updatePointsInFigure}),r.d(n,"updatePointInFigure",function(){return updatePointInFigure}),r.d(n,"updatePointsPreviewInFigures",function(){return updatePointsPreviewInFigures}),r.d(n,"updatePointsPreviewInFigure",function(){return updatePointsPreviewInFigure}),r.d(n,"updatePointPreviewInFigure",function(){return updatePointPreviewInFigure}),r.d(n,"setPointsPreviewInFigures",function(){return setPointsPreviewInFigures}),r.d(n,"setPointsPreviewInFigure",function(){return setPointsPreviewInFigure}),r.d(n,"updateBitmapsInFigures",function(){return updateBitmapsInFigures}),r.d(n,"updateBitmapInFigure",function(){return updateBitmapInFigure}),r.d(n,"createFigure",function(){return actions_createFigure}),r.d(n,"createTmpFigure",function(){return createTmpFigure}),r.d(n,"removeFigures",function(){return actions_removeFigures}),r.d(n,"removeFigure",function(){return actions_removeFigure}),r.d(n,"setFiguresLock",function(){return setFiguresLock}),r.d(n,"setFigureLock",function(){return setFigureLock}),r.d(n,"toggleFigureLock",function(){return toggleFigureLock}),r.d(n,"updateBitmapWithSmartAnnotation",function(){return je}),r.d(n,"updateBitmapPreview",function(){return updateBitmapPreview}),r.d(n,"addPointsToFigures",function(){return addPointsToFigures}),r.d(n,"addPointsToFigure",function(){return addPointsToFigure}),r.d(n,"addPointToFigure",function(){return addPointToFigure}),r.d(n,"setHoveredFigure",function(){return setHoveredFigure}),r.d(n,"setHoveredPoint",function(){return setHoveredPoint}),r.d(n,"scheduleRemoveFromRecentHovered",function(){return scheduleRemoveFromRecentHovered}),r.d(n,"unscheduleRemoveFromRecentHovered",function(){return unscheduleRemoveFromRecentHovered}),r.d(n,"removePointsFromFigures",function(){return removePointsFromFigures}),r.d(n,"removePointsFromFigure",function(){return removePointsFromFigure}),r.d(n,"removePointFromFigure",function(){return removePointFromFigure}),r.d(n,"addTag",function(){return actions_addTag}),r.d(n,"updateTag",function(){return actions_updateTag}),r.d(n,"removeTag",function(){return actions_removeTag}),r.d(n,"removeTagFromAll",function(){return removeTagFromAll}),r.d(n,"updateDescription",function(){return actions_updateDescription}),r.d(n,"setFilter",function(){return setFilter}),r.d(n,"setShowHoveredFigure",function(){return setShowHoveredFigure}),r.d(n,"getFigures",function(){return actions_getFigures}),r.d(n,"setStateFromHistory",function(){return setStateFromHistory}),r.d(n,"undoLastChange",function(){return undoLastChange}),r.d(n,"redoLastChange",function(){return redoLastChange}),r.d(n,"setFirstPointInFigure",function(){return setFirstPointInFigure}),r.d(n,"addFigureToInstance",function(){return addFigureToInstance}),r.d(n,"addDurationToFigure",function(){return actions_addDurationToFigure}),r.d(n,"clearFilters",function(){return clearFilters}),r.d(n,"copyVisibleFiguresToClipboard",function(){return copyVisibleFiguresToClipboard}),r.d(n,"addFiguresFromClipboard",function(){return addFiguresFromClipboard}),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df"),r("4ee649c87692c7abb6dd"),r("a86c41d10c7ccf1c6873"),r("aa7b434460007d4b1170");var o=["capacity","defaultTimeout"],i=function(){function MemoryCache(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof MemoryCache))throw new TypeError("Cannot call a class as a function")}(this),_defineProperty(this,"_cache",new Map),_defineProperty(this,"_capacity",1/0),_defineProperty(this,"_defaultTimeout",3e4),e=r,t=this,o.forEach(function(r){null!=e[r]&&(t["_".concat(r)]=e[r])})}var e,t;return e=MemoryCache,(t=[{key:"has",value:function(e){return this._cache.has(e)}},{key:"set",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._defaultTimeout,o=arguments.length>3?arguments[3]:void 0,i=this._cache.get(e);i?clearTimeout(i.timeout):this.size>=this._capacity&&this.delete(this.keys()[0]);var a={value:t,expire:n+Date.now()};return Number.isNaN(a.expire)||(a.timeout=setTimeout(function(){r._cache.delete(e),o&&o(e,t)},n)),this._cache.set(e,a),this}},{key:"delete",value:function(e){var t=!0,r=this._cache.get(e);return r?(clearTimeout(r.timeout),!Number.isNaN(r.expire)&&r.expire<Date.now()&&(t=!1)):t=!1,t&&this._cache.delete(e),this}},{key:"clear",value:function(){return this._cache.forEach(function(e){var t=e.timeout;clearTimeout(t)}),this._cache.clear(),this}},{key:"get",value:function(e){var t=this._cache.get(e);if(void 0!==t){if(Number.isNaN(t.expire)||t.expire>=Date.now())return t.value;this._cache.delete(e)}return null}},{key:"copy",value:function(e,t){var r=this.get(e);return void 0===r?this:(this.set(t,r),this)}},{key:"move",value:function(e,t){return this.copy(e,t),this.delete(e),this}},{key:"size",value:function(){return this._cache.size}},{key:"keys",value:function(){return this._cache.keys()}}])&&_defineProperties(e.prototype,t),MemoryCache}(),a=(r("47e89aed260415009385"),r("4e997ff4fa36eb673213"),r("6d8089820eedc734c4ea")),s=r("aae8da8bbad62743ecea");r("92a1c426d3e09d462222"),r("132a80cfdf396f588204");var c=r("f9e71c3bf7e07577fce6");function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){getters_defineProperty(e,t,r[t])})}return e}function getters_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function getFigureWithInfo(e,t){var r=t.state,n=t.rootState;if(!e)return null;var o=r.all[e];return o?_objectSpread({},o,{tags:o.tags.map(function(e){return _objectSpread({},n.tags.all[e.id],e)})}):null}function makeHolesMap(e){return e.reduce(function(e,t){return null==t.classId&&null!=t.instanceId&&(e[t.instanceId]=e[t.instanceId]||[],e[t.instanceId].push(t)),e},Object.create(null))}function makeInstancesMap(e){return e.reduce(function(e,t){return null!=t.classId&&null!=t.instanceId&&(e[t.instanceId]=e[t.instanceId]||[],e[t.instanceId].push(t)),e},Object.create(null))}function filterFigures(e,t,r,n){var o=t.filterByInstanceId,i=Object.create(null);return o?r.orderedFigures.filter(function(e){return e.instanceId===o&&null!=e.classId}):r.orderedFigures.filter(function(t){var r,o,s,c,u,l,p=null==t.classId,f=(!!p||(u=[n.dataset.classes.all[t.classId].title],!((l=e.classes).length>0)||Object(a.intersection)(u,l).length>0))&&(r=t.area,o=e.area,s=e.areaFrom,c=e.areaTo,"any"===o||("hideArtifacts"===o?r>50:"range"!==o||r>=s&&r<=c))&&function(e,t){return!(t.length>0)||e.filter(function(e){return t.includes(e.id)}).length>0}(t.tags,e.tags)&&function(e,t,r,n){return"none"===t?0===e:"some"===t?e>0:"range"!==t||e>=r&&e<=n}(t.pointsCount,e.pointsCount,e.pointsCountFrom,e.pointsCountTo);return f||p?f&&p&&i[t.instanceId]&&(f=!1):i[t.id]=!0,f})}var u={list:function(e,t,r){var n=Object.values(e.all),o=["updatedAt"];return e.filters.sidebar.orderBy===c.a.CLASS?o.unshift(function(e){var t=r.dataset.classes.all[e.classId];return t?t.title:null}):o.unshift(e.filters.sidebar.orderBy),Object(a.orderBy)(n,o).map(function(e){return e.id})},currentFigure:function(e,t,r){return getFigureWithInfo(e.selected,{state:e,rootState:r})},listByPriority:function(e){return Object(a.orderBy)(Object.values(e.all),["priority","updatedAt"]).map(function(e){return e.id})},orderedByPriorityFigures:function(e,t,r,n){var o=n["dataset/images/currentImage"];return o?t.listByPriority.filter(function(t){return e.all[t].imageId===o.id}).map(function(t){return getFigureWithInfo(t,{state:e,rootState:r})}):[]},orderedFigures:function(e,t,r,n){var o=n["dataset/images/currentImage"];return o?t.list.filter(function(t){return e.all[t].imageId===o.id}).map(function(t){return getFigureWithInfo(t,{state:e,rootState:r})}):[]},figuresById:function(e,t){return Object(a.keyBy)(t.orderedFigures,"id")},hasLocalFigure:function(e,t){return t.orderedFigures.some(function(e){return e.status===c.b.LOCAL})},hasFiguresBeingCreated:function(e,t){return t.orderedFigures.some(function(e){return e.status<=c.b.BEING_CREATED})},hasUnsavedFigures:function(e,t){return t.orderedFigures.some(function(e){return e.status!==c.b.SYNCED})},orderedFiguresWithoutHoles:function(e,t){return t.orderedFigures.filter(function(e){return null!=e.classId})},holesMap:function(e,t){return makeHolesMap(t.orderedFigures)},instancesMap:function(e,t){return makeInstancesMap(t.orderedFigures)},filteredHolesMap:function(e,t){return makeHolesMap(t.filteredSidebarFigures)},filteredInstancesMap:function(e,t){return makeInstancesMap(t.orderedFigures)},filteredSidebarFigures:function(e,t,r){return filterFigures(e.filters.sidebar,e,t,r)},filteredSidebarFiguresWithoutInstances:function(e,t){return t.filteredSidebarFigures.filter(function(e){return null===e.instanceId})},filteredSceneFigures:function(e,t,r){return filterFigures(e.filters.scene,e,t,r)},filteredFiguresIds:function(e,t){return t.filteredSidebarFigures.map(function(e){return e.id})},canAddPoint:function(e,t,r){return function(t){var n=e.all[t];if(!n)return!1;var o=r.dataset.classes.all[n.classId];if(!o)return!0;var i=s.a[o.shape].maxPoints;return!i||n.points.size<i}},isFigureCreated:function(e){return function(t){var r=e.all[t];return!(!r||r.status<=c.b.BEING_CREATED)}},canHaveTags:function(e,t,r){return function(n){var o=e.all[n];return!!o&&!!t.isFigureCreated(n)&&!!r.dataset.classes.all[o.classId]}},historyList:function(e){var t=[],r=null;return e.history.forEach(function(n,o){null!=r&&n.groupId!==r&&t.push(_objectSpread({},e.history[o-1],{action:e.historyGroups.all[r].title,index:o-1})),null==n.groupId&&t.push(_objectSpread({},n,{index:o})),r=n.groupId}),null!=r&&t.push(_objectSpread({},e.history[e.history.length-1],{action:e.historyGroups.all[r].title,index:e.history.length-1})),t}},l=(r("87997867a0dfb75f73e8"),r("e4048f669033667d4d6a"),r("2810e53ad7174f3c046d"),r("afab45c263329fc2e21e"),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("8cdb38b7b2d673f491ab")),p=r.n(l),f=r("214eccfc06814c553a3c"),d=r.n(f),_=r("263858adef6cd2fa73b9"),y=r.n(_),g=r("01d16a391b82cbd5b98a"),h=r("12303d01cb2347d65acd"),b=r("41b11af1442716978a08"),v=r("9e0829ebb5f4d9754370"),m="UPDATE_FIGURES_VERSION",O="UPDATE_FIGURES",P="UPDATE_FIGURE",T="SET_SELECTED_FIGURE",S="SET_FIGURES_VISIBLE",j="SET_FIGURES_RECTS_VISIBLE",w="SET_FIGURES_LOCK",I="SET_FIGURES_PRIORITIES",E="SET_HOVERED_FIGURE",C="SET_HOVERED_POINT",k="SET_SHOW_HOVERED_FIGURE",A="CREATE_FIGURE",F="UPDATE_POINTS_IN_FIGURES",x="UPDATE_POINTS_PREVIEW_IN_FIGURES",R="SET_POINTS_PREVIEW_IN_FIGURES",L="ADD_POINTS_TO_FIGURES",D="SET_FIRST_POINT_IN_FIGURE",G="REMOVE_POINTS_FROM_FIGURES",B="REMOVE_FIGURES",M="REMOVE_FIGURES_INSTANCE_ID",z="SET_FIGURES_POINTS_VISIBLE",N="SET_FIGURES_POINTS_SELECTED",U="ADD_TAG",H="UPDATE_TAG",V="REMOVE_TAG",Y="UPDATE_DESCRIPTION",J="UPDATE_BITMAPS_IN_FIGURES",W="UPDATE_BITMAP_PREVIEW",q="SET_FILTER",Z="GET_FIGURES_REQUEST",$="GET_FIGURES_SUCCESS",Q="GET_FIGURES_FAILURE",K="UPDATE_FIGURES_STATS",X="RESET_HISTORY",ee="SAVE_STATE_TO_HISTORY",te="REMOVE_STATES_FROM_HISTORY",re="SET_STATE_FROM_HISTORY",ne="SET_FIGURES_CLASSES",oe="SET_HISTORY_GROUP",ie="UPDATE_HISTORY_GROUP",ae="SET_LOADING",se="UPDATE_FIGURE_INSTANCE",ce="UPDATE_FIGURE_AREA",ue="SET_RECENT_HOVERED",le="CLEAR_RECENT_HOVERED_TIMEOUT",pe="SET_RECENT_HOVERED_TIMEOUT",fe="UPDATE_FIGURE_ID_IN_HISTORY",de="CLEAR_FILTERS",_e="SET_PREV_VISIBLE_FIGURES",ye="SET_CLIPBOARD_FIGURES";function packPoints(e){return(null==e?void 0:e.length)?e.map(function(e){if(Array.isArray(e))return e;var t=e.label;return null==t&&(t=""),[e.left,e.top,String(t),!!e.disabled]}):e}r("51375b56c22999064d80"),r("3472e16a03943e6faffa");var ge=r("09461657d5abd9aa9de1"),he=r("1cfab3396007e2203c1b");function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}var be=["classId","priority","instanceId","tags","tool"];function packBitmap(e){return e.data?{data:("string"==typeof e.data?e.data:e.data.toDataURL()).replace("data:image/png;base64,",""),origin:e.origin}:("string"==typeof e?e:e.toDataURL()).replace("data:image/png;base64,","")}function packFigure(e){var t=Object(a.pick)(e,be);return e.points&&(t.points=Array.isArray(e.points)?e.points:function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(e.points.values()),t.points=packPoints(t.points)),e.bitmap&&(t.bitmap=packBitmap(e.bitmap)),t}function removeFigure(e,t,r){return ge.c.delete("/datasets/".concat(e,"/images/").concat(t,"/figures/").concat(r))}function removeFigures(e,t,r){return Object(ge.c)({url:"/datasets/".concat(e,"/images/").concat(t,"/figures"),method:"DELETE",data:r,headers:{"Content-Type":"application/json;charset=utf-8"}})}function addTag(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return ge.c.put("/datasets/".concat(e,"/images/").concat(t,"/figures/").concat(r,"/tags"),{tagId:n,value:o}).then(function(e){return he.a.emit("clicker-notification","object tags updated"),e.data}).catch(function(e){throw he.a.emit("clicker-error",e),e})}function updateTag(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return ge.c.post("/datasets/".concat(e,"/images/").concat(t,"/figures/").concat(r,"/tags/").concat(n),{value:o}).then(function(e){return he.a.emit("clicker-notification","object tag updated"),e.data}).catch(function(e){throw he.a.emit("clicker-error",e),e})}function removeTag(e,t,r,n){return ge.c.delete("/datasets/".concat(e,"/images/").concat(t,"/figures/").concat(r,"/tags/").concat(n)).then(function(e){return he.a.emit("clicker-notification","object tags updated"),e.data}).catch(function(e){throw he.a.emit("clicker-error",e),e})}function updateDescription(e,t,r,n){return ge.c.put("/datasets/".concat(e,"/images/").concat(t,"/figures/").concat(r,"/description"),{description:n}).then(function(e){return he.a.emit("clicker-notification","object description updated"),e.data}).catch(function(e){throw he.a.emit("clicker-error",e),e})}function updateFiguresOrder(e,t,r){return ge.c.put("/datasets/".concat(e,"/images/").concat(t,"/figures/resort"),r).then(function(e){return he.a.emit("clicker-notification","objects order updated"),e.data}).catch(function(e){throw he.a.emit("clicker-error",e),e})}var ve=new Set;function _updateFigure(e){return function(){return _asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,ge.c.put("/datasets/".concat(e.datasetId,"/images/").concat(e.imageId,"/figures/").concat(e.id),packFigure(e)).then(function(e){return he.a.emit("figures-updated","object updated"),e.data}).catch(function(e){throw he.a.emit("clicker-error",e),e});case 3:t=r.sent;case 4:return r.prev=4,ve.delete(e.id),r.finish(4);case 7:return r.abrupt("return",t);case 8:case"end":return r.stop()}},_callee,null,[[0,,4,7]])})).apply(this,arguments)}.apply(this,arguments)}var me=new Map;function clearOldKeysInUpdateMap(){me.forEach(function(e,t){var r=e.timestamp;new Date-r>3e4&&me.delete(t)})}setInterval(function(){return clearOldKeysInUpdateMap},6e4);var Oe=function(e){var t=null,r=me.get(e.id);return r?(t=r.fn,r.timestamp=new Date):(t=Object(a.throttle)(_updateFigure,3e3),me.set(e.id,{fn:t,timestamp:new Date})),ve.add(e.id),t(e)};function createFigure(e){return ge.c.post("/datasets/".concat(e.datasetId,"/images/").concat(e.imageId,"/figures"),packFigure(e)).then(function(e){return e.data})}function addDurationToFigure(e,t){return ge.c.post("/datasets/".concat(e.datasetId,"/images/").concat(e.imageId,"/figures/").concat(e.id,"/addDuration"),{amount:t}).then(function(e){return e.data})}function getFigures(e,t){return function(){return _asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var r,n,o=arguments;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},i.next=3,ge.c.get("/datasets/".concat(e,"/images/").concat(t,"/figures"),r).then(function(e){return e.data});case 3:return(n=i.sent).forEach(function(e){var t;e.points?e.points=(null==(t=e.points)?void 0:t.length)?t.map(function(e){if(Array.isArray(e)){var t=e[2];return null==t&&(t=""),{left:e[0],top:e[1],label:String(t),disabled:e[3]||!1}}return e}):t:e.points=[]}),i.abrupt("return",Object(a.keyBy)(n,"id"));case 6:case"end":return i.stop()}},_callee2)})).apply(this,arguments)}.apply(this,arguments)}function getSmartAnnotation(e,t,r){return function(){return _asyncToGenerator(regeneratorRuntime.mark(function _callee3(e,t,r){var n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n={data:"",origin:[0,0]},i.prev=1,i.next=4,ge.c.post("/datasets/".concat(e,"/images/").concat(t,"/figures/smartAnnotation"),{figureId:r.figureId,crop:packPoints(r.crop),positive:packPoints(r.positive),negative:packPoints(r.negative),modelId:r.modelId}).then(function(e){return e.data});case 4:o=i.sent,n.data=o.bitmap,n.origin=o.origin,i.next=14;break;case 9:if(i.prev=9,i.t0=i.catch(1),!i.t0.response||501!==i.t0.response.status){i.next=13;break}return i.abrupt("return",Object(b.b)());case 13:throw i.t0;case 14:if(!n.data){i.next=20;break}return i.next=17,Object(b.h)("data:image/png;base64,".concat(n.data));case 17:n.data=i.sent,i.next=21;break;case 20:n.data=Object(b.b)();case 21:return i.abrupt("return",n);case 22:case"end":return i.stop()}},_callee3,null,[[1,9]])})).apply(this,arguments)}.apply(this,arguments)}function getFiguresContours(e){return function(){return _asyncToGenerator(regeneratorRuntime.mark(function _callee5(e){var t,r,n=arguments;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=n.length>1&&void 0!==n[1]&&n[1],r=Array.from(" ".repeat(e.length)),!t){o.next=4;break}return o.abrupt("return",r.map(function(){return Object(b.b)()}));case 4:return o.prev=4,o.next=7,ge.a.post("/annotation/tools/contours",e.map(packBitmap)).then(function(e){return e.data});case 7:r=o.sent,o.next=15;break;case 10:if(o.prev=10,o.t0=o.catch(4),501!==o.t0.response.status){o.next=14;break}return o.abrupt("return",r.map(function(){return Object(b.b)()}));case 14:throw o.t0;case 15:return o.abrupt("return",p.a.map(r,function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e?Object(b.h)("data:image/png;base64,".concat(e)):Object(b.b)());case 1:case"end":return t.stop()}},_callee4)}));return function(t){return e.apply(this,arguments)}}(),{concurrency:20}));case 16:case"end":return o.stop()}},_callee5,null,[[4,10]])})).apply(this,arguments)}.apply(this,arguments)}function updateFigureInstance(e,t,r,n){return ge.c.put("/datasets/".concat(e,"/images/").concat(t,"/figures/").concat(r,"/instance"),{instanceId:n}).then(function(e){return he.a.emit("clicker-notification","object instance updated"),e.data}).catch(function(e){throw he.a.emit("clicker-error",e),e})}function cloneFiguresToImage(e,t,r){return ge.c.post("/datasets/".concat(e,"/images/").concat(t,"/figures/cloneFigures"),{ids:r}).then(function(e){return e.data})}window.addEventListener("beforeunload",function(e){var t=r("3b0cdb29684a8d367787").default.getters;(ve.size||t["dataset/figures/hasUnsavedFigures"])&&(e.preventDefault(),e.returnValue="")});var Pe=r("a633a5ade98d3c5686c8");function getFigure(e,t){var r=e.all[t];if(void 0!==r)return r;var n=e.oldToNewIdsMap.get(t);return n?e.all[n]:null}function defaultFilter(){return{pointsCount:"any",pointsCountFrom:0,pointsCountTo:999,classes:[],tags:[],area:"any",areaFrom:50,areaTo:99999,orderBy:c.a.PRIORITY}}function checkFigureRemovePermissions(e,t){var r,n=t.acl,o=t.roles,i=t.figuresById,a=t.teamId,s=t.workspaceId,c=t.projectId,u=t.datasetId,l=t.userId,p=t.job,f=i[e];if(!f)return!1;var d=null==p?void 0:null===(r=p.meta)||void 0===r?void 0:r.figuresVisibilityMode,_={value:[{action:v.ACL_ACTIONS.FIGURES.REMOVE_ALL,teamId:a,workspaceId:s,projectId:c,datasetId:u},{action:v.ACL_ACTIONS.FIGURES.REMOVE,teamId:a,workspaceId:s,projectId:c,datasetId:u,check:function(){return!p||p.userId!==l||d===v.JOB_FIGURES_VISIBILITY_MODE.ALL||f.createdBy===l}}]};return Object(Pe.a)(n,o,_)}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function actions_asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function actions_asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function _next(e){actions_asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){actions_asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)})}}function actions_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){actions_defineProperty(e,t,r[t])})}return e}function actions_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function actions_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function updateFiguresVersion(e,t){var r=e.commit,n=e.state;r(m,t.map(function(e){var t=void 0===e.points?getFigure(n,e.id).points:e.points;return{figureId:e.id,pointsIds:t?actions_toConsumableArray(t.keys()):null}}))}var Te=["id","area","classId","instanceId","datasetId","imageId","priority","editable","bitmap","points","pointsCount","description","tags","status","tool"],Se=["id","left","top","depth","label","disabled"];function setLoading(e,t){var r=e.commit;e.state.loading!==t&&r(ae,t)}function setHistoryGroup(e,t){(0,e.commit)(oe,t)}function createHistoryGroup(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.commit,n=y()();return r(ie,{groupId:n,value:t}),setHistoryGroup(e,n)}function saveStateToHistory(e,t){var r,n,o=e.commit,i=e.state,s=e.dispatch,c=actions_objectSpread({},t,{timestamp:new Date,state:(r=i,n={versions:Object(a.cloneDeep)(r.versions),pointsVersions:Object(a.cloneDeep)(r.pointsVersions),all:r.all},n.all=Object(a.mapValues)(n.all,function(e){var t=Object(a.pick)(e,Te);return t.bitmap&&(t.bitmap={data:t.bitmap.data.toDataURL(),contour:(t.bitmap.contour?t.bitmap.contour:Object(b.b)()).toDataURL(),origin:t.bitmap.origin.slice(0)}),t.points=actions_toConsumableArray(t.points.values()).map(function(e){return Object(a.pick)(e,Se)}),t}),n)}),u=i.currentStateVersion+1,l=i.history.length-u;null!=i.currentStateVersion&&l>0&&o(te,{index:u,count:l}),o(ee,c),i.history.length>i.maxHistory&&o(te,{index:1,count:1}),s("app/addRecordingChanges",c,{root:!0})}function resetHistory(e){(0,e.commit)(X),saveStateToHistory(e,{action:c.c.init})}function updateFigures(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.commit,n=e.getters,o=e.dispatch,i=e.rootState;Object.values(t).forEach(function(e){if(e.classId){var t=i.dataset.classes.all[e.classId];if(t.shape===v.SHAPE_TYPES.GRAPH){var r=Object(g.l)(e.points,"label");t.settings.nodes.forEach(function(e){if(e.color){var t=r.get(e.id);t&&(t.color=e.color)}})}}}),r(O,t),o("dataset/images/updateImageStats",{imageId:i.dataset.images.selected,updateImage:!1,payload:{objectsCount:n.orderedFiguresWithoutHoles.length}},{root:!0}),updateFiguresVersion(e,n.orderedFigures)}function setFiguresPointsVisible(e,t){var r=e.commit,n=e.state,o=t.figures.map(function(e){return actions_objectSpread({},e,{points:e.points||getFigure(n,e.id).points})});r(z,actions_objectSpread({},t,{figures:o})),updateFiguresVersion(e,o)}function showFiguresPoints(e,t){setFiguresPointsVisible(e,{figures:t,value:!0})}function showFigurePoints(e,t){showFiguresPoints(e,[{id:t.figureId,points:t.points}])}function hideFiguresPoints(e,t){setFiguresPointsVisible(e,{figures:t,value:!1})}function hideFigurePoints(e,t){hideFiguresPoints(e,[{id:t.figureId,points:t.points}])}function setFiguresPointsSelected(e,t){(0,e.commit)(N,t),updateFiguresVersion(e,t.map(function(e){return actions_objectSpread({},e,{points:e.points.reduce(function(e,t){return e.set(t.id,t),e},new Map)})}))}function setFigurePointsSelected(e,t){return setFiguresPointsSelected(e,[t])}function setFigurePointSelected(e,t){return setFigurePointsSelected(e,{id:t.figureId,points:[{id:t.pointId,selected:t.value}]})}function setFiguresRectsVisible(e,t){var r=t.figuresIds,n=t.value,o=e.commit,i=e.state,a=r.filter(function(e){return getFigure(i,e)});if(a.length){var s=a.map(function(e){return{id:e,points:null}}),c=!!i.showHovered&&n;o(j,{figuresIds:a,value:c}),updateFiguresVersion(e,s)}}function setFigureRectVisible(e,t){return setFiguresRectsVisible(e,{figuresIds:[t.figureId],value:t.value})}function setFiguresVisible(e,t){var r=t.figuresIds,n=t.value,o=e.commit,i=e.getters,a=e.rootGetters["tools/isEditMode"]&&null==i.currentFigure,s=actions_toConsumableArray(r.reduce(function(e,t){e.add(t);var r=i.holesMap[t];return r&&r.length&&r.forEach(function(t){return e.add(t.id)}),e},new Set)),c=s.map(function(e){return{id:e}});a||!n?setFiguresPointsVisible(e,{figures:c,value:n}):n&&i.currentFigure&&r.includes(i.currentFigure.id)&&showFigurePoints(e,{figureId:i.currentFigure.id,points:i.currentFigure.points}),o(S,{figuresIds:s,value:n}),updateFiguresVersion(e,c)}function setFigureVisible(e,t){setFiguresVisible(e,{figuresIds:[t.figureId],value:t.value})}function setPrevVisibleFigures(e){var t=e.getters,r=e.commit,n=[];t.filteredSidebarFigures.forEach(function(e){e.visible&&n.push(e.id)}),r(_e,n)}function toggleFigureVisible(e,t){setFigureVisible(e,{figureId:t,value:!getFigure(e.state,t).visible}),setPrevVisibleFigures(e)}function showSidebarFiguresVisible(e){setFiguresVisible(e,{figuresIds:e.getters.filteredFiguresIds,value:!0})}function hideSidebarFiguresVisibleExceptCurrent(e){var t=e.getters,r=[];t.filteredSidebarFigures.forEach(function(e){t.currentFigure&&t.currentFigure.id===e.id||r.push(e.id)}),setFiguresVisible(e,{figuresIds:r,value:!1})}function toggleSidebarFiguresVisibleExceptCurrent(e){var t=e.getters,r=e.state;r.prevVisibleFiguresSet.size||setPrevVisibleFigures(e);var n=t.filteredSidebarFigures.filter(function(e){return!(t.currentFigure&&e.id===t.currentFigure.id||r.prevVisibleFiguresSet.size&&!r.prevVisibleFiguresSet.has(e.id))}),o=n.every(function(e){return!e.visible});setFiguresVisible(e,{figuresIds:n.map(function(e){return e.id}),value:o})}function toggleSelectedFigureVisibility(e){var t=e.getters;if(t.currentFigure){var r=t.currentFigure;setFiguresVisible(e,{figuresIds:[r.id],value:!r.visible})}}function setSelectedFigure(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.commit,o=e.state,i=e.dispatch,a=e.getters,u=e.rootState,l=e.rootGetters,p=a.currentFigure;if(p){var f=p.id;if(!a.isFigureCreated(f))return p.status===c.b.BEING_CREATED?void i("setLoading",!0):function(e){var t,n=r("3b0cdb29684a8d367787").default,o=n.state.dataset.figures.all[e];if(!o)return!1;if(null==o.classId)t=v.SHAPE_TYPES.POLYGON;else{var i=n.state.dataset.classes.all[o.classId];if(!i)return!1;t=i.shape}var a,c=s.a[t],u={bitmap:o.bitmap,points:o.points.values()};return!(!c.isValid(u)||null!==(a=o.bitmap)&&void 0!==a&&a.data&&1===o.bitmap.data.width&&1===o.bitmap.data.height)}(f)?void i("app/showDialog",{message:"There was a problem submitting this object to the server. Do you want to retry?",confirmButtonText:"Retry",cancelButtonText:"Remove object",confirmAction:function(){i("createFigure",{figureId:f})},cancelAction:function(){i("removeFigure",f)}},{root:!0}):void i("app/showDialog",{message:"This object is invalid and will be removed. Continue?",confirmButtonText:"Remove object",cancelButtonText:"Edit object",confirmAction:function(){i("removeFigure",f)}},{root:!0});hideFigurePoints(e,{figureId:p.id})}n(T,t);var d=l["tools/isEditMode"],_=null;if(null!=t){var y=getFigure(o,t);i("dataset/classes/setClass",y.classId,{root:!0}),y.visible||(setFigureVisible(e,{figureId:t,value:!0}),setPrevVisibleFigures(e)),d&&(hideFiguresPoints(e,a.orderedFigures),showFigurePoints(e,{figureId:t}));var g=l["tools/currentTool"],h=l["tools/orderedToolsMapByShape"],b=l["tools/defaultToolByShape"],m=y.classId;null==m&&(m=getFigure(o,y.instanceId).classId);var O=u.dataset.classes.all[m].shape,P=h.get(O);if(g&&P.includes(g.id))g&&(_=g.id);else{var S=b[O];S&&(_=S)}}if(_&&i("tools/setTool",{toolId:_},{root:!0}),p&&p.id!==t&&i("app/stopRecording",{figureId:p.id},{root:!0}),l["tools/isEditMode"]&&i("app/startRecording",{figureId:t},{root:!0}),t){var j=a.canHaveTags(t)?{id:null,figureId:t,isPlus:!0}:null;i("tags/selectTag",{tag:j,options:{changeTool:!1}},{root:!0}),i("tags/highlightTagPanel",{figureId:null==j?void 0:j.figureId},{root:!0})}}function toggleFigure(e,t){setSelectedFigure(e,e.state.selected===t?null:t)}function setFiguresPriorities(e,t){(0,e.commit)(I,t),updateFiguresVersion(e,t)}function setFiguresClasses(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.commit,n=e.state,r(ne,t),updateFiguresVersion(e,t),saveStateToHistory(e,{action:c.c.changeClass}),o.next=6,p.a.map(t,function(e){return Oe(getFigure(n,e.id))},{concurrency:3});case 6:case"end":return o.stop()}},_callee)})).apply(this,arguments)}.apply(this,arguments)}function setFigureClass(e,t){return setFiguresClasses(e,[{id:t.figureId,classId:t.classId}])}function reorderFigures(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){var r,n,o,i,a,s,u,l,p,f,d,_;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(r=t.imageId,n=t.figures,o=t.action,i=void 0===o?c.c.reorderFigures:o,a=t.force,s=void 0!==a&&a,u=e.rootState,l=e.getters,p=u.dataset.images.all[r].datasetId,f=new Set(n.map(function(e){return e.id})),d=[],_=0,s?d=l.orderedByPriorityFigures.filter(function(e){return null!=e.classId&&e.status>=c.b.BEING_SYNCED}).map(function(e,t){return{id:e.id,priority:t+1}}):l.orderedByPriorityFigures.forEach(function(e,t){if(null!=e.classId){_+=1,!f.has(e.id)&&e.priority!==_&&d.push({id:e.id,priority:_});var r=n[t];r&&r.priority!==_&&d.push({id:r.id,priority:_})}}),d.length){y.next=9;break}return y.abrupt("return");case 9:if(setFiguresPriorities(e,d),i&&saveStateToHistory(e,{action:i}),s||!l.hasLocalFigure){y.next=13;break}return y.abrupt("return");case 13:return y.next=15,updateFiguresOrder(p,r,d);case 15:case"end":return y.stop()}},_callee2)})).apply(this,arguments)}.apply(this,arguments)}function updateArea(e,t){(0,e.commit)(ce,t)}function actions_updateFigure(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.state,!((n=getFigure(r,t)).status<c.b.BEING_CREATED)){a.next=4;break}return a.abrupt("return",null);case 4:if(!(n.status>=c.b.BEING_CREATED)){a.next=7;break}return a.next=7,n.networkOperation;case 7:return n=getFigure(r,t),a.next=10,Oe(n);case 10:return o=a.sent,i=o.area,updateArea(e,{figureId:n.id,area:i}),a.abrupt("return",n);case 14:case"end":return a.stop()}},_callee3)})).apply(this,arguments)}.apply(this,arguments)}function updateFiguresStats(e,t){(0,e.commit)(K,t)}function updateFigureStats(e,t){return updateFiguresStats(e,[t])}function updatePointsInFigures(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee5(e,t){var r,n,o,i,a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=t.figures,n=t.action,o=void 0===n?c.c.movePoints:n,i=e.commit,a=e.dispatch,i(F,r),updateFiguresVersion(e,r.map(function(e){return{id:e.figureId,points:e.points.reduce(function(e,t){return e.set(t.id,t),e},new Map)}})),o&&saveStateToHistory(e,{action:o}),s.next=7,p.a.map(r,function(){var t=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee4(t){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,actions_updateFigure(e,t.figureId);case 2:if(r=n.sent){n.next=5;break}return n.abrupt("return");case 5:a("dataset/images/updateImageStats",{imageId:r.imageId},{root:!0});case 6:case"end":return n.stop()}},_callee4)}));return function(e){return t.apply(this,arguments)}}(),{concurrency:3});case 7:case"end":return s.stop()}},_callee5)})).apply(this,arguments)}.apply(this,arguments)}function updatePointsInFigure(e,t){return updatePointsInFigures(e,{figures:[{figureId:t.id,points:t.points}],action:t.action})}function updatePointInFigure(e,t){return updatePointsInFigure(e,{id:t.figureId,points:[t.point],action:t.action})}function updatePointsPreviewInFigures(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee6(e,t){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(0,e.commit)(x,t),updateFiguresVersion(e,t.map(function(e){return{id:e.figureId,points:e.points.reduce(function(e,t){return e.set(t.id,t),e},new Map)}}));case 3:case"end":return r.stop()}},_callee6)})).apply(this,arguments)}.apply(this,arguments)}function updatePointsPreviewInFigure(e,t){return updatePointsPreviewInFigures(e,[{figureId:t.id,points:t.points}])}function updatePointPreviewInFigure(e,t){return updatePointsPreviewInFigure(e,{id:t.figureId,points:[t.point]})}function setPointsPreviewInFigures(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee7(e,t){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(0,e.commit)(R,t);case 2:case"end":return r.stop()}},_callee7)})).apply(this,arguments)}.apply(this,arguments)}function setPointsPreviewInFigure(e,t){return setPointsPreviewInFigures(e,[{figureId:t.figureId,value:t.value}])}function updateBitmapsInFigures(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee9(e,t){var r,n,o,i,a,s,u,l,f,d,_,y,g,h;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(r=e.commit,n=e.dispatch,o=e.state,i=e.rootState,a=[],s=[],u="",t.forEach(function(e){var t=getFigure(o,e.id),r={data:e.bitmap.data,origin:e.bitmap.origin};r.data||(r.data=t.bitmap.data),r.origin||(r.origin=t.bitmap.origin),u=e.action,a.push({id:e.id,bitmap:r}),s.push(e.id)}),a.length){b.next=7;break}return b.abrupt("return");case 7:return null!==u&&(u=c.c.updateBitmap),l=i.dataset.settings.showContours,f=i.dataset.figures.selected,b.next=12,getFiguresContours(a.map(function(e){return e.bitmap.data}),!l);case 12:if(d=b.sent,l||!f||i.tools.selected!==v.FIGURES_TOOLS.SMART){b.next=22;break}if(!((_=a.findIndex(function(e){return e.id===f}))>=0)){b.next=22;break}return b.next=18,getFiguresContours([a[_].bitmap.data],!1);case 18:y=b.sent,g=_slicedToArray(y,1),h=g[0],d.splice(_,1,h);case 22:return d.forEach(function(e,t){a[t].bitmap.contour=e}),r(J,a),updateFiguresStats(e,s),updateFiguresVersion(e,a.map(function(e){return actions_objectSpread({},e,{points:new Map})})),u&&saveStateToHistory(e,{action:u}),b.next=29,p.a.map(a,function(){var t=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee8(t){var r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,actions_updateFigure(e,t.id);case 2:if(r=o.sent){o.next=5;break}return o.abrupt("return");case 5:n("dataset/images/updateImageStats",{imageId:r.imageId,updateFigures:!0},{root:!0});case 6:case"end":return o.stop()}},_callee8)}));return function(e){return t.apply(this,arguments)}}(),{concurrency:3});case 29:case"end":return b.stop()}},_callee9)})).apply(this,arguments)}.apply(this,arguments)}function updateBitmapInFigure(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee10(e,t){var r,n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=t.figureId,n=t.bitmap,o=t.action,i.abrupt("return",updateBitmapsInFigures(e,[{id:r,bitmap:n,action:o}]));case 2:case"end":return i.stop()}},_callee10)})).apply(this,arguments)}.apply(this,arguments)}function actions_createFigure(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee12(e,t){var r,n,o,i,a,s,u,l,f,d;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(r=t.figureId,n=t.setSelected,o=void 0===n||n,i=e.state,a=e.commit,s=e.getters,u=e.rootState,l=e.dispatch,f=i.all[r]){_.next=5;break}return _.abrupt("return",null);case 5:if(f.createdBy=u.user.id,!(f.status>=c.b.BEING_CREATED)){_.next=8;break}return _.abrupt("return",f.networkOperation||f);case 8:return d=new p.a(function(){var t=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee11(t,n){var p,d,_,y,g,h,b;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,d=null,m.prev=2,m.next=5,createFigure(f);case 5:d=m.sent,m.next=19;break;case 8:if(m.prev=8,m.t0=m.catch(2),l("setLoading",!1),a(P,{figureId:r,data:{status:c.b.LOCAL,networkOperation:null}}),400!==m.t0.response.status){m.next=17;break}if(f.tool!==u.tools.all.smartTool.id){m.next=15;break}return m.abrupt("return");case 15:return l("app/showDialog",{message:"This object is invalid and will be removed. Continue?",confirmButtonText:"Remove object",cancelButtonText:"Edit object",confirmAction:function(){l("removeFigure",r)}},{root:!0}),m.abrupt("return");case 17:throw o&&i.all[r]&&l("setSelectedFigure",r),m.t0;case 19:if(i.all[r]){m.next=24;break}return m.next=22,removeFigure(f.datasetId,f.imageId,d.id);case 22:return t(null),m.abrupt("return");case 24:if(a(P,{figureId:r,data:actions_objectSpread({},d,{status:c.b.SYNCED,networkOperation:null})}),f=i.all[d.id],a(fe,{oldId:r,newId:f.id}),!f.bitmap){m.next=37;break}return(_=u.dataset.settings.showContours)||u.tools.selected!==v.FIGURES_TOOLS.SMART||(_=!0),m.next=32,getFiguresContours([f.bitmap.data],!_);case 32:y=m.sent,g=_slicedToArray(y,1),h=g[0],b=actions_objectSpread({},f.bitmap,{contour:h}),a(J,[{id:f.id,bitmap:b}]);case 37:return m.next=39,reorderFigures(e,{imageId:f.imageId,figures:s.orderedByPriorityFigures,action:null,force:!0});case 39:s.hasLocalFigure||setLoading(e,!1),o&&(null===(p=s.currentFigure)||void 0===p?void 0:p.id)===d.id&&setSelectedFigure(e,d.id),t(f),m.next=47;break;case 44:m.prev=44,m.t1=m.catch(0),n(m.t1);case 47:case"end":return m.stop()}},_callee11,null,[[0,44],[2,8]])}));return function(e,r){return t.apply(this,arguments)}}()),a(P,{figureId:r,data:{status:c.b.BEING_CREATED,networkOperation:d}}),_.abrupt("return",d);case 11:case"end":return _.stop()}},_callee12)})).apply(this,arguments)}.apply(this,arguments)}function createTmpFigure(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee13(e,t){var r,n,o,i,a,s,u,l,p,f,d,_,g,h,v,m,O,P,T,S,j,w,I;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(r=t.imageId,n=t.classId,o=void 0===n?null:n,i=t.priority,a=void 0===i?null:i,s=t.instanceId,u=void 0===s?null:s,l=t.bitmap,p=void 0===l?null:l,f=t.points,d=void 0===f?null:f,_=t.setSelected,g=void 0===_||_,E.prev=1,v=e.commit,m=e.dispatch,O=e.getters,P=e.rootState,T=P.dataset.images.all[r].datasetId,S=a,j=u,null!=o){E.next=12;break}if(O.currentFigure){E.next=9;break}return E.abrupt("return",null);case 9:j=O.currentFigure.id,E.next=13;break;case 12:null==S&&(w=O.orderedByPriorityFigures[0],S=w?w.priority-1:1);case 13:if(I=y()(),v(A,{id:I,datasetId:T,imageId:r,classId:o,priority:S,instanceId:j,bitmap:p?actions_objectSpread({},p,{contour:null!==(h=p.contour)&&void 0!==h?h:Object(b.b)()}):null,points:d,tool:P.tools.selected,status:c.b.LOCAL}),g&&setSelectedFigure(e,I),!(S<=O.orderedFigures[O.orderedFigures.length-1].priority)){E.next=19;break}return E.next=19,reorderFigures(e,{imageId:r,figures:O.orderedByPriorityFigures});case 19:return m("dataset/images/updateImageStats",{imageId:r,updateFigures:!0},{root:!0}),m("tools/applyToolVisuals",{figuresIds:[I]},{root:!0}),saveStateToHistory(e,{action:c.c.createFigures}),E.abrupt("return",I);case 25:throw E.prev=25,E.t0=E.catch(1),E.t0;case 28:case"end":return E.stop()}},_callee13,null,[[1,25]])})).apply(this,arguments)}.apply(this,arguments)}function actions_removeFigures(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee14(e,t){var r,n,o,i,s,u,l,p,f,d,_,y;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(r=t.imageId,n=t.figuresIds,o=e.commit,i=e.dispatch,s=e.rootState,u=e.state,l=e.getters,p=s.dataset.images.all[r].datasetId,f=new Set,d=new Set,_=actions_objectSpread({datasetId:p},Object(a.pick)(s.dataset,["workspaceId","projectId"]),Object(a.pick)(s.user,["acl","roles"]),{teamId:s.dataset.groupId,userId:s.user.id,figuresById:u.all,job:s.app.job}),y=[],n.forEach(function(e){if(checkFigureRemovePermissions(e,_)){var t=l.holesMap[e],r=[];if(t){if(t.forEach(function(e){checkFigureRemovePermissions(e.id,_)&&r.push(e.id)}),t.length!==r.length)return;r.forEach(function(e){return d.add(e)})}var n=l.instancesMap[e];n&&n.forEach(function(t){t.id!==e&&f.add(t.id)}),y.push(e),d.add(e)}}),y=y.filter(function(e){var t;return(null===(t=getFigure(u,e))||void 0===t?void 0:t.status)>c.b.BEING_CREATED}),f.size&&o(M,actions_toConsumableArray(f)),o(B,actions_toConsumableArray(d)),saveStateToHistory(e,{action:c.c.removeFigures}),null!=u.selected&&d.has(u.selected)&&(setSelectedFigure(e),s.tools.selected&&(i("tools/setDefaultToolClass",null,{root:!0}),i("tools/resetToolState",s.tools.selected,{root:!0}))),!y.length){g.next=21;break}if(!(y.length>1)){g.next=19;break}return g.next=17,removeFigures(p,r,y);case 17:g.next=21;break;case 19:return g.next=21,removeFigure(p,r,y[0]);case 21:i("dataset/images/updateImageStats",{imageId:r,updateFigures:!0},{root:!0});case 22:case"end":return g.stop()}},_callee14)})).apply(this,arguments)}.apply(this,arguments)}function actions_removeFigure(e,t){return actions_removeFigures(e,{imageId:getFigure(e.state,t).imageId,figuresIds:[t]})}function setFiguresLock(e,t){var r=t.figuresIds,n=t.value,o=e.commit,i=e.state,a=r.filter(function(e){return getFigure(i,e).editable});o(w,{figuresIds:a,value:n}),updateFiguresVersion(e,a.map(function(e){return{id:e}}))}function setFigureLock(e,t){setFiguresLock(e,{figuresIds:[t.figureId],value:t.value})}function toggleFigureLock(e,t){setFigureLock(e,{figureId:t,value:!getFigure(e.state,t).locked})}function _updateBitmapWithSmartAnnotation2(){return(_updateBitmapWithSmartAnnotation2=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee15(e,t){var r,n,o,i,a,s;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(r=e.rootGetters,n=e.dispatch,o=r["dataset/images/currentImage"],i=r["dataset/classes/currentClass"],null!=(a=t.figureId)){u.next=9;break}return createHistoryGroup(e,{title:c.c.smart.value}),u.next=8,createTmpFigure(e,{imageId:o.id,classId:i.id,bitmap:{data:Object(b.b)(),origin:[t.crop[0].left,t.crop[0].top]}});case 8:a=u.sent;case 9:return u.next=11,getSmartAnnotation(o.datasetId,o.id,t);case 11:return s=u.sent,u.next=14,n("settings/updateSmartToolRestrictions",{setTool:!0},{root:!0});case 14:return u.next=16,updateBitmapInFigure(e,{figureId:a,bitmap:s,action:c.c.smart.value});case 16:if(null!=t.figureId){u.next=20;break}return setHistoryGroup(e,null),u.next=20,actions_createFigure(e,{figureId:a});case 20:case"end":return u.stop()}},_callee15)}))).apply(this,arguments)}var je=Object(a.throttle)(function(e,t){return _updateBitmapWithSmartAnnotation2.apply(this,arguments)},1e3);function updateBitmapPreview(e,t){var r=t.figureId,n=t.preview,o=void 0===n?null:n,i=e.commit,a=getFigure(e.state,r);if(a.bitmap){var s=o;s&&(s.data?a.bitmapPreview&&a.bitmapPreview.data&&(Object(b.a)(s.data,a.bitmapPreview.data),s.data=a.bitmapPreview.data):s.data=a.bitmapPreview?a.bitmapPreview.data:a.bitmap.data,s.origin||(s.origin=a.bitmapPreview?a.bitmapPreview.origin:a.bitmap.origin),s.contour=a.bitmap.contour),i(W,{id:r,preview:s}),updateFiguresVersion(e,[actions_objectSpread({},a,{points:new Map})])}}function addPointsToFigures(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee17(e,t){var r,n,o,i,a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(r=e.commit,n=e.state,o=e.dispatch,i=e.getters,a=[],t.forEach(function(e){var t=getFigure(n,e.id);t.editable&&!t.locked&&i.canAddPoint(e.id)&&a.push({id:e.id,points:e.points})}),a.length){s.next=5;break}return s.abrupt("return");case 5:return r(L,a),updateFiguresStats(e,a.map(function(e){return e.id})),updateFiguresVersion(e,a.map(function(e){return actions_objectSpread({},e,{points:e.points.reduce(function(e,t){return e.set(t.id,t),e},new Map)})})),o("tools/applyToolVisuals",{figuresIds:t.map(function(e){return e.id})},{root:!0}),saveStateToHistory(e,{action:c.c.addPoints}),s.next=12,p.a.map(a,function(){var t=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee16(t){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,actions_updateFigure(e,t.id);case 2:if(r=n.sent){n.next=5;break}return n.abrupt("return");case 5:o("dataset/images/updateImageStats",{imageId:r.imageId,updateFigures:!0},{root:!0});case 6:case"end":return n.stop()}},_callee16)}));return function(e){return t.apply(this,arguments)}}(),{concurrency:3});case 12:case"end":return s.stop()}},_callee17)})).apply(this,arguments)}.apply(this,arguments)}function addPointsToFigure(e,t){return addPointsToFigures(e,[{id:t.figureId,points:t.points}])}function addPointToFigure(e,t){return addPointsToFigure(e,{figureId:t.figureId,points:[t.point]})}function setHoveredFigure(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.commit,o=e.state;(null==r||(null===(t=getFigure(o,r))||void 0===t?void 0:t.visible))&&o.hovered!==r&&(null!=o.hovered&&setFigureRectVisible(e,{figureId:o.hovered,value:!1}),n(E,r),null!=r&&setFigureRectVisible(e,{figureId:r,value:!0}))}function setHoveredPoint(e){var t=e.commit,r=e.state,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n){var o=getFigure(r,n.figureId);if(!o.editable||o.locked)return}t(C,n)}function scheduleRemoveFromRecentHovered(e,t){var r=e.commit,n=e.state;if(n.recentHovered[t]){var o=setTimeout(function(){n.recentHovered[t]&&r(ue,Object(a.omit)(n.recentHovered,t))},1e3);r(pe,{figureId:t,timeoutId:o})}}function unscheduleRemoveFromRecentHovered(e,t){var r=e.commit,n=e.state.recentHovered[t];n&&n.timer&&r(le,t)}function removePointsFromFigures(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee18(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.commit,n=e.state,o=[],i=!n.hoveredPoint,t.forEach(function(e){var t=getFigure(n,e.id);t.editable&&!t.locked&&(!i&&e.pointsIds.includes(n.hoveredPoint.id)&&(i=!0),o.push({id:e.id,pointsIds:e.pointsIds}))}),o.length){a.next=6;break}return a.abrupt("return");case 6:return i&&setHoveredPoint(e,null),r(G,o),updateFiguresStats(e,o.map(function(e){return e.id})),updateFiguresVersion(e,o.map(function(e){return actions_objectSpread({},e,{points:e.pointsIds.reduce(function(e,t){return e.set(t,t),e},new Map)})})),saveStateToHistory(e,{action:c.c.removePoints}),a.next=13,p.a.map(o,function(t){return actions_updateFigure(e,t.id)},{concurrency:3});case 13:case"end":return a.stop()}},_callee18)})).apply(this,arguments)}.apply(this,arguments)}function removePointsFromFigure(e,t){return removePointsFromFigures(e,[t])}function removePointFromFigure(e,t){return removePointsFromFigure(e,{id:t.figureId,pointsIds:[t.pointId]})}function actions_addTag(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee19(e,t){var r,n,o,i,a,s,c;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=e.commit,n=e.state,o=t.imageId,i=t.figureId,a=t.tagId,s=t.value,u.next=4,addTag(getFigure(n,i).datasetId,o,i,a,s);case 4:c=u.sent,s=c.value,r(U,{figureId:i,tagId:a,value:s}),updateFiguresVersion(e,[{id:i}]);case 8:case"end":return u.stop()}},_callee19)})).apply(this,arguments)}.apply(this,arguments)}function actions_updateTag(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee20(e,t){var r,n,o,i,a,s;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=e.commit,n=e.state,o=t.imageId,i=t.figureId,a=t.tagId,s=t.value,c.next=4,updateTag(getFigure(n,i).datasetId,o,i,a,s);case 4:r(H,{figureId:i,tagId:a,value:s}),updateFiguresVersion(e,[{id:i}]);case 6:case"end":return c.stop()}},_callee20)})).apply(this,arguments)}.apply(this,arguments)}function actions_removeTag(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee21(e,t){var r,n,o,i,a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=e.commit,n=e.state,o=t.imageId,i=t.figureId,a=t.tagId,s.next=4,removeTag(getFigure(n,i).datasetId,o,i,a);case 4:r(V,t),updateFiguresVersion(e,[{id:i}]);case 6:case"end":return s.stop()}},_callee21)})).apply(this,arguments)}.apply(this,arguments)}function removeTagFromAll(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee22(e,t){var r,n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:r=e.commit,n=e.getters,o=t.tagId,n.orderedFigures.forEach(function(e){e.tags.forEach(function(t){t.id===o&&r(V,{figureId:e.id,tagId:o})})});case 4:case"end":return i.stop()}},_callee22)})).apply(this,arguments)}.apply(this,arguments)}function actions_updateDescription(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee23(e,t){var r,n,o,i,a,s;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=e.commit,n=e.dispatch,o=t.datasetId,i=t.imageId,a=t.figureId,s=t.description,r(Y,t),c.next=5,updateDescription(o,i,a,s);case 5:updateFiguresVersion(e,[{id:a}]),n("dataset/images/updateImageStats",{imageId:i},{root:!0});case 7:case"end":return c.stop()}},_callee23)})).apply(this,arguments)}.apply(this,arguments)}function setFilter(e,t){(0,e.commit)(q,t)}function setShowHoveredFigure(e,t){var r=e.commit,n=!!t;e.state.showHovered!==n&&r(k,n)}var we=null;function actions_getFigures(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee25(e,t){var r,n,o,i,a,s,c,u,l;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=e.commit,n=e.rootState,r(Z),f.prev=2,i=d.a.CancelToken.source(),we&&we.abort(),a=n.dataset.images.all[t].datasetId,o=Object.assign(getFigures(a,t,{cancelToken:i.token}),{abort:function(){i.cancel()}}),we=o,f.next=10,o;case 10:if(s=f.sent,o===we){f.next=13;break}throw new h.a;case 13:return c=s?Object.keys(s):[],u=[],f.next=17,p.a.map(c,function(){var e=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee24(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((t=s[e]).bitmap){n.next=3;break}return n.abrupt("return");case 3:return r="data:image/png;base64,".concat(t.bitmap.data),u.push({figure:t,bitmap:r}),n.next=7,Object(b.h)(r);case 7:if(t.bitmap.data=n.sent,o===we){n.next=10;break}throw new h.a;case 10:case"end":return n.stop()}},_callee24)}));return function(t){return e.apply(this,arguments)}}(),{concurrency:20});case 17:if(!u.length){f.next=24;break}return f.next=20,getFiguresContours(u.map(function(e){return e.bitmap}),!n.dataset.settings.showContours);case 20:if(l=f.sent,o===we){f.next=23;break}throw new h.a;case 23:l.forEach(function(e,t){u[t].figure.bitmap.contour=e});case 24:setSelectedFigure(e,null),updateFigures(e,s),setFiguresVisible(e,{figuresIds:c,value:!0}),setFiguresLock(e,{figuresIds:c,value:!1}),setPrevVisibleFigures(e),r($),we=null,f.next=39;break;case 33:if(f.prev=33,f.t0=f.catch(2),!(d.a.isCancel(f.t0)||f.t0 instanceof h.a)){f.next=37;break}return f.abrupt("return");case 37:r(Q,f.t0),o&&o!==we&&(we=null);case 39:case"end":return f.stop()}},_callee25,null,[[2,33]])})).apply(this,arguments)}.apply(this,arguments)}var Ie=new Set(["area","editable","id","pointsCount"]);function historyEqualComparator(e,t,r){if(Ie.has(r))return!0}function setStateFromHistory(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee27(e,t){var r,n,o,i,s,u,l,f,d,_,y,g,h,v,m,O,P,T,S;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(r=e.commit,n=e.dispatch,o=e.state,i=o.history.findIndex(function(e){return e.id===t}),null!=(s=o.history[i])){j.next=5;break}return j.abrupt("return");case 5:if(u=s.state,l=o.history[o.currentStateVersion].state,f=Object(a.cloneDeep)(s),d=[],_=[],y={imageId:null,datasetId:null},g=Object.keys(u.all),h=Object.keys(l.all),!g.length){j.next=19;break}return v=u.all[g[0]],m=v.datasetId,O=v.imageId,y.datasetId=m,y.imageId=O,j.next=19,p.a.map(g,function(){var e=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee26(e){var t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(t=l.all[e])){o.next=8;break}if(!(t.status<=c.b.BEING_CREATED)){o.next=4;break}return o.abrupt("return");case 4:r=u.all[e],Object(a.isEqualWith)(t,r,historyEqualComparator)||d.push(e),o.next=12;break;case 8:if(!(u.all[e].status<=c.b.BEING_CREATED)){o.next=11;break}return o.abrupt("return");case 11:d.push(e);case 12:if(!(n=f.state.all[e]).bitmap){o.next=20;break}return o.next=16,Object(b.h)(n.bitmap.data);case 16:return n.bitmap.data=o.sent,o.next=19,Object(b.h)(n.bitmap.contour);case 19:n.bitmap.contour=o.sent;case 20:case"end":return o.stop()}},_callee26)}));return function(t){return e.apply(this,arguments)}}(),{concurrency:10});case 19:if(h.forEach(function(e){var t=u.all[e],r=l.all[e],n=null!=t||r.status<=c.b.BEING_CREATED;if(!r.classId&&r.instanceId&&r.id===o.selected){var i,a=!0;n&&(null===(i=r.points)||void 0===i?void 0:i.length)>1&&(a=!1),a&&(P=r.instanceId)}n||_.push(e)}),r(re,{index:i,historyState:f}),n("tools/applyToolVisuals",null,{root:!0}),P&&(setSelectedFigure(e,P),_.includes(P)||n("dataset/classes/setClass",null,{root:!0})),T=[],d.length&&T.push(p.a.map(d,function(e){return Oe(u.all[e])},{concurrency:3})),_.length&&(S=l.all[h[0]],y.datasetId=S.datasetId,y.imageId=S.imageId,T.push(removeFigures(y.datasetId,y.imageId,_))),!T.length){j.next=30;break}return j.next=29,p.a.all(T);case 29:n("dataset/images/updateImageStats",{imageId:y.imageId,updateFigures:!0},{root:!0});case 30:case"end":return j.stop()}},_callee27)})).apply(this,arguments)}.apply(this,arguments)}function undoLastChange(e){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee28(e){var t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.state,r=e.getters,!((n=0|t.currentStateVersion)<=0)){o.next=4;break}return o.abrupt("return");case 4:if(!((n=r.historyList.findIndex(function(e){return e.id===t.history[n].id}))<=0)){o.next=7;break}return o.abrupt("return");case 7:return o.next=9,setStateFromHistory(e,r.historyList[n-1].id);case 9:case"end":return o.stop()}},_callee28)})).apply(this,arguments)}.apply(this,arguments)}function redoLastChange(e){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee29(e){var t,r,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.state,r=e.getters,!((n=0|t.currentStateVersion)>=t.history.length-1)){o.next=4;break}return o.abrupt("return");case 4:if(!((n=r.historyList.findIndex(function(e){return e.id===t.history[n].id}))>=t.history.length-1)){o.next=7;break}return o.abrupt("return");case 7:return o.next=9,setStateFromHistory(e,r.historyList[n+1].id);case 9:case"end":return o.stop()}},_callee29)})).apply(this,arguments)}.apply(this,arguments)}function setFirstPointInFigure(e,t){var r=e.commit;0!==getFigure(e.state,t.figureId).points.indexOf(t.pointId)&&(r(D,t),updateFiguresVersion(e,[{id:t.figureId}]))}function addFigureToInstance(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee30(e,t){var r,n,o,i,a,s,c;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=e.commit,n=e.state,o=e.rootGetters,i=e.getters,a=t.figureId,s=t.instanceId,c=o["dataset/images/currentImage"],u.next=5,updateFigureInstance(getFigure(n,a).datasetId,c.id,a,s);case 5:return r(se,t),u.next=8,reorderFigures(e,{imageId:c.id,figures:i.orderedByPriorityFigures});case 8:updateFiguresVersion(e,[{id:a}]);case 9:case"end":return u.stop()}},_callee30)})).apply(this,arguments)}.apply(this,arguments)}function actions_addDurationToFigure(e,t){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee31(e,t){var r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=t.figureId,n=t.amount,o=e.state,i=getFigure(o,r)){a.next=5;break}return a.abrupt("return");case 5:if(!(i.status<=c.b.BEING_CREATED)){a.next=10;break}if(i.networkOperation){a.next=8;break}return a.abrupt("return");case 8:return a.next=10,i.networkOperation;case 10:if(i=getFigure(o,r)){a.next=13;break}return a.abrupt("return");case 13:return a.next=15,addDurationToFigure(i,n);case 15:case"end":return a.stop()}},_callee31)})).apply(this,arguments)}.apply(this,arguments)}function clearFilters(e){(0,e.commit)(de)}function copyVisibleFiguresToClipboard(e){var t=e.commit,r=e.state,n=e.getters,o=[];if(r.selected){o=[r.selected];var i=n.holesMap[o[0]];i&&i.forEach(function(e){e.visible&&o.push(e.id)})}else o=Object.values(r.all).filter(function(e){return e.visible}).map(function(e){return e.id});t(ye,o)}function addFiguresFromClipboard(e){return function(){return actions_asyncToGenerator(regeneratorRuntime.mark(function _callee32(e){var t,r,n,o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.state,r=e.rootState,n=t.clipboardFigures,o=r.dataset.id,i=r.dataset.images.selected,a.next=6,cloneFiguresToImage(o,i,n);case 6:return a.next=8,actions_getFigures(e,i);case 8:case"end":return a.stop()}},_callee32)})).apply(this,arguments)}.apply(this,arguments)}r("14471fdfe1a633789f19"),r("406d0451405e28c4822f");var Ee,Ce=r("57b485d6257d13d8a174"),ke=r.n(Ce),Ae=r("54b089b6f5db3df8074d");function mutations_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){mutations_defineProperty(e,t,r[t])})}return e}function mutations_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mutations_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function addIdToPoint(e){null==e.id&&(e.id=y()())}function isValidVersion(e){return null!=e}function updateVersion(e,t,r){ke.a.set(e,t,isValidVersion(r)?r:(isValidVersion(e[t]),(new Date).getTime()))}function mutations_updateFigure(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(g.b)(e,{area:0,visible:!0,rectVisible:!1,locked:!1,bitmap:null,tags:[],description:"",pointsCount:0,pointsPreview:null,tool:null,status:c.b.SYNCED,networkOperation:null}),e.bitmap&&(e.bitmapPreview=null),Object(b.i)(ke.a.set,e,r,{area:parseInt(e.area,10)}),e.points=(t=e.points)?(Array.isArray(t)?t:mutations_toConsumableArray(t.values())).reduce(function(e,t){return addIdToPoint(t),e.set(t.id,t),Object(g.b)(t,{label:"",visible:!1,locked:!1,selected:!1,disabled:!1}),e},new g.a):new g.a,e.pointsCount=e.points.size}var Fe=(mutations_defineProperty(Ee={},m,function(e,t){t.forEach(function(t){var r=t.figureId,n=t.pointsIds;null!=n&&n.forEach(function(t){return updateVersion(e.pointsVersions,t)}),updateVersion(e.versions,r)})}),mutations_defineProperty(Ee,O,function(e,t){Object.values(t).forEach(function(e){return mutations_updateFigure(e)}),e.versions=Object.create(null),e.pointsVersions=Object.create(null),e.all=t}),mutations_defineProperty(Ee,P,function(e,t){var r=t.figureId,n=t.data,o=getFigure(e,r);Object(b.i)(ke.a.set,o,n),n.id&&(ke.a.set(e.all,n.id,o),e.selected===r&&(e.selected=n.id),e.oldToNewIdsMap.set(r,n.id),ke.a.delete(e.all,r))}),mutations_defineProperty(Ee,J,function(e,t){Object.values(t).forEach(function(t){getFigure(e,t.id).bitmap=t.bitmap})}),mutations_defineProperty(Ee,W,function(e,t){var r=t.id,n=t.preview;getFigure(e,r).bitmapPreview=n}),mutations_defineProperty(Ee,T,function(e,t){e.selected=t}),mutations_defineProperty(Ee,A,function(e,t){t.points&&t.points.forEach(function(e){e.visible=!0}),mutations_updateFigure(t,{visible:!0,locked:!1,editable:!0}),ke.a.set(e.all,t.id,t)}),mutations_defineProperty(Ee,F,function(e,t){t.forEach(function(t){var r=t.figureId,n=t.points,o=getFigure(e,r).points;n.forEach(function(e){var t=o.get(e.id);t.left=e.left,t.top=e.top,t.depth=e.depth})})}),mutations_defineProperty(Ee,x,function(e,t){t.forEach(function(t){var r=t.figureId,n=t.points,o=getFigure(e,r).pointsPreview;n.forEach(function(e){var t=o.get(e.id);t.left=e.left,t.top=e.top,t.depth=e.depth})})}),mutations_defineProperty(Ee,R,function(e,t){t.forEach(function(t){var r=t.figureId,n=t.value;getFigure(e,r).pointsPreview=n})}),mutations_defineProperty(Ee,B,function(e,t){t.forEach(function(t){mutations_toConsumableArray(getFigure(e,t).points.keys()).forEach(function(t){ke.a.delete(e.pointsVersions,t)}),ke.a.delete(e.versions,t),ke.a.delete(e.all,t)})}),mutations_defineProperty(Ee,M,function(e,t){t.forEach(function(t){return ke.a.set(getFigure(e,t),"instanceId",null)})}),mutations_defineProperty(Ee,S,function(e,t){var r=t.figuresIds,n=t.value;r.forEach(function(t){return ke.a.set(getFigure(e,t),"visible",n)})}),mutations_defineProperty(Ee,j,function(e,t){var r=t.figuresIds,n=t.value;r.forEach(function(t){return ke.a.set(getFigure(e,t),"rectVisible",n)})}),mutations_defineProperty(Ee,w,function(e,t){var r=t.figuresIds,n=t.value;r.forEach(function(t){var r=getFigure(e,t);ke.a.set(r,"locked",n),r.points.forEach(function(e){e.locked=n})})}),mutations_defineProperty(Ee,ne,function(e,t){t.forEach(function(t){getFigure(e,t.id).classId=t.classId})}),mutations_defineProperty(Ee,I,function(e,t){t.forEach(function(t){getFigure(e,t.id).priority=t.priority})}),mutations_defineProperty(Ee,E,function(e,t){if(e.hovered=t,t){var r=e.recentHovered[t];r?r.timer&&(clearTimeout(r.timer),r.timer=null):ke.a.set(e.recentHovered,t,{timer:null,isActive:!1})}}),mutations_defineProperty(Ee,pe,function(e,t){var r=t.figureId,n=t.timeoutId;e.recentHovered[r].timer=n}),mutations_defineProperty(Ee,le,function(e,t){var r=e.recentHovered[t];r&&r.timer&&(clearTimeout(r.timer),r.timer=null)}),mutations_defineProperty(Ee,ue,function(e,t){e.recentHovered=t}),mutations_defineProperty(Ee,C,function(e,t){e.hoveredPoint=t?{id:t.pointId,figureId:t.figureId}:null}),mutations_defineProperty(Ee,k,function(e,t){e.showHovered=t}),mutations_defineProperty(Ee,L,function(e,t){t.forEach(function(t){var r=getFigure(e,t.id);t.points.forEach(function(e){addIdToPoint(e),r.points.setAt(e.id,e,e.index)})})}),mutations_defineProperty(Ee,G,function(e,t){t.forEach(function(t){var r=getFigure(e,t.id);t.pointsIds.forEach(function(e){r.points.delete(e)})})}),mutations_defineProperty(Ee,D,function(e,t){var r=t.figureId,n=t.pointId,o=getFigure(e,r),i=o.points.indexOf(n),a=o.points.slice(i),s=o.points.slice(0,i);o.points.clear(),a.forEach(function(e){o.points.set(e.id,e)}),s.forEach(function(e){o.points.set(e.id,e)})}),mutations_defineProperty(Ee,z,function(e,t){var r=t.figures,n=t.value;r.forEach(function(t){var r=getFigure(e,t.id);t.points.forEach(function(e){ke.a.set(r.points.get(e.id),"visible",n)})})}),mutations_defineProperty(Ee,N,function(e,t){t.forEach(function(t){var r=getFigure(e,t.id);t.points.forEach(function(e){ke.a.set(r.points.get(e.id),"selected",e.selected)})})}),mutations_defineProperty(Ee,U,function(e,t){var r=t.figureId,n=t.tagId,o=t.value,i=getFigure(e,r);i.tags.push({id:n,value:o}),i.updatedAt=new Date}),mutations_defineProperty(Ee,H,function(e,t){var r=t.figureId,n=t.tagId,o=t.value,i=getFigure(e,r);i.tags.find(function(e){return e.id===n}).value=o,i.updatedAt=new Date}),mutations_defineProperty(Ee,V,function(e,t){var r=t.figureId,n=t.tagId,o=getFigure(e,r);ke.a.set(o,"tags",o.tags.filter(function(e){return e.id!==n})),o.updatedAt=new Date}),mutations_defineProperty(Ee,Y,function(e,t){var r=t.figureId,n=t.description;getFigure(e,r).description=n}),mutations_defineProperty(Ee,ce,function(e,t){var r=t.figureId,n=t.area;getFigure(e,r).area=n}),mutations_defineProperty(Ee,q,function(e,t){var r=t.name,n=t.filter;e.filters[r]=n}),mutations_defineProperty(Ee,"SET_FILTER_BY_INSTANCE_ID",function(e,t){e.filterByInstanceId=t}),mutations_defineProperty(Ee,Z,function(e){e.loading=!0}),mutations_defineProperty(Ee,$,function(e){e.loading=!1}),mutations_defineProperty(Ee,Q,function(e,t){e.loading=!1,Ae.a.error(t)}),mutations_defineProperty(Ee,ae,function(e,t){e.loading=t}),mutations_defineProperty(Ee,K,function(e,t){t.forEach(function(t){var r=getFigure(e,t);Object(b.i)(ke.a.set,r,{pointsCount:r.points.size})})}),mutations_defineProperty(Ee,oe,function(e,t){e.historyGroups.selected=t}),mutations_defineProperty(Ee,ie,function(e,t){var r=t.groupId,n=t.value,o=e.historyGroups.all[r];o?null==n?ke.a.delete(e.historyGroups.all,r):Object(b.i)(ke.a.set,o,n):ke.a.set(e.historyGroups.all,r,Object(g.b)(n,{id:r,title:"",actions:new Set,parentId:null}))}),mutations_defineProperty(Ee,X,function(e){e.history=[],e.historyGroups.all=Object.create(null),e.historyGroups.selected=null,e.currentStateVersion=null}),mutations_defineProperty(Ee,ee,function(e,t){t.id=y()(),t.groupId=null,null!=e.historyGroups.selected&&(t.groupId=e.historyGroups.selected,e.historyGroups.all[t.groupId].actions.add(t.id)),e.currentStateVersion=e.history.length,e.history.push(t)}),mutations_defineProperty(Ee,fe,function(e,t){var r=t.oldId,n=t.newId;e.history.forEach(function(e){var t=e.state.all[r];t&&(t.id=n,t.status=c.b.SYNCED,delete e.state.all[r],e.state.all[n]=t)})}),mutations_defineProperty(Ee,te,function(e,t){for(var r=t.index,n=t.count,o=void 0===n?1:n,i=new Map,a=new Set,s=r,c=r+(o-1);s<c;++s){var u=e.history[s];if(null!=u.groupId){a.add(u.groupId);var l=i.get(u.groupId);l?l.push(u.id):i.set(u.groupId,[u.id])}}a.forEach(function(t){var r=e.historyGroups.all[t];r&&(i.get(t).forEach(function(e){r.actions.delete(e)}),r.actions.size||ke.a.delete(e.historyGroups.all,t))}),e.history.splice(r,o),e.history.length?e.currentStateVersion===r?e.currentStateVersion=e.history.length-1:e.currentStateVersion>r&&(e.currentStateVersion-=o):e.currentStateVersion=null}),mutations_defineProperty(Ee,re,function(e,t){var r=t.index,n=t.historyState;e.currentStateVersion=r;var o=n.state,i=[],s={versions:null,pointsVersions:null,all:Object.create(null)};Object.values(o.all).forEach(function(t){var r=getFigure(e,t.id);if(!r){var n=Object(a.cloneDeep)(t);return n.points.forEach(function(e){i.push(e.id)}),mutations_updateFigure(n),void(s.all[n.id]=n)}s.all[t.id]=mutations_objectSpread({},r,t,{points:t.points.reduce(function(e,t){var n=r.points.get(t.id),o=null;return n?(i.push(t.id),o=mutations_objectSpread({},n,t)):o=mutations_objectSpread({},t),e.set(o.id,o),e},new g.a)})}),s.versions=Object(a.cloneDeep)(o.versions),s.pointsVersions=Object(a.pick)(o.pointsVersions,i),Object(b.i)(ke.a.set,e,s)}),mutations_defineProperty(Ee,se,function(e,t){var r=t.figureId,n=t.instanceId;getFigure(e,r).instanceId=n}),mutations_defineProperty(Ee,de,function(e){e.filters={sidebar:defaultFilter(),scene:defaultFilter()}}),mutations_defineProperty(Ee,_e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.prevVisibleFiguresSet=new Set(t)}),mutations_defineProperty(Ee,ye,function(e,t){e.clipboardFigures=t}),Ee);r.d(t,"a",function(){return c.c});var xe={loading:!1,all:Object.create(null),versions:Object.create(null),pointsVersions:Object.create(null),selected:null,hovered:null,recentHovered:Object.create(null),showHovered:!1,selectedPoint:null,hoveredPoint:null,filters:{sidebar:defaultFilter(),scene:defaultFilter()},filterByInstanceId:null,currentStateVersion:null,history:[],historyGroups:{all:Object.create(null),selected:null},maxHistory:20,oldToNewIdsMap:new i({defaultTimeout:12e4}),prevVisibleFiguresSet:new Set,clipboardFigures:[]};t.b={namespaced:!0,state:xe,getters:u,actions:n,mutations:Fe}},be237aa6f43b4adba994:function(e,t,r){"use strict";r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("364b250cfb7cb23af2d1"),r("cc96beeab1153b3447df"),r("a61732f157539e8a726f");var n=r("c90887849e6e38ab5d76"),o=(r("12d29480d5510b1eaf64"),n.default.boolean().truthy("","y","yes","1","+").falsy("n","no","0","-").insensitive(!1),r("c6a85a9dd00d4a1c8d45"));function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EnvRegexReplaceArraySchema_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("47e89aed260415009385"),r("8a790e943c743416bf90"),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}}({},o.a,{convert:function(e){return o.a.convert(e).map(function(e){return new RegExp(e,"i")})},convertSchema:n.default.array().items(n.default.object().type(RegExp))}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){EnvRegexReplaceArraySchema_defineProperty(e,t,r[t])})}}({},o.a,{convert:function(e){return o.a.convert(e).map(function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e.split("->").map(function(e){return e.trim()}),2),r=t[0],n=t[1];if(!r)throw new Error("From part is missing. Example, from -> to");if(!n)throw new Error("Destination part is missing. Example, from -> to");return{from:new RegExp(r),to:n}})},convertSchema:n.default.array().items(n.default.object({from:n.default.object().type(RegExp).required(),to:n.default.string().required()}))}),r("6a1b9face7ab8611cd9d"),n.default.string().trim(),r.d(t,"g",function(){return i}),r.d(t,"h",function(){return a}),r.d(t,"l",function(){return s}),r.d(t,"a",function(){return c}),r.d(t,"d",function(){return u}),r.d(t,"m",function(){return p}),r.d(t,"f",function(){return d}),r.d(t,"i",function(){return g}),r.d(t,"b",function(){return h}),r.d(t,"j",function(){return b}),r.d(t,"k",function(){return v}),r.d(t,"c",function(){return m}),r.d(t,"e",function(){return O});var i=n.default.number().integer().positive(),a=n.default.array().items(i).unique(),s=n.default.string().trim().max(255),c=s.regex(/^(?!.*[\/\\|])/g),u=n.default.string().trim().max(255).allow(""),l=n.default.string().trim().base64(),p=(n.default.array().items(l),n.default.string().trim().alphanum().length(64)),f=(n.default.string().trim().alphanum().length(32),n.default.string().default(null),n.default.string().uuid().trim(),n.default.string().base64().length(44).trim()),d=n.default.array().items(f).unique(),_=n.default.string().hex().length(64).trim(),y=(n.default.array().items(_).unique(),n.default.number().integer().positive()),g=n.default.array().items(s),h=(n.default.string().trim().uri(),n.default.boolean()),b={page:n.default.number().integer().positive().required(),limit:n.default.number().integer().positive().max(100).required()},v={prop:n.default.string().trim().optional(),order:n.default.string().trim().allow("asc","desc").default("desc")},m=n.default.string().trim().uppercase().regex(/^#[A-Fa-f0-9]{6}/).error(function(){return{message:"Color should be in format: #ABCDEF"}}),O=(n.default.string().trim().optional().default("0"),y.allow(1/0),n.default.string().trim().allow("").optional().default(""),n.default.number().integer().allow(1/0).positive(),n.default.string().trim().optional().description("Image formats allowed for user input"),n.default.array().items(n.default.string().trim()).unique().min(1),n.default.string().trim().regex(/^[a-z0-9_.-]+$/),n.default.string().trim().allow("").optional().default("/"),n.default.string().trim().max(255).allow("",null).empty("").default(null))},beda79e5fd35203a6ab1:function(e,t,r){},bf952b7524de911c1302:function(e,t,r){"use strict";var n=r("2a3e9a88fbe17ba15b38");r.n(n).a},bf979bf82d8232618c94:function(e,t){},bfefd711ee260f44b2d7:function(e,t){},c14cdada4671e9a2d9ae:function(e,t,r){},c2f25cf9b3da63764a18:function(e,t,r){"use strict";var n=r("e4242588840cf67952b7");r.n(n).a},c38ec185cc6efe19dd35:function(e,t,r){"use strict";r("364b250cfb7cb23af2d1"),r("d366eac6ddb92c017a0d"),r("d67962f1d0253308d14a"),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n,o=r("c90887849e6e38ab5d76"),i=r("9e0829ebb5f4d9754370"),a=r("fa4339c8926dcb397641"),s=o.default.array().items(o.default.string().trim().min(1).max(32)).required(),c={enabled:o.default.boolean().required(),concurrency:o.default.number().integer().min(0).required(),allowedDockerImagesRegex:s},u=o.default.object(c).required(),l={hostname:a.titleSchema.description("Agent name"),capabilities:{allowedDockerImagesRegex:s,types:o.default.object((n=i.AGENT_CAPABILITIES_TASK_TYPES,function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(n)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).reduce(function(e,t){return e[t]=u,e},{})).required()},options:o.default.object().optional().default({})},p=(o.default.object().keys(l),{agentStorage:o.default.boolean().optional().default(!1),agentImage:o.default.string().optional().default(!1),cpu:o.default.boolean().optional(),pullAlways:o.default.boolean().optional().default(!0),agentHostDir:o.default.string().trim().allow(""),userDockerCreds:o.default.boolean().optional().default(!1)});o.default.object().keys(p)},c3e265be9b2349523308:function(e,t,r){},c4ff9fc90ae775b45209:function(e,t,r){"use strict";var n;function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",function(){return o}),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("47e89aed260415009385");var o={ARCHITECTURE:"architecture",IMPORT:"import",DTL:"dtl",CUSTOM:"custom",AGENT:"agent",PYTHON:"python"},i=(_defineProperty(n={},"TRAIN","trainImage"),_defineProperty(n,"INFERENCE","inferenceImage"),_defineProperty(n,"DEPLOY","deployImage"),_defineProperty(n,"DEPLOY_SMART","deploySmartImage"),_defineProperty(n,"MAIN","customDockerImage"),n);Object.keys(i).reduce(function(e,t){return e[i[t]]=t,e},{})},c51b6c3b609d7368f325:function(e,t,r){"use strict";var n=r("dce4ec0085899cf7ac37");r.n(n).a},c5d455e08dd29de4d248:function(e,t,r){},c5f782e74c9a8e9671da:function(e,t,r){},c6a85a9dd00d4a1c8d45:function(e,t,r){"use strict";r("a61732f157539e8a726f");var n=r("c90887849e6e38ab5d76");t.a={schema:n.default.string().trim().default(!1).optional(),convert:function(e){return e?Array.isArray(e)?e:e.split(",").map(function(e){return e.trim()}).filter(function(e){return e}):[]},convertSchema:n.default.array().items(n.default.string().trim()).unique()}},c786aad2c16ab18193dc:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="32" height="32" viewBox="0 0 24 24" fill=""><path d="M2,2V8H4.28L5.57,16H4V22H10V20.06L15,20.05V22H21V16H19.17L20,9H22V3H16V6.53L14.8,8H9.59L8,5.82V2M4,4H6V6H4M18,5H20V7H18M6.31,8H7.11L9,10.59V14H15V10.91L16.57,9H18L17.16,16H15V18.06H10V16H7.6M11,10H13V12H11M6,18H8V20H6M17,18H19V20H17"/></svg>'},c873513577cfc1aefa93:function(e,t,r){"use strict";var n=r("d9f565bfa6c8fe3e30fb");r.n(n).a},c90887849e6e38ab5d76:function(e,t,r){"use strict";r.r(t),r("a3649be5e6a962a5926d"),r("5a8f02b640959023d3da"),r("0ed696ba8380d46a2924");var n=r("6d690380616187077a8e"),o=r.n(n),i=r("a204ede153771f9515bd"),a=o.a;i.keys().forEach(function(e){if(!e.startsWith("./index")){var t=i(e);a=a.extend(t.default)}});var s=a;t.default=s},c967f247dc9ec8a0b23e:function(e,t,r){"use strict";r("f2149823c7cbb1d26d0b"),r("47e89aed260415009385"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da");var n=r("c90887849e6e38ab5d76"),o=r("fa4339c8926dcb397641");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={srcProjectId:o.idSchema,srcModelId:o.idSchema,srcPluginId:o.idSchema},a=(o.idSchema.required(),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}({groupId:o.idSchema.required(),title:o.titleSchema.optional(),sharedLinkToken:n.default.string().optional(),isPublic:n.default.boolean().optional(),workspaceId:o.idSchema.when("srcProjectId",{is:n.default.exist(),then:n.default.required()}).when("srcModelId",{is:n.default.exist(),then:n.default.required()})},i));n.default.object().keys(a).xor(Object.keys(i))},ca0af2b20d037942e4a2:function(e,t,r){"use strict";var n=r("8750ccd2d5fc1c881c3e");r.n(n).a},cc041b965709e10cca23:function(e,t,r){"use strict";var n=r("f1c9fac3ba6e3bf4ce14");r.n(n).a},ccf88eb5f2eafac67155:function(e,t){},cd2a9666e0b01bae8054:function(e,t,r){},d11cd0540728c616a05b:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={POLYGON:"polygon",BITMAP:"bitmap",RECTANGLE:"rectangle",POLYLINE:"polyline",POINT:"point",SMART:"smart",GRAPH:"graph"}},d16d13c389eb634790dd:function(e,t,r){"use strict";var n=r("0cc69c6b9acc50d9c924");r.n(n).a},d1b5f583f2b08718bd18:function(e,t,r){"use strict";var n=r("f25c0996f5b024a7d85e");r.n(n).a},d2354919a7674e6bc2d8:function(e,t,r){"use strict";var n=r("407da70d07943b917669");r.n(n).a},d41ce8549e786ec2bfeb:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={NONE:"none",DONE:"done",ACCEPTED:"accepted",REJECTED:"rejected"}},d4a06d37d7c7bc743361:function(e,t){},d4a576817cf0cd9b2859:function(e,t,r){"use strict";var n=r("0f53f229a5261a62b6f9");r.n(n).a},d5779329e7fbc6e3ad66:function(e,t,r){"use strict";var n=r("d8a119111bb19f6b38bf");r.n(n).a},d69baaed370f6383475a:function(e,t,r){},d6b3440922d88bee60b1:function(e,t,r){},d6d04c08585cb4fc1bea:function(e,t,r){"use strict";r.r(t),t.default=function(e){return{base:e.number(),name:"number",language:{round:"needs to be a rounded number"},pre:function(e,t,r){return r.convert&&this._flags.round?Math.round(e):e},rules:[{name:"round",setup:function(e){this._flags.round=!0},validate:function(e,t,r,n){return t%1!=0?this.createError("number.round",{v:t},r,n):t}}]}}},d6df805bab4a7b8e1c6d:function(e,t,r){},d7dfd0c82f454eaa113a:function(e,t){},d8a119111bb19f6b38bf:function(e,t,r){},d918ca37c8c2bd12c083:function(e,t){},d93711b385e8c0def2ac:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={LOGIN:"login",LOGOUT:"logout",CREATE_PROJECT:"create_project",UPDATE_PROJECT:"update_project",DISABLE_PROJECT:"disable_project",RESTORE_PROJECT:"restore_project",CREATE_DATASET:"create_dataset",UPDATE_DATASET:"update_dataset",DISABLE_DATASET:"disable_dataset",RESTORE_DATASET:"restore_dataset",CREATE_IMAGE:"create_image",UPDATE_IMAGE:"update_image",DISABLE_IMAGE:"disable_image",RESTORE_IMAGE:"restore_image",CREATE_FIGURE:"create_figure",UPDATE_FIGURE:"update_figure",DISABLE_FIGURE:"disable_figure",RESTORE_FIGURE:"restore_figure",CREATE_CLASS:"create_class",UPDATE_CLASS:"update_class",DISABLE_CLASS:"disable_class",RESTORE_CLASS:"restore_class",CREATE_BACKUP:"create_backup",EXPORT_PROJECT:"export_project",MODEL_TRAIN:"model_train",MODEL_INFERENCE:"model_inference",CREATE_PLUGIN:"create_plugin",DISABLE_PLUGIN:"disable_plugin",RESTORE_PLUGIN:"restore_plugin",CREATE_NODE:"create_node",DISABLE_NODE:"disable_node",RESTORE_NODE:"restore_node",CREATE_WORKSPACE:"create_workspace",DISABLE_WORKSPACE:"disable_workspace",RESTORE_WORKSPACE:"restore_workspace",CREATE_MODEL:"create_model",DISABLE_MODEL:"disable_model",RESTORE_MODEL:"restore_model",ADD_MEMBER:"add_member",REMOVE_MEMBER:"remove_member",LOGIN_TO_TEAM:"login_to_team"}},d9f565bfa6c8fe3e30fb:function(e,t,r){},da7219a3ff5b89c1b64d:function(e,t,r){},daad4957c024e5a1a5dd:function(e,t,r){"use strict";var n=r("12d1eb41fd9914bc409b");r.n(n).a},dce4ec0085899cf7ac37:function(e,t,r){},dd1b049a7e602d219ec1:function(e,t){},de82b172f89d0f35218f:function(e,t,r){"use strict";r("87997867a0dfb75f73e8"),r("6d8089820eedc734c4ea")},e00abc00b0c3fa97a491:function(e,t){},e1f97d616faf251002cc:function(e,t,r){"use strict";var n=r("5f023772cd21df1264dc");r.n(n).a},e319aac44c8e60d131a6:function(e,t){},e396bc4a2d4c1b5bdd25:function(e,t,r){"use strict";var n=r("55bdc61fd6ef5ed25ebf");r.n(n).a},e4242588840cf67952b7:function(e,t,r){},e58c09ccf6b95500742a:function(e,t,r){"use strict";var n=r("1b7cae621277a789c0a1");r.n(n).a},e6c023817b8f0da37fdf:function(e,t,r){},e85b5d25c75e9e24cbe5:function(e,t,r){},e883d3c198465c5aef11:function(e,t,r){"use strict";var n=r("beda79e5fd35203a6ab1");r.n(n).a},e8be6da21bb3f18f6fa4:function(e,t,r){"use strict";var n=r("3930ca7df3335090f2ee");r.n(n).a},e8d977ad0016fe5fac79:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r("d19ec67aeacb81ee261f"),r("fd5d35b0fcd5fc242d7e"),r("b42383ffd481a2f01f84");var n=r("9e0829ebb5f4d9754370"),o=r("7ee98bac1562359c81b0");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){function BitmapFigure(){return function(e,t){if(!(e instanceof BitmapFigure))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,_getPrototypeOf(BitmapFigure).apply(this,arguments))}var t,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(BitmapFigure,o.a),t=BitmapFigure,i=[{key:"isValid",value:function(e){var t=e.bitmap;return null==t?void 0:t.data}},{key:"type",get:function(){return n.SHAPE_TYPES.BITMAP}},{key:"maxPoints",get:function(){return 0}},{key:"graphicsType",get:function(){return"raster"}}],(r=[{key:"_normalizePointInsideParent",value:function(e){var t=this.parent.rect;e.left<0&&(e.left=0),e.top<0&&(e.top=0),e.left>t.right&&(e.left=t.right),e.top>t.bottom&&(e.top=t.bottom)}},{key:"canAddPoint",get:function(){return!0}}])&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),BitmapFigure}()},eca42fce204b0aac29a1:function(e,t,r){},ed902824c7edfed739c3:function(e,t,r){"use strict";var n=r("b7ab9ce0f8ae55fd5abe");r.n(n).a},edb9565a96bfaf23de8a:function(e,t,r){"use strict";var n=r("02048b6ae053096e738e");r.n(n).a},edd4df3a18a3d3cf7c09:function(e,t){},ef7305fbd1b6ce8c144d:function(e,t,r){"use strict";var n=r("3dfc22d11ebc32def4d9");r.n(n).a},f0fc4174c28bc05a69fc:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={IMAGES:"images",FIGURES:"figures",IMAGE_PROPS:"image-properties",FIGURE_PROPS:"figure-properties",HISTORY:"history"}},f1c9fac3ba6e3bf4ce14:function(e,t,r){},f2149823c7cbb1d26d0b:function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r("47e89aed260415009385"),r("0ed696ba8380d46a2924"),r("5a8f02b640959023d3da"),r("4e997ff4fa36eb673213");var n=r("c90887849e6e38ab5d76"),o=r("fa4339c8926dcb397641"),i=r("9e0829ebb5f4d9754370"),a=[n.default.number().min(0).max(16777215).integer(),n.default.string().trim().uppercase().regex(/^#[A-Fa-f0-9]{6}/).error(function(){return{message:"Color should be in format: #ABCDEF"}})],s=n.default.number().min(0).max(1).precision(5),c=[n.default.number().positive().precision(5),n.default.string().trim().valid("auto")],u={SCENE:{showGrid:n.default.boolean().required().meta({label:"Show grid"}).description("adds grid over the image that helps to make more precise labeling"),gridRowsCount:n.default.number().positive().integer().required().meta({label:"Grid rows count"}).description("grid rows count"),gridColsCount:n.default.number().positive().integer().required().meta({label:"Grid columns count"}).description("grid columns count"),zoomMultiplier:n.default.number().positive().precision(5).required().meta({label:"Zoom multiplier",stepSize:.1}).description("defines how much scrolling the mouse wheel affects zoom ratio"),defaultPolygonToolOption:n.default.string().valid(Object.values(i.POLYGON_TOOL_OPTIONS)).required().meta({label:"Default polygon tool option",type:i.JOI_FORM_CUSTOM_TYPES.SELECT}).description('When you choose "Polygon" tool, what mode should be selected by default?'),bitmapToolErazeUnderlayingPixels:n.default.boolean().required().meta({label:'Use "Erase underlaying pixels" option'}).description('When you choose "Bitmap" tool, set "Erase underlaying pixels" option by default'),showGraphLabelsMode:n.default.string().trim().valid(Object.values(i.PROJECT_SHOW_GRAPH_LABELS_MODE)).required().meta({label:"Show keypoints labels mode",type:i.JOI_FORM_CUSTOM_TYPES.SELECT}).description("Should we display keypoints labels"),objectTagsDashedBorders:n.default.array().items(n.default.string()).default([]).required().meta({label:"Object dashed borders",type:i.JOI_FORM_CUSTOM_TYPES.STRINGS_ARRAY}).description("Objects with these tags will be displayed with dashed border")},AXES:{enableAxesOnRect:n.default.boolean().required().meta({label:"Enable axes on rectangle"}).description("adds auxiliary lines to cursor while creating rectangle object"),enableAxesOnSmartRect:n.default.boolean().required().meta({label:"Enable axes on smart object"}).description("adds auxiliary lines to cursor while creating smart object"),enableAxesOnGraph:n.default.boolean().required().meta({label:"Enable axes on graph"}).description("adds auxiliary lines to cursor while creating graph object"),axesOpacity:s.required().meta({label:"Axes opacity"}).description("opacity of auxiliary lines for cursor"),axesBorderSize:n.default.number().positive().precision(5).required().meta({label:"Axes border size"}).description("width of auxiliary lines for cursor"),axesMainColor:n.default.alternatives(a).required().meta({label:"Axes main color",type:i.JOI_FORM_CUSTOM_TYPES.COLOR_PICKER}).description("color of first auxiliary line for cursor"),axesAdditionalColor:n.default.alternatives(a).meta({label:"Axes additional color",type:i.JOI_FORM_CUSTOM_TYPES.COLOR_PICKER}).description("color of second auxiliary line for cursor")},TAGS:{showTagsMode:n.default.string().trim().valid(Object.values(i.PROJECT_SHOW_TAGS_MODE)).required().meta({label:"Show tags mode",type:i.JOI_FORM_CUSTOM_TYPES.SELECT}).description("Should we display tags if no instrument is selected: never, on mouse hover or always?"),tagsLocationMode:n.default.string().trim().valid(Object.values(i.PROJECT_TAGS_SCENE_LOCATION_MODE)).required().meta({label:"Tags location over objects",type:i.JOI_FORM_CUSTOM_TYPES.SELECT}).description("Display tags near the uppermost point of object or top left point"),showClassesMode:n.default.boolean().required().meta({label:"Display class"}).description("Show object class as a tag"),showUsersMode:n.default.boolean().required().meta({label:"Display author"}).description("Show who created an object as a tag"),showObjectSizeMode:n.default.boolean().required().meta({label:"Display object size"}).description("Show object size")},VISUALS:{borderSize:n.default.alternatives(c).required().meta({label:"Border size",type:i.JOI_FORM_CUSTOM_TYPES.STRING}).description("defines border width for visible figures in pixels"),showContours:n.default.boolean().required().meta({label:"Show bitmap contours"}).description("determines bitmap contours visibility"),polygonEditFill:n.default.boolean().required().meta({label:"Polygon edit fill"}).description("determines whether to fill the polygon during its creation or editing"),pointsSize:c[0].required().meta({label:"Points size"}).description("defines point size in pixels"),pointShapeRadius:n.default.number().positive().precision(5).required().meta({label:"Point shape radius"}).description("defines point radius in pixels"),rectangleOpacity:s.required().meta({label:"Rectangle opacity"}).description("defines opacity of rectangle objects"),rectangleBorderSize:n.default.number().positive().precision(5).required().meta({label:"Rectangle border size"}).description("defines border width of rectangle objects"),defaultOpacity:s.required().meta({label:"Default opacity"}).description("fill opacity of all visible figures")}},l=Object.keys(u).reduce(function(e,t){var r=t.toLowerCase(),n=u[t];return Object.keys(n).forEach(function(t){e[t]=n[t].meta({category:r})}),e},{}),p={title:o.basenameSchema,description:o.descriptionSchema.allow(""),readme:n.default.string().allow(""),settings:n.default.object().keys(l)};n.default.object().keys(p)},f25c0996f5b024a7d85e:function(e,t,r){},f305516c86dbabecedba:function(e,t){},f33d249e4f7eb13e1bfc:function(e,t,r){},f66b8943a1b0cd49a72e:function(e,t,r){"use strict";var n=r("1e480175afd0d00fa810");r.n(n).a},f6f559428d7ae5cba635:function(e,t,r){"use strict";r.d(t,"a",function(){return decorate});var n=["value","initializer","get","set"];function decorate(e){return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return function(e){if(!e||!e.hasOwnProperty)return!1;for(var t=0,r=n.length;t<r;++t)if(Object.prototype.hasOwnProperty.call(e,n[t]))return!0;return!1}(r[r.length-1])?e.apply(void 0,r):function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.apply(void 0,n.concat(r))}}}},f7d3ac9b92cd687a322a:function(e,t){},f8727d5d83b7fa2d80af:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="32" height="32" viewBox="0 0 24 24" fill=""><path d="M17,12C17,14.76 14.76,17 12,17C9.24,17 7,14.76 7,12C7,9.58 8.72,7.56 11,7.1V3H13V7.1C15.28,7.56 17,9.58 17,12M12,9C10.34,9 9,10.34 9,12C9,13.66 10.34,15 12,15C13.66,15 15,13.66 15,12C15,10.34 13.66,9 12,9M11,21V19H13V21H11Z"/></svg>'},f8774464778879403b4d:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAACqCAMAAAAKqCSwAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTNERERCMkVDNkY1MTFFN0JFOUNCQkFEOTk5NUQ0MEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTNERERCMkZDNkY1MTFFN0JFOUNCQkFEOTk5NUQ0MEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBM0REREIyQ0M2RjUxMUU3QkU5Q0JCQUQ5OTk1RDQwQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBM0REREIyREM2RjUxMUU3QkU5Q0JCQUQ5OTk1RDQwQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoLfsyQAAABgUExURaDG6vX294u03GiBmLGztW57i93d3RQYHJ6en8LExoCAgO/v78/k+FNsgY+Pj4amwn6bs9fc4eXm6P/249TU1SkzPEVVZdfOzHVJAMzNzYuWo3qGldvt/7DZ/wAAAP///7sFMxQAAAULSURBVHja7NvblqMqEABQMHhrgqY9mhlz0f//ywOoRFvTk7aKLJ2peuhk5SFrN1JFYYS1uwlGVKISlahEJSpRiUpUou6Kym/H+4/jeONvp/IVzl7L30u93QFxeycVJPVtZYhSz9Yxld/Bwd9EPcKpx/dQEQbV67AyxJnqebYy1OvvdQaMqHeU2Dj148zQqWV980H93QTo1F/1kah7oOan0ylulH5haNRIR12X+m+BSE0bFwqL+l/tolxDPVdDBJPPQ6VU01T6JUCjljqMsyw/11ArN3r5xucq2w9Vp07TxPEOqLlGxiFjelo253zL1OBsxvRwvxtqrNj6HkBGQ0gvPUBwtpdfBZZshnctlddZH0ntg8qUnaNNXFX9mwNbS00/+shSD1RmxrRHDvHc+gJVj6mh8nkAqZ10VKwO1XfWP1NFIYvMgt1kGCICUY001itUkA/BTOF6mlsvUGXLs4+lyEoI1c7TalqeWPiN9eVRHQ+rDQiV6SG0uf+lkrJTZXMrzwO2gpoJIbQ0Sfswa71Z9DMANXfTs5rWLjdv4xyvAvDkn6HqUlqhUiMhEg3Vc+BrtnPgBKhOQb5IPStVraC2XMpUmwopOTY1uLN4iZrrKraGqsPkz0IDAKbm7J3UGpRWtkedU9UhrPCpqY8KENt/YRfUlRXA3uLRpllOcbOCZek8216jBlXX9cXV+UtbYD/XhewcrKBGC9Qi7VYwIUq+tgdQi5sps4E1m4JVdwKXqLXrX4TcD3X1qJr9X764gQVRy+5ejwuR2RUsg1BNCp3mHx9g1FkDaD7SvaEAUG0bXZ3yUb9n22vdxcYqWE9d6qtlKyHU3G2phltV7LHJOrN11CRbGFQ9qrzYGrV1uz7pIs363eHGqMsrGLQCGKpSynQmuu2zYW9eKLORQaSWblKkAGrMxkvssM7muFQZlX0UW6ci3F0xovBwUGYC9GE3qwe1SWpsGz7TZJsIuhutcbNF6jsqAAI1cL9WDC7mfr6owk1R/7qfg4lK1PdSd/RAyI4es9nRw0s7eiRsTw/a7ejxxT09FLqnR2339ABzu6PHwjccRCUqUYlKVKISlahEJSpRiUpUov7F1PmJMx/fiUKdHzfw8Z1E3SR1+cSZj++EUp+cOPPxnWDq8okzH99JafXTKNzZELF1auQeYkv+VWrxiT4zDVVf/REVpwe4hFfB8an6JUGmpqGOK2xkXRYlPqlF2IWAUB/PgvqkXkIE6xJ1mlYI1DQMEaxdFiVeqTIcRQmhRu6ye6JextQrGpVHZoSjb/uzH1Lr0M+o2oONAnNvxa9j6SdeWrXmdJtE3Qby9IohHVH7tST7bpaurAAy6edphFNXO2Cp35XY1GG1AknbPovMX3twSb/JEO8D8DKt7XT61FLoRqrLIm7PA+hLNZBRqFJ0Zd/MrRQsrbsS0HVUvBWPSQunukXqYr5SAqWPC24yX5ijIkmERBUoy+mj5dHA+knZAlLTcTlFaFVHFxyZWoZIlX9hacKlTteosAZTTVIVz5ZYEFVMpCGoohamJTFJFXEPVD6VwuZq4q535IE67aaAFWCJOmmyQdRkIr1ydCpaWnHMQR02en6o0+t/4cjUr9tsAHVaqaDSOfX1+BOVJ6hSu/h3WYRNLSdjmoDblHla4VBlOtmfJhh31TxRxeVqB/V6SURa4txQEy6LCuy5ag7IttsI+jmYqEQlKlGJSlSiEpWoREWJ/wUYAGqH4PWf+hdsAAAAAElFTkSuQmCC"},f9e71c3bf7e07577fce6:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"b",function(){return o}),r.d(t,"a",function(){return i});var n={init:"init",addPoints:"add-points",removePoints:"remove-points",movePoints:"move-points",updateBitmap:"update-bitmap",reorderFigures:"reorder-figures",createFigures:"create-figures",removeFigures:"remove-figures",changeClass:"change-class",moveObject:"move-object",selection:{fill:"fill",crop:"crop",cut:"cut",value:"selection"},smart:{points:"points",brush:"brush",value:"smart-annotation"}},o={LOCAL:1,BEING_CREATED:2,NOT_SYNCED:3,BEING_SYNCED:4,SYNCED:5},i={AREA:"area",CLASS:"class",PRIORITY:"priority"}},fa4339c8926dcb397641:function(e,t,r){"use strict";var n=r("be237aa6f43b4adba994");r.d(t,"basenameSchema",function(){return n.a}),r.d(t,"booleanSchema",function(){return n.b}),r.d(t,"colorHexSchema",function(){return n.c}),r.d(t,"descriptionSchema",function(){return n.d}),r.d(t,"dockerImageSchema",function(){return n.e}),r.d(t,"hashesBase64Schema",function(){return n.f}),r.d(t,"idSchema",function(){return n.g}),r.d(t,"idsSchema",function(){return n.h}),r.d(t,"keywordsSchema",function(){return n.i}),r.d(t,"sortingSchema",function(){return n.k}),r.d(t,"titleSchema",function(){return n.l}),r.d(t,"tokenSchema",function(){return n.m});var o=r("18a9e9122326ddcb1c59");r.d(t,"HotkeySchemaModifier",function(){return o.a}),r("4edfad59cbb38a1c94a9"),r("71e5fd9f8a7b76e9ed07"),r("1611e76106df37ddfe1b"),r("b56448d29c5ebe42c89c"),r("d4a06d37d7c7bc743361"),r("a6d42c7358271b4bb97c"),r("bf979bf82d8232618c94"),r("08743261e7b813d5426a"),r("0675c68eec4c2a021f8f"),r("e00abc00b0c3fa97a491"),r("c967f247dc9ec8a0b23e"),r("5977892647431f47236d"),r("1e6ec309998ca7845b54"),r("e319aac44c8e60d131a6"),r("3efd9477073b176f8641"),r("83aae9157d614d279fc4"),r("73db41e66c080da9c958"),r("d7dfd0c82f454eaa113a"),r("abcc263760d064125765"),r("a46b0dca8900f4ab15ef"),r("d918ca37c8c2bd12c083"),r("92677abab09e8e71947b"),r("69fe2de0e6d074435636"),r("c38ec185cc6efe19dd35"),r("1b63068e7e41bed54c71"),r("ccf88eb5f2eafac67155"),r("1db5c9d2326bee5830da"),r("690e6aa790ddfb543ac1"),r("b90dff19166e79e98e15"),r("1c8643645cb66c24ccf0"),r("f305516c86dbabecedba"),r("382a502bfd47b88098a3"),r("bfefd711ee260f44b2d7"),r("5d206ac9bb6c63e667bb"),r("9f491344cd11ab9730e6"),r("5e80b149eefce35e2c5a"),r("f7d3ac9b92cd687a322a"),r("8a555c6b372ade0ce59e"),r("0cb34c2e8ece14c05a19"),r("7906ff6fd0f767cfe3dd"),r("2f100b1204e1f84b8378"),r("9344762bccae751ce4c2"),r("a8850f1150a4666583fd"),r("5fde126e2b8545be1742"),r("659f57c2583aed40f7ba"),r("4609f68f0b70edf06536"),r("0c465624b3d6a13f1810"),r("6ebccb67b17c947188b7")},fae7f9865838550df17e:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="32" height="32" viewBox="0 0 24 24" fill=""><path d="M12,20L7,22L12,11L17,22L12,20M8,2H16V5H22V7H16V10H8V7H2V5H8V2M10,4V8H14V4H10Z"/></svg>'},faf7059dd6c86b16a85c:function(e,t,r){"use strict";var n,o=r("989a42060903e47c0cff");function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}_defineProperty(n={},o.d.IMPORT,"import"),_defineProperty(n,o.d.CLONE,"clone"),_defineProperty(n,o.d.EXPORT,"dtl"),_defineProperty(n,o.d.INFERENCE,"inference")},fbff1fa6dce1ee0c548a:function(e,t,r){"use strict";var n=r("90cdbfc95aa791a91fea");r.n(n).a},fd6bb56d74106af7d8bb:function(e,t,r){},ffb296d7192495c92513:function(e,t,r){"use strict";var n=r("b3a0fa91d70a9f541f63");r.n(n).a}},[[0,1,2]]]);
//# sourceMappingURL=app.236af8b0682340560e99.js.map